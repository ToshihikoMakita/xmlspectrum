<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>preprocess.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><a class="solar" href="../../../index.html"><span class="enxsl" id="e?{http://www.w3.org/1999/XSL/Transform}stylesheet">xsl:stylesheet</span></a><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:fp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension/private</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:mp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode/private</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                </span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fp m mp xs</span><span class="z">"</span><span class="z">
                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  
  </span><span class="ww" id="w69"><span class="es">&lt;</span><span class="enxsl">xsl:import</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><a href="../preprocess/1-logstruct.xsl.html" class="solar"><span class="href">../preprocess/1-logstruct.xsl</span></a><span class="z">"</span><span id="wx77" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w79"><span class="es">&lt;</span><span class="enxsl">xsl:import</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><a href="../preprocess/1-db4to5.xsl.html" class="solar"><span class="href">../preprocess/1-db4to5.xsl</span></a><span class="z">"</span><span id="wx87" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w89"><span class="es">&lt;</span><span class="enxsl">xsl:import</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><a href="../preprocess/15-transclude.xsl.html" class="solar"><span class="href">../preprocess/15-transclude.xsl</span></a><span class="z">"</span><span id="wx97" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w99"><span class="es">&lt;</span><span class="enxsl">xsl:import</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><a href="../preprocess/2-profile.xsl.html" class="solar"><span class="href">../preprocess/2-profile.xsl</span></a><span class="z">"</span><span id="wx107" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w109"><span class="es">&lt;</span><span class="enxsl">xsl:import</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><a href="../preprocess/3-schemaext.xsl.html" class="solar"><span class="href">../preprocess/3-schemaext.xsl</span></a><span class="z">"</span><span id="wx117" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w119"><span class="es">&lt;</span><span class="enxsl">xsl:import</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><a href="../preprocess/4-normalize.xsl.html" class="solar"><span class="href">../preprocess/4-normalize.xsl</span></a><span class="z">"</span><span id="wx127" class="sc">/&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w129"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:preprocess</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w145"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns result of preprocessing of input document by set of steps defined in 
      </span><span class="ww" id="w149"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">preprocess</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx155" class="ec">&gt;</span></span><span class="txt"> parameter.</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx159" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w161"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w165"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function applies preprocessing steps defined in
        </span><span class="ww" id="w169"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">preprocess</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx175" class="ec">&gt;</span></span><span class="txt"> parameter to input in the fixed
      oreder.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx179" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx183" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w185"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w189"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w193"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w197"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">root</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx203" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w205"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w209"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Input document to be preprocessed.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx215" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx219" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx223" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx227" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx231" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w233"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w237"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Preprocessed document.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx243" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx247" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx251" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w253"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}preprocess">f:preprocess</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">document-node()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w269"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?root">root</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">document-node()</span><span class="z">"</span><span id="wx283" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w285"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?steps">steps</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-tokenize" class="solar"><span class="function" start="1" pair-end="44" select="quick">tokenize</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-normalize-space" class="solar"><span class="function" start="10" pair-end="37" select="quick">normalize-space</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?preprocess" class="solar"><span class="variable" start="26" select="quick">$preprocess</span></a><span class="parenthesis" start="37">)</span><span class="op" start="38">,</span><span class="whitespace" start="39"> </span><span class="op">'</span><span class="literal" start="40">\s</span><span class="op">'</span><span class="parenthesis" start="44">)</span><span class="z">"</span><span id="wx310" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w312"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w316"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="type" start="1">empty</span><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$steps</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w329"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$root</span><span class="z">"</span><span id="wx337" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx341" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w343"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w347"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$steps</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w357"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="130" select="quick">not</span></a><span class="parenthesis">(</span><span class="context" start="5">.</span><span class="whitespace" start="6"> </span><span class="op" start="7">=</span><span class="whitespace" start="8"> </span><span class="parenthesis" start="9" pair-end="129" select="quick">(</span><span class="op">'</span><span class="literal" start="10">db4to5</span><span class="op">'</span><span class="op" start="18">,</span><span class="whitespace" start="19"> </span><span class="op">'</span><span class="literal" start="20">transclude</span><span class="op">'</span><span class="op" start="32">,</span><span class="whitespace" start="33"> </span><span class="op">'</span><span class="literal" start="34">preprofile</span><span class="op">'</span><span class="op" start="46">,</span><span class="whitespace" start="47"> </span><span class="op">'</span><span class="literal" start="48">profile</span><span class="op">'</span><span class="op" start="57">,</span><span class="whitespace" start="58"> </span><span class="op">'</span><span class="literal" start="59">postprofile</span><span class="op">'</span><span class="op" start="72">,</span><span class="whitespace" start="73">
                        </span><span class="op">'</span><span class="literal" start="105">schemaext</span><span class="op">'</span><span class="op" start="116">,</span><span class="whitespace" start="117"> </span><span class="op">'</span><span class="literal" start="118">normalize</span><span class="op">'</span><span class="parenthesis" start="129">)</span><span class="parenthesis" start="130">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w408"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w412"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: Preprocessing step "</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx418" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w420"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx428" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ww" id="w430"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">" is not supported. Ignoring.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx436" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx440" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx444" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx448" class="ec">&gt;</span></span><span class="txt">
        
        </span><span class="z">&lt;!--</span><span class="cm"> We must always perform this step in order to retain base URI </span><span class="z">--&gt;</span><span class="txt">
        </span><span class="ww" id="w454"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?logstruct">logstruct</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/preprocess/1-logstruct.xsl.html#f?{http://docbook.org/xslt/ns/extension}explicit-logical-structure" class="solar"><span class="function" start="1" pair-end="35" select="quick">f:explicit-logical-structure</span></a><span class="parenthesis">(</span><span class="variable" start="30" select="quick">$root</span><span class="parenthesis" start="35">)</span><span class="z">"</span><span id="wx471" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w473"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?db4to5">db4to5</span><span class="z">"</span><span class="z">
                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="31" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="5" pair-end="30" select="quick">index-of</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$steps</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">db4to5</span><span class="op">'</span><span class="parenthesis" start="30">)</span><span class="parenthesis" start="31">)</span><span class="whitespace" start="32">
                              </span><span class="op" start="61">then</span><span class="whitespace" start="65"> </span><a href="../../../xslt/base/preprocess/1-db4to5.xsl.html#f?{http://docbook.org/xslt/ns/extension}convert-to-docbook5" class="solar"><span class="function" start="66" pair-end="98" select="quick">f:convert-to-docbook5</span></a><span class="parenthesis">(</span><span class="variable" start="88" select="quick">$logstruct</span><span class="parenthesis" start="98">)</span><span class="whitespace" start="99">
                              </span><span class="op" start="128">else</span><span class="whitespace" start="132"> </span><span class="variable" start="133" select="quick">$logstruct</span><span class="z">"</span><span id="wx510" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w512"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?transclude">transclude</span><span class="z">"</span><span class="z">
                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="35" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="5" pair-end="34" select="quick">index-of</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$steps</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">transclude</span><span class="op">'</span><span class="parenthesis" start="34">)</span><span class="parenthesis" start="35">)</span><span class="whitespace" start="36">
                              </span><span class="op" start="65">then</span><span class="whitespace" start="69"> </span><a href="../../../xslt/base/preprocess/15-transclude.xsl.html#f?{http://docbook.org/xslt/ns/extension}transclude-and-adjust-idrefs" class="solar"><span class="function" start="70" pair-end="108" select="quick">f:transclude-and-adjust-idrefs</span></a><span class="parenthesis">(</span><span class="variable" start="101" select="quick">$db4to5</span><span class="parenthesis" start="108">)</span><span class="whitespace" start="109">
                              </span><span class="op" start="138">else</span><span class="whitespace" start="142"> </span><span class="variable" start="143" select="quick">$db4to5</span><span class="z">"</span><span id="wx549" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w551"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?preprofile">preprofile</span><span class="z">"</span><span class="z">
                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="35" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="5" pair-end="34" select="quick">index-of</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$steps</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">preprofile</span><span class="op">'</span><span class="parenthesis" start="34">)</span><span class="parenthesis" start="35">)</span><span class="whitespace" start="36">
                              </span><span class="op" start="65">then</span><span class="whitespace" start="69"> </span><a href="../../../xslt/base/common/preprocess.xsl.html#f?{http://docbook.org/xslt/ns/extension}preprofile" class="solar"><span class="function" start="70" pair-end="94" select="quick">f:preprofile</span></a><span class="parenthesis">(</span><span class="variable" start="83" select="quick">$transclude</span><span class="parenthesis" start="94">)</span><span class="whitespace" start="95">
                              </span><span class="op" start="124">else</span><span class="whitespace" start="128"> </span><span class="variable" start="129" select="quick">$transclude</span><span class="z">"</span><span id="wx588" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w590"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?profile">profile</span><span class="z">"</span><span class="z">
                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="32" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="5" pair-end="31" select="quick">index-of</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$steps</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">profile</span><span class="op">'</span><span class="parenthesis" start="31">)</span><span class="parenthesis" start="32">)</span><span class="whitespace" start="33">
                              </span><span class="op" start="41">then</span><span class="whitespace" start="45"> </span><a href="../../../xslt/base/preprocess/2-profile.xsl.html#f?{http://docbook.org/xslt/ns/extension}profile" class="solar"><span class="function" start="46" pair-end="457" select="quick">f:profile</span></a><span class="parenthesis">(</span><span class="variable" start="56" select="quick">$preprofile</span><span class="op" start="67">,</span><span class="whitespace" start="68"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.separator" class="solar"><span class="variable" start="69" select="quick">$profile.separator</span></a><span class="op" start="87">,</span><span class="whitespace" start="88"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.arch" class="solar"><span class="variable" start="89" select="quick">$profile.arch</span></a><span class="op" start="102">,</span><span class="whitespace" start="103">
                              </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.condition" class="solar"><span class="variable" start="147" select="quick">$profile.condition</span></a><span class="op" start="165">,</span><span class="whitespace" start="166"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.conformance" class="solar"><span class="variable" start="167" select="quick">$profile.conformance</span></a><span class="op" start="187">,</span><span class="whitespace" start="188">
                              </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.lang" class="solar"><span class="variable" start="232" select="quick">$profile.lang</span></a><span class="op" start="245">,</span><span class="whitespace" start="246"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.os" class="solar"><span class="variable" start="247" select="quick">$profile.os</span></a><span class="op" start="258">,</span><span class="whitespace" start="259"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.revision" class="solar"><span class="variable" start="260" select="quick">$profile.revision</span></a><span class="op" start="277">,</span><span class="whitespace" start="278">
                              </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.revisionflag" class="solar"><span class="variable" start="322" select="quick">$profile.revisionflag</span></a><span class="op" start="343">,</span><span class="whitespace" start="344"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.role" class="solar"><span class="variable" start="345" select="quick">$profile.role</span></a><span class="op" start="358">,</span><span class="whitespace" start="359">
                              </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.security" class="solar"><span class="variable" start="403" select="quick">$profile.security</span></a><span class="op" start="420">,</span><span class="whitespace" start="421"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.userlevel" class="solar"><span class="variable" start="422" select="quick">$profile.userlevel</span></a><span class="op" start="440">,</span><span class="whitespace" start="441"> </span><a href="../../../xslt/base/html/param.xsl.html#v?profile.vendor" class="solar"><span class="variable" start="442" select="quick">$profile.vendor</span></a><span class="parenthesis" start="457">)</span><span class="whitespace" start="458">
                              </span><span class="op" start="487">else</span><span class="whitespace" start="491"> </span><span class="variable" start="492" select="quick">$preprofile</span><span class="z">"</span><span id="wx663" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w665"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?postprofile">postprofile</span><span class="z">"</span><span class="z">
                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="36" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="5" pair-end="35" select="quick">index-of</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$steps</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">postprofile</span><span class="op">'</span><span class="parenthesis" start="35">)</span><span class="parenthesis" start="36">)</span><span class="whitespace" start="37">
                              </span><span class="op" start="66">then</span><span class="whitespace" start="70"> </span><a href="../../../xslt/base/common/preprocess.xsl.html#f?{http://docbook.org/xslt/ns/extension}postprofile" class="solar"><span class="function" start="71" pair-end="93" select="quick">f:postprofile</span></a><span class="parenthesis">(</span><span class="variable" start="85" select="quick">$profile</span><span class="parenthesis" start="93">)</span><span class="whitespace" start="94">
                              </span><span class="op" start="123">else</span><span class="whitespace" start="127"> </span><span class="variable" start="128" select="quick">$profile</span><span class="z">"</span><span id="wx702" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w704"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?schemaext">schemaext</span><span class="z">"</span><span class="z">
                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="34" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="5" pair-end="33" select="quick">index-of</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$steps</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">schemaext</span><span class="op">'</span><span class="parenthesis" start="33">)</span><span class="parenthesis" start="34">)</span><span class="whitespace" start="35">
                              </span><span class="op" start="64">then</span><span class="whitespace" start="68"> </span><a href="../../../xslt/base/preprocess/3-schemaext.xsl.html#f?{http://docbook.org/xslt/ns/extension}resolve-schema-extensions" class="solar"><span class="function" start="69" pair-end="109" select="quick">f:resolve-schema-extensions</span></a><span class="parenthesis">(</span><span class="variable" start="97" select="quick">$postprofile</span><span class="parenthesis" start="109">)</span><span class="whitespace" start="110">
                              </span><span class="op" start="139">else</span><span class="whitespace" start="143"> </span><span class="variable" start="144" select="quick">$postprofile</span><span class="z">"</span><span id="wx741" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w743"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?normalize">normalize</span><span class="z">"</span><span class="z">
                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="34" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="5" pair-end="33" select="quick">index-of</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$steps</span><span class="op" start="20">,</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">normalize</span><span class="op">'</span><span class="parenthesis" start="33">)</span><span class="parenthesis" start="34">)</span><span class="whitespace" start="35">
                              </span><span class="op" start="64">then</span><span class="whitespace" start="68"> </span><a href="../../../xslt/base/preprocess/4-normalize.xsl.html#f?{http://docbook.org/xslt/ns/extension}normalize" class="solar"><span class="function" start="69" pair-end="91" select="quick">f:normalize</span></a><span class="parenthesis">(</span><span class="variable" start="81" select="quick">$schemaext</span><span class="parenthesis" start="91">)</span><span class="whitespace" start="92">
                              </span><span class="op" start="121">else</span><span class="whitespace" start="125"> </span><span class="variable" start="126" select="quick">$schemaext</span><span class="z">"</span><span id="wx780" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w782"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$normalize</span><span class="z">"</span><span id="wx790" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx794" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx798" class="ec">&gt;</span></span><span class="txt">
    
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx802" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w808"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}preprofile">f:preprofile</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">document-node()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w824"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?root">root</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">document-node()</span><span class="z">"</span><span id="wx838" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w840"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$root</span><span class="z">"</span><span id="wx848" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx852" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w854"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}postprofile">f:postprofile</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">document-node()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w870"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?root">root</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">document-node()</span><span class="z">"</span><span id="wx884" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w886"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$root</span><span class="z">"</span><span id="wx894" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx898" class="ec">&gt;</span></span><span class="txt">
  
  
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx902" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
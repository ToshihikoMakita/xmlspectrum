<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>label-content.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:fn</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f m fn xs</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ********************************************************************
qq$Id: labels.xsl 8562 2009-12-17 23:10:25Z nwalsh $
qq********************************************************************

qqThis file is part of the XSL DocBook Stylesheet distribution.
qqSee ../README or http://nwalsh.com/docbook/xsl/ for copyright
qqand other information.

qq******************************************************************** </span><span class="z">--&gt;</span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w71"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span class="z">
££££££££££qq</span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w87"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for producing intra-label punctuation</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx93" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w95"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w99"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to produce intra-label punctuation. All elements
processed in this mode should generate the punctuation symbol that should
be used to separate their label from other labels. This only occurs in
places where compound labels are necessary.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx105" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx109" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx113" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w115"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w131"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx137" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx141" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w147"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="z">
££££££££££qq</span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w163"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for producing label markup</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx169" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w171"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w175"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to produce label markup. All elements
processed in this mode should generate their label.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx181" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx185" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx189" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w191"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w207"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbose">verbose</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx221" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w223"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx237" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w239"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">*</span><span class="filter" start="22" pair-end="57" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="23" pair-end="34" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="context" start="33">.</span><span class="parenthesis" start="34">)</span><span class="whitespace" start="35"> </span><span class="op" start="36">=</span><span class="whitespace" start="37"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="38" pair-end="56" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="variable" start="48" select="quick">$context</span><span class="parenthesis" start="56">)</span><span class="filter" start="57">]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w264"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$verbose</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w274"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w278"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Request for label of unexpected element: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx284" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w286"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="z">"</span><span id="wx297" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx301" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx305" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx309" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx313" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w315"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:set</span><span class="op" start="7">|</span><span class="qname" start="8" select="quick">db:book</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w333"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w344"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx353" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx357" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx361" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w363"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:part</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w379"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:part</span><span class="z">"</span><span id="wx395" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w397"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w413"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w417"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w430"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx441" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx445" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w447"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx453" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx457" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx461" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w463"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w467"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w478"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx487" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx491" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w493"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="whitespace" start="7"> </span><span class="op" start="8">and</span><span class="whitespace" start="11"> </span><span class="axis" start="12">ancestor::</span><span class="qname" start="22" select="quick">db:book</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w508"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:book</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx530" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx534" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w536"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w546"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx562" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx566" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx570" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx574" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w576"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">partintro</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> no label </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx598" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w600"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:preface</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:chapter</span><span class="op" start="22">|</span><span class="qname" start="23" select="quick">db:appendix</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w620"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="whitespace" start="20">
£££££££££££££££££££££££££££££££££££qq</span><span class="step" start="30">/</span><span class="qname" start="31" select="quick">*</span><span class="filter" start="32" pair-end="68" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="33" pair-end="44" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="context" start="43">.</span><span class="parenthesis" start="44">)</span><span class="whitespace" start="45"> </span><span class="op" start="46">=</span><span class="whitespace" start="47"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="48" pair-end="67" select="quick">node-name</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-current" class="solar"><span class="function" start="58" pair-end="66" select="quick">current</span></a><span class="parenthesis">(</span><span class="parenthesis" start="66">)</span><span class="parenthesis" start="67">)</span><span class="filter" start="68">]</span><span class="z">"</span><span id="wx652" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w654"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w670"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w674"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w687"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx698" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx702" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w704"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx710" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx714" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx718" class="ec">&gt;</span></span><span class="txt">
qq
qq</span><span class="z">&lt;!--</span><span class="cm">
qq&lt;xsl:message&gt;label-markup for &lt;xsl:value-of select="name(.)"/&gt;&lt;/xsl:message&gt;
qq&lt;xsl:message&gt;label: &lt;xsl:copy-of select="$label"/&gt;&lt;/xsl:message&gt;
qq&lt;xsl:message&gt;format: &lt;xsl:value-of select="$format"/&gt;&lt;/xsl:message&gt;
qq</span><span class="z">--&gt;</span><span class="txt">

qq</span><span class="ww" id="w724"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w728"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w739"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx748" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx752" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w754"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w764"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?component.label.includes.part.label" class="solar"><span class="variable" start="1" select="quick">$component.label.includes.part.label</span></a><span class="whitespace" start="37"> </span><span class="op" start="38">!=</span><span class="whitespace" start="40"> </span><span class="numeric" start="41">0</span><span class="whitespace" start="42"> </span><span class="op" start="43">and</span><span class="whitespace" start="46">
££££££££££££££qq</span><span class="axis" start="53">ancestor::</span><span class="qname" start="63" select="quick">db:part</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w783"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?part.label">part.label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w793"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:part</span><span class="z">"</span><span class="z"> 
£££££££££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx808" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx812" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w814"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$part.label</span><span class="whitespace" start="12"> </span><span class="op" start="13">!=</span><span class="whitespace" start="15"> </span><span class="op">'</span><span class="literal" start="16"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w830"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$part.label</span><span class="z">"</span><span id="wx838" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w840"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:part</span><span class="z">"</span><span class="z"> 
£££££££££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx855" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx859" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx863" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w865"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w869"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?label.from.part" class="solar"><span class="variable" start="1" select="quick">$label.from.part</span></a><span class="whitespace" start="17"> </span><span class="op" start="18">!=</span><span class="whitespace" start="20"> </span><span class="numeric" start="21">0</span><span class="whitespace" start="22"> </span><span class="op" start="23">and</span><span class="whitespace" start="26"> </span><span class="axis" start="27">ancestor::</span><span class="qname" start="37" select="quick">db:part</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w888"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:part</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx910" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx914" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w916"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:article</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w927"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:article</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx949" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx953" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w955"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:book</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w966"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:book</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx988" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx992" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w994"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w998"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx1014" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1018" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1022" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1026" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1030" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1034" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1036"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:article</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1052"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1063"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx1072" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1076" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1080" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1082"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:dedication</span><span class="op" start="14">|</span><span class="qname" start="15" select="quick">db:colophon</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1100"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1111"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx1120" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1124" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1128" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1130"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:reference</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1146"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:reference</span><span class="z">"</span><span id="wx1162" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1164"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1180"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1184"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1197"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx1208" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1212" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1214"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1220" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1224" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1228" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w1230"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1234"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1245"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx1254" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1258" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1260"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1270"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:book</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx1292" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1296" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1300" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1304" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1306"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1322"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1333"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx1342" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1346" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1350" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1352"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1368"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:section</span><span class="z">"</span><span id="wx1384" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1386"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1402"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1406"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1419"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx1430" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1434" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1436"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1442" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1446" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1450" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w1452"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="whitespace" start="7"> </span><span class="op" start="8">or</span><span class="whitespace" start="10"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}label-this-section" class="solar"><span class="function" start="11" pair-end="33" select="quick">f:label-this-section</span></a><span class="parenthesis">(</span><span class="context" start="32">.</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> if this is a nested section, label the parent </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w1474"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="step" start="3">/</span><span class="axis" start="4">self::</span><span class="qname" start="10" select="quick">db:section</span><span class="whitespace" start="20"> </span><span class="op" start="21">and</span><span class="whitespace" start="24"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}label-this-section" class="solar"><span class="function" start="25" pair-end="48" select="quick">f:label-this-section</span></a><span class="parenthesis">(</span><span class="context" start="46">..</span><span class="parenthesis" start="48">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1494"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx1508" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1510"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx1524" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1528" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w1530"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?section.label.includes.component.label" class="solar"><span class="variable" start="1" select="quick">$section.label.includes.component.label</span></a><span class="whitespace" start="40"> </span><span class="op" start="41">!=</span><span class="whitespace" start="43"> </span><span class="numeric" start="44">0</span><span class="whitespace" start="45">
££££££££££££££qq</span><span class="op" start="50">and</span><span class="whitespace" start="53"> </span><span class="axis" start="54">parent::</span><span class="qname" start="62" select="quick">*</span><span class="whitespace" start="63"> </span><span class="type-op" start="64">instance of</span><span class="whitespace" start="75"> </span><span class="node-type" start="76" pair-end="84">element</span><span class="parenthesis">(</span><span class="parenthesis" start="84">)</span><span class="whitespace" start="85">
££££££££££££££qq</span><span class="op" start="90">and</span><span class="whitespace" start="93"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}is-component" class="solar"><span class="function" start="94" pair-end="111" select="quick">f:is-component</span></a><span class="parenthesis">(</span><span class="context" start="109">..</span><span class="parenthesis" start="111">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1562"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?parent.label">parent.label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1572"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx1586" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1590" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1592"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="whitespace" start="14"> </span><span class="op" start="15">!=</span><span class="whitespace" start="17"> </span><span class="op">'</span><span class="literal" start="18"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1608"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="z">"</span><span id="wx1616" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1618"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx1632" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1636" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1640" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w1642"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1646"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1657"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx1666" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1670" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1672"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1682"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span id="wx1692" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1696" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1700" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1704" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1708" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1710"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect1</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> yes: it's /db:section in the expression below </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w1730"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:section</span><span class="z">"</span><span id="wx1746" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1748"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1764"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1768"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1781"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx1792" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1796" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1798"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1804" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1808" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1812" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w1814"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="whitespace" start="7"> </span><span class="op" start="8">or</span><span class="whitespace" start="10"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}label-this-section" class="solar"><span class="function" start="11" pair-end="33" select="quick">f:label-this-section</span></a><span class="parenthesis">(</span><span class="context" start="32">.</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> if the parent is a component, maybe label that too </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w1836"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?section.label.includes.component.label" class="solar"><span class="variable" start="1" select="quick">$section.label.includes.component.label</span></a><span class="whitespace" start="40"> </span><span class="op" start="41">!=</span><span class="whitespace" start="43"> </span><span class="numeric" start="44">0</span><span class="whitespace" start="45">
££££££££££££££qq</span><span class="op" start="50">and</span><span class="whitespace" start="53"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}is-component" class="solar"><span class="function" start="54" pair-end="71" select="quick">f:is-component</span></a><span class="parenthesis">(</span><span class="context" start="69">..</span><span class="parenthesis" start="71">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1857"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?parent.label">parent.label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1867"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx1881" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1885" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1887"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="whitespace" start="14"> </span><span class="op" start="15">!=</span><span class="whitespace" start="17"> </span><span class="op">'</span><span class="literal" start="18"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1903"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="z">"</span><span id="wx1911" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1913"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx1927" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1931" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1935" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w1937"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1941"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1952"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx1961" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1965" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w1967"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w1977"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span id="wx1987" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1991" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1995" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1999" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2003" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2005"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect2</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:sect3</span><span class="op" start="18">|</span><span class="qname" start="19" select="quick">db:sect4</span><span class="op" start="27">|</span><span class="qname" start="28" select="quick">db:sect5</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> yes: it's /db:section in the expression below </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w2031"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:section</span><span class="z">"</span><span id="wx2047" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2049"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2065"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2069"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2082"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx2093" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2097" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2099"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2105" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2109" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2113" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w2115"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="whitespace" start="7"> </span><span class="op" start="8">or</span><span class="whitespace" start="10"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}label-this-section" class="solar"><span class="function" start="11" pair-end="33" select="quick">f:label-this-section</span></a><span class="parenthesis">(</span><span class="context" start="32">.</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> label the parent </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w2137"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}label-this-section" class="solar"><span class="function" start="1" pair-end="24" select="quick">f:label-this-section</span></a><span class="parenthesis">(</span><span class="context" start="22">..</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2150"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx2164" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2166"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx2180" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2184" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w2186"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2190"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2201"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx2210" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2214" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2216"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2226"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span id="wx2236" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2240" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2244" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2248" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2252" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2254"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bridgehead</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> Is empty really the right answer? </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2276" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2278"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refsection</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2294"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:refsection</span><span class="z">"</span><span id="wx2310" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2312"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2328"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2332"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2345"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx2356" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2360" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2362"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2368" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2372" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2376" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w2378"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2382"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2393"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx2402" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2406" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2408"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2418"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span id="wx2428" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2432" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2436" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2440" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2442"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refsect1</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> yes: it's /db:refsection in the expression below </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w2462"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:refsection</span><span class="z">"</span><span id="wx2478" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2480"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2496"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2500"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2513"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx2524" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2528" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2530"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2536" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2540" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2544" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w2546"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2550"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2561"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx2570" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2574" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2576"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2586"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span id="wx2596" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2600" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2604" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2608" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2610"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refsect2</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:refsect3</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> yes: it's /db:refsection in the expression below </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w2632"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:refsection</span><span class="z">"</span><span id="wx2648" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2650"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2666"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2670"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2683"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx2694" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2698" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2700"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2706" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2710" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2714" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w2716"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="whitespace" start="7"> </span><span class="op" start="8">or</span><span class="whitespace" start="10"> </span><span class="variable" start="11" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> label the parent </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w2735"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?parent.label">parent.label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2745"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx2759" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2763" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2765"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="whitespace" start="14"> </span><span class="op" start="15">!=</span><span class="whitespace" start="17"> </span><span class="op">'</span><span class="literal" start="18"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2781"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="z">"</span><span id="wx2789" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2791"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx2805" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2809" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w2811"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2815"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2826"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx2835" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2839" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2841"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2851"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span id="wx2861" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2865" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2869" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2873" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2877" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2879"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:simplesect</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> yes: it's /db:section in the expression below </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w2899"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:section</span><span class="z">"</span><span id="wx2915" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2917"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format">format</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2933"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2937"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w2950"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">format</span><span class="z">"</span><span id="wx2961" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2965" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w2967"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2973" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2977" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2981" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w2983"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="whitespace" start="7"> </span><span class="op" start="8">or</span><span class="whitespace" start="10"> </span><span class="variable" start="11" select="quick">$label</span><span class="whitespace" start="17"> </span><span class="op" start="18">or</span><span class="whitespace" start="20"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}label-this-section" class="solar"><span class="function" start="21" pair-end="43" select="quick">f:label-this-section</span></a><span class="parenthesis">(</span><span class="context" start="42">.</span><span class="parenthesis" start="43">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> if this is a nested section, label the parent </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w3009"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="step" start="3">/</span><span class="axis" start="4">self::</span><span class="qname" start="10" select="quick">db:section</span><span class="whitespace" start="20">
££££££££££££££qq</span><span class="op" start="25">|</span><span class="whitespace" start="26"> </span><span class="context" start="27">..</span><span class="step" start="29">/</span><span class="axis" start="30">self::</span><span class="qname" start="36" select="quick">db:sect1</span><span class="whitespace" start="44">
££££££££££££££qq</span><span class="op" start="49">|</span><span class="whitespace" start="50"> </span><span class="context" start="51">..</span><span class="step" start="53">/</span><span class="axis" start="54">self::</span><span class="qname" start="60" select="quick">db:sect2</span><span class="whitespace" start="68">
££££££££££££££qq</span><span class="op" start="73">|</span><span class="whitespace" start="74"> </span><span class="context" start="75">..</span><span class="step" start="77">/</span><span class="axis" start="78">self::</span><span class="qname" start="84" select="quick">db:sect3</span><span class="whitespace" start="92">
££££££££££££££qq</span><span class="op" start="97">|</span><span class="whitespace" start="98"> </span><span class="context" start="99">..</span><span class="step" start="101">/</span><span class="axis" start="102">self::</span><span class="qname" start="108" select="quick">db:sect4</span><span class="whitespace" start="116">
££££££££££££££qq</span><span class="op" start="121">|</span><span class="whitespace" start="122"> </span><span class="context" start="123">..</span><span class="step" start="125">/</span><span class="axis" start="126">self::</span><span class="qname" start="132" select="quick">db:sect5</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3057"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?parent.section.label">parent.section.label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3067"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx3081" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3085" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3087"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.section.label</span><span class="whitespace" start="22"> </span><span class="op" start="23">!=</span><span class="whitespace" start="25"> </span><span class="op">'</span><span class="literal" start="26"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3103"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.section.label</span><span class="z">"</span><span id="wx3111" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3113"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx3127" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3131" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3135" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3137"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?section.label.includes.component.label" class="solar"><span class="variable" start="1" select="quick">$section.label.includes.component.label</span></a><span class="whitespace" start="40"> </span><span class="op" start="41">!=</span><span class="whitespace" start="43"> </span><span class="numeric" start="44">0</span><span class="whitespace" start="45">
££££££££££££££qq</span><span class="op" start="50">and</span><span class="whitespace" start="53"> </span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}is-component" class="solar"><span class="function" start="54" pair-end="71" select="quick">f:is-component</span></a><span class="parenthesis">(</span><span class="context" start="69">..</span><span class="parenthesis" start="71">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3158"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?parent.label">parent.label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3168"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx3182" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3186" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3188"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="whitespace" start="14"> </span><span class="op" start="15">!=</span><span class="whitespace" start="17"> </span><span class="op">'</span><span class="literal" start="18"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3204"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$parent.label</span><span class="z">"</span><span id="wx3212" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3214"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">..</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx3228" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3232" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3236" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3238"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3242"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3253"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx3262" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3266" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3268"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3278"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$format</span><span class="op">}</span><span class="z">"</span><span id="wx3288" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3292" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3296" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3300" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3304" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3306"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandaset</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> what would the label be? </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3328" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3330"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandadiv</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3346"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="1" select="quick">$autolabel.elements</span></a><span class="step" start="20">/</span><span class="qname" start="21" select="quick">db:qandadiv</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3358"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?lparent">lparent</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="418" select="quick">(</span><span class="axis" start="2">ancestor::</span><span class="qname" start="12" select="quick">db:set</span><span class="whitespace" start="18">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="26">|</span><span class="axis" start="27">ancestor::</span><span class="qname" start="37" select="quick">db:book</span><span class="whitespace" start="44">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="52">|</span><span class="axis" start="53">ancestor::</span><span class="qname" start="63" select="quick">db:chapter</span><span class="whitespace" start="73">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="81">|</span><span class="axis" start="82">ancestor::</span><span class="qname" start="92" select="quick">db:appendix</span><span class="whitespace" start="103">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="111">|</span><span class="axis" start="112">ancestor::</span><span class="qname" start="122" select="quick">db:preface</span><span class="whitespace" start="132">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="140">|</span><span class="axis" start="141">ancestor::</span><span class="qname" start="151" select="quick">db:section</span><span class="whitespace" start="161">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="169">|</span><span class="axis" start="170">ancestor::</span><span class="qname" start="180" select="quick">db:simplesect</span><span class="whitespace" start="193">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="201">|</span><span class="axis" start="202">ancestor::</span><span class="qname" start="212" select="quick">db:sect1</span><span class="whitespace" start="220">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="228">|</span><span class="axis" start="229">ancestor::</span><span class="qname" start="239" select="quick">db:sect2</span><span class="whitespace" start="247">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="255">|</span><span class="axis" start="256">ancestor::</span><span class="qname" start="266" select="quick">db:sect3</span><span class="whitespace" start="274">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="282">|</span><span class="axis" start="283">ancestor::</span><span class="qname" start="293" select="quick">db:sect4</span><span class="whitespace" start="301">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="309">|</span><span class="axis" start="310">ancestor::</span><span class="qname" start="320" select="quick">db:sect5</span><span class="whitespace" start="328">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="336">|</span><span class="axis" start="337">ancestor::</span><span class="qname" start="347" select="quick">db:refsect1</span><span class="whitespace" start="358">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="366">|</span><span class="axis" start="367">ancestor::</span><span class="qname" start="377" select="quick">db:refsect2</span><span class="whitespace" start="388">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="396">|</span><span class="axis" start="397">ancestor::</span><span class="qname" start="407" select="quick">db:refsect3</span><span class="parenthesis" start="418">)</span><span class="filter" start="419" pair-end="426" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="420" pair-end="425" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="425">)</span><span class="filter" start="426">]</span><span class="z">"</span><span id="wx3436" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3438"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?lparent.prefix">lparent.prefix</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3448"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx3462" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3466" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3468"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prefix">prefix</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3478"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?qanda.inherit.numeration" class="solar"><span class="variable" start="1" select="quick">$qanda.inherit.numeration</span></a><span class="whitespace" start="26"> </span><span class="op" start="27">!=</span><span class="whitespace" start="29"> </span><span class="numeric" start="30">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3492"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent.prefix</span><span class="whitespace" start="16"> </span><span class="op" start="17">!=</span><span class="whitespace" start="19"> </span><span class="op">'</span><span class="literal" start="20"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3508"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent.prefix</span><span class="z">"</span><span id="wx3516" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3518"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent</span><span class="z">"</span><span class="z">
£££££££££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx3532" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3536" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3540" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3544" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3546"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?count">count</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3562"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">multiple</span><span class="z">"</span><span class="z"> </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:qandadiv</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx3582" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3586" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3588"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="22" select="quick">concat</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$prefix</span><span class="op" start="15">,</span><span class="variable" start="16" select="quick">$count</span><span class="parenthesis" start="22">)</span><span class="z">"</span><span id="wx3613" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3615"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span id="wx3623" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3627" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3631" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3633"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandaentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3649"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:question</span><span class="filter" start="12" pair-end="14" select="quick">[</span><span class="numeric" start="13">1</span><span class="filter" start="14">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx3666" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3670" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3672"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:question</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:answer</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3690"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?lparent">lparent</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="866" select="quick">(</span><span class="axis" start="2">ancestor::</span><span class="qname" start="12" select="quick">db:set</span><span class="whitespace" start="18">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="58">|</span><span class="axis" start="59">ancestor::</span><span class="qname" start="69" select="quick">db:book</span><span class="whitespace" start="76">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="116">|</span><span class="axis" start="117">ancestor::</span><span class="qname" start="127" select="quick">db:chapter</span><span class="whitespace" start="137">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="177">|</span><span class="axis" start="178">ancestor::</span><span class="qname" start="188" select="quick">db:appendix</span><span class="whitespace" start="199">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="239">|</span><span class="axis" start="240">ancestor::</span><span class="qname" start="250" select="quick">db:preface</span><span class="whitespace" start="260">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="300">|</span><span class="axis" start="301">ancestor::</span><span class="qname" start="311" select="quick">db:section</span><span class="whitespace" start="321">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="361">|</span><span class="axis" start="362">ancestor::</span><span class="qname" start="372" select="quick">db:simplesect</span><span class="whitespace" start="385">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="425">|</span><span class="axis" start="426">ancestor::</span><span class="qname" start="436" select="quick">db:sect1</span><span class="whitespace" start="444">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="484">|</span><span class="axis" start="485">ancestor::</span><span class="qname" start="495" select="quick">db:sect2</span><span class="whitespace" start="503">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="543">|</span><span class="axis" start="544">ancestor::</span><span class="qname" start="554" select="quick">db:sect3</span><span class="whitespace" start="562">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="602">|</span><span class="axis" start="603">ancestor::</span><span class="qname" start="613" select="quick">db:sect4</span><span class="whitespace" start="621">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="661">|</span><span class="axis" start="662">ancestor::</span><span class="qname" start="672" select="quick">db:sect5</span><span class="whitespace" start="680">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="720">|</span><span class="axis" start="721">ancestor::</span><span class="qname" start="731" select="quick">db:refsect1</span><span class="whitespace" start="742">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="782">|</span><span class="axis" start="783">ancestor::</span><span class="qname" start="793" select="quick">db:refsect2</span><span class="whitespace" start="804">
£££££££££££££££££££££££££££££££££££££qq</span><span class="op" start="844">|</span><span class="axis" start="845">ancestor::</span><span class="qname" start="855" select="quick">db:refsect3</span><span class="parenthesis" start="866">)</span><span class="filter" start="867" pair-end="874" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="868" pair-end="873" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="873">)</span><span class="filter" start="874">]</span><span class="z">"</span><span id="wx3768" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3770"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?lparent.prefix">lparent.prefix</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3780"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx3794" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3798" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3800"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prefix">prefix</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3810"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?qanda.inherit.numeration" class="solar"><span class="variable" start="1" select="quick">$qanda.inherit.numeration</span></a><span class="whitespace" start="26"> </span><span class="op" start="27">!=</span><span class="whitespace" start="29"> </span><span class="numeric" start="30">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3824"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent.prefix</span><span class="whitespace" start="16"> </span><span class="op" start="17">!=</span><span class="whitespace" start="19"> </span><span class="op">'</span><span class="literal" start="20"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3840"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent.prefix</span><span class="z">"</span><span id="wx3848" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3850"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lparent</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx3864" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3868" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3870"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:qandadiv</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3881"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:qandadiv</span><span class="filter" start="22" pair-end="24" select="quick">[</span><span class="numeric" start="23">1</span><span class="filter" start="24">]</span><span class="z">"</span><span class="z">
£££££££££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx3899" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w3901"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:qandadiv</span><span class="filter" start="22" pair-end="24" select="quick">[</span><span class="numeric" start="23">1</span><span class="filter" start="24">]</span><span class="z">"</span><span class="z">
£££££££££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx3919" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3923" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3927" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3931" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3933"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?inhlabel">inhlabel</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor-or-self::</span><span class="qname" start="19" select="quick">db:qandaset</span><span class="step" start="30">/</span><span class="axis" start="31">@</span><span class="qname" start="32" select="quick">defaultlabel</span><span class="filter" start="44" pair-end="46" select="quick">[</span><span class="numeric" start="45">1</span><span class="filter" start="46">]</span><span class="z">"</span><span id="wx3954" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w3956"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?deflabel">deflabel</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3966"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3970"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$inhlabel</span><span class="whitespace" start="10"> </span><span class="op" start="11">!=</span><span class="whitespace" start="13"> </span><span class="op">'</span><span class="literal" start="14"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w3986"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$inhlabel</span><span class="z">"</span><span id="wx3994" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3998" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4000"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4004"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="ram.xsl.html#v?qanda.defaultlabel" class="solar"><span class="variable" start="1" select="quick">$qanda.defaultlabel</span></a><span class="z">"</span><span id="wx4012" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4016" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4020" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4024" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4026"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4030"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4040"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:label</span><span class="z">"</span><span id="wx4048" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4052" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4054"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$deflabel</span><span class="whitespace" start="10"> </span><span class="op" start="11">=</span><span class="whitespace" start="12"> </span><span class="op">'</span><span class="literal" start="13">qanda</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4070"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:question</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4081"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4091"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">Question</span><span class="op">'</span><span class="z">"</span><span id="wx4107" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4111" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4115" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4117"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:anser</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4128"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4138"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">Answer</span><span class="op">'</span><span class="z">"</span><span id="wx4154" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4158" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4162" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4166" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4168"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$deflabel</span><span class="whitespace" start="10"> </span><span class="op" start="11">=</span><span class="whitespace" start="12"> </span><span class="op">'</span><span class="literal" start="13">number</span><span class="op">'</span><span class="whitespace" start="21"> </span><span class="op" start="22">and</span><span class="whitespace" start="25"> </span><span class="axis" start="26">self::</span><span class="qname" start="32" select="quick">db:question</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4189"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$prefix</span><span class="z">"</span><span id="wx4197" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4199"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">multiple</span><span class="z">"</span><span class="z"> </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:qandaentry</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx4219" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4223" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4227" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4231" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4233"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliography</span><span class="op" start="16">|</span><span class="qname" start="17" select="quick">db:glossary</span><span class="op" start="28">|</span><span class="qname" start="29" select="quick">db:index</span><span class="op" start="37">|</span><span class="qname" start="38" select="quick">db:setindex</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4255"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4266"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx4275" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4279" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4283" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4285"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliodiv</span><span class="op" start="13">|</span><span class="qname" start="14" select="quick">db:glossdiv</span><span class="op" start="25">|</span><span class="qname" start="26" select="quick">db:indexdiv</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4305"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4316"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx4325" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4329" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4333" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4335"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sidebar</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4351"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4362"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx4371" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4375" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4379" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4381"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:figure</span><span class="op" start="10">|</span><span class="qname" start="11" select="quick">db:table</span><span class="op" start="19">|</span><span class="qname" start="20" select="quick">db:example</span><span class="op" start="30">|</span><span class="qname" start="31" select="quick">db:procedure</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

qq</span><span class="ww" id="w4403"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pchap">pchap</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:chapter</span><span class="whitespace" start="21">
££££££££££££££££££££££qq</span><span class="op" start="46">|</span><span class="axis" start="47">ancestor::</span><span class="qname" start="57" select="quick">db:appendix</span><span class="whitespace" start="68">
££££££££££££££££££££££qq</span><span class="op" start="93">|</span><span class="axis" start="94">ancestor::</span><span class="qname" start="104" select="quick">db:article</span><span class="filter" start="114" pair-end="132" select="quick">[</span><span class="axis" start="115">ancestor::</span><span class="qname" start="125" select="quick">db:book</span><span class="filter" start="132">]</span><span class="z">"</span><span id="wx4430" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4432"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4436"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4447"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx4456" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4460" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4462"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:procedure</span><span class="whitespace" start="19"> </span><span class="op" start="20">and</span><span class="whitespace" start="23"> </span><a href="ram.xsl.html#v?formal.procedures" class="solar"><span class="variable" start="24" select="quick">$formal.procedures</span></a><span class="whitespace" start="42"> </span><span class="op" start="43">=</span><span class="whitespace" start="44"> </span><span class="numeric" start="45">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> No label </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4487" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4489"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4493"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4497"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pchap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4507"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prefix">prefix</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4517"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pchap</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx4531" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4535" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4537"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$prefix</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4553"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$prefix</span><span class="z">"</span><span id="wx4561" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4563"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pchap</span><span class="z">"</span><span class="z">
£££££££££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx4577" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4581" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4583"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:chapter|db:appendix</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx4603" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4607" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4609"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:book</span><span class="op" start="18">|</span><span class="axis" start="19">ancestor::</span><span class="qname" start="29" select="quick">db:article</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4623"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:book|db:article</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx4643" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4647" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4649"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4653"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx4667" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4671" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4675" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4679" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4683" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4687" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4689"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:equation</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4705"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pchap">pchap</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">chapter</span><span class="whitespace" start="18">
££££££££££££££££££££££qq</span><span class="op" start="43">|</span><span class="axis" start="44">ancestor::</span><span class="qname" start="54" select="quick">appendix</span><span class="whitespace" start="62">
££££££££££££££££££££££qq</span><span class="op" start="87">|</span><span class="axis" start="88">ancestor::</span><span class="qname" start="98" select="quick">article</span><span class="filter" start="105" pair-end="120" select="quick">[</span><span class="axis" start="106">ancestor::</span><span class="qname" start="116" select="quick">book</span><span class="filter" start="120">]</span><span class="z">"</span><span id="wx4732" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4734"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4738"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4749"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx4758" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4762" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4764"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4768"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pchap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4778"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prefix">prefix</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4788"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pchap</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx4802" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4806" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4808"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$prefix</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4824"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$prefix</span><span class="z">"</span><span id="wx4832" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4834"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pchap</span><span class="z">"</span><span class="z">
£££££££££££££££££££££qq</span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:intralabel-punctuation</span><span class="z">"</span><span id="wx4848" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4852" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4856" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w4858"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4862"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:chapter</span><span class="whitespace" start="21"> </span><span class="op" start="22">or</span><span class="whitespace" start="24"> </span><span class="axis" start="25">ancestor::</span><span class="qname" start="35" select="quick">db:appendix</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4878"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span class="z"> </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:equation[db:title or db:info/db:title]</span><span class="z">"</span><span class="z">
££££££££££££qq</span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:chapter|db:appendix</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx4904" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4908" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4910"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4914"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span class="z"> </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:equation[db:title or db:info/db:title]</span><span class="z">"</span><span class="z">
££££££££££££qq</span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span id="wx4934" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4938" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4942" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4946" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4950" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4954" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4956"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:orderedlist</span><span class="step" start="15">/</span><span class="qname" start="16" select="quick">db:listitem</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w4974"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?numeration">numeration</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}orderedlist-numeration" class="solar"><span class="function" start="1" pair-end="28" select="quick">f:orderedlist-numeration</span></a><span class="parenthesis">(</span><span class="context" start="26">..</span><span class="parenthesis" start="28">)</span><span class="z">"</span><span id="wx4991" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w4993"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?type">type</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w5003"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w5007"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$numeration</span><span class="op" start="12">=</span><span class="op">'</span><span class="literal" start="13">arabic</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5023" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w5025"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$numeration</span><span class="op" start="12">=</span><span class="op">'</span><span class="literal" start="13">loweralpha</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">a</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5041" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w5043"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$numeration</span><span class="op" start="12">=</span><span class="op">'</span><span class="literal" start="13">lowerroman</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">i</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5059" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w5061"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$numeration</span><span class="op" start="12">=</span><span class="op">'</span><span class="literal" start="13">upperalpha</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">A</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5077" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w5079"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$numeration</span><span class="op" start="12">=</span><span class="op">'</span><span class="literal" start="13">upperroman</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">I</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5095" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> What!? This should never happen </span><span class="z">--&gt;</span><span class="txt">
qq</span><span class="ww" id="w5101"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w5105"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w5109"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Unexpected numeration: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx5115" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w5117"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$numeration</span><span class="z">"</span><span id="wx5125" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx5129" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w5131"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1.</span><span class="z">"</span><span id="wx5139" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx5143" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx5147" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx5151" class="ec">&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w5153"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">value</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:orderedlist-item-number(.)</span><span class="z">"</span><span class="z">
££££££££££££qq</span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><span class="variable" start="1" select="quick">$type</span><span class="op">}</span><span class="z">"</span><span id="wx5169" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5173" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5175"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:abstract</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5197" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5199"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:note</span><span class="op" start="8">|</span><span class="qname" start="9" select="quick">db:tip</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:warning</span><span class="op" start="26">|</span><span class="qname" start="27" select="quick">db:caution</span><span class="op" start="37">|</span><span class="qname" start="38" select="quick">db:important</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5229" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx5237" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
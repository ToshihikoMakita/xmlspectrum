<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>footnotes.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version='1.0'</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><a class="solar" href="../../../index.html"><span class="enxsl" id="e?{http://www.w3.org/1999/XSL/Transform}stylesheet">xsl:stylesheet</span></a><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:h</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:t</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                </span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db f h m t xs</span><span class="z">"</span><span class="z">
                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">'</span><span class="av">2.0</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ********************************************************************
  $Id: footnotes.xsl 8562 2009-12-17 23:10:25Z nwalsh $
  ********************************************************************
  
  This file is part of the XSL DocBook Stylesheet distribution.
  See ../README or http://nwalsh.com/docbook/xsl/ for copyright
  and other information.
  
  ******************************************************************** </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w73"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:footnote</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:footnote-number</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w89"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w93"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string-length" class="solar"><span class="function" start="1" pair-end="21" select="quick">string-length</span></a><span class="parenthesis">(</span><span class="axis" start="15">@</span><span class="qname" start="16" select="quick">label</span><span class="parenthesis" start="21">)</span><span class="whitespace" start="22"> </span><span class="op" start="23">!=</span><span class="whitespace" start="25"> </span><span class="numeric" start="26">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w111"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">label</span><span class="z">"</span><span id="wx120" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx124" class="ec">&gt;</span></span><span class="txt">
      
      </span><span class="ww" id="w126"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:tgroup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w137"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?tfnum">tfnum</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="z">&lt;!--</span><span class="cm"> tables are processed in a document that begins at tgroup </span><span class="z">--&gt;</span><span class="txt">
          </span><span class="z">&lt;!--</span><span class="cm"> so this doesn't need to count from any particular place </span><span class="z">--&gt;</span><span class="txt">
          </span><span class="ww" id="w155"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:tgroup</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx175" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx179" class="ec">&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w181"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w185"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string-length" class="solar"><span class="function" start="1" pair-end="45" select="quick">string-length</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?table.footnote.number.symbols" class="solar"><span class="variable" start="15" select="quick">$table.footnote.number.symbols</span></a><span class="parenthesis" start="45">)</span><span class="whitespace" start="46">
                          </span><span class="qname" start="50" select="quick">&amp;</span><span class="op" start="51">gt</span><span class="qname" start="53" select="quick">;</span><span class="op" start="54">=</span><span class="whitespace" start="55"> </span><span class="variable" start="56" select="quick">$tfnum</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w205"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="1" pair-end="66" select="quick">substring</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?table.footnote.number.symbols" class="solar"><span class="variable" start="11" select="quick">$table.footnote.number.symbols</span></a><span class="op" start="41">,</span><span class="whitespace" start="42">
                                  </span><span class="variable" start="57" select="quick">$tfnum</span><span class="op" start="63">,</span><span class="whitespace" start="64"> </span><span class="numeric" start="65">1</span><span class="parenthesis" start="66">)</span><span class="z">"</span><span id="wx222" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx226" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w228"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w232"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:tgroup</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z">
                        </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?table.footnote.number.format" class="solar"><span class="variable" start="1" select="quick">$table.footnote.number.format</span></a><span class="op">}</span><span class="z">"</span><span id="wx254" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx258" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx262" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx266" class="ec">&gt;</span></span><span class="txt">
      
      </span><span class="ww" id="w268"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:tr</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="z">&lt;!--</span><span class="cm"> Must be an HTML table </span><span class="z">--&gt;</span><span class="txt">
        </span><span class="ww" id="w283"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?tfnum">tfnum</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="z">&lt;!--</span><span class="cm"> tables are processed in a document that begins at tgroup </span><span class="z">--&gt;</span><span class="txt">
          </span><span class="z">&lt;!--</span><span class="cm"> so this doesn't need to count from any particular place </span><span class="z">--&gt;</span><span class="txt">
          </span><span class="ww" id="w301"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:table</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx321" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx325" class="ec">&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w327"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w331"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string-length" class="solar"><span class="function" start="1" pair-end="45" select="quick">string-length</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?table.footnote.number.symbols" class="solar"><span class="variable" start="15" select="quick">$table.footnote.number.symbols</span></a><span class="parenthesis" start="45">)</span><span class="whitespace" start="46">
                          </span><span class="qname" start="50" select="quick">&amp;</span><span class="op" start="51">gt</span><span class="qname" start="53" select="quick">;</span><span class="op" start="54">=</span><span class="whitespace" start="55"> </span><span class="variable" start="56" select="quick">$tfnum</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w351"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="1" pair-end="66" select="quick">substring</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?table.footnote.number.symbols" class="solar"><span class="variable" start="11" select="quick">$table.footnote.number.symbols</span></a><span class="op" start="41">,</span><span class="whitespace" start="42">
                                  </span><span class="variable" start="57" select="quick">$tfnum</span><span class="op" start="63">,</span><span class="whitespace" start="64"> </span><span class="numeric" start="65">1</span><span class="parenthesis" start="66">)</span><span class="z">"</span><span id="wx368" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx372" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w374"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w378"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:table</span><span class="z">"</span><span class="z"> </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z">
                        </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?table.footnote.number.format" class="solar"><span class="variable" start="1" select="quick">$table.footnote.number.format</span></a><span class="op">}</span><span class="z">"</span><span id="wx400" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx404" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx408" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx412" class="ec">&gt;</span></span><span class="txt">
      
      </span><span class="ww" id="w414"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w418"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pfoot">pfoot</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">preceding::</span><span class="qname" start="12" select="quick">db:footnote</span><span class="filter" start="23" pair-end="35" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="24" pair-end="34" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="28">@</span><span class="qname" start="29" select="quick">label</span><span class="parenthesis" start="34">)</span><span class="filter" start="35">]</span><span class="z">"</span><span id="wx440" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w442"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?ptfoot">ptfoot</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">preceding::</span><span class="qname" start="12" select="quick">db:tgroup</span><span class="step" start="21">//</span><span class="qname" start="23" select="quick">db:footnote</span><span class="whitespace" start="34">
                                            </span><span class="op" start="77">|</span><span class="axis" start="78">preceding::</span><span class="qname" start="89" select="quick">db:tr</span><span class="step" start="94">//</span><span class="qname" start="96" select="quick">db:footnote</span><span class="z">"</span><span id="wx465" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w467"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?fnum">fnum</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="13" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$pfoot</span><span class="parenthesis" start="13">)</span><span class="whitespace" start="14"> </span><span class="op" start="15">-</span><span class="whitespace" start="16"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="17" pair-end="30" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="23" select="quick">$ptfoot</span><span class="parenthesis" start="30">)</span><span class="whitespace" start="31"> </span><span class="op" start="32">+</span><span class="whitespace" start="33"> </span><span class="numeric" start="34">1</span><span class="z">"</span><span id="wx495" class="sc">/&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w497"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w501"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string-length" class="solar"><span class="function" start="1" pair-end="39" select="quick">string-length</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?footnote.number.symbols" class="solar"><span class="variable" start="15" select="quick">$footnote.number.symbols</span></a><span class="parenthesis" start="39">)</span><span class="whitespace" start="40"> </span><span class="qname" start="41" select="quick">&amp;</span><span class="op" start="42">gt</span><span class="qname" start="44" select="quick">;</span><span class="op" start="45">=</span><span class="whitespace" start="46"> </span><span class="variable" start="47" select="quick">$fnum</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w521"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="1" pair-end="45" select="quick">substring</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?footnote.number.symbols" class="solar"><span class="variable" start="11" select="quick">$footnote.number.symbols</span></a><span class="op" start="35">,</span><span class="whitespace" start="36"> </span><span class="variable" start="37" select="quick">$fnum</span><span class="op" start="42">,</span><span class="whitespace" start="43"> </span><span class="numeric" start="44">1</span><span class="parenthesis" start="45">)</span><span class="z">"</span><span id="wx538" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx542" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w544"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w548"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">value</span><span class="atneq">=</span><span class="z">"</span><span class="av">$fnum</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?footnote.number.format" class="solar"><span class="variable" start="1" select="quick">$footnote.number.format</span></a><span class="op">}</span><span class="z">"</span><span id="wx564" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx568" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx572" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx576" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx580" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx584" class="ec">&gt;</span></span><span class="txt">
  
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx588" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
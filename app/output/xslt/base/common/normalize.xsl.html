<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>normalize.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:fn</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:ghost</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook/ephemeral</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:mp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode/private</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:n</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/normalize</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:tp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template/private</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:xlink</span><span class="atneq">=</span><span class="z">'</span><span class="av">http://www.w3.org/1999/xlink</span><span class="z">'</span><span class="z">
                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                </span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fn m mp n xlink xs ghost</span><span class="z">"</span><span class="z">
                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  
  </span><span class="ww" id="w93"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?schemafile">schemafile</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1"></span><span class="op">'</span><span class="z">"</span><span id="wx109" class="sc">/&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm">	   select="'../../docbook/relaxng/dita4db/dita4db.rng'"/&gt; </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w115"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?schema">schema</span><span class="z">"</span><span class="z">
             </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="21" select="quick">(</span><a href="../../../xslt/base/common/normalize.xsl.html#v?schemafile" class="solar"><span class="variable" start="5" select="quick">$schemafile</span></a><span class="whitespace" start="16"> </span><span class="op" start="17">=</span><span class="whitespace" start="18"> </span><span class="op">'</span><span class="literal" start="19"></span><span class="op">'</span><span class="parenthesis" start="21">)</span><span class="whitespace" start="22">
                     </span><span class="op" start="28">then</span><span class="whitespace" start="32"> </span><span class="parenthesis" start="33" pair-end="34" select="quick">(</span><span class="parenthesis" start="34">)</span><span class="whitespace" start="35">
                     </span><span class="op" start="41">else</span><span class="whitespace" start="45"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="46" pair-end="66" select="quick">document</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/common/normalize.xsl.html#v?schemafile" class="solar"><span class="variable" start="55" select="quick">$schemafile</span></a><span class="parenthesis" start="66">)</span><span class="z">"</span><span id="wx151" class="sc">/&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w153"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?schema-extensions">schema-extensions</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx174" class="sc">/&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> normalize content </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w184"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?external.glossary">external.glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w194"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w198"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/param.xsl.html#v?glossary.collection" class="solar"><span class="variable" start="1" select="quick">$glossary.collection</span></a><span class="whitespace" start="21"> </span><span class="op" start="22">=</span><span class="whitespace" start="23"> </span><span class="op">'</span><span class="literal" start="24"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w214"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx223" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx227" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w229"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w233"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="32" select="quick">document</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?glossary.collection" class="solar"><span class="variable" start="10" select="quick">$glossary.collection</span></a><span class="op" start="30">,</span><span class="context" start="31">.</span><span class="parenthesis" start="32">)</span><span class="z">"</span><span id="wx246" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx250" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx254" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx258" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w260"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?external.bibliography">external.bibliography</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w270"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w274"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/html/param.xsl.html#v?bibliography.collection" class="solar"><span class="variable" start="1" select="quick">$bibliography.collection</span></a><span class="whitespace" start="25"> </span><span class="op" start="26">=</span><span class="whitespace" start="27"> </span><span class="op">'</span><span class="literal" start="28"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w290"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx299" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx303" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w305"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w309"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="36" select="quick">document</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/html/param.xsl.html#v?bibliography.collection" class="solar"><span class="variable" start="10" select="quick">$bibliography.collection</span></a><span class="op" start="34">,</span><span class="context" start="35">.</span><span class="parenthesis" start="36">)</span><span class="z">"</span><span id="wx322" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx326" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx330" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx334" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w340"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w356"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for normalizing a DocBook document</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx362" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w364"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w368"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to normalize an input document. Normalization
        moves all </span><span class="ww" id="w372"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">title</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx378" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w380"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">subtitle</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx386" class="ec">&gt;</span></span><span class="txt">, and
        </span><span class="ww" id="w388"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">titleabbrev</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx394" class="ec">&gt;</span></span><span class="txt"> elements inside </span><span class="ww" id="w396"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx402" class="ec">&gt;</span></span><span class="txt"> wrappers,
      creating the wrapper if necessary.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx406" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w408"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">If the element being normalized has a default title (e.g.,
        </span><span class="ww" id="w412"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">bibligraphy</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx418" class="ec">&gt;</span></span><span class="txt"> and </span><span class="ww" id="w420"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">glossary</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx426" class="ec">&gt;</span></span><span class="txt">), the title is made
      explicit during normalization.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx430" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w432"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">External glossaries and bibliographies (not yet!) are also
      copied by normalization.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx438" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx442" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx446" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w448"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="step" start="1">/</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w464"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx472" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx476" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w482"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalize-movetitle</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w498"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Moves titles inside </span><span class="ww" id="w502"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx508" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx512" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w514"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w518"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template moves </span><span class="ww" id="w522"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">title</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx528" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w530"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">subtitle</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx536" class="ec">&gt;</span></span><span class="txt">, and
        </span><span class="ww" id="w538"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">titleabbrev</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx544" class="ec">&gt;</span></span><span class="txt"> elements inside an </span><span class="ww" id="w546"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx552" class="ec">&gt;</span></span><span class="txt">.
      </span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx556" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx560" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w562"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w566"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The transformed node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx572" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx576" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx580" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w582"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/normalize}normalize-movetitle">n:normalize-movetitle</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w592"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w596"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx605" class="sc">/&gt;</span></span><span class="txt">
      
      </span><span class="ww" id="w607"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w611"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w621"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx629" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx633" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w635"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w649"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">info</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w667"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo" class="solar"><span class="tcall">n:normalize-dbinfo</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w677"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">copynodes</span><span class="z">"</span><span class="z">
                              </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="z">"</span><span id="wx695" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx699" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx703" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w705"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx713" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx717" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w719"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w723"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx731" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx735" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx739" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx743" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx747" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w749"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w769"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:info</span><span class="whitespace" start="16">
                  </span><span class="op" start="33">|</span><span class="axis" start="34">parent::</span><span class="qname" start="42" select="quick">db:biblioentry</span><span class="whitespace" start="56">
                  </span><span class="op" start="73">|</span><span class="axis" start="74">parent::</span><span class="qname" start="82" select="quick">db:bibliomixed</span><span class="whitespace" start="96">
                  </span><span class="op" start="113">|</span><span class="axis" start="114">parent::</span><span class="qname" start="122" select="quick">db:bibliomset</span><span class="whitespace" start="135">
                  </span><span class="op" start="152">|</span><span class="axis" start="153">parent::</span><span class="qname" start="161" select="quick">db:biblioset</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w796"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w800"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx809" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w811"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx819" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx823" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx827" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx831" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w833"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliography</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w849"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w859"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx876" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx880" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx884" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w886"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliomixed</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:biblioentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w904"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w908"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="11" select="quick">not</span></a><span class="parenthesis">(</span><span class="node" start="5" pair-end="10" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="10">)</span><span class="parenthesis" start="11">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt"> </span><span class="z">&lt;!--</span><span class="cm"> totally empty </span><span class="z">--&gt;</span><span class="txt">
        </span><span class="ww" id="w927"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?id">id</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="13" select="quick">(</span><span class="axis" start="2">@</span><span class="qname" start="3" select="quick">id</span><span class="op" start="5">|</span><span class="axis" start="6">@</span><span class="qname" start="7" select="quick">xml:id</span><span class="parenthesis" start="13">)</span><span class="filter" start="14" pair-end="16" select="quick">[</span><span class="numeric" start="15">1</span><span class="filter" start="16">]</span><span class="z">"</span><span id="wx950" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w952"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w956"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="8" select="quick">not</span></a><span class="parenthesis">(</span><span class="variable" start="5" select="quick">$id</span><span class="parenthesis" start="8">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w969"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w973"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Error: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx979" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w981"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">empty </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx987" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w989"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1000" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ww" id="w1002"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt"> with no id.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1008" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1012" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1016" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w1018"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#v?external.bibliography" class="solar"><span class="variable" start="1" select="quick">$external.bibliography</span></a><span class="step" start="23">/</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="24" pair-end="37" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="28">id</span><span class="op">'</span><span class="op" start="32">,</span><span class="whitespace" start="33"> </span><span class="variable" start="34" select="quick">$id</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1038"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#v?external.bibliography" class="solar"><span class="variable" start="1" select="quick">$external.bibliography</span></a><span class="step" start="23">/</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="24" pair-end="37" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="28">id</span><span class="op">'</span><span class="op" start="32">,</span><span class="whitespace" start="33"> </span><span class="variable" start="34" select="quick">$id</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span class="z">
                                 </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx1062" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1066" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w1068"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1072"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w1076"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Error: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1082" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w1084"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">$bibliography.collection doesn't contain </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1090" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w1092"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$id</span><span class="z">"</span><span id="wx1100" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1104" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ww" id="w1106"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w1110"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx1119" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ww" id="w1121"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">???</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1127" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx1131" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1135" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1139" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1143" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1145"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1149"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w1153"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx1162" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w1164"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx1172" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx1176" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1180" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1184" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1188" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w1190"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossary</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1206"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?glossary">glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1216"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1226"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1243" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1247" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1251" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w1253"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1257"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">db:glossary</span><span class="filter" start="22" pair-end="35" select="quick">[</span><span class="axis" start="23">@</span><span class="qname" start="24" select="quick">role</span><span class="op" start="28">=</span><span class="op">'</span><span class="literal" start="29">auto</span><span class="op">'</span><span class="filter" start="35">]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1277"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="23" select="quick">not</span></a><span class="parenthesis">(</span><a href="../../../xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="5" select="quick">$external.glossary</span></a><span class="parenthesis" start="23">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w1290"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1294"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: processing automatic glossary </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1300" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ww" id="w1302"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">without an external glossary.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1308" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1312" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1316" class="ec">&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w1318"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">glossary</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w1336"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">db:glossary</span><span class="step" start="22">/</span><span class="axis" start="23">@</span><span class="qname" start="24" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1351"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">role</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w1370"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1378" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1382" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx1386" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w1388"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">db:glossary</span><span class="step" start="22">/</span><span class="qname" start="23" select="quick">db:info</span><span class="z">"</span><span id="wx1400" class="sc">/&gt;</span></span><span class="txt">
          
          </span><span class="ww" id="w1402"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?seealsos">seealsos</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1418"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="1" select="quick">$external.glossary</span></a><span class="step" start="19">//</span><span class="qname" start="21" select="quick">db:glossseealso</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w1430"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="26" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="5" pair-end="25" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="9">id</span><span class="op">'</span><span class="op" start="13">,</span><span class="whitespace" start="14"> </span><span class="axis" start="15">@</span><span class="qname" start="16" select="quick">otherterm</span><span class="parenthesis" start="25">)</span><span class="parenthesis" start="26">)</span><span class="whitespace" start="27">
                                   </span><span class="op" start="34">then</span><span class="whitespace" start="38"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="39" pair-end="59" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="43">id</span><span class="op">'</span><span class="op" start="47">,</span><span class="whitespace" start="48"> </span><span class="axis" start="49">@</span><span class="qname" start="50" select="quick">otherterm</span><span class="parenthesis" start="59">)</span><span class="filter" start="60" pair-end="62" select="quick">[</span><span class="numeric" start="61">1</span><span class="filter" start="62">]</span><span class="whitespace" start="63">
                                   </span><span class="op" start="70">else</span><span class="whitespace" start="74"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="75" pair-end="101" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="79">glossterm</span><span class="op">'</span><span class="op" start="90">,</span><span class="whitespace" start="91"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="92" pair-end="100" select="quick">string</span></a><span class="parenthesis">(</span><span class="context" start="99">.</span><span class="parenthesis" start="100">)</span><span class="parenthesis" start="101">)</span><span class="z">"</span><span id="wx1482" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx1486" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1490" class="ec">&gt;</span></span><span class="txt">
          
          </span><span class="ww" id="w1492"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span class="z">
                        </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">//</span><span class="qname" start="12" select="quick">db:glossary</span><span class="step" start="23">/</span><span class="qname" start="24" select="quick">db:glossdiv</span><span class="z">"</span><span id="wx1510" class="sc">/&gt;</span></span><span class="txt">
          
          </span><span class="ww" id="w1512"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w1516"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="whitespace" start="6"> </span><span class="op" start="7">and</span><span class="whitespace" start="10"> </span><a href="../../../xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="11" select="quick">$external.glossary</span></a><span class="step" start="29">//</span><span class="qname" start="31" select="quick">db:glossdiv</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w1532"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="1" select="quick">$external.glossary</span></a><span class="step" start="19">//</span><span class="qname" start="21" select="quick">db:glossdiv</span><span class="z">"</span><span class="z">
                                   </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w1550"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="step" start="1">//</span><span class="qname" start="3" select="quick">db:glossterm</span><span class="filter" start="15" pair-end="40" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="16" pair-end="39" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="20">parent::</span><span class="qname" start="28" select="quick">db:glossdef</span><span class="parenthesis" start="39">)</span><span class="filter" start="40">]</span><span class="whitespace" start="41">
                                        </span><span class="op" start="52">|</span><span class="step" start="53">//</span><span class="qname" start="55" select="quick">db:firstterm</span><span class="whitespace" start="67">
                                        </span><span class="op" start="78">|</span><span class="variable" start="79" select="quick">$seealsos</span><span class="z">"</span><span id="wx1579" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ww" id="w1581"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx1595" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1599" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1603" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ww" id="w1605"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w1609"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="1" select="quick">$external.glossary</span></a><span class="step" start="19">//</span><span class="qname" start="21" select="quick">db:glossentry</span><span class="z">"</span><span class="z">
                                   </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w1627"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="step" start="1">//</span><span class="qname" start="3" select="quick">db:glossterm</span><span class="filter" start="15" pair-end="40" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="16" pair-end="39" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="20">parent::</span><span class="qname" start="28" select="quick">db:glossdef</span><span class="parenthesis" start="39">)</span><span class="filter" start="40">]</span><span class="whitespace" start="41">
                                        </span><span class="op" start="52">|</span><span class="step" start="53">//</span><span class="qname" start="55" select="quick">db:firstterm</span><span class="whitespace" start="67">
                                        </span><span class="op" start="78">|</span><span class="variable" start="79" select="quick">$seealsos</span><span class="z">"</span><span id="wx1656" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ww" id="w1658"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx1672" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1676" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1680" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1684" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx1688" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1692" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1694"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1698"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="z">"</span><span id="wx1706" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1710" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1714" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1718" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w1720"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:index</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1736"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1746"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1763" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1767" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1771" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w1773"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:setindex</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1789"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1799"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1816" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1820" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1824" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w1826"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:abstract</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1842"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1852"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1869" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1873" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1877" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w1879"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:legalnotice</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1895"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1905"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1922" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1926" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1930" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w1932"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:note</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1948"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1958"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1975" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1979" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1983" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w1985"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:tip</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2001"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2011"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2028" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2032" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2036" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w2038"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:caution</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2054"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2064"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2081" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2085" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2089" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w2091"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:warning</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2107"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2117"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2134" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2138" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2142" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w2144"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:important</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2160"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2170"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2187" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2191" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2195" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w2201"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalize-generated-title</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2217"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Generate a title, if necessary, and see that its moved into
      </span><span class="ww" id="w2221"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2227" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2231" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2233"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2237"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">If the context node does not have a title, this template will
        generate one. In either case, the title will be placed or moved inside
        an </span><span class="ww" id="w2241"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2247" class="ec">&gt;</span></span><span class="txt"> which will be created if necessary.
      </span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2251" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2255" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2257"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2261"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2265"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2269"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">title-key</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2275" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w2277"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w2281"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The key to use for creating the generated-text title if one is
            necessary.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2287" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2291" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2295" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2299" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2303" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2305"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2309"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The transformed node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2315" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2319" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2323" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w2325"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title">n:normalize-generated-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2335"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title-key">title-key</span><span class="z">"</span><span id="wx2343" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2345"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2349"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:info</span><span class="step" start="17">/</span><span class="qname" start="18" select="quick">db:title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2363"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-movetitle" class="solar"><span class="tcall">n:normalize-movetitle</span></a><span class="z">"</span><span id="wx2371" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2375" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2377"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2381"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w2385"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx2394" class="sc">/&gt;</span></span><span class="txt">
          
          </span><span class="ww" id="w2396"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w2400"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w2410"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">info</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w2428"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="axis" start="9">@</span><span class="qname" start="10" select="quick">*</span><span class="z">"</span><span id="wx2439" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ww" id="w2441"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                  </span><span class="ww" id="w2459"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalized-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                    </span><span class="ww" id="w2475"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title-key</span><span class="z">"</span><span id="wx2489" class="sc">/&gt;</span></span><span class="txt">
                  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2493" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2497" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ww" id="w2499"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="axis" start="9">preceding-sibling::</span><span class="node" start="28" pair-end="33" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span id="wx2512" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ww" id="w2514"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="qname" start="9" select="quick">*</span><span class="z">"</span><span id="wx2524" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2528" class="ec">&gt;</span></span><span class="txt">
              
              </span><span class="ww" id="w2530"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="axis" start="9">following-sibling::</span><span class="node" start="28" pair-end="33" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span class="z">
                                   </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx2549" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2553" class="ec">&gt;</span></span><span class="txt">
            
            </span><span class="ww" id="w2555"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w2559"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node-tree">node-tree</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w2569"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                  </span><span class="ww" id="w2587"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">ghost:title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">yes</span><span class="op">'</span><span class="z">"</span><span id="wx2603" class="sc">/&gt;</span></span><span class="txt">
                  </span><span class="ww" id="w2605"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalized-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                    </span><span class="ww" id="w2621"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title-key</span><span class="z">"</span><span id="wx2635" class="sc">/&gt;</span></span><span class="txt">
                  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2639" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2643" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2647" class="ec">&gt;</span></span><span class="txt">
              
              </span><span class="ww" id="w2649"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">info</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="../../../xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w2667"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo" class="solar"><span class="tcall">n:normalize-dbinfo</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                  </span><span class="ww" id="w2677"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">copynodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-tree</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">*</span><span class="z">"</span><span id="wx2693" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2697" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2701" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ww" id="w2703"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx2711" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2715" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2719" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx2723" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2727" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2731" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2735" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w2737"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalized-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2753"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title-key">title-key</span><span class="z">"</span><span id="wx2761" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2763"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2773"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title-key</span><span class="z">"</span><span id="wx2787" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2791" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2795" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w2797"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2813"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2817"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx2826" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2828"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo" class="solar"><span class="tcall">n:normalize-dbinfo</span></a><span class="z">"</span><span id="wx2836" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx2840" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2844" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w2850"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalize-dbinfo</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2866"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Copy the specified nodes, normalizing other content
    if appropriate</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2872" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2874"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2878"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The specified nodes are copied. If the context node is an
        </span><span class="ww" id="w2882"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2888" class="ec">&gt;</span></span><span class="txt"> element, then the rest of its contents are also normalized.
      </span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2892" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2896" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2898"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2902"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2906"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2910"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">copynodes</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2916" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w2918"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w2922"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The nodes to copy.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2928" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2932" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2936" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2940" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2944" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2946"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2950"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The transformed node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2956" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2960" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2964" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w2966"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo">n:normalize-dbinfo</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2976"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?copynodes">copynodes</span><span class="z">"</span><span id="wx2984" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w2986"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$copynodes</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2996"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3000"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3009" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3011"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3019" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3023" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx3027" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w3029"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:info</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3040"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3048" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3052" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3056" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w3058"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:inlinemediaobject</span><span class="whitespace" start="21">
                       </span><span class="filter" start="29" pair-end="284" select="quick">[</span><span class="parenthesis" start="30" pair-end="194" select="quick">(</span><span class="axis" start="31">parent::</span><span class="qname" start="39" select="quick">db:programlisting</span><span class="whitespace" start="56">
                       </span><span class="op" start="66">or</span><span class="whitespace" start="68"> </span><span class="axis" start="69">parent::</span><span class="qname" start="77" select="quick">db:screen</span><span class="whitespace" start="86">
                       </span><span class="op" start="96">or</span><span class="whitespace" start="98"> </span><span class="axis" start="99">parent::</span><span class="qname" start="107" select="quick">db:literallayout</span><span class="whitespace" start="123">
                       </span><span class="op" start="133">or</span><span class="whitespace" start="135"> </span><span class="axis" start="136">parent::</span><span class="qname" start="144" select="quick">db:address</span><span class="whitespace" start="154">
                       </span><span class="op" start="164">or</span><span class="whitespace" start="166"> </span><span class="axis" start="167">parent::</span><span class="qname" start="175" select="quick">db:funcsynopsisinfo</span><span class="parenthesis" start="194">)</span><span class="whitespace" start="195">
                       </span><span class="op" start="203">and</span><span class="whitespace" start="206"> </span><span class="qname" start="207" select="quick">db:imageobject</span><span class="whitespace" start="221">
                       </span><span class="op" start="229">and</span><span class="whitespace" start="232"> </span><span class="qname" start="233" select="quick">db:imageobject</span><span class="step" start="247">/</span><span class="qname" start="248" select="quick">db:imagedata</span><span class="filter" start="260" pair-end="283" select="quick">[</span><span class="axis" start="261">@</span><span class="qname" start="262" select="quick">format</span><span class="op" start="268">=</span><span class="op">'</span><span class="literal" start="269">linespecific</span><span class="op">'</span><span class="filter" start="283">]</span><span class="filter" start="284">]</span><span class="z">"</span><span class="z">
                </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    
    </span><span class="ww" id="w3119"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?data">data</span><span class="z">"</span><span class="z">
                  </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="58" select="quick">(</span><span class="qname" start="2" select="quick">db:imageobject</span><span class="whitespace" start="16">
                          </span><span class="step" start="21">/</span><span class="qname" start="22" select="quick">db:imagedata</span><span class="filter" start="34" pair-end="57" select="quick">[</span><span class="axis" start="35">@</span><span class="qname" start="36" select="quick">format</span><span class="op" start="42">=</span><span class="op">'</span><span class="literal" start="43">linespecific</span><span class="op">'</span><span class="filter" start="57">]</span><span class="parenthesis" start="58">)</span><span class="filter" start="59" pair-end="61" select="quick">[</span><span class="numeric" start="60">1</span><span class="filter" start="61">]</span><span class="z">"</span><span id="wx3149" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3151"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3155"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$data</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">entityref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3168"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="52" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-entity-uri" class="solar"><span class="function" start="15" pair-end="51" select="quick">unparsed-entity-uri</span></a><span class="parenthesis">(</span><span class="variable" start="35" select="quick">$data</span><span class="step" start="40">/</span><span class="axis" start="41">@</span><span class="qname" start="42" select="quick">entityref</span><span class="parenthesis" start="51">)</span><span class="parenthesis" start="52">)</span><span class="z">"</span><span id="wx3185" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3189" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3191"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3195"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="29" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$data</span><span class="step" start="20">/</span><span class="axis" start="21">@</span><span class="qname" start="22" select="quick">fileref</span><span class="parenthesis" start="29">)</span><span class="z">"</span><span id="wx3209" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3213" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3217" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3221" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w3223"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:textobject</span><span class="whitespace" start="14">
                       </span><span class="filter" start="22" pair-end="182" select="quick">[</span><span class="axis" start="23">parent::</span><span class="qname" start="31" select="quick">db:programlisting</span><span class="whitespace" start="48">
                       </span><span class="op" start="57">or</span><span class="whitespace" start="59"> </span><span class="axis" start="60">parent::</span><span class="qname" start="68" select="quick">db:screen</span><span class="whitespace" start="77">
                       </span><span class="op" start="86">or</span><span class="whitespace" start="88"> </span><span class="axis" start="89">parent::</span><span class="qname" start="97" select="quick">db:literallayout</span><span class="whitespace" start="113">
                       </span><span class="op" start="122">or</span><span class="whitespace" start="124"> </span><span class="axis" start="125">parent::</span><span class="qname" start="133" select="quick">db:address</span><span class="whitespace" start="143">
                       </span><span class="op" start="152">or</span><span class="whitespace" start="154"> </span><span class="axis" start="155">parent::</span><span class="qname" start="163" select="quick">db:funcsynopsisinfo</span><span class="filter" start="182">]</span><span class="z">"</span><span class="z">
                </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3264"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3268"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:textdata</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">entityref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3281"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="58" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-entity-uri" class="solar"><span class="function" start="15" pair-end="57" select="quick">unparsed-entity-uri</span></a><span class="parenthesis">(</span><span class="qname" start="35" select="quick">db:textdata</span><span class="step" start="46">/</span><span class="axis" start="47">@</span><span class="qname" start="48" select="quick">entityref</span><span class="parenthesis" start="57">)</span><span class="parenthesis" start="58">)</span><span class="z">"</span><span id="wx3298" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3302" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3304"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3308"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="35" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><span class="qname" start="15" select="quick">db:textdata</span><span class="step" start="26">/</span><span class="axis" start="27">@</span><span class="qname" start="28" select="quick">fileref</span><span class="parenthesis" start="35">)</span><span class="z">"</span><span id="wx3322" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3326" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3330" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3334" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> CALS tables are normalized here so that they're in the right context later </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w3340"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:tgroup</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3356"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:cals-phase-1</span><span class="z">"</span><span id="wx3370" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3374" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> Verbatim environments are normalized here too </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w3380"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z">
      </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlisting</span><span class="op" start="18">|</span><span class="qname" start="19" select="quick">db:address</span><span class="op" start="29">|</span><span class="qname" start="30" select="quick">db:screen</span><span class="op" start="39">|</span><span class="qname" start="40" select="quick">db:synopsis</span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:literallayout</span><span class="z">"</span><span class="z">
      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    
    </span><span class="ww" id="w3404"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?normalized">normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3420"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3424"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3433" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3435"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3443" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3447" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3451" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w3453"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:verbatim-phase-1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3469"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">origelem</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx3483" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx3487" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3491" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w3493"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlistingco</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3509"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?normalized">normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3525"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3529"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3538" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3540"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span id="wx3548" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3550"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:areaspec</span><span class="z">"</span><span id="wx3558" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3560"><span class="es">&lt;</span><span class="en">db:programlisting</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w3564"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlisting</span><span class="step" start="18">/</span><span class="axis" start="19">@</span><span class="qname" start="20" select="quick">*</span><span class="z">"</span><span id="wx3575" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3577"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlisting</span><span class="step" start="18">/</span><span class="node" start="19" pair-end="24" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3595" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">db:programlisting</span><span id="wx3599" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3601"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:calloutlist</span><span class="z">"</span><span id="wx3609" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3613" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3617" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w3619"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:verbatim-phase-1</span><span class="z">"</span><span id="wx3633" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3637" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w3639"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:r</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xmlns/schema-remap/</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:rng</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://relaxng.org/ns/structure/1.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    
    </span><span class="ww" id="w3667"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?element">element</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx3684" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3686"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?element-name">element-name</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="1" pair-end="12" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="context" start="11">.</span><span class="parenthesis" start="12">)</span><span class="z">"</span><span id="wx3703" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3705"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?known">known</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="higher" start="1">for</span><span class="whitespace" start="4"> </span><span id="rng-$n" class="variable" start="5" select="quick">$n</span><span class="whitespace" start="7"> </span><span class="op" start="8">in</span><span class="whitespace" start="10"> </span><a href="../../../xslt/base/common/normalize.xsl.html#v?schema-extensions" class="solar"><span class="variable" start="11" select="quick">$schema-extensions</span></a><span class="whitespace" start="29">
                                       </span><span class="op" start="39">return</span><span class="whitespace" start="45">
                                       </span><span class="if" start="58">if</span><span class="whitespace" start="60"> </span><span class="parenthesis" start="61" pair-end="91" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="62" pair-end="74" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="variable" start="72" select="quick">$n</span><span class="parenthesis" start="74">)</span><span class="whitespace" start="75"> </span><span class="op" start="76">=</span><span class="whitespace" start="77"> </span><span class="variable" start="78" select="quick">$element-name</span><span class="parenthesis" start="91">)</span><span class="whitespace" start="92">
                                       </span><span class="op" start="98">then</span><span class="whitespace" start="102"> </span><span class="variable" start="103" select="quick">$n</span><span class="whitespace" start="105">
                                       </span><span class="op" start="111">else</span><span class="whitespace" start="115"> </span><span class="parenthesis" start="116" pair-end="117" select="quick">(</span><span class="parenthesis" start="117">)</span><span class="z">"</span><span id="wx3749" class="sc">/&gt;</span></span><span class="txt">
    
    
    </span><span class="z">&lt;!--</span><span class="cm"> There are some limitations here with multiple patterns that define
    the same element, with namespaced elements, and with multiple remaps.
    We can come back to them if they ever matter. </span><span class="z">--&gt;</span><span class="txt">
    </span><span class="ww" id="w3755"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?remap">remap</span><span class="z">"</span><span class="z">
                  </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#v?schema" class="solar"><span class="variable" start="1" select="quick">$schema</span></a><span class="whitespace" start="8">
                          </span><span class="step" start="12">//</span><span class="qname" start="14" select="quick">rng:element</span><span class="filter" start="25" pair-end="52" select="quick">[</span><span class="axis" start="26">@</span><span class="qname" start="27" select="quick">name</span><span class="op" start="31">=</span><span class="variable" start="32" select="quick">$element</span><span class="whitespace" start="40"> </span><span class="op" start="41">and</span><span class="whitespace" start="44"> </span><span class="qname" start="45" select="quick">r:remap</span><span class="filter" start="52">]</span><span class="step" start="53">/</span><span class="qname" start="54" select="quick">r:remap</span><span class="filter" start="61" pair-end="63" select="quick">[</span><span class="numeric" start="62">1</span><span class="filter" start="63">]</span><span class="z">"</span><span id="wx3787" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="z">&lt;!--</span><span class="cm">
    &lt;xsl:message&gt;
    &lt;xsl:text&gt;normalize &lt;/xsl:text&gt;
    &lt;xsl:value-of select="name(.)"/&gt;
    &lt;xsl:text&gt; (&lt;/xsl:text&gt;
    &lt;xsl:value-of select="name($remap/*[1])"/&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
    &lt;/xsl:message&gt;
    </span><span class="z">--&gt;</span><span class="txt">
    
    </span><span class="ww" id="w3793"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3797"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$known</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3807"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w3811"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3820" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3822"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3830" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3834" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3838" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3840"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3850"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?mapped">mapped</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w3866"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w3870"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="step" start="7">//</span><span class="qname" start="9" select="quick">r:content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w3882"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="step" start="7">/</span><span class="qname" start="8" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w3900"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3915" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ww" id="w3917"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx3933" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx3937" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3941" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ww" id="w3943"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w3947"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="23" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$remap</span><span class="step" start="18">/</span><span class="qname" start="19" select="quick">*</span><span class="filter" start="20" pair-end="22" select="quick">[</span><span class="numeric" start="21">1</span><span class="filter" start="22">]</span><span class="parenthesis" start="23">)</span><span class="op">}</span><span class="z">"</span><span class="z">
                           </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-namespace-uri" class="solar"><span class="function" start="1" pair-end="26" select="quick">namespace-uri</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$remap</span><span class="step" start="21">/</span><span class="qname" start="22" select="quick">*</span><span class="filter" start="23" pair-end="25" select="quick">[</span><span class="numeric" start="24">1</span><span class="filter" start="25">]</span><span class="parenthesis" start="26">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w3983"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="step" start="7">/</span><span class="qname" start="8" select="quick">*</span><span class="filter" start="9" pair-end="11" select="quick">[</span><span class="numeric" start="10">1</span><span class="filter" start="11">]</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">*</span><span class="z">"</span><span id="wx3999" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ww" id="w4001"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4010" class="sc">/&gt;</span></span><span class="txt">
                </span><span class="ww" id="w4012"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx4022" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx4026" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4030" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4034" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4038" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4040"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$mapped</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx4054" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4058" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4060"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:info</span><span class="step" start="44">/</span><span class="qname" start="45" select="quick">db:title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4078"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4082"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:biblioentry</span><span class="whitespace" start="23">
                          </span><span class="op" start="48">|</span><span class="axis" start="49">parent::</span><span class="qname" start="57" select="quick">db:bibliomixed</span><span class="whitespace" start="71">
                          </span><span class="op" start="96">|</span><span class="axis" start="97">parent::</span><span class="qname" start="105" select="quick">db:bibliomset</span><span class="whitespace" start="118">
                          </span><span class="op" start="143">|</span><span class="axis" start="144">parent::</span><span class="qname" start="152" select="quick">db:biblioset</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w4105"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w4109"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4118" class="sc">/&gt;</span></span><span class="txt">
              </span><span class="ww" id="w4120"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx4128" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4132" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4136" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w4138"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w4142"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="../../../xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-movetitle" class="solar"><span class="tcall">n:normalize-movetitle</span></a><span class="z">"</span><span id="wx4150" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4154" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4158" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4162" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4164"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4168"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4172"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4181" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w4183"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx4191" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4195" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4199" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4203" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4207" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w4209"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="9" select="quick">comment</span><span class="parenthesis">(</span><span class="parenthesis" start="9">)</span><span class="op" start="10">|</span><span class="node" start="11" pair-end="34" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="parenthesis" start="34">)</span><span class="op" start="35">|</span><span class="node" start="36" pair-end="41" select="quick">text</span><span class="parenthesis">(</span><span class="parenthesis" start="41">)</span><span class="z">"</span><span class="z">
                </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4235"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4237" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4241" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w4247"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">r:content</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="z">
                </span><span class="atn">xmlns:r</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xmlns/schema-remap/</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4269"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attrs">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4284" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4286"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4301" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4303"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx4311" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4315" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w4317"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4333"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attrs">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4348" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4350"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4365" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w4367"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="op">}</span><span class="z">"</span><span class="z">
                 </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-namespace-uri" class="solar"><span class="function" start="1" pair-end="16" select="quick">namespace-uri</span></a><span class="parenthesis">(</span><span class="context" start="15">.</span><span class="parenthesis" start="16">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4393"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4402" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4404"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$attrs</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4414"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$attrs</span><span class="z">"</span><span id="wx4422" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4426" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4428"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4438"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx4452" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx4456" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx4460" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4464" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w4466"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">text</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="op" start="7">|</span><span class="node" start="8" pair-end="31" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="parenthesis" start="31">)</span><span class="op" start="32">|</span><span class="node" start="33" pair-end="41" select="quick">comment</span><span class="parenthesis">(</span><span class="parenthesis" start="41">)</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4492"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attrs">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4507" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4509"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4524" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4526"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4528" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4532" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> copy external glossary </span><span class="z">--&gt;</span><span class="txt">
  
  </span><span class="ww" id="w4542"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="z">
            </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4558"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for copying external glossary entries</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4564" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w4566"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4570"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to copy glossary entries from the
        </span><span class="ww" id="w4574"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">glossary.collection</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx4580" class="ec">&gt;</span></span><span class="txt"> into the current document.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4584" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4588" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4592" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w4594"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossdiv</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4610"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?terms">terms</span><span class="z">"</span><span id="wx4618" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4620"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span id="wx4628" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w4630"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?entries">entries</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4646"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4662"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$terms</span><span class="z">"</span><span id="wx4676" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4678"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx4692" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx4696" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4700" class="ec">&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w4702"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$entries</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4712"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4716"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4726"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w4730"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4739" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ww" id="w4741"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span id="wx4749" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ww" id="w4751"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$entries</span><span class="z">"</span><span id="wx4759" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4763" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4767" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4769"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4773"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$entries</span><span class="z">"</span><span id="wx4781" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4785" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4789" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4793" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4797" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w4799"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4815"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?terms">terms</span><span class="z">"</span><span id="wx4823" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4825"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span id="wx4833" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w4835"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?include">include</span><span class="z">"</span><span class="z">
                  </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="higher" start="1">for</span><span class="whitespace" start="4"> </span><span id="rng-$dterm" class="variable" start="5" select="quick">$dterm</span><span class="whitespace" start="11"> </span><span class="op" start="12">in</span><span class="whitespace" start="14"> </span><span class="variable" start="15" select="quick">$terms</span><span class="whitespace" start="21">
                          </span><span class="op" start="49">return</span><span class="whitespace" start="55"> 
                          </span><span class="higher" start="87">for</span><span class="whitespace" start="90"> </span><span id="rng-$gterm" class="variable" start="91" select="quick">$gterm</span><span class="whitespace" start="97"> </span><span class="op" start="98">in</span><span class="whitespace" start="100"> </span><span class="qname" start="101" select="quick">db:glossterm</span><span class="whitespace" start="113">
                          </span><span class="op" start="147">return</span><span class="whitespace" start="153">
                          </span><span class="if" start="190">if</span><span class="whitespace" start="192"> </span><span class="parenthesis" start="193" pair-end="302" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="194" pair-end="207" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="201" select="quick">$dterm</span><span class="parenthesis" start="207">)</span><span class="whitespace" start="208"> </span><span class="op" start="209">=</span><span class="whitespace" start="210"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="211" pair-end="224" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="218" select="quick">$gterm</span><span class="parenthesis" start="224">)</span><span class="whitespace" start="225">
                          </span><span class="op" start="266">or</span><span class="whitespace" start="268"> </span><span class="variable" start="269" select="quick">$dterm</span><span class="step" start="275">/</span><span class="axis" start="276">@</span><span class="qname" start="277" select="quick">baseform</span><span class="whitespace" start="285"> </span><span class="op" start="286">=</span><span class="whitespace" start="287"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="288" pair-end="301" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="295" select="quick">$gterm</span><span class="parenthesis" start="301">)</span><span class="parenthesis" start="302">)</span><span class="whitespace" start="303">
                          </span><span class="op" start="340">then</span><span class="whitespace" start="344"> </span><span class="op">'</span><span class="literal" start="345">x</span><span class="op">'</span><span class="whitespace" start="348">
                          </span><span class="op" start="385">else</span><span class="whitespace" start="389"> </span><span class="parenthesis" start="390" pair-end="391" select="quick">(</span><span class="parenthesis" start="391">)</span><span class="z">"</span><span id="wx4908" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w4910"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$include</span><span class="whitespace" start="9"> </span><span class="op" start="10">!=</span><span class="whitespace" start="12"> </span><span class="op">'</span><span class="literal" start="13"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4926"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4934" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4938" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4942" class="ec">&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w4944"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4960"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?terms">terms</span><span class="z">"</span><span id="wx4968" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4970"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span id="wx4978" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w4980"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4984"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4993" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4995"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5005"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$terms</span><span class="z">"</span><span id="wx5019" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w5021"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx5035" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5039" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx5043" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5047" class="ec">&gt;</span></span><span class="txt">
  
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx5051" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
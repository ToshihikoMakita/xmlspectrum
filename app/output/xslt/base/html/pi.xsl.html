<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>pi.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:ghost</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook/ephemeral</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:h</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:t</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:u</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/unittests#</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f ghost h m t u xs</span><span class="z">"</span><span class="z">
££££££££££££££££qq</span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="ww" id="w87"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}dbhtml-dir">f:dbhtml-dir</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w103"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx117" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="z">&lt;!--</span><span class="cm"> directories are now inherited from previous levels </span><span class="z">--&gt;</span><span class="txt">

qq</span><span class="ww" id="w123"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?ppath">ppath</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="23" select="quick">(</span><span class="variable" start="5" select="quick">$context</span><span class="step" start="13">/</span><span class="axis" start="14">parent::</span><span class="qname" start="22" select="quick">*</span><span class="parenthesis" start="23">)</span><span class="whitespace" start="24">
££££££££££££££££££££££qq</span><span class="op" start="49">then</span><span class="whitespace" start="53"> </span><a href="pi.xsl.html#f?{http://docbook.org/xslt/ns/extension}dbhtml-dir" class="solar"><span class="function" start="54" pair-end="85" select="quick">f:dbhtml-dir</span></a><span class="parenthesis">(</span><span class="variable" start="67" select="quick">$context</span><span class="step" start="75">/</span><span class="axis" start="76">parent::</span><span class="qname" start="84" select="quick">*</span><span class="parenthesis" start="85">)</span><span class="whitespace" start="86">
££££££££££££££££££££££qq</span><span class="op" start="90">else</span><span class="whitespace" start="94"> </span><span class="op">'</span><span class="literal" start="95"></span><span class="op">'</span><span class="z">"</span><span id="wx160" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w162"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?path">path</span><span class="z">"</span><span class="z">
££££££££££££££qq</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="n/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pi" class="solar"><span class="function" start="1" pair-end="53" select="quick">f:pi</span></a><span class="parenthesis">(</span><span class="variable" start="6" select="quick">$context</span><span class="step" start="14">/</span><span class="node" start="15" pair-end="46" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="38">dbhtml</span><span class="op">'</span><span class="parenthesis" start="46">)</span><span class="op" start="47">,</span><span class="op">'</span><span class="literal" start="48">dir</span><span class="op">'</span><span class="parenthesis" start="53">)</span><span class="z">"</span><span id="wx190" class="sc">/&gt;</span></span><span class="txt">

qq</span><span class="ww" id="w192"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w196"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w200"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="type" start="1">empty</span><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$path</span><span class="parenthesis" start="12">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w213"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$ppath</span><span class="z">"</span><span id="wx221" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx225" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w227"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w231"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$ppath</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
qq</span><span class="ww" id="w247"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$ppath</span><span class="z">"</span><span id="wx255" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w257"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="27" select="quick">not</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-ends-with" class="solar"><span class="function" start="5" pair-end="26" select="quick">ends-with</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$ppath</span><span class="op" start="21">,</span><span class="whitespace" start="22"> </span><span class="op">'</span><span class="literal" start="23">/</span><span class="op">'</span><span class="parenthesis" start="26">)</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">/</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx280" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx284" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ww" id="w286"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="17" select="quick">concat</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$path</span><span class="op" start="13">,</span><span class="op">'</span><span class="literal" start="14">/</span><span class="op">'</span><span class="parenthesis" start="17">)</span><span class="z">"</span><span id="wx301" class="sc">/&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx305" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx309" class="ec">&gt;</span></span><span class="txt">
qq</span><span class="ez">&lt;/</span><span class="clxsl">xsl:value-of</span><span id="wx313" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx317" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx321" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
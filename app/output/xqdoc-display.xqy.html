<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>xqdoc-display.xqy</title><link rel="stylesheet" type="text/css" href="theme.css"></head><body><div><pre class="spectrum"><span class="comment" pos="1" xq="yes">(:&#xD;
 : Copyright (c)2006 Elsevier, Inc.&#xD;
 :&#xD;
 : Licensed under the Apache License, Version 2.0 (the "License");&#xD;
 : you may not use this file except in compliance with the License.&#xD;
 : You may obtain a copy of the License at&#xD;
 :&#xD;
 : http://www.apache.org/licenses/LICENSE-2.0&#xD;
 :&#xD;
 : Unless required by applicable law or agreed to in writing, software&#xD;
 : distributed under the License is distributed on an "AS IS" BASIS,&#xD;
 : WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&#xD;
 : See the License for the specific language governing permissions and&#xD;
 : limitations under the License.&#xD;
 :&#xD;
 : The use of the Apache License does not indicate that this project is&#xD;
 : affiliated with the Apache Software Foundation.&#xD;
 :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="744" xq="yes">(:~ &#xD;
 :  This module provides the functions that control the Web presentation&#xD;
 :  of xqDoc. The logic contained in this module is not specific to any&#xD;
 :  XQuery implementation and is written to the Nov 2005 XQuery working&#xD;
 :  draft specification.  &#xD;
 :&#xD;
 :  It should also be noted that these functions not only support the &#xD;
 :  real-time presentation of the xqDoc information but are also used&#xD;
 :  for the static offline presentation mode as well.  The static offline&#xD;
 :  presentation mode has advantages because access to a native XML &#xD;
 :  database is not needed when viewing the xqDoc information ... it is&#xD;
 :  only needed when generating the offline materials. &#xD;
 : &#xD;
 :  @author Darin McBeath&#xD;
 :  @since June 9, 2006&#xD;
 :  @version 1.3&#xD;
 :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span xq="yes" start="5" prev-is-closed="false" class="qname">module</span><span xq="yes" start="11" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="12" prev-is-closed="true" class="qname">namespace</span><span xq="yes" start="21" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="true" class="qname">display</span><span xq="yes" start="29" prev-is-closed="true" class="op">=</span><span class="op">"</span><span class="literal" pos="1527" xq="yes">xqdoc/xqdoc-display</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">;</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span xq="yes" start="6" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="13" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="true" class="qname">namespace</span><span xq="yes" start="23" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="24" prev-is-closed="true" class="qname">xq</span><span xq="yes" start="26" prev-is-closed="true" class="op">=</span><span class="op">"</span><span class="literal" pos="1574" xq="yes">http://www.xqdoc.org/1.0</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">;</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="1605" xq="yes">(:~ &#xD;
 :  This variable defines the name for the xqDoc collection.&#xD;
 :  The xqDoc XML for all modules should be stored into the&#xD;
 :  XML database with this collection value.&#xD;
 :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">variable</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="variable">$display:XQDOC</span><span xq="yes" start="34" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="45" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="46" prev-is-closed="true" class="op">as</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="type-name">xs:string</span><span xq="yes" start="58" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="59" prev-is-closed="true" class="op">:=</span><span xq="yes" start="61" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="1844" xq="yes">xqdoc</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">;</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> &#xD;
&#xD;
</span><span class="comment" pos="1857" xq="yes">(:~ &#xD;
 :  This variable contains the list of URIs for all of the modules&#xD;
 :  available to xqDoc for presentation.  Each module should be identified by&#xD;
 :  a unique URI in the XML databse. &#xD;
 :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">variable</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="variable">$display:XQDOC</span><span xq="yes" start="34" prev-is-closed="true" class="qname">_URIS</span><span xq="yes" start="39" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="40" prev-is-closed="true" class="op">as</span><span xq="yes" start="42" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="43" prev-is-closed="false" class="type-name">xs:string*</span><span xq="yes" start="53" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="54" prev-is-closed="true" class="op">:=</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="57" prev-is-closed="false" class="higher">for</span><span xq="yes" start="60" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="61" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="63" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="64" prev-is-closed="true" class="op">in</span><span xq="yes" start="66" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="67" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="81" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="95" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="106" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="107" prev-is-closed="true" class="step">/</span><span xq="yes" start="108" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="116" prev-is-closed="true" class="whitespace">&#xD;
                                                      </span><span xq="yes" start="172" prev-is-closed="true" class="qname">order</span><span xq="yes" start="177" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="178" prev-is-closed="true" class="qname">by</span><span xq="yes" start="180" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="181" prev-is-closed="true" class="variable">$x</span><span xq="yes" start="183" prev-is-closed="true" class="step">/</span><span xq="yes" start="184" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="193" prev-is-closed="true" class="step">/</span><span xq="yes" start="194" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="200" prev-is-closed="true" class="whitespace"> &#xD;
                                                      </span><span xq="yes" start="257" prev-is-closed="true" class="op">return</span><span xq="yes" start="263" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="264" prev-is-closed="false" class="function">fn:string</span><span class="parenthesis">(</span><span xq="yes" start="274" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="276" prev-is-closed="true" class="step">/</span><span xq="yes" start="277" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="286" prev-is-closed="true" class="step">/</span><span xq="yes" start="287" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="293" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="294" prev-is-closed="true" class="op">;</span><span xq="yes" start="295" prev-is-closed="false" class="whitespace">&#xD;
</span><span class="comment" pos="2348" xq="yes">(:~ &#xD;
 :  Construct the welcome banner for the xqDoc home page.&#xD;
 :&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic linke for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">function</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="function">display:print-intro</span><span class="parenthesis">(</span><span xq="yes" start="40" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="46" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="47" prev-is-closed="true" class="op">as</span><span xq="yes" start="49" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="50" prev-is-closed="false" class="type-name">xs:boolean</span><span xq="yes" start="60" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="61" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="62" prev-is-closed="true" class="op">as</span><span xq="yes" start="64" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="65" prev-is-closed="false" class="node-type">element</span><span class="parenthesis">(</span><span xq="yes" start="73" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="74" prev-is-closed="true" class="quantifier">+</span><span xq="yes" start="75" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="77" prev-is-closed="true" class="op">{</span><span xq="yes" start="78" prev-is-closed="false" class="whitespace">&#xD;
  </span><span xq="yes" start="82" prev-is-closed="false" class="parenthesis">(</span><span pos="2663" class="es">&lt;</span><span name="xml-open-tag" pos="2664" class="en">h3</span><span name="x-tag-end" pos="2666" class="z">&gt;</span><span pos="2667" class="txt">Welcome to xqDoc</span><span pos="2683" class="sc">&lt;/</span><span name="xml-close-tag" pos="2685" class="cl">h3</span><span name="x-tag-end" pos="2687" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
  </span><span pos="2693" class="es">&lt;</span><span name="xml-open-tag" pos="2694" class="en">div</span><span name="xml-name-end" pos="2697" class="atn"> class</span><span name="x-equals" pos="2703" class="atneq">=</span><span name="xml-att-quote" pos="2704" class="z">"</span><span name="xml-literal-start" pos="2705" class="av">overview</span><span name="xml-att-quote" pos="2713" class="z">"</span><span name="x-tag-end" pos="2714" class="z">&gt;</span><span pos="2715" class="txt">&#xD;
  </span><span pos="2719" class="es">&lt;</span><span name="xml-open-tag" pos="2720" class="en">p</span><span name="x-tag-end" pos="2721" class="z">&gt;</span><span pos="2722" class="txt">This site presents documentation and cross-referencing information for both XQuery library&#xD;
  and main modules that have been converted into xqDoc XML.   &#xD;
  Visit </span><span pos="2886" class="es">&lt;</span><span name="xml-open-tag" pos="2887" class="en">a</span><span name="xml-name-end" pos="2888" class="atn"> href</span><span name="x-equals" pos="2893" class="atneq">=</span><span name="xml-att-quote" pos="2894" class="z">"</span><span name="xml-literal-start" pos="2895" class="av">http://www.xqdoc.org</span><span name="xml-att-quote" pos="2915" class="z">"</span><span name="x-tag-end" pos="2916" class="z">&gt;</span><span pos="2917" class="txt">xqdoc.org</span><span pos="2926" class="sc">&lt;/</span><span name="xml-close-tag" pos="2928" class="cl">a</span><span name="x-tag-end" pos="2929" class="z">&gt;</span><span pos="2930" class="txt"> to find the latest developments for this XQuery&#xD;
  open source tool.</span><span pos="2999" class="sc">&lt;/</span><span name="xml-close-tag" pos="3001" class="cl">p</span><span name="x-tag-end" pos="3002" class="z">&gt;</span><span pos="3003" class="txt">&#xD;
  </span><span pos="3007" class="sc">&lt;/</span><span name="xml-close-tag" pos="3009" class="cl">div</span><span name="x-tag-end" pos="3012" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="6" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="8" prev-is-closed="true" class="op">}</span><span xq="yes" start="9" prev-is-closed="true" class="op">;</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="3026" xq="yes">(:~&#xD;
 :  Construct the welcome banner for the xqDoc module page.&#xD;
 :&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">function</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="function">display:print-module-intro</span><span class="parenthesis">(</span><span xq="yes" start="47" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="53" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="54" prev-is-closed="true" class="op">as</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="57" prev-is-closed="false" class="type-name">xs:boolean</span><span xq="yes" start="67" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="68" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="69" prev-is-closed="true" class="op">as</span><span xq="yes" start="71" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="72" prev-is-closed="false" class="node-type">element</span><span class="parenthesis">(</span><span xq="yes" start="80" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="81" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="83" prev-is-closed="true" class="op">{</span><span xq="yes" start="84" prev-is-closed="false" class="whitespace">&#xD;
  </span><span xq="yes" start="88" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="3366" xq="yes">default</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="op">,</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="12" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="13" prev-is-closed="true" class="op">,</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="17" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="20" prev-is-closed="true" class="op">}</span><span xq="yes" start="21" prev-is-closed="true" class="op">;</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
</span><span class="comment" pos="3400" xq="yes">(:~&#xD;
 :  Construct the list of modules available to xqDoc for presentation.&#xD;
 :  The list of modules is availalbe on the xqDoc home page.&#xD;
 :&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="false" class="whitespace">&#xD;
</span><span xq="yes" start="3" prev-is-closed="false" class="qname">declare</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="qname">function</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="function">display:print-modules</span><span class="parenthesis">(</span><span xq="yes" start="42" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="48" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="true" class="op">as</span><span xq="yes" start="51" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="false" class="type-name">xs:boolean</span><span xq="yes" start="62" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="63" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="64" prev-is-closed="true" class="op">as</span><span xq="yes" start="66" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="67" prev-is-closed="false" class="node-type">element</span><span class="parenthesis">(</span><span xq="yes" start="75" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="76" prev-is-closed="true" class="quantifier">+</span><span xq="yes" start="77" prev-is-closed="true" class="whitespace">&#xD;
</span><span xq="yes" start="79" prev-is-closed="true" class="op">{</span><span xq="yes" start="80" prev-is-closed="false" class="whitespace">&#xD;
  </span><span xq="yes" start="84" prev-is-closed="false" class="parenthesis">(</span><span pos="3791" class="es">&lt;</span><span name="xml-open-tag" pos="3792" class="en">div</span><span name="xml-name-end" pos="3795" class="atn"> class</span><span name="x-equals" pos="3801" class="atneq">=</span><span name="xml-att-quote" pos="3802" class="z">"</span><span name="xml-literal-start" pos="3803" class="av">home</span><span name="xml-att-quote" pos="3807" class="z">"</span><span name="x-tag-end" pos="3808" class="z">&gt;</span><span pos="3809" class="txt">&#xD;
    </span><span name="nested-query" pos="3815" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="7" prev-is-closed="true" class="if">if</span><span xq="yes" start="9" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="10" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="21" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="35" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="49" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="60" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="61" prev-is-closed="true" class="step">/</span><span xq="yes" start="62" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="70" prev-is-closed="true" class="step">/</span><span xq="yes" start="71" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="80" prev-is-closed="true" class="filter">[</span><span xq="yes" start="81" prev-is-closed="false" class="axis">@</span><span xq="yes" start="82" prev-is-closed="false" class="qname">type</span><span xq="yes" start="86" prev-is-closed="true" class="op">=</span><span class="op">"</span><span class="literal" pos="3902" xq="yes">library</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="filter">]</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="4" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="5" prev-is-closed="true" class="op">then</span><span xq="yes" start="9" prev-is-closed="false" class="whitespace">&#xD;
      </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span pos="3928" class="es">&lt;</span><span name="xml-open-tag" pos="3929" class="en">h4</span><span name="x-tag-end" pos="3931" class="z">&gt;</span><span pos="3932" class="txt">Library Modules</span><span pos="3947" class="sc">&lt;/</span><span name="xml-close-tag" pos="3949" class="cl">h4</span><span name="x-tag-end" pos="3951" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="3963" class="es">&lt;</span><span name="xml-open-tag" pos="3964" class="en">br</span><span name="x-tag-end" pos="3966" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span pos="3969" class="es">&lt;</span><span name="xml-open-tag" pos="3970" class="en">br</span><span name="x-tag-end" pos="3972" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="12" prev-is-closed="false" class="higher">for</span><span xq="yes" start="15" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="16" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="op">in</span><span xq="yes" start="21" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="50" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="step">/</span><span xq="yes" start="63" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="71" prev-is-closed="true" class="filter">[</span><span xq="yes" start="72" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="axis">@</span><span xq="yes" start="83" prev-is-closed="false" class="qname">type</span><span xq="yes" start="87" prev-is-closed="true" class="op">=</span><span class="op">"</span><span class="literal" pos="4061" xq="yes">library</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="filter">]</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="12" prev-is-closed="true" class="qname">order</span><span xq="yes" start="17" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="18" prev-is-closed="true" class="qname">by</span><span xq="yes" start="20" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="true" class="variable">$x</span><span xq="yes" start="23" prev-is-closed="true" class="step">/</span><span xq="yes" start="24" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="33" prev-is-closed="true" class="step">/</span><span xq="yes" start="34" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="40" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="50" prev-is-closed="true" class="op">return</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="67" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="68" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="69" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="4157" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                              </span><span xq="yes" start="34" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="40" prev-is-closed="true" class="op">,</span><span xq="yes" start="41" prev-is-closed="false" class="whitespace"> &#xD;
                              </span><span xq="yes" start="74" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="75" prev-is-closed="false" class="function">fn:string</span><span class="parenthesis">(</span><span xq="yes" start="85" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="87" prev-is-closed="true" class="step">/</span><span xq="yes" start="88" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="97" prev-is-closed="true" class="step">/</span><span xq="yes" start="98" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="104" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="105" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="106" prev-is-closed="true" class="op">,</span><span xq="yes" start="107" prev-is-closed="false" class="whitespace">&#xD;
                               </span><span xq="yes" start="140" prev-is-closed="false" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="159" prev-is-closed="false" class="function">fn:string</span><span class="parenthesis">(</span><span xq="yes" start="169" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="171" prev-is-closed="true" class="step">/</span><span xq="yes" start="172" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="181" prev-is-closed="true" class="step">/</span><span xq="yes" start="182" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="188" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="189" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="190" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="191" prev-is-closed="true" class="op">,</span><span xq="yes" start="192" prev-is-closed="false" class="whitespace">&#xD;
           </span><span pos="4373" class="es">&lt;</span><span name="xml-open-tag" pos="4374" class="en">br</span><span name="x-tag-end" pos="4376" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="13" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="14" prev-is-closed="true" class="whitespace">           &#xD;
    </span><span xq="yes" start="31" prev-is-closed="true" class="op">else</span><span xq="yes" start="35" prev-is-closed="false" class="whitespace">&#xD;
      </span><span xq="yes" start="43" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="44" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="45" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="51" prev-is-closed="true" class="op">}</span><span xq="yes" start="52" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="58" prev-is-closed="true" class="op">{</span><span xq="yes" start="59" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="65" prev-is-closed="false" class="if">if</span><span xq="yes" start="67" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="68" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="69" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="79" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="93" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="107" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="118" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="128" prev-is-closed="true" class="step">/</span><span xq="yes" start="129" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="138" prev-is-closed="true" class="filter">[</span><span xq="yes" start="139" prev-is-closed="false" class="axis">@</span><span xq="yes" start="140" prev-is-closed="false" class="qname">type</span><span xq="yes" start="144" prev-is-closed="true" class="op">=</span><span class="op">"</span><span class="literal" pos="4522" xq="yes">main</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="filter">]</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="4" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="5" prev-is-closed="true" class="op">then</span><span xq="yes" start="9" prev-is-closed="false" class="whitespace">&#xD;
      </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span pos="4545" class="es">&lt;</span><span name="xml-open-tag" pos="4546" class="en">h4</span><span name="x-tag-end" pos="4548" class="z">&gt;</span><span pos="4549" class="txt">Main Modules</span><span pos="4561" class="sc">&lt;/</span><span name="xml-close-tag" pos="4563" class="cl">h4</span><span name="x-tag-end" pos="4565" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="4577" class="es">&lt;</span><span name="xml-open-tag" pos="4578" class="en">br</span><span name="x-tag-end" pos="4580" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span pos="4583" class="es">&lt;</span><span name="xml-open-tag" pos="4584" class="en">br</span><span name="x-tag-end" pos="4586" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="12" prev-is-closed="false" class="higher">for</span><span xq="yes" start="15" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="16" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="op">in</span><span xq="yes" start="21" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="50" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="step">/</span><span xq="yes" start="63" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="71" prev-is-closed="true" class="filter">[</span><span xq="yes" start="72" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="axis">@</span><span xq="yes" start="83" prev-is-closed="false" class="qname">type</span><span xq="yes" start="87" prev-is-closed="true" class="op">=</span><span class="op">"</span><span class="literal" pos="4675" xq="yes">main</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="filter">]</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="12" prev-is-closed="true" class="qname">order</span><span xq="yes" start="17" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="18" prev-is-closed="true" class="qname">by</span><span xq="yes" start="20" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="true" class="variable">$x</span><span xq="yes" start="23" prev-is-closed="true" class="step">/</span><span xq="yes" start="24" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="33" prev-is-closed="true" class="step">/</span><span xq="yes" start="34" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="40" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="50" prev-is-closed="true" class="op">return</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="67" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="68" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="69" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="4768" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                               </span><span xq="yes" start="35" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="41" prev-is-closed="true" class="op">,</span><span xq="yes" start="42" prev-is-closed="false" class="whitespace"> &#xD;
                               </span><span xq="yes" start="76" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="77" prev-is-closed="false" class="function">fn:string</span><span class="parenthesis">(</span><span xq="yes" start="87" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="89" prev-is-closed="true" class="step">/</span><span xq="yes" start="90" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="99" prev-is-closed="true" class="step">/</span><span xq="yes" start="100" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="106" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="107" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="108" prev-is-closed="true" class="op">,</span><span xq="yes" start="109" prev-is-closed="false" class="whitespace">&#xD;
                                </span><span xq="yes" start="143" prev-is-closed="false" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="162" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="172" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="174" prev-is-closed="true" class="step">/</span><span xq="yes" start="175" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="184" prev-is-closed="true" class="step">/</span><span xq="yes" start="185" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="191" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="192" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="193" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="194" prev-is-closed="true" class="op">,</span><span xq="yes" start="195" prev-is-closed="false" class="whitespace">&#xD;
           </span><span pos="4987" class="es">&lt;</span><span name="xml-open-tag" pos="4988" class="en">br</span><span name="x-tag-end" pos="4990" class="z">/&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="11" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="12" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
      </span><span xq="yes" start="30" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="31" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="32" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="38" prev-is-closed="true" class="op">}</span><span xq="yes" start="39" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="45" prev-is-closed="true" class="op">&lt;</span><span xq="yes" start="46" prev-is-closed="false" class="step">/</span><span xq="yes" start="47" prev-is-closed="false" class="qname">div</span><span xq="yes" start="50" prev-is-closed="true" class="op">&gt;</span><span xq="yes" start="51" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="52" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="5045" class="op">}</span><span name="resume-x-literal-txt" pos="5046" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  The controller for constructing the xqDoc HTML information for&#xD;
 :  the specified module. The following information  for&#xD;
 :  each module will be generated.&#xD;
 :  </span><span pos="5222" class="es">&lt;</span><span name="xml-open-tag" pos="5223" class="en">ul</span><span name="x-tag-end" pos="5225" class="z">&gt;</span><span pos="5226" class="txt">&#xD;
 :  </span><span pos="5232" class="es">&lt;</span><span name="xml-open-tag" pos="5233" class="en">li</span><span name="x-tag-end" pos="5235" class="z">&gt;</span><span pos="5236" class="txt"> Module introductory information</span><span pos="5268" class="sc">&lt;/</span><span name="xml-close-tag" pos="5270" class="cl">li</span><span name="x-tag-end" pos="5272" class="z">&gt;</span><span pos="5273" class="txt">&#xD;
 :  </span><span pos="5279" class="es">&lt;</span><span name="xml-open-tag" pos="5280" class="en">li</span><span name="x-tag-end" pos="5282" class="z">&gt;</span><span pos="5283" class="txt"> Global variables declared in this module</span><span pos="5324" class="sc">&lt;/</span><span name="xml-close-tag" pos="5326" class="cl">li</span><span name="x-tag-end" pos="5328" class="z">&gt;</span><span pos="5329" class="txt">&#xD;
 :  </span><span pos="5335" class="es">&lt;</span><span name="xml-open-tag" pos="5336" class="en">li</span><span name="x-tag-end" pos="5338" class="z">&gt;</span><span pos="5339" class="txt"> Modules imported by this module</span><span pos="5371" class="sc">&lt;/</span><span name="xml-close-tag" pos="5373" class="cl">li</span><span name="x-tag-end" pos="5375" class="z">&gt;</span><span pos="5376" class="txt">&#xD;
 :  </span><span pos="5382" class="es">&lt;</span><span name="xml-open-tag" pos="5383" class="en">li</span><span name="x-tag-end" pos="5385" class="z">&gt;</span><span pos="5386" class="txt"> Summary information for each function defined in the module</span><span pos="5446" class="sc">&lt;/</span><span name="xml-close-tag" pos="5448" class="cl">li</span><span name="x-tag-end" pos="5450" class="z">&gt;</span><span pos="5451" class="txt">&#xD;
 :  </span><span pos="5457" class="es">&lt;</span><span name="xml-open-tag" pos="5458" class="en">li</span><span name="x-tag-end" pos="5460" class="z">&gt;</span><span pos="5461" class="txt"> Detailed information for each function defined in the module</span><span pos="5522" class="sc">&lt;/</span><span name="xml-close-tag" pos="5524" class="cl">li</span><span name="x-tag-end" pos="5526" class="z">&gt;</span><span pos="5527" class="txt">&#xD;
 :  </span><span pos="5533" class="sc">&lt;/</span><span name="xml-close-tag" pos="5535" class="cl">ul</span><span name="x-tag-end" pos="5537" class="z">&gt;</span><span pos="5538" class="txt">&#xD;
 :&#xD;
 :  @param $uri the URI for the module&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)&#xD;
declare function display:print-module-control($uri as xs:string, $local as xs:boolean) as item()+ &#xD;
</span><span name="nested-query" pos="5850" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="parenthesis">(</span><span xq="yes" start="6" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="7" prev-is-closed="false" class="function">display:print-module</span><span class="parenthesis">(</span><span xq="yes" start="28" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="32" prev-is-closed="true" class="op">,</span><span xq="yes" start="33" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="34" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="40" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="41" prev-is-closed="true" class="op">,</span><span xq="yes" start="42" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="48" prev-is-closed="false" class="function">display:print-variables</span><span class="parenthesis">(</span><span xq="yes" start="72" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="76" prev-is-closed="true" class="op">,</span><span xq="yes" start="77" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="78" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="84" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="85" prev-is-closed="true" class="op">,</span><span xq="yes" start="86" prev-is-closed="false" class="whitespace">&#xD;
    </span><span class="op">"</span><span class="literal" pos="5942" xq="yes">&amp;#160;</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="8" prev-is-closed="false" class="function">display:print-imports</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="34" prev-is-closed="true" class="op">,</span><span xq="yes" start="35" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="36" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="42" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="43" prev-is-closed="true" class="op">,</span><span xq="yes" start="44" prev-is-closed="false" class="whitespace">&#xD;
    </span><span class="op">"</span><span class="literal" pos="5999" xq="yes">&amp;#160;</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="8" prev-is-closed="false" class="function">display:print-method-summary</span><span class="parenthesis">(</span><span xq="yes" start="37" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="41" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="42" prev-is-closed="true" class="op">,</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace">&#xD;
    </span><span class="op">"</span><span class="literal" pos="6055" xq="yes">&amp;#160;</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="8" prev-is-closed="false" class="function">display:print-method-detail</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="40" prev-is-closed="true" class="op">,</span><span xq="yes" start="41" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="42" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="48" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="49" prev-is-closed="true" class="op">,</span><span xq="yes" start="50" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="56" prev-is-closed="false" class="function">display:print-footer</span><span class="parenthesis">(</span><span xq="yes" start="77" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="81" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="82" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="83" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="84" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="6148" class="op">}</span><span name="resume-x-literal-txt" pos="6149" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the high-level xqDoc HTML for the module.&#xD;
 :  This is essentially any introductory xqDoc comments that might&#xD;
 :  be associated with the module.&#xD;
 :&#xD;
 :  @param $uri the URI for the module&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)&#xD;
declare function display:print-module($uri as xs:string, $local as xs:boolean) as element()* &#xD;
</span><span name="nested-query" pos="6625" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="6" prev-is-closed="true" class="parenthesis">(</span><span pos="6632" class="es">&lt;</span><span name="xml-open-tag" pos="6633" class="en">h4</span><span name="x-tag-end" pos="6635" class="z">&gt;</span><span pos="6636" class="txt">Module URI</span><span pos="6646" class="sc">&lt;/</span><span name="xml-close-tag" pos="6648" class="cl">h4</span><span name="x-tag-end" pos="6650" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="6658" class="es">&lt;</span><span name="xml-open-tag" pos="6659" class="en">h1</span><span name="x-tag-end" pos="6661" class="z">&gt;</span><span name="nested-query" pos="6662" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="21" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="31" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="45" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="59" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="70" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="71" prev-is-closed="true" class="step">/</span><span xq="yes" start="72" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="80" prev-is-closed="true" class="step">/</span><span xq="yes" start="81" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="90" prev-is-closed="true" class="step">/</span><span xq="yes" start="91" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="97" prev-is-closed="true" class="filter">[</span><span xq="yes" start="98" prev-is-closed="false" class="context">.</span><span xq="yes" start="99" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="100" prev-is-closed="true" class="op">=</span><span xq="yes" start="101" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="102" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="106" prev-is-closed="true" class="filter">]</span><span xq="yes" start="107" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="108" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="109" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="6772" class="op">}</span><span pos="6773" class="sc">&lt;/</span><span name="xml-close-tag" pos="6775" class="cl">h1</span><span name="x-tag-end" pos="6777" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="8" prev-is-closed="false" class="if">if</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="12" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="50" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="step">/</span><span xq="yes" start="63" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="71" prev-is-closed="true" class="step">/</span><span xq="yes" start="72" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="88" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="89" prev-is-closed="true" class="op">=</span><span xq="yes" start="90" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="91" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="95" prev-is-closed="true" class="filter">]</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:body</span><span xq="yes" start="104" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="105" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="106" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="107" prev-is-closed="true" class="op">then</span><span xq="yes" start="111" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="121" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="6917" xq="yes">get-code</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="31" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="37" prev-is-closed="true" class="op">,</span><span xq="yes" start="38" prev-is-closed="false" class="whitespace"> &#xD;
                           </span><span xq="yes" start="68" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="72" prev-is-closed="true" class="op">,</span><span xq="yes" start="73" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="102" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="103" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="104" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="105" prev-is-closed="true" class="whitespace">&#xD;
             </span><span xq="yes" start="120" prev-is-closed="true" class="op">else</span><span xq="yes" start="124" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="140" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="141" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="142" prev-is-closed="true" class="op">,</span><span xq="yes" start="143" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="149" prev-is-closed="false" class="if">if</span><span xq="yes" start="151" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="152" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="153" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="163" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="177" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="191" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="202" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="203" prev-is-closed="true" class="step">/</span><span xq="yes" start="204" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="212" prev-is-closed="true" class="step">/</span><span xq="yes" start="213" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="222" prev-is-closed="true" class="filter">[</span><span xq="yes" start="223" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="229" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="230" prev-is-closed="true" class="op">=</span><span xq="yes" start="231" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="232" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="236" prev-is-closed="true" class="filter">]</span><span xq="yes" start="237" prev-is-closed="true" class="step">/</span><span xq="yes" start="238" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="248" prev-is-closed="true" class="step">/</span><span xq="yes" start="249" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="263" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="264" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="265" prev-is-closed="true" class="op">or</span><span xq="yes" start="267" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="278" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="288" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="302" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="316" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="327" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="328" prev-is-closed="true" class="step">/</span><span xq="yes" start="329" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="337" prev-is-closed="true" class="step">/</span><span xq="yes" start="338" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="347" prev-is-closed="true" class="filter">[</span><span xq="yes" start="348" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="354" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="355" prev-is-closed="true" class="op">=</span><span xq="yes" start="356" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="357" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="361" prev-is-closed="true" class="filter">]</span><span xq="yes" start="362" prev-is-closed="true" class="step">/</span><span xq="yes" start="363" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="373" prev-is-closed="true" class="step">/</span><span xq="yes" start="374" prev-is-closed="false" class="qname">xq:author</span><span xq="yes" start="383" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="384" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="385" prev-is-closed="true" class="op">or</span><span xq="yes" start="387" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="398" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="408" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="422" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="436" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="447" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="448" prev-is-closed="true" class="step">/</span><span xq="yes" start="449" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="457" prev-is-closed="true" class="step">/</span><span xq="yes" start="458" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="467" prev-is-closed="true" class="filter">[</span><span xq="yes" start="468" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="474" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="475" prev-is-closed="true" class="op">=</span><span xq="yes" start="476" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="477" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="481" prev-is-closed="true" class="filter">]</span><span xq="yes" start="482" prev-is-closed="true" class="step">/</span><span xq="yes" start="483" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="493" prev-is-closed="true" class="step">/</span><span xq="yes" start="494" prev-is-closed="false" class="qname">xq:version</span><span xq="yes" start="504" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="505" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="506" prev-is-closed="true" class="op">or</span><span xq="yes" start="508" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="519" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="529" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="543" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="557" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="568" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="569" prev-is-closed="true" class="step">/</span><span xq="yes" start="570" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="578" prev-is-closed="true" class="step">/</span><span xq="yes" start="579" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="588" prev-is-closed="true" class="filter">[</span><span xq="yes" start="589" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="595" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="596" prev-is-closed="true" class="op">=</span><span xq="yes" start="597" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="598" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="602" prev-is-closed="true" class="filter">]</span><span xq="yes" start="603" prev-is-closed="true" class="step">/</span><span xq="yes" start="604" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="614" prev-is-closed="true" class="step">/</span><span xq="yes" start="615" prev-is-closed="false" class="qname">xq:since</span><span xq="yes" start="623" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="624" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="625" prev-is-closed="true" class="op">or</span><span xq="yes" start="627" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="638" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="648" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="662" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="676" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="687" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="688" prev-is-closed="true" class="step">/</span><span xq="yes" start="689" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="697" prev-is-closed="true" class="step">/</span><span xq="yes" start="698" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="707" prev-is-closed="true" class="filter">[</span><span xq="yes" start="708" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="714" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="715" prev-is-closed="true" class="op">=</span><span xq="yes" start="716" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="717" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="721" prev-is-closed="true" class="filter">]</span><span xq="yes" start="722" prev-is-closed="true" class="step">/</span><span xq="yes" start="723" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="733" prev-is-closed="true" class="step">/</span><span xq="yes" start="734" prev-is-closed="false" class="qname">xq:see</span><span xq="yes" start="740" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="741" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="742" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="743" prev-is-closed="true" class="op">then</span><span xq="yes" start="747" prev-is-closed="false" class="whitespace">&#xD;
           </span><span xq="yes" start="760" prev-is-closed="false" class="parenthesis">(</span><span pos="7687" class="es">&lt;</span><span name="xml-open-tag" pos="7688" class="en">h4</span><span name="x-tag-end" pos="7690" class="z">&gt;</span><span pos="7691" class="txt">Module Description</span><span pos="7709" class="sc">&lt;/</span><span name="xml-close-tag" pos="7711" class="cl">h4</span><span name="x-tag-end" pos="7713" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span xq="yes" start="16" prev-is-closed="false" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="38" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="52" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="66" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="77" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="78" prev-is-closed="true" class="step">/</span><span xq="yes" start="79" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="87" prev-is-closed="true" class="step">/</span><span xq="yes" start="88" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="97" prev-is-closed="true" class="filter">[</span><span xq="yes" start="98" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="104" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="true" class="op">=</span><span xq="yes" start="106" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="107" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="111" prev-is-closed="true" class="filter">]</span><span xq="yes" start="112" prev-is-closed="true" class="step">/</span><span xq="yes" start="113" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="123" prev-is-closed="true" class="step">/</span><span xq="yes" start="124" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="138" prev-is-closed="true" class="op">,</span><span xq="yes" start="139" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="141" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="142" prev-is-closed="true" class="op">,</span><span xq="yes" start="143" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="144" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="150" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="151" prev-is-closed="true" class="op">,</span><span xq="yes" start="152" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="7879" class="es">&lt;</span><span name="xml-open-tag" pos="7880" class="en">ul</span><span name="x-tag-end" pos="7882" class="z">&gt;</span><span pos="7883" class="txt">&#xD;
              </span><span name="nested-query" pos="7899" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
              </span><span xq="yes" start="17" prev-is-closed="true" class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="40" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="54" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="68" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="79" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="80" prev-is-closed="true" class="step">/</span><span xq="yes" start="81" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="89" prev-is-closed="true" class="step">/</span><span xq="yes" start="90" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="99" prev-is-closed="true" class="filter">[</span><span xq="yes" start="100" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="106" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="107" prev-is-closed="true" class="op">=</span><span xq="yes" start="108" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="109" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="113" prev-is-closed="true" class="filter">]</span><span xq="yes" start="114" prev-is-closed="true" class="step">/</span><span xq="yes" start="115" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="125" prev-is-closed="true" class="step">/</span><span xq="yes" start="126" prev-is-closed="false" class="qname">xq:author</span><span xq="yes" start="135" prev-is-closed="true" class="op">,</span><span xq="yes" start="136" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="8036" xq="yes">Author:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="27" prev-is-closed="false" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="49" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="63" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="77" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="88" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="89" prev-is-closed="true" class="step">/</span><span xq="yes" start="90" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="98" prev-is-closed="true" class="step">/</span><span xq="yes" start="99" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="108" prev-is-closed="true" class="filter">[</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="115" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="116" prev-is-closed="true" class="op">=</span><span xq="yes" start="117" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="118" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="122" prev-is-closed="true" class="filter">]</span><span xq="yes" start="123" prev-is-closed="true" class="step">/</span><span xq="yes" start="124" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="134" prev-is-closed="true" class="step">/</span><span xq="yes" start="135" prev-is-closed="false" class="qname">xq:version</span><span xq="yes" start="145" prev-is-closed="true" class="op">,</span><span xq="yes" start="146" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="8191" xq="yes">Version:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="27" prev-is-closed="false" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="49" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="63" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="77" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="88" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="89" prev-is-closed="true" class="step">/</span><span xq="yes" start="90" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="98" prev-is-closed="true" class="step">/</span><span xq="yes" start="99" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="108" prev-is-closed="true" class="filter">[</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="115" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="116" prev-is-closed="true" class="op">=</span><span xq="yes" start="117" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="118" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="122" prev-is-closed="true" class="filter">]</span><span xq="yes" start="123" prev-is-closed="true" class="step">/</span><span xq="yes" start="124" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="134" prev-is-closed="true" class="step">/</span><span xq="yes" start="135" prev-is-closed="false" class="qname">xq:since</span><span xq="yes" start="143" prev-is-closed="true" class="op">,</span><span xq="yes" start="144" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="8345" xq="yes">Since:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="27" prev-is-closed="false" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="49" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="63" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="77" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="88" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="89" prev-is-closed="true" class="step">/</span><span xq="yes" start="90" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="98" prev-is-closed="true" class="step">/</span><span xq="yes" start="99" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="108" prev-is-closed="true" class="filter">[</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="115" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="116" prev-is-closed="true" class="op">=</span><span xq="yes" start="117" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="118" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="122" prev-is-closed="true" class="filter">]</span><span xq="yes" start="123" prev-is-closed="true" class="step">/</span><span xq="yes" start="124" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="134" prev-is-closed="true" class="step">/</span><span xq="yes" start="135" prev-is-closed="false" class="qname">xq:see</span><span xq="yes" start="141" prev-is-closed="true" class="op">,</span><span xq="yes" start="142" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="8495" xq="yes">See:</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="11" prev-is-closed="true" class="whitespace">&#xD;
              </span><span name="unnested-xquery" pos="8527" class="op">}</span><span name="resume-x-literal-txt" pos="8528" class="txt">&#xD;
            </span><span pos="8542" class="sc">&lt;/</span><span name="xml-close-tag" pos="8544" class="cl">ul</span><span name="x-tag-end" pos="8546" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="8" prev-is-closed="true" class="op">else</span><span xq="yes" start="12" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="23" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="25" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="30" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="31" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="8579" class="op">}</span><span name="resume-x-literal-txt" pos="8580" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the high-level xqDoc HTML for any global variables&#xD;
 :  declared in the module.  In addition, cross-reference&#xD;
 :  links will be included for the following:&#xD;
 :  </span><span pos="8766" class="es">&lt;</span><span name="xml-open-tag" pos="8767" class="en">ul</span><span name="x-tag-end" pos="8769" class="z">&gt;</span><span pos="8770" class="txt">&#xD;
 :  </span><span pos="8776" class="es">&lt;</span><span name="xml-open-tag" pos="8777" class="en">li</span><span name="x-tag-end" pos="8779" class="z">&gt;</span><span pos="8780" class="txt">Functions (contained in this module) that </span><span pos="8822" class="es">&lt;</span><span name="xml-open-tag" pos="8823" class="en">i</span><span name="x-tag-end" pos="8824" class="z">&gt;</span><span pos="8825" class="txt">use</span><span pos="8828" class="sc">&lt;/</span><span name="xml-close-tag" pos="8830" class="cl">i</span><span name="x-tag-end" pos="8831" class="z">&gt;</span><span pos="8832" class="txt"> this variable</span><span pos="8846" class="sc">&lt;/</span><span name="xml-close-tag" pos="8848" class="cl">li</span><span name="x-tag-end" pos="8850" class="z">&gt;</span><span pos="8851" class="txt">&#xD;
 :  </span><span pos="8857" class="es">&lt;</span><span name="xml-open-tag" pos="8858" class="en">li</span><span name="x-tag-end" pos="8860" class="z">&gt;</span><span pos="8861" class="txt">Functions (not contained in this module) that </span><span pos="8907" class="es">&lt;</span><span name="xml-open-tag" pos="8908" class="en">i</span><span name="x-tag-end" pos="8909" class="z">&gt;</span><span pos="8910" class="txt">use</span><span pos="8913" class="sc">&lt;/</span><span name="xml-close-tag" pos="8915" class="cl">i</span><span name="x-tag-end" pos="8916" class="z">&gt;</span><span pos="8917" class="txt"> this variable</span><span pos="8931" class="sc">&lt;/</span><span name="xml-close-tag" pos="8933" class="cl">li</span><span name="x-tag-end" pos="8935" class="z">&gt;</span><span pos="8936" class="txt">&#xD;
 :  </span><span pos="8942" class="sc">&lt;/</span><span name="xml-close-tag" pos="8944" class="cl">ul</span><span name="x-tag-end" pos="8946" class="z">&gt;</span><span pos="8947" class="txt">&#xD;
 :  @param $uri the URI for the module&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)&#xD;
declare function display:print-variables($uri as xs:string, $local as xs:boolean) as element()* &#xD;
</span><span name="nested-query" pos="9253" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="filter">[</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="78" prev-is-closed="true" class="step">/</span><span xq="yes" start="79" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="86" prev-is-closed="true" class="op">=</span><span xq="yes" start="87" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="88" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="92" prev-is-closed="true" class="filter">]</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:variables</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:variable</span><span xq="yes" start="118" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="119" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="120" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="121" prev-is-closed="true" class="op">then</span><span xq="yes" start="125" prev-is-closed="false" class="whitespace">&#xD;
      </span><span xq="yes" start="133" prev-is-closed="false" class="parenthesis">(</span><span pos="9387" class="es">&lt;</span><span name="xml-open-tag" pos="9388" class="en">h4</span><span name="x-tag-end" pos="9390" class="z">&gt;</span><span pos="9391" class="txt">Variables</span><span pos="9400" class="sc">&lt;/</span><span name="xml-close-tag" pos="9402" class="cl">h4</span><span name="x-tag-end" pos="9404" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> &#xD;
       </span><span pos="9416" class="es">&lt;</span><span name="xml-open-tag" pos="9417" class="en">div</span><span name="xml-name-end" pos="9420" class="atn"> id</span><span name="x-equals" pos="9423" class="atneq">=</span><span name="xml-att-quote" pos="9424" class="z">"</span><span name="xml-literal-start" pos="9425" class="av">variables</span><span name="xml-att-quote" pos="9434" class="z">"</span><span name="x-tag-end" pos="9435" class="z">&gt;</span><span pos="9436" class="txt">&#xD;
       </span><span name="nested-query" pos="9445" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
            </span><span xq="yes" start="15" prev-is-closed="true" class="higher">for</span><span xq="yes" start="18" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="21" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="true" class="op">in</span><span xq="yes" start="24" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="25" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="39" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="53" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="64" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="65" prev-is-closed="true" class="step">/</span><span xq="yes" start="66" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="74" prev-is-closed="true" class="filter">[</span><span xq="yes" start="75" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="84" prev-is-closed="true" class="step">/</span><span xq="yes" start="85" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="91" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="92" prev-is-closed="true" class="op">=</span><span xq="yes" start="93" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="94" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="98" prev-is-closed="true" class="filter">]</span><span xq="yes" start="99" prev-is-closed="true" class="step">/</span><span xq="yes" start="100" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="108" prev-is-closed="true" class="step">/</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:variables</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="qname">xq:variable</span><span xq="yes" start="133" prev-is-closed="true" class="whitespace">&#xD;
            </span><span xq="yes" start="147" prev-is-closed="true" class="op">return</span><span xq="yes" start="153" prev-is-closed="false" class="whitespace"> &#xD;
                </span><span pos="9617" class="es">&lt;</span><span name="xml-open-tag" pos="9618" class="en">div</span><span name="x-tag-end" pos="9621" class="z">&gt;</span><span pos="9622" class="txt">&#xD;
                 </span><span pos="9641" class="es">&lt;</span><span name="xml-open-tag" pos="9642" class="en">a</span><span name="xml-name-end" pos="9643" class="atn"> name</span><span name="x-equals" pos="9648" class="atneq">=</span><span name="xml-att-quote" pos="9649" class="z">"</span><span name="nested-query" pos="9650" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="9662" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="13" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="15" prev-is-closed="true" class="step">/</span><span xq="yes" start="16" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="22" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="23" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="24" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="9689" class="op">}</span><span name="xml-att-quote" pos="9690" class="z">"</span><span name="x-tag-end" pos="9691" class="z">/&gt;</span><span pos="9693" class="txt">&#xD;
                 </span><span pos="9712" class="es">&lt;</span><span name="xml-open-tag" pos="9713" class="en">ul</span><span name="xml-name-end" pos="9715" class="atn"> class</span><span name="x-equals" pos="9721" class="atneq">=</span><span name="xml-att-quote" pos="9722" class="z">"</span><span name="xml-literal-start" pos="9723" class="av">method</span><span name="xml-att-quote" pos="9729" class="z">"</span><span name="x-tag-end" pos="9730" class="z">&gt;</span><span pos="9731" class="txt">&#xD;
                   </span><span pos="9752" class="es">&lt;</span><span name="xml-open-tag" pos="9753" class="en">li</span><span name="xml-name-end" pos="9755" class="atn"> class</span><span name="x-equals" pos="9761" class="atneq">=</span><span name="xml-att-quote" pos="9762" class="z">"</span><span name="xml-literal-start" pos="9763" class="av">left</span><span name="xml-att-quote" pos="9767" class="z">"</span><span name="x-tag-end" pos="9768" class="z">&gt;</span><span name="nested-query" pos="9769" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="9781" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="13" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="15" prev-is-closed="true" class="step">/</span><span xq="yes" start="16" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="22" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="23" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="24" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="9808" class="op">}</span><span pos="9809" class="sc">&lt;/</span><span name="xml-close-tag" pos="9811" class="cl">li</span><span name="x-tag-end" pos="9813" class="z">&gt;</span><span pos="9814" class="txt">&#xD;
                   </span><span pos="9835" class="es">&lt;</span><span name="xml-open-tag" pos="9836" class="en">li</span><span name="xml-name-end" pos="9838" class="atn"> class</span><span name="x-equals" pos="9844" class="atneq">=</span><span name="xml-att-quote" pos="9845" class="z">"</span><span name="xml-literal-start" pos="9846" class="av">right</span><span name="xml-att-quote" pos="9851" class="z">"</span><span name="x-tag-end" pos="9852" class="z">&gt;</span><span name="nested-query" pos="9853" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="variable">$v</span><span xq="yes" start="4" prev-is-closed="true" class="step">/</span><span xq="yes" start="5" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="15" prev-is-closed="true" class="step">/</span><span xq="yes" start="16" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="30" prev-is-closed="true" class="step">/</span><span xq="yes" start="31" prev-is-closed="false" class="node">node(</span><span xq="yes" start="36" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="37" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="9891" class="op">}</span><span pos="9892" class="sc">&lt;/</span><span name="xml-close-tag" pos="9894" class="cl">li</span><span name="x-tag-end" pos="9896" class="z">&gt;</span><span pos="9897" class="txt">&#xD;
                 </span><span pos="9916" class="sc">&lt;/</span><span name="xml-close-tag" pos="9918" class="cl">ul</span><span name="x-tag-end" pos="9920" class="z">&gt;</span><span pos="9921" class="txt">&#xD;
                 </span><span pos="9940" class="es">&lt;</span><span name="xml-open-tag" pos="9941" class="en">ul</span><span name="x-tag-end" pos="9943" class="z">&gt;</span><span pos="9944" class="txt">&#xD;
                 </span><span name="nested-query" pos="9963" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="26" prev-is-closed="true" class="step">/</span><span xq="yes" start="27" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="37" prev-is-closed="true" class="step">/</span><span xq="yes" start="38" prev-is-closed="false" class="qname">xq:since</span><span xq="yes" start="46" prev-is-closed="true" class="op">,</span><span xq="yes" start="47" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="10011" xq="yes">Since:</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="10029" class="op">}</span><span name="resume-x-literal-txt" pos="10030" class="txt">&#xD;
                 </span><span name="nested-query" pos="10049" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="26" prev-is-closed="true" class="step">/</span><span xq="yes" start="27" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="37" prev-is-closed="true" class="step">/</span><span xq="yes" start="38" prev-is-closed="false" class="qname">xq:see</span><span xq="yes" start="44" prev-is-closed="true" class="op">,</span><span xq="yes" start="45" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="10095" xq="yes">See:</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="10111" class="op">}</span><span name="resume-x-literal-txt" pos="10112" class="txt">&#xD;
                 </span><span pos="10131" class="sc">&lt;/</span><span name="xml-close-tag" pos="10133" class="cl">ul</span><span name="x-tag-end" pos="10135" class="z">&gt;</span><span pos="10136" class="txt">&#xD;
                 </span><span name="nested-query" pos="10155" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-internal-variable-references</span><span class="parenthesis">(</span><span xq="yes" start="45" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="47" prev-is-closed="true" class="op">,</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="55" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="56" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="10212" class="op">}</span><span name="resume-x-literal-txt" pos="10213" class="txt">&#xD;
                 </span><span name="nested-query" pos="10232" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-external-variable-references</span><span class="parenthesis">(</span><span xq="yes" start="45" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="47" prev-is-closed="true" class="op">,</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="55" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="56" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="10289" class="op">}</span><span name="resume-x-literal-txt" pos="10290" class="txt">&#xD;
                </span><span pos="10308" class="sc">&lt;/</span><span name="xml-close-tag" pos="10310" class="cl">div</span><span name="x-tag-end" pos="10313" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
       </span><span name="unnested-xquery" pos="10323" class="op">}</span><span name="resume-x-literal-txt" pos="10324" class="txt">       &#xD;
       </span><span pos="10340" class="sc">&lt;/</span><span name="xml-close-tag" pos="10342" class="cl">div</span><span name="x-tag-end" pos="10345" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="10365" class="op">}</span><span name="resume-x-literal-txt" pos="10366" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the high-level xqDoc HTML for any modules&#xD;
 :  imported by the module.  &#xD;
 :&#xD;
 :  @param $uri the URI for the module&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)&#xD;
declare function display:print-imports($uri as xs:string, $local as xs:boolean) as element()* &#xD;
</span><span name="nested-query" pos="10770" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="filter">[</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="78" prev-is-closed="true" class="step">/</span><span xq="yes" start="79" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="86" prev-is-closed="true" class="op">=</span><span xq="yes" start="87" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="88" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="92" prev-is-closed="true" class="filter">]</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:imports</span><span xq="yes" start="104" prev-is-closed="true" class="step">/</span><span xq="yes" start="105" prev-is-closed="false" class="qname">xq:import</span><span xq="yes" start="114" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="115" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="116" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="117" prev-is-closed="true" class="op">then</span><span xq="yes" start="121" prev-is-closed="false" class="whitespace">&#xD;
       </span><span xq="yes" start="130" prev-is-closed="false" class="parenthesis">(</span><span pos="10901" class="es">&lt;</span><span name="xml-open-tag" pos="10902" class="en">h4</span><span name="x-tag-end" pos="10904" class="z">&gt;</span><span pos="10905" class="txt">Imported Modules</span><span pos="10921" class="sc">&lt;/</span><span name="xml-close-tag" pos="10923" class="cl">h4</span><span name="x-tag-end" pos="10925" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="10937" class="es">&lt;</span><span name="xml-open-tag" pos="10938" class="en">div</span><span name="xml-name-end" pos="10941" class="atn"> id</span><span name="x-equals" pos="10944" class="atneq">=</span><span name="xml-att-quote" pos="10945" class="z">"</span><span name="xml-literal-start" pos="10946" class="av">imports</span><span name="xml-att-quote" pos="10953" class="z">"</span><span name="x-tag-end" pos="10954" class="z">&gt;</span><span pos="10955" class="txt">&#xD;
          </span><span name="nested-query" pos="10967" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
            </span><span xq="yes" start="15" prev-is-closed="true" class="higher">for</span><span xq="yes" start="18" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="21" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="true" class="op">in</span><span xq="yes" start="24" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="25" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="39" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="53" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="64" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="65" prev-is-closed="true" class="step">/</span><span xq="yes" start="66" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="74" prev-is-closed="true" class="filter">[</span><span xq="yes" start="75" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="84" prev-is-closed="true" class="step">/</span><span xq="yes" start="85" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="91" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="92" prev-is-closed="true" class="op">=</span><span xq="yes" start="93" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="94" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="98" prev-is-closed="true" class="filter">]</span><span xq="yes" start="99" prev-is-closed="true" class="step">/</span><span xq="yes" start="100" prev-is-closed="false" class="qname">xq:imports</span><span xq="yes" start="110" prev-is-closed="true" class="step">/</span><span xq="yes" start="111" prev-is-closed="false" class="qname">xq:import</span><span xq="yes" start="120" prev-is-closed="true" class="whitespace">&#xD;
            </span><span xq="yes" start="134" prev-is-closed="true" class="op">return</span><span xq="yes" start="140" prev-is-closed="false" class="whitespace"> &#xD;
              </span><span pos="11124" class="es">&lt;</span><span name="xml-open-tag" pos="11125" class="en">div</span><span name="x-tag-end" pos="11128" class="z">&gt;</span><span pos="11129" class="txt">&#xD;
               </span><span pos="11146" class="es">&lt;</span><span name="xml-open-tag" pos="11147" class="en">ul</span><span name="xml-name-end" pos="11149" class="atn"> class</span><span name="x-equals" pos="11155" class="atneq">=</span><span name="xml-att-quote" pos="11156" class="z">"</span><span name="xml-literal-start" pos="11157" class="av">method</span><span name="xml-att-quote" pos="11163" class="z">"</span><span name="x-tag-end" pos="11164" class="z">&gt;</span><span pos="11165" class="txt">&#xD;
               </span><span pos="11182" class="es">&lt;</span><span name="xml-open-tag" pos="11183" class="en">li</span><span name="xml-name-end" pos="11185" class="atn"> class</span><span name="x-equals" pos="11191" class="atneq">=</span><span name="xml-att-quote" pos="11192" class="z">"</span><span name="xml-literal-start" pos="11193" class="av">left</span><span name="xml-att-quote" pos="11197" class="z">"</span><span name="x-tag-end" pos="11198" class="z">&gt;</span><span pos="11199" class="txt">&#xD;
               </span><span name="nested-query" pos="11216" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="filter">[</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="103" prev-is-closed="true" class="step">/</span><span xq="yes" start="104" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="110" prev-is-closed="true" class="filter">]</span><span xq="yes" start="111" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="112" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="113" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="114" prev-is-closed="true" class="op">then</span><span xq="yes" start="118" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span xq="yes" start="137" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="11372" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                    </span><span xq="yes" start="40" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="46" prev-is-closed="true" class="op">,</span><span xq="yes" start="47" prev-is-closed="false" class="whitespace"> &#xD;
                                    </span><span xq="yes" start="86" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="105" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="119" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="133" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="144" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="145" prev-is-closed="true" class="step">/</span><span xq="yes" start="146" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="154" prev-is-closed="true" class="step">/</span><span xq="yes" start="155" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="164" prev-is-closed="true" class="filter">[</span><span xq="yes" start="165" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="171" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="172" prev-is-closed="true" class="op">=</span><span xq="yes" start="173" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="174" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="176" prev-is-closed="true" class="step">/</span><span xq="yes" start="177" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="183" prev-is-closed="true" class="filter">]</span><span xq="yes" start="184" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="185" prev-is-closed="true" class="op">,</span><span xq="yes" start="186" prev-is-closed="false" class="whitespace">&#xD;
                                    </span><span xq="yes" start="224" prev-is-closed="false" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="243" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="253" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="255" prev-is-closed="true" class="step">/</span><span xq="yes" start="256" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="262" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="263" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="264" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="265" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="282" prev-is-closed="true" class="op">else</span><span xq="yes" start="286" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span xq="yes" start="305" prev-is-closed="false" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="324" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="334" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="336" prev-is-closed="true" class="step">/</span><span xq="yes" start="337" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="343" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="344" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="345" prev-is-closed="true" class="whitespace"> &#xD;
               </span><span name="unnested-xquery" pos="11746" class="op">}</span><span name="resume-x-literal-txt" pos="11747" class="txt">&#xD;
               </span><span pos="11764" class="sc">&lt;/</span><span name="xml-close-tag" pos="11766" class="cl">li</span><span name="x-tag-end" pos="11768" class="z">&gt;</span><span pos="11769" class="txt">&#xD;
               </span><span pos="11786" class="es">&lt;</span><span name="xml-open-tag" pos="11787" class="en">li</span><span name="xml-name-end" pos="11789" class="atn"> class</span><span name="x-equals" pos="11795" class="atneq">=</span><span name="xml-att-quote" pos="11796" class="z">"</span><span name="xml-literal-start" pos="11797" class="av">right</span><span name="xml-att-quote" pos="11802" class="z">"</span><span name="x-tag-end" pos="11803" class="z">&gt;</span><span pos="11804" class="txt"> </span><span name="nested-query" pos="11805" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$v</span><span xq="yes" start="3" prev-is-closed="true" class="step">/</span><span xq="yes" start="4" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="14" prev-is-closed="true" class="step">/</span><span xq="yes" start="15" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="29" prev-is-closed="true" class="step">/</span><span xq="yes" start="30" prev-is-closed="false" class="node">node(</span><span xq="yes" start="35" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="36" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="11842" class="op">}</span><span pos="11843" class="sc">&lt;/</span><span name="xml-close-tag" pos="11845" class="cl">li</span><span name="x-tag-end" pos="11847" class="z">&gt;</span><span pos="11848" class="txt">           &#xD;
               </span><span pos="11876" class="sc">&lt;/</span><span name="xml-close-tag" pos="11878" class="cl">ul</span><span name="x-tag-end" pos="11880" class="z">&gt;</span><span pos="11881" class="txt">&#xD;
               </span><span pos="11898" class="es">&lt;</span><span name="xml-open-tag" pos="11899" class="en">ul</span><span name="x-tag-end" pos="11901" class="z">&gt;</span><span pos="11902" class="txt">&#xD;
               </span><span name="nested-query" pos="11919" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="26" prev-is-closed="true" class="step">/</span><span xq="yes" start="27" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="37" prev-is-closed="true" class="step">/</span><span xq="yes" start="38" prev-is-closed="false" class="qname">xq:since</span><span xq="yes" start="46" prev-is-closed="true" class="op">,</span><span xq="yes" start="47" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="11967" xq="yes">Since:</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="11985" class="op">}</span><span name="resume-x-literal-txt" pos="11986" class="txt">&#xD;
               </span><span name="nested-query" pos="12003" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-comment</span><span class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="variable">$v</span><span xq="yes" start="26" prev-is-closed="true" class="step">/</span><span xq="yes" start="27" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="37" prev-is-closed="true" class="step">/</span><span xq="yes" start="38" prev-is-closed="false" class="qname">xq:see</span><span xq="yes" start="44" prev-is-closed="true" class="op">,</span><span xq="yes" start="45" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="12049" xq="yes">See:</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="12065" class="op">}</span><span name="resume-x-literal-txt" pos="12066" class="txt">&#xD;
               </span><span pos="12083" class="sc">&lt;/</span><span name="xml-close-tag" pos="12085" class="cl">ul</span><span name="x-tag-end" pos="12087" class="z">&gt;</span><span pos="12088" class="txt">&#xD;
              </span><span pos="12104" class="sc">&lt;/</span><span name="xml-close-tag" pos="12106" class="cl">div</span><span name="x-tag-end" pos="12109" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
            </span><span name="unnested-xquery" pos="12124" class="op">}</span><span name="resume-x-literal-txt" pos="12125" class="txt">&#xD;
        </span><span pos="12135" class="sc">&lt;/</span><span name="xml-close-tag" pos="12137" class="cl">div</span><span name="x-tag-end" pos="12140" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="12160" class="op">}</span><span name="resume-x-literal-txt" pos="12161" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the xqDoc HTML method summary for each function defined&#xD;
 :  in the module.  The method summary will contain the function&#xD;
 :  signature and the first </span><span pos="12336" class="es">&lt;</span><span name="xml-open-tag" pos="12337" class="en">i</span><span name="x-tag-end" pos="12338" class="z">&gt;</span><span pos="12339" class="txt">sentence</span><span pos="12347" class="sc">&lt;/</span><span name="xml-close-tag" pos="12349" class="cl">i</span><span name="x-tag-end" pos="12350" class="z">&gt;</span><span pos="12351" class="txt"> of any xqDoc comments associated&#xD;
 :  with the function.&#xD;
 :&#xD;
 :  @param $uri the URI for the module&#xD;
 :  @return HTML.&#xD;
 :)&#xD;
declare function display:print-method-summary($uri as xs:string) as element()* &#xD;
</span><span name="nested-query" pos="12559" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="filter">[</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="78" prev-is-closed="true" class="step">/</span><span xq="yes" start="79" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="86" prev-is-closed="true" class="op">=</span><span xq="yes" start="87" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="88" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="92" prev-is-closed="true" class="filter">]</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="118" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="119" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="120" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="121" prev-is-closed="true" class="op">then</span><span xq="yes" start="125" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="131" prev-is-closed="false" class="parenthesis">(</span><span pos="12691" class="es">&lt;</span><span name="xml-open-tag" pos="12692" class="en">h4</span><span name="x-tag-end" pos="12694" class="z">&gt;</span><span pos="12695" class="txt">Function Summary</span><span pos="12711" class="sc">&lt;/</span><span name="xml-close-tag" pos="12713" class="cl">h4</span><span name="x-tag-end" pos="12715" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
     </span><span pos="12724" class="es">&lt;</span><span name="xml-open-tag" pos="12725" class="en">div</span><span name="xml-name-end" pos="12728" class="atn"> id</span><span name="x-equals" pos="12731" class="atneq">=</span><span name="xml-att-quote" pos="12732" class="z">"</span><span name="xml-literal-start" pos="12733" class="av">methods</span><span name="xml-att-quote" pos="12740" class="z">"</span><span name="x-tag-end" pos="12741" class="z">&gt;</span><span pos="12742" class="txt"> &#xD;
     </span><span pos="12750" class="es">&lt;</span><span name="xml-open-tag" pos="12751" class="en">a</span><span name="xml-name-end" pos="12752" class="atn"> name</span><span name="x-equals" pos="12757" class="atneq">=</span><span name="xml-att-quote" pos="12758" class="z">"</span><span name="xml-literal-start" pos="12759" class="av">methods</span><span name="xml-att-quote" pos="12766" class="z">"</span><span name="x-tag-end" pos="12767" class="z">/&gt;</span><span pos="12769" class="txt">  &#xD;
        </span><span name="nested-query" pos="12781" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="12" prev-is-closed="true" class="higher">for</span><span xq="yes" start="15" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="16" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="op">in</span><span xq="yes" start="21" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="50" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="step">/</span><span xq="yes" start="63" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="71" prev-is-closed="true" class="filter">[</span><span xq="yes" start="72" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="88" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="89" prev-is-closed="true" class="op">=</span><span xq="yes" start="90" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="91" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="95" prev-is-closed="true" class="filter">]</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="109" prev-is-closed="true" class="step">/</span><span xq="yes" start="110" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="121" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="132" prev-is-closed="true" class="qname">order</span><span xq="yes" start="137" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="138" prev-is-closed="true" class="qname">by</span><span xq="yes" start="140" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="141" prev-is-closed="true" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="160" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="170" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="172" prev-is-closed="true" class="step">/</span><span xq="yes" start="173" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="180" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="181" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="182" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="183" prev-is-closed="true" class="qname">ascending</span><span xq="yes" start="192" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="203" prev-is-closed="true" class="op">return</span><span xq="yes" start="209" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="13004" class="es">&lt;</span><span name="xml-open-tag" pos="13005" class="en">ul</span><span name="xml-name-end" pos="13007" class="atn"> class</span><span name="x-equals" pos="13013" class="atneq">=</span><span name="xml-att-quote" pos="13014" class="z">"</span><span name="xml-literal-start" pos="13015" class="av">method</span><span name="xml-att-quote" pos="13021" class="z">"</span><span name="x-tag-end" pos="13022" class="z">&gt;</span><span pos="13023" class="txt">&#xD;
              </span><span pos="13039" class="es">&lt;</span><span name="xml-open-tag" pos="13040" class="en">li</span><span name="xml-name-end" pos="13042" class="atn"> class</span><span name="x-equals" pos="13048" class="atneq">=</span><span name="xml-att-quote" pos="13049" class="z">"</span><span name="xml-literal-start" pos="13050" class="av">left</span><span name="xml-att-quote" pos="13054" class="z">"</span><span name="x-tag-end" pos="13055" class="z">&gt;</span><span pos="13056" class="txt">&#xD;
               </span><span pos="13073" class="es">&lt;</span><span name="xml-open-tag" pos="13074" class="en">a</span><span name="xml-name-end" pos="13075" class="atn"> href</span><span name="x-equals" pos="13080" class="atneq">=</span><span name="xml-att-quote" pos="13081" class="z">"</span><span name="nested-query" pos="13082" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" pos="13093" xq="yes">#</span><span class="op">'</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="34" prev-is-closed="true" class="step">/</span><span xq="yes" start="35" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="42" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="43" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="44" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="13140" class="op">}</span><span name="xml-att-quote" pos="13141" class="z">"</span><span name="x-tag-end" pos="13142" class="z">&gt;</span><span name="nested-query" pos="13143" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="32" prev-is-closed="true" class="step">/</span><span xq="yes" start="33" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="40" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="41" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="13185" class="op">}</span><span pos="13186" class="sc">&lt;/</span><span name="xml-close-tag" pos="13188" class="cl">a</span><span name="x-tag-end" pos="13189" class="z">&gt;</span><span pos="13190" class="txt">&#xD;
               </span><span pos="13207" class="es">&lt;</span><span name="xml-open-tag" pos="13208" class="en">div</span><span name="xml-name-end" pos="13211" class="atn"> class</span><span name="x-equals" pos="13217" class="atneq">=</span><span name="xml-att-quote" pos="13218" class="z">"</span><span name="xml-literal-start" pos="13219" class="av">description</span><span name="xml-att-quote" pos="13230" class="z">"</span><span name="x-tag-end" pos="13231" class="z">&gt;</span><span pos="13232" class="txt">&#xD;
               </span><span name="nested-query" pos="13249" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                 </span><span xq="yes" start="20" prev-is-closed="true" class="if">if</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="23" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="34" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="36" prev-is-closed="true" class="step">/</span><span xq="yes" start="37" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="47" prev-is-closed="true" class="step">/</span><span xq="yes" start="48" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="62" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="63" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="64" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="65" prev-is-closed="true" class="op">then</span><span xq="yes" start="69" prev-is-closed="false" class="whitespace"> &#xD;
                    </span><span xq="yes" start="92" prev-is-closed="false" class="if">if</span><span xq="yes" start="94" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="95" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="96" prev-is-closed="false" class="function">fn:substring-before</span><span class="parenthesis">(</span><span xq="yes" start="116" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="118" prev-is-closed="true" class="step">/</span><span xq="yes" start="119" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="129" prev-is-closed="true" class="step">/</span><span xq="yes" start="130" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="144" prev-is-closed="true" class="op">,</span><span xq="yes" start="145" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="13395" xq="yes">.</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="4" prev-is-closed="true" class="op">then</span><span xq="yes" start="8" prev-is-closed="false" class="whitespace">&#xD;
                      </span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span xq="yes" start="42" prev-is-closed="false" class="function">fn:substring-before</span><span class="parenthesis">(</span><span xq="yes" start="62" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="64" prev-is-closed="true" class="step">/</span><span xq="yes" start="65" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="75" prev-is-closed="true" class="step">/</span><span xq="yes" start="76" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="90" prev-is-closed="true" class="op">,</span><span xq="yes" start="91" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="13489" xq="yes">.</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="op">,</span><span xq="yes" start="3" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="13495" xq="yes">.</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="24" prev-is-closed="true" class="op">else</span><span xq="yes" start="28" prev-is-closed="false" class="whitespace">&#xD;
                      </span><span xq="yes" start="52" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="62" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="64" prev-is-closed="true" class="step">/</span><span xq="yes" start="65" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="75" prev-is-closed="true" class="step">/</span><span xq="yes" start="76" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="90" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="91" prev-is-closed="true" class="whitespace">&#xD;
                 </span><span xq="yes" start="110" prev-is-closed="true" class="op">else</span><span xq="yes" start="114" prev-is-closed="false" class="whitespace">&#xD;
                    </span><span xq="yes" start="136" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="137" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="138" prev-is-closed="true" class="whitespace">&#xD;
               </span><span name="unnested-xquery" pos="13652" class="op">}</span><span name="resume-x-literal-txt" pos="13653" class="txt">&#xD;
               </span><span pos="13670" class="sc">&lt;/</span><span name="xml-close-tag" pos="13672" class="cl">div</span><span name="x-tag-end" pos="13675" class="z">&gt;</span><span pos="13676" class="txt">&#xD;
              </span><span pos="13692" class="sc">&lt;/</span><span name="xml-close-tag" pos="13694" class="cl">li</span><span name="x-tag-end" pos="13696" class="z">&gt;</span><span pos="13697" class="txt">&#xD;
              </span><span pos="13713" class="es">&lt;</span><span name="xml-open-tag" pos="13714" class="en">li</span><span name="xml-name-end" pos="13716" class="atn"> class</span><span name="x-equals" pos="13722" class="atneq">=</span><span name="xml-att-quote" pos="13723" class="z">"</span><span name="xml-literal-start" pos="13724" class="av">right</span><span name="xml-att-quote" pos="13729" class="z">"</span><span name="x-tag-end" pos="13730" class="z">&gt;</span><span pos="13731" class="txt">&#xD;
               </span><span name="nested-query" pos="13748" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:print-signature</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="27" prev-is-closed="true" class="step">/</span><span xq="yes" start="28" prev-is-closed="false" class="qname">xq:signature</span><span xq="yes" start="40" prev-is-closed="true" class="op">,</span><span xq="yes" start="41" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="42" prev-is-closed="false" class="function">fn:true</span><span class="parenthesis">(</span><span xq="yes" start="50" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="51" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="13800" class="op">}</span><span name="resume-x-literal-txt" pos="13801" class="txt">&#xD;
              </span><span pos="13817" class="sc">&lt;/</span><span name="xml-close-tag" pos="13819" class="cl">li</span><span name="x-tag-end" pos="13821" class="z">&gt;</span><span pos="13822" class="txt">&#xD;
            </span><span pos="13836" class="sc">&lt;/</span><span name="xml-close-tag" pos="13838" class="cl">ul</span><span name="x-tag-end" pos="13840" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
          </span><span name="unnested-xquery" pos="13853" class="op">}</span><span name="resume-x-literal-txt" pos="13854" class="txt">&#xD;
    </span><span pos="13860" class="sc">&lt;/</span><span name="xml-close-tag" pos="13862" class="cl">div</span><span name="x-tag-end" pos="13865" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="13885" class="op">}</span><span name="resume-x-literal-txt" pos="13886" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the xqDoc HTML method detail for each function defined&#xD;
 :  in the module.  The method detail will contain the function&#xD;
 :  signature and all xqDoc comments associated with the function.  In&#xD;
 :  addition, cross-reference links will be included for the following:&#xD;
 :  </span><span pos="14180" class="es">&lt;</span><span name="xml-open-tag" pos="14181" class="en">ul</span><span name="x-tag-end" pos="14183" class="z">&gt;</span><span pos="14184" class="txt">&#xD;
 :  </span><span pos="14190" class="es">&lt;</span><span name="xml-open-tag" pos="14191" class="en">li</span><span name="x-tag-end" pos="14193" class="z">&gt;</span><span pos="14194" class="txt">Functions (contained in this module) that </span><span pos="14236" class="es">&lt;</span><span name="xml-open-tag" pos="14237" class="en">i</span><span name="x-tag-end" pos="14238" class="z">&gt;</span><span pos="14239" class="txt">are used</span><span pos="14247" class="sc">&lt;/</span><span name="xml-close-tag" pos="14249" class="cl">i</span><span name="x-tag-end" pos="14250" class="z">&gt;</span><span pos="14251" class="txt"> by this function</span><span pos="14268" class="sc">&lt;/</span><span name="xml-close-tag" pos="14270" class="cl">li</span><span name="x-tag-end" pos="14272" class="z">&gt;</span><span pos="14273" class="txt">&#xD;
 :  </span><span pos="14279" class="es">&lt;</span><span name="xml-open-tag" pos="14280" class="en">li</span><span name="x-tag-end" pos="14282" class="z">&gt;</span><span pos="14283" class="txt">Functions (not contained in this module) that </span><span pos="14329" class="es">&lt;</span><span name="xml-open-tag" pos="14330" class="en">i</span><span name="x-tag-end" pos="14331" class="z">&gt;</span><span pos="14332" class="txt">are used</span><span pos="14340" class="sc">&lt;/</span><span name="xml-close-tag" pos="14342" class="cl">i</span><span name="x-tag-end" pos="14343" class="z">&gt;</span><span pos="14344" class="txt"> by this function</span><span pos="14361" class="sc">&lt;/</span><span name="xml-close-tag" pos="14363" class="cl">li</span><span name="x-tag-end" pos="14365" class="z">&gt;</span><span pos="14366" class="txt">&#xD;
 :  </span><span pos="14372" class="es">&lt;</span><span name="xml-open-tag" pos="14373" class="en">li</span><span name="x-tag-end" pos="14375" class="z">&gt;</span><span pos="14376" class="txt">Functions (contained in this module) that </span><span pos="14418" class="es">&lt;</span><span name="xml-open-tag" pos="14419" class="en">i</span><span name="x-tag-end" pos="14420" class="z">&gt;</span><span pos="14421" class="txt">use</span><span pos="14424" class="sc">&lt;/</span><span name="xml-close-tag" pos="14426" class="cl">i</span><span name="x-tag-end" pos="14427" class="z">&gt;</span><span pos="14428" class="txt"> this function</span><span pos="14442" class="sc">&lt;/</span><span name="xml-close-tag" pos="14444" class="cl">li</span><span name="x-tag-end" pos="14446" class="z">&gt;</span><span pos="14447" class="txt">&#xD;
 :  </span><span pos="14453" class="es">&lt;</span><span name="xml-open-tag" pos="14454" class="en">li</span><span name="x-tag-end" pos="14456" class="z">&gt;</span><span pos="14457" class="txt">Functions (not contained in this module) that </span><span pos="14503" class="es">&lt;</span><span name="xml-open-tag" pos="14504" class="en">i</span><span name="x-tag-end" pos="14505" class="z">&gt;</span><span pos="14506" class="txt">use</span><span pos="14509" class="sc">&lt;/</span><span name="xml-close-tag" pos="14511" class="cl">i</span><span name="x-tag-end" pos="14512" class="z">&gt;</span><span pos="14513" class="txt"> this function</span><span pos="14527" class="sc">&lt;/</span><span name="xml-close-tag" pos="14529" class="cl">li</span><span name="x-tag-end" pos="14531" class="z">&gt;</span><span pos="14532" class="txt">&#xD;
 :  </span><span pos="14538" class="es">&lt;</span><span name="xml-open-tag" pos="14539" class="en">li</span><span name="x-tag-end" pos="14541" class="z">&gt;</span><span pos="14542" class="txt">Variables (contained in this module) that </span><span pos="14584" class="es">&lt;</span><span name="xml-open-tag" pos="14585" class="en">i</span><span name="x-tag-end" pos="14586" class="z">&gt;</span><span pos="14587" class="txt">are used</span><span pos="14595" class="sc">&lt;/</span><span name="xml-close-tag" pos="14597" class="cl">i</span><span name="x-tag-end" pos="14598" class="z">&gt;</span><span pos="14599" class="txt"> by this function</span><span pos="14616" class="sc">&lt;/</span><span name="xml-close-tag" pos="14618" class="cl">li</span><span name="x-tag-end" pos="14620" class="z">&gt;</span><span pos="14621" class="txt">&#xD;
 :  </span><span pos="14627" class="es">&lt;</span><span name="xml-open-tag" pos="14628" class="en">li</span><span name="x-tag-end" pos="14630" class="z">&gt;</span><span pos="14631" class="txt">Variables (not contained in this module) that </span><span pos="14677" class="es">&lt;</span><span name="xml-open-tag" pos="14678" class="en">i</span><span name="x-tag-end" pos="14679" class="z">&gt;</span><span pos="14680" class="txt">are used</span><span pos="14688" class="sc">&lt;/</span><span name="xml-close-tag" pos="14690" class="cl">i</span><span name="x-tag-end" pos="14691" class="z">&gt;</span><span pos="14692" class="txt"> by this function</span><span pos="14709" class="sc">&lt;/</span><span name="xml-close-tag" pos="14711" class="cl">li</span><span name="x-tag-end" pos="14713" class="z">&gt;</span><span pos="14714" class="txt">&#xD;
 :  </span><span pos="14720" class="sc">&lt;/</span><span name="xml-close-tag" pos="14722" class="cl">ul</span><span name="x-tag-end" pos="14724" class="z">&gt;</span><span pos="14725" class="txt">&#xD;
 :&#xD;
 :  @param $uri the URI for the module&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML.&#xD;
 :)&#xD;
declare function display:print-method-detail($uri as xs:string, $local as xs:boolean) as item()* &#xD;
</span><span name="nested-query" pos="15036" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="filter">[</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="78" prev-is-closed="true" class="step">/</span><span xq="yes" start="79" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="86" prev-is-closed="true" class="op">=</span><span xq="yes" start="87" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="88" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="92" prev-is-closed="true" class="filter">]</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="118" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="119" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="120" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="121" prev-is-closed="true" class="op">then</span><span xq="yes" start="125" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="131" prev-is-closed="false" class="parenthesis">(</span><span pos="15168" class="es">&lt;</span><span name="xml-open-tag" pos="15169" class="en">h4</span><span name="x-tag-end" pos="15171" class="z">&gt;</span><span pos="15172" class="txt">Function Detail</span><span pos="15187" class="sc">&lt;/</span><span name="xml-close-tag" pos="15189" class="cl">h4</span><span name="x-tag-end" pos="15191" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
     </span><span pos="15200" class="es">&lt;</span><span name="xml-open-tag" pos="15201" class="en">div</span><span name="xml-name-end" pos="15204" class="atn"> id</span><span name="x-equals" pos="15207" class="atneq">=</span><span name="xml-att-quote" pos="15208" class="z">"</span><span name="xml-literal-start" pos="15209" class="av">methoddetail</span><span name="xml-att-quote" pos="15221" class="z">"</span><span name="x-tag-end" pos="15222" class="z">&gt;</span><span pos="15223" class="txt">&#xD;
     </span><span name="nested-query" pos="15230" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="9" prev-is-closed="true" class="higher">for</span><span xq="yes" start="12" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="13" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="15" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="16" prev-is-closed="true" class="op">in</span><span xq="yes" start="18" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="filter">[</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="78" prev-is-closed="true" class="step">/</span><span xq="yes" start="79" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="86" prev-is-closed="true" class="op">=</span><span xq="yes" start="87" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="88" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="92" prev-is-closed="true" class="filter">]</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="118" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="126" prev-is-closed="true" class="qname">order</span><span xq="yes" start="131" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="132" prev-is-closed="true" class="qname">by</span><span xq="yes" start="134" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="135" prev-is-closed="true" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="154" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="164" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="166" prev-is-closed="true" class="step">/</span><span xq="yes" start="167" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="174" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="175" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="176" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="177" prev-is-closed="true" class="qname">ascending</span><span xq="yes" start="186" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="194" prev-is-closed="true" class="op">return</span><span xq="yes" start="200" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="210" prev-is-closed="false" class="parenthesis">(</span><span pos="15441" class="es">&lt;</span><span name="xml-open-tag" pos="15442" class="en">div</span><span name="xml-name-end" pos="15445" class="atn"> id</span><span name="x-equals" pos="15448" class="atneq">=</span><span name="xml-att-quote" pos="15449" class="z">"</span><span name="nested-query" pos="15450" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="32" prev-is-closed="true" class="step">/</span><span xq="yes" start="33" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="40" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="41" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="15492" class="op">}</span><span name="xml-att-quote" pos="15493" class="z">"</span><span name="xml-literal-end" pos="15494" class="atn"> class</span><span name="x-equals" pos="15500" class="atneq">=</span><span name="xml-att-quote" pos="15501" class="z">"</span><span name="xml-literal-start" pos="15502" class="av">methoddetail</span><span name="xml-att-quote" pos="15514" class="z">"</span><span name="x-tag-end" pos="15515" class="z">&gt;</span><span pos="15516" class="txt">&#xD;
         </span><span pos="15527" class="es">&lt;</span><span name="xml-open-tag" pos="15528" class="en">h5</span><span name="x-tag-end" pos="15530" class="z">&gt;</span><span pos="15531" class="es">&lt;</span><span name="xml-open-tag" pos="15532" class="en">a</span><span name="xml-name-end" pos="15533" class="atn"> name</span><span name="x-equals" pos="15538" class="atneq">=</span><span name="xml-att-quote" pos="15539" class="z">"</span><span name="nested-query" pos="15540" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="32" prev-is-closed="true" class="step">/</span><span xq="yes" start="33" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="40" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="41" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="15582" class="op">}</span><span name="xml-att-quote" pos="15583" class="z">"</span><span name="x-tag-end" pos="15584" class="z">/&gt;</span><span name="nested-query" pos="15586" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="32" prev-is-closed="true" class="step">/</span><span xq="yes" start="33" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="40" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="41" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="15628" class="op">}</span><span pos="15629" class="sc">&lt;/</span><span name="xml-close-tag" pos="15631" class="cl">h5</span><span name="x-tag-end" pos="15633" class="z">&gt;</span><span pos="15634" class="txt">&#xD;
         </span><span pos="15645" class="es">&lt;</span><span name="xml-open-tag" pos="15646" class="en">ul</span><span name="xml-name-end" pos="15648" class="atn"> class</span><span name="x-equals" pos="15654" class="atneq">=</span><span name="xml-att-quote" pos="15655" class="z">"</span><span name="xml-literal-start" pos="15656" class="av">method</span><span name="xml-att-quote" pos="15662" class="z">"</span><span name="x-tag-end" pos="15663" class="z">&gt;</span><span pos="15664" class="txt">&#xD;
           </span><span pos="15677" class="es">&lt;</span><span name="xml-open-tag" pos="15678" class="en">li</span><span name="xml-name-end" pos="15680" class="atn"> class</span><span name="x-equals" pos="15686" class="atneq">=</span><span name="xml-att-quote" pos="15687" class="z">"</span><span name="xml-literal-start" pos="15688" class="av">left</span><span name="xml-att-quote" pos="15692" class="z">"</span><span name="x-tag-end" pos="15693" class="z">&gt;</span><span pos="15694" class="txt">&#xD;
           </span><span name="nested-query" pos="15707" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span xq="yes" start="16" prev-is-closed="true" class="if">if</span><span xq="yes" start="18" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="32" prev-is-closed="true" class="step">/</span><span xq="yes" start="33" prev-is-closed="false" class="qname">xq:body</span><span xq="yes" start="40" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="41" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="42" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="43" prev-is-closed="true" class="op">then</span><span xq="yes" start="47" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
              </span><span xq="yes" start="65" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="15791" xq="yes">get-code</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                 </span><span xq="yes" start="37" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="43" prev-is-closed="true" class="op">,</span><span xq="yes" start="44" prev-is-closed="false" class="whitespace"> &#xD;
                                 </span><span xq="yes" start="80" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="81" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="85" prev-is-closed="true" class="op">,</span><span xq="yes" start="86" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="117" prev-is-closed="true" class="step">/</span><span xq="yes" start="118" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="125" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="126" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="127" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="128" prev-is-closed="true" class="op">,</span><span xq="yes" start="129" prev-is-closed="false" class="whitespace">&#xD;
                                 </span><span xq="yes" start="164" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="183" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="193" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="203" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="204" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="205" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="206" prev-is-closed="true" class="whitespace">&#xD;
             </span><span xq="yes" start="221" prev-is-closed="true" class="op">else</span><span xq="yes" start="225" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="241" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="242" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="243" prev-is-closed="true" class="whitespace">&#xD;
           </span><span name="unnested-xquery" pos="16056" class="op">}</span><span name="resume-x-literal-txt" pos="16057" class="txt">&#xD;
           </span><span pos="16070" class="sc">&lt;/</span><span name="xml-close-tag" pos="16072" class="cl">li</span><span name="x-tag-end" pos="16074" class="z">&gt;</span><span pos="16075" class="txt">&#xD;
           </span><span pos="16088" class="es">&lt;</span><span name="xml-open-tag" pos="16089" class="en">li</span><span name="xml-name-end" pos="16091" class="atn"> class</span><span name="x-equals" pos="16097" class="atneq">=</span><span name="xml-att-quote" pos="16098" class="z">"</span><span name="xml-literal-start" pos="16099" class="av">right</span><span name="xml-att-quote" pos="16104" class="z">"</span><span name="x-tag-end" pos="16105" class="z">&gt;</span><span pos="16106" class="txt">     &#xD;
              </span><span name="nested-query" pos="16127" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-signature</span><span class="parenthesis">(</span><span xq="yes" start="26" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="28" prev-is-closed="true" class="step">/</span><span xq="yes" start="29" prev-is-closed="false" class="qname">xq:signature</span><span xq="yes" start="41" prev-is-closed="true" class="op">,</span><span xq="yes" start="42" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="43" prev-is-closed="false" class="function">fn:false</span><span class="parenthesis">(</span><span xq="yes" start="52" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="53" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="54" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="16182" class="op">}</span><span name="resume-x-literal-txt" pos="16183" class="txt">&#xD;
           </span><span pos="16196" class="sc">&lt;/</span><span name="xml-close-tag" pos="16198" class="cl">li</span><span name="x-tag-end" pos="16200" class="z">&gt;</span><span pos="16201" class="txt">&#xD;
         </span><span pos="16212" class="sc">&lt;/</span><span name="xml-close-tag" pos="16214" class="cl">ul</span><span name="x-tag-end" pos="16216" class="z">&gt;</span><span pos="16217" class="txt">&#xD;
	   </span><span name="nested-query" pos="16223" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:print-detail-comment</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="32" prev-is-closed="true" class="step">/</span><span xq="yes" start="33" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="43" prev-is-closed="true" class="step">/</span><span xq="yes" start="44" prev-is-closed="false" class="qname">xq:description</span><span xq="yes" start="58" prev-is-closed="true" class="op">,</span><span xq="yes" start="59" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="60" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="61" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="op">,</span><span xq="yes" start="63" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="64" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="70" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="16294" class="op">}</span><span name="resume-x-literal-txt" pos="16295" class="txt">&#xD;
         </span><span pos="16306" class="es">&lt;</span><span name="xml-open-tag" pos="16307" class="en">ul</span><span name="x-tag-end" pos="16309" class="z">&gt;</span><span pos="16310" class="txt">&#xD;
         </span><span name="nested-query" pos="16321" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
           </span><span xq="yes" start="14" prev-is-closed="true" class="parenthesis">(</span><span xq="yes" start="15" prev-is-closed="false" class="function">display:print-detail-comment</span><span class="parenthesis">(</span><span xq="yes" start="44" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="46" prev-is-closed="true" class="step">/</span><span xq="yes" start="47" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="57" prev-is-closed="true" class="step">/</span><span xq="yes" start="58" prev-is-closed="false" class="qname">xq:param</span><span xq="yes" start="66" prev-is-closed="true" class="op">,</span><span xq="yes" start="67" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="16389" xq="yes">Parameters:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
            </span><span xq="yes" start="25" prev-is-closed="false" class="function">display:print-detail-comment</span><span class="parenthesis">(</span><span xq="yes" start="54" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="56" prev-is-closed="true" class="step">/</span><span xq="yes" start="57" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="67" prev-is-closed="true" class="step">/</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:return</span><span xq="yes" start="77" prev-is-closed="true" class="op">,</span><span xq="yes" start="78" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="16480" xq="yes">Return:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
            </span><span xq="yes" start="25" prev-is-closed="false" class="function">display:print-detail-comment</span><span class="parenthesis">(</span><span xq="yes" start="54" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="56" prev-is-closed="true" class="step">/</span><span xq="yes" start="57" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="67" prev-is-closed="true" class="step">/</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:error</span><span xq="yes" start="76" prev-is-closed="true" class="op">,</span><span xq="yes" start="77" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="16566" xq="yes">Errors:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
            </span><span xq="yes" start="25" prev-is-closed="false" class="function">display:print-detail-comment</span><span class="parenthesis">(</span><span xq="yes" start="54" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="56" prev-is-closed="true" class="step">/</span><span xq="yes" start="57" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="67" prev-is-closed="true" class="step">/</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:since</span><span xq="yes" start="76" prev-is-closed="true" class="op">,</span><span xq="yes" start="77" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="16652" xq="yes">Since:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
            </span><span xq="yes" start="25" prev-is-closed="false" class="function">display:print-detail-comment</span><span class="parenthesis">(</span><span xq="yes" start="54" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="56" prev-is-closed="true" class="step">/</span><span xq="yes" start="57" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="67" prev-is-closed="true" class="step">/</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:see</span><span xq="yes" start="74" prev-is-closed="true" class="op">,</span><span xq="yes" start="75" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="16735" xq="yes">See:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="op">,</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
            </span><span xq="yes" start="25" prev-is-closed="false" class="function">display:print-detail-comment</span><span class="parenthesis">(</span><span xq="yes" start="54" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="56" prev-is-closed="true" class="step">/</span><span xq="yes" start="57" prev-is-closed="false" class="qname">xq:comment</span><span xq="yes" start="67" prev-is-closed="true" class="step">/</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:deprecated</span><span xq="yes" start="81" prev-is-closed="true" class="op">,</span><span xq="yes" start="82" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="16823" xq="yes">Deprecated:</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="9" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="10" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="12" prev-is-closed="true" class="whitespace">&#xD;
         </span><span name="unnested-xquery" pos="16858" class="op">}</span><span name="resume-x-literal-txt" pos="16859" class="txt">&#xD;
         </span><span pos="16870" class="sc">&lt;/</span><span name="xml-close-tag" pos="16872" class="cl">ul</span><span name="x-tag-end" pos="16874" class="z">&gt;</span><span pos="16875" class="txt">&#xD;
         </span><span name="nested-query" pos="16886" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="12" prev-is-closed="true" class="function">display:print-external-functions-invoked</span><span class="parenthesis">(</span><span xq="yes" start="53" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="55" prev-is-closed="true" class="op">,</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="57" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="63" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="64" prev-is-closed="true" class="op">,</span><span xq="yes" start="65" prev-is-closed="false" class="whitespace">   &#xD;
         </span><span xq="yes" start="79" prev-is-closed="false" class="function">display:print-external-functions-invoked-by</span><span class="parenthesis">(</span><span xq="yes" start="123" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="125" prev-is-closed="true" class="op">,</span><span xq="yes" start="126" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="127" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">      &#xD;
         </span><span xq="yes" start="152" prev-is-closed="false" class="function">display:print-internal-functions-invoked</span><span class="parenthesis">(</span><span xq="yes" start="193" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="195" prev-is-closed="true" class="op">,</span><span xq="yes" start="196" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="197" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="203" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="204" prev-is-closed="true" class="op">,</span><span xq="yes" start="205" prev-is-closed="false" class="whitespace">    &#xD;
         </span><span xq="yes" start="220" prev-is-closed="false" class="function">display:print-internal-functions-invoked-by</span><span class="parenthesis">(</span><span xq="yes" start="264" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="266" prev-is-closed="true" class="op">,</span><span xq="yes" start="267" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="268" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="274" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="275" prev-is-closed="true" class="op">,</span><span xq="yes" start="276" prev-is-closed="false" class="whitespace">  &#xD;
         </span><span xq="yes" start="289" prev-is-closed="false" class="function">display:print-internal-variables-referenced</span><span class="parenthesis">(</span><span xq="yes" start="333" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="335" prev-is-closed="true" class="op">,</span><span xq="yes" start="336" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="337" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="343" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="344" prev-is-closed="true" class="op">,</span><span xq="yes" start="345" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="356" prev-is-closed="false" class="function">display:print-external-variables-referenced</span><span class="parenthesis">(</span><span xq="yes" start="400" prev-is-closed="false" class="variable">$f</span><span xq="yes" start="402" prev-is-closed="true" class="op">,</span><span xq="yes" start="403" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="404" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="410" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="411" prev-is-closed="true" class="whitespace">&#xD;
         </span><span name="unnested-xquery" pos="17308" class="op">}</span><span name="resume-x-literal-txt" pos="17309" class="txt">&#xD;
         </span><span pos="17320" class="sc">&lt;/</span><span name="xml-close-tag" pos="17322" class="cl">div</span><span name="x-tag-end" pos="17325" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">  </span><span class="op">"</span><span class="literal" pos="17329" xq="yes">&amp;#160;</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
    </span><span name="unnested-xquery" pos="17344" class="op">}</span><span name="resume-x-literal-txt" pos="17345" class="txt">&#xD;
    </span><span pos="17351" class="sc">&lt;/</span><span name="xml-close-tag" pos="17353" class="cl">div</span><span name="x-tag-end" pos="17356" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="17359" xq="yes">&amp;#160;</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">    &#xD;
</span><span name="unnested-xquery" pos="17390" class="op">}</span><span name="resume-x-literal-txt" pos="17391" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the xqDoc HTML for the function signature.&#xD;
 :&#xD;
 :  @param $sigs the signatures associated with the current function.  Although only one&#xD;
 :               signature is allowed for user-defined functions, more than one signature&#xD;
 :               is required to support other 'modules' such as XPath F &amp;amp; O.&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return String containing the marked up function signature.&#xD;
 :)&#xD;
declare function display:print-signature($sigs as xs:string*, $local as xs:boolean) as item()*&#xD;
</span><span name="nested-query" pos="18034" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="higher">for</span><span xq="yes" start="8" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="9" prev-is-closed="false" class="variable">$sig</span><span xq="yes" start="13" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="true" class="qname">at</span><span xq="yes" start="16" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="17" prev-is-closed="true" class="variable">$cnt</span><span xq="yes" start="21" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="true" class="op">in</span><span xq="yes" start="24" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="25" prev-is-closed="false" class="variable">$sigs</span><span xq="yes" start="30" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="34" prev-is-closed="true" class="op">return</span><span xq="yes" start="40" prev-is-closed="false" class="whitespace">&#xD;
  </span><span xq="yes" start="44" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="45" prev-is-closed="false" class="higher">let</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="variable">$params</span><span xq="yes" start="56" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="57" prev-is-closed="true" class="op">:=</span><span xq="yes" start="59" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="60" prev-is-closed="false" class="function">fn:substring-after</span><span class="parenthesis">(</span><span xq="yes" start="79" prev-is-closed="false" class="variable">$sig</span><span xq="yes" start="83" prev-is-closed="true" class="op">,</span><span xq="yes" start="84" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="18119" xq="yes">(</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="7" prev-is-closed="true" class="higher">let</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="op">:=</span><span xq="yes" start="21" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:tokenize</span><span class="parenthesis">(</span><span xq="yes" start="34" prev-is-closed="false" class="variable">$params</span><span xq="yes" start="41" prev-is-closed="true" class="op">,</span><span xq="yes" start="42" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="18164" xq="yes">,</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="7" prev-is-closed="true" class="higher">let</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="false" class="variable">$count</span><span xq="yes" start="17" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="18" prev-is-closed="true" class="op">:=</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="37" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="38" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="43" prev-is-closed="true" class="op">return</span><span xq="yes" start="49" prev-is-closed="false" class="whitespace">&#xD;
     </span><span xq="yes" start="56" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="57" prev-is-closed="false" class="if">if</span><span xq="yes" start="59" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="60" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="61" prev-is-closed="false" class="variable">$cnt</span><span xq="yes" start="65" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="66" prev-is-closed="true" class="op">&gt;</span><span xq="yes" start="67" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="68" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="69" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="70" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="71" prev-is-closed="true" class="op">then</span><span xq="yes" start="75" prev-is-closed="false" class="whitespace"> &#xD;
	  </span><span xq="yes" start="81" prev-is-closed="false" class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="18248" xq="yes">OR</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span pos="18254" class="es">&lt;</span><span name="xml-open-tag" pos="18255" class="en">br</span><span name="x-tag-end" pos="18257" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span pos="18260" class="es">&lt;</span><span name="xml-open-tag" pos="18261" class="en">br</span><span name="x-tag-end" pos="18263" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="10" prev-is-closed="true" class="op">else</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="24" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="26" prev-is-closed="true" class="op">,</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace">&#xD;
      </span><span xq="yes" start="35" prev-is-closed="false" class="higher">for</span><span xq="yes" start="38" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="39" prev-is-closed="false" class="variable">$token</span><span xq="yes" start="45" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="46" prev-is-closed="true" class="qname">at</span><span xq="yes" start="48" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="true" class="variable">$index</span><span xq="yes" start="55" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="56" prev-is-closed="true" class="op">in</span><span xq="yes" start="58" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="59" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="66" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="74" prev-is-closed="true" class="op">return</span><span xq="yes" start="80" prev-is-closed="false" class="whitespace">&#xD;
       </span><span xq="yes" start="89" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="90" prev-is-closed="false" class="if">if</span><span xq="yes" start="92" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="93" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="94" prev-is-closed="false" class="variable">$index</span><span xq="yes" start="100" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="true" class="op">=</span><span xq="yes" start="102" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="103" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="104" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="105" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="106" prev-is-closed="true" class="op">then</span><span xq="yes" start="110" prev-is-closed="false" class="whitespace">&#xD;
          </span><span xq="yes" start="122" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="18396" xq="yes">(</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="12" prev-is-closed="true" class="op">else</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace">&#xD;
          </span><span xq="yes" start="28" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="29" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="30" prev-is-closed="true" class="op">,</span><span xq="yes" start="31" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="41" prev-is-closed="false" class="if">if</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="44" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="45" prev-is-closed="false" class="variable">$index</span><span xq="yes" start="51" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="true" class="op">=</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="54" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="55" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="56" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="57" prev-is-closed="true" class="op">then</span><span xq="yes" start="61" prev-is-closed="false" class="whitespace">&#xD;
	    </span><span xq="yes" start="68" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="87" prev-is-closed="false" class="variable">$token</span><span xq="yes" start="93" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="94" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="104" prev-is-closed="true" class="op">else</span><span xq="yes" start="108" prev-is-closed="false" class="whitespace">&#xD;
          </span><span xq="yes" start="120" prev-is-closed="false" class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="18519" xq="yes">&amp;#160;</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="variable">$token</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="29" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="30" prev-is-closed="true" class="op">,</span><span xq="yes" start="31" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="41" prev-is-closed="false" class="if">if</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="44" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="45" prev-is-closed="false" class="variable">$index</span><span xq="yes" start="51" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="true" class="op">&lt;</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="54" prev-is-closed="false" class="variable">$count</span><span xq="yes" start="60" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="61" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="62" prev-is-closed="true" class="op">then</span><span xq="yes" start="66" prev-is-closed="false" class="whitespace">&#xD;
          </span><span xq="yes" start="78" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="18614" xq="yes">,</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="12" prev-is-closed="true" class="op">else</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace">&#xD;
          </span><span xq="yes" start="28" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="29" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="30" prev-is-closed="true" class="op">,</span><span xq="yes" start="31" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="18657" class="es">&lt;</span><span name="xml-open-tag" pos="18658" class="en">br</span><span name="x-tag-end" pos="18660" class="z">/&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="op">,</span><span xq="yes" start="4" prev-is-closed="false" class="whitespace"> &#xD;
  </span><span pos="18670" class="es">&lt;</span><span name="xml-open-tag" pos="18671" class="en">br</span><span name="x-tag-end" pos="18673" class="z">/&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="18678" class="op">}</span><span name="resume-x-literal-txt" pos="18679" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the xqDoc HTML for the specified xqDoc comment.  The following&#xD;
 :  xqDoc comment values are supported.&#xD;
 :  </span><span pos="18812" class="es">&lt;</span><span name="xml-open-tag" pos="18813" class="en">ul</span><span name="x-tag-end" pos="18815" class="z">&gt;</span><span pos="18816" class="txt">&#xD;
 :  </span><span pos="18822" class="es">&lt;</span><span name="xml-open-tag" pos="18823" class="en">li</span><span name="x-tag-end" pos="18825" class="z">&gt;</span><span pos="18826" class="txt">author</span><span pos="18832" class="sc">&lt;/</span><span name="xml-close-tag" pos="18834" class="cl">li</span><span name="x-tag-end" pos="18836" class="z">&gt;</span><span pos="18837" class="txt">&#xD;
 :  </span><span pos="18843" class="es">&lt;</span><span name="xml-open-tag" pos="18844" class="en">li</span><span name="x-tag-end" pos="18846" class="z">&gt;</span><span pos="18847" class="txt">version</span><span pos="18854" class="sc">&lt;/</span><span name="xml-close-tag" pos="18856" class="cl">li</span><span name="x-tag-end" pos="18858" class="z">&gt;</span><span pos="18859" class="txt">&#xD;
 :  </span><span pos="18865" class="es">&lt;</span><span name="xml-open-tag" pos="18866" class="en">li</span><span name="x-tag-end" pos="18868" class="z">&gt;</span><span pos="18869" class="txt">param</span><span pos="18874" class="sc">&lt;/</span><span name="xml-close-tag" pos="18876" class="cl">li</span><span name="x-tag-end" pos="18878" class="z">&gt;</span><span pos="18879" class="txt">&#xD;
 :  </span><span pos="18885" class="es">&lt;</span><span name="xml-open-tag" pos="18886" class="en">li</span><span name="x-tag-end" pos="18888" class="z">&gt;</span><span pos="18889" class="txt">return</span><span pos="18895" class="sc">&lt;/</span><span name="xml-close-tag" pos="18897" class="cl">li</span><span name="x-tag-end" pos="18899" class="z">&gt;</span><span pos="18900" class="txt">&#xD;
 :  </span><span pos="18906" class="es">&lt;</span><span name="xml-open-tag" pos="18907" class="en">li</span><span name="x-tag-end" pos="18909" class="z">&gt;</span><span pos="18910" class="txt">error</span><span pos="18915" class="sc">&lt;/</span><span name="xml-close-tag" pos="18917" class="cl">li</span><span name="x-tag-end" pos="18919" class="z">&gt;</span><span pos="18920" class="txt">&#xD;
 :  </span><span pos="18926" class="es">&lt;</span><span name="xml-open-tag" pos="18927" class="en">li</span><span name="x-tag-end" pos="18929" class="z">&gt;</span><span pos="18930" class="txt">deprecated</span><span pos="18940" class="sc">&lt;/</span><span name="xml-close-tag" pos="18942" class="cl">li</span><span name="x-tag-end" pos="18944" class="z">&gt;</span><span pos="18945" class="txt">&#xD;
 :  </span><span pos="18951" class="es">&lt;</span><span name="xml-open-tag" pos="18952" class="en">li</span><span name="x-tag-end" pos="18954" class="z">&gt;</span><span pos="18955" class="txt">see</span><span pos="18958" class="sc">&lt;/</span><span name="xml-close-tag" pos="18960" class="cl">li</span><span name="x-tag-end" pos="18962" class="z">&gt;</span><span pos="18963" class="txt">&#xD;
 :  </span><span pos="18969" class="es">&lt;</span><span name="xml-open-tag" pos="18970" class="en">li</span><span name="x-tag-end" pos="18972" class="z">&gt;</span><span pos="18973" class="txt">since</span><span pos="18978" class="sc">&lt;/</span><span name="xml-close-tag" pos="18980" class="cl">li</span><span name="x-tag-end" pos="18982" class="z">&gt;</span><span pos="18983" class="txt">&#xD;
 :  </span><span pos="18989" class="es">&lt;</span><span name="xml-open-tag" pos="18990" class="en">li</span><span name="x-tag-end" pos="18992" class="z">&gt;</span><span pos="18993" class="es">&lt;</span><span name="xml-open-tag" pos="18994" class="en">i</span><span name="x-tag-end" pos="18995" class="z">&gt;</span><span pos="18996" class="txt">empty</span><span pos="19001" class="sc">&lt;/</span><span name="xml-close-tag" pos="19003" class="cl">i</span><span name="x-tag-end" pos="19004" class="z">&gt;</span><span pos="19005" class="txt"> which indicates a </span><span pos="19024" class="es">&lt;</span><span name="xml-open-tag" pos="19025" class="en">i</span><span name="x-tag-end" pos="19026" class="z">&gt;</span><span pos="19027" class="txt">description</span><span pos="19038" class="sc">&lt;/</span><span name="xml-close-tag" pos="19040" class="cl">i</span><span name="x-tag-end" pos="19041" class="z">&gt;</span><span pos="19042" class="sc">&lt;/</span><span name="xml-close-tag" pos="19044" class="cl">li</span><span name="x-tag-end" pos="19046" class="z">&gt;</span><span pos="19047" class="txt">&#xD;
 :  </span><span pos="19053" class="sc">&lt;/</span><span name="xml-close-tag" pos="19055" class="cl">ul</span><span name="x-tag-end" pos="19057" class="z">&gt;</span><span pos="19058" class="txt">&#xD;
 :&#xD;
 :  @param $comment the xqDoc comment element associated with a function&#xD;
 :  @param $name the xqDoc comment name to process (i.e. author, version, etc.)&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-comment($comment as element()*, $name as xs:string?, $local as xs:boolean) as element()* &#xD;
</span><span name="nested-query" pos="19506" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$comment</span><span xq="yes" start="27" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="30" prev-is-closed="true" class="op">then</span><span xq="yes" start="34" prev-is-closed="false" class="whitespace">&#xD;
     </span><span xq="yes" start="41" prev-is-closed="false" class="higher">for</span><span xq="yes" start="44" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="45" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="47" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="48" prev-is-closed="true" class="op">in</span><span xq="yes" start="50" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="51" prev-is-closed="false" class="variable">$comment</span><span xq="yes" start="59" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="68" prev-is-closed="true" class="op">return</span><span xq="yes" start="74" prev-is-closed="false" class="whitespace">           &#xD;
             </span><span xq="yes" start="100" prev-is-closed="false" class="if">if</span><span xq="yes" start="102" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="103" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="104" prev-is-closed="false" class="function">fn:not</span><span class="parenthesis">(</span><span xq="yes" start="111" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="121" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="126" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="127" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="128" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="129" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="130" prev-is-closed="true" class="op">then</span><span xq="yes" start="134" prev-is-closed="false" class="whitespace"> &#xD;
               </span><span pos="19658" class="es">&lt;</span><span name="xml-open-tag" pos="19659" class="en">p</span><span name="x-tag-end" pos="19660" class="z">&gt;</span><span name="nested-query" pos="19661" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="3" prev-is-closed="true" class="step">/</span><span xq="yes" start="4" prev-is-closed="false" class="node">node(</span><span xq="yes" start="9" prev-is-closed="false" class="parenthesis">)</span><span name="unnested-xquery" pos="19671" class="op">}</span><span pos="19672" class="sc">&lt;/</span><span name="xml-close-tag" pos="19674" class="cl">p</span><span name="x-tag-end" pos="19675" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">     &#xD;
             </span><span xq="yes" start="21" prev-is-closed="true" class="op">else</span><span xq="yes" start="25" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="26" prev-is-closed="false" class="if">if</span><span xq="yes" start="28" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="29" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="35" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="36" prev-is-closed="true" class="op">=</span><span xq="yes" start="37" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="19713" xq="yes">See:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="true" class="op">then</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace">&#xD;
               </span><span pos="19742" class="es">&lt;</span><span name="xml-open-tag" pos="19743" class="en">li</span><span name="x-tag-end" pos="19745" class="z">&gt;</span><span pos="19746" class="es">&lt;</span><span name="xml-open-tag" pos="19747" class="en">strong</span><span name="x-tag-end" pos="19753" class="z">&gt;</span><span name="nested-query" pos="19754" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="16" prev-is-closed="true" class="op">,</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="19772" xq="yes">&amp;#160;</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="19781" class="op">}</span><span pos="19782" class="sc">&lt;/</span><span name="xml-close-tag" pos="19784" class="cl">strong</span><span name="x-tag-end" pos="19790" class="z">&gt;</span><span name="nested-query" pos="19791" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:print-comment-see</span><span class="parenthesis">(</span><span xq="yes" start="27" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="29" prev-is-closed="true" class="op">,</span><span xq="yes" start="30" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="31" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="37" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="19829" class="op">}</span><span pos="19830" class="sc">&lt;/</span><span name="xml-close-tag" pos="19832" class="cl">li</span><span name="x-tag-end" pos="19834" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span xq="yes" start="16" prev-is-closed="true" class="op">else</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace">&#xD;
               </span><span pos="19871" class="es">&lt;</span><span name="xml-open-tag" pos="19872" class="en">li</span><span name="x-tag-end" pos="19874" class="z">&gt;</span><span pos="19875" class="es">&lt;</span><span name="xml-open-tag" pos="19876" class="en">strong</span><span name="x-tag-end" pos="19882" class="z">&gt;</span><span name="nested-query" pos="19883" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="16" prev-is-closed="true" class="op">,</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="19901" xq="yes">&amp;#160;</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="19910" class="op">}</span><span pos="19911" class="sc">&lt;/</span><span name="xml-close-tag" pos="19913" class="cl">strong</span><span name="x-tag-end" pos="19919" class="z">&gt;</span><span name="nested-query" pos="19920" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="3" prev-is-closed="true" class="step">/</span><span xq="yes" start="4" prev-is-closed="false" class="node">node(</span><span xq="yes" start="9" prev-is-closed="false" class="parenthesis">)</span><span name="unnested-xquery" pos="19930" class="op">}</span><span pos="19931" class="sc">&lt;/</span><span name="xml-close-tag" pos="19933" class="cl">li</span><span name="x-tag-end" pos="19935" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="op">else</span><span xq="yes" start="9" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="15" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="17" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="19954" class="op">}</span><span name="resume-x-literal-txt" pos="19955" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the </span><span pos="19983" class="es">&lt;</span><span name="xml-open-tag" pos="19984" class="en">i</span><span name="x-tag-end" pos="19985" class="z">&gt;</span><span pos="19986" class="txt">detailed</span><span pos="19994" class="sc">&lt;/</span><span name="xml-close-tag" pos="19996" class="cl">i</span><span name="x-tag-end" pos="19997" class="z">&gt;</span><span pos="19998" class="txt"> xqDoc HTML for the specified xqDoc comment.  &#xD;
 :  Detailed essentially implies the xqDoc comments for the method detail. The following&#xD;
 :  xqDoc comment values are supported.&#xD;
 :  </span><span pos="20181" class="es">&lt;</span><span name="xml-open-tag" pos="20182" class="en">ul</span><span name="x-tag-end" pos="20184" class="z">&gt;</span><span pos="20185" class="txt">&#xD;
 :  </span><span pos="20191" class="es">&lt;</span><span name="xml-open-tag" pos="20192" class="en">li</span><span name="x-tag-end" pos="20194" class="z">&gt;</span><span pos="20195" class="txt">author</span><span pos="20201" class="sc">&lt;/</span><span name="xml-close-tag" pos="20203" class="cl">li</span><span name="x-tag-end" pos="20205" class="z">&gt;</span><span pos="20206" class="txt">&#xD;
 :  </span><span pos="20212" class="es">&lt;</span><span name="xml-open-tag" pos="20213" class="en">li</span><span name="x-tag-end" pos="20215" class="z">&gt;</span><span pos="20216" class="txt">version</span><span pos="20223" class="sc">&lt;/</span><span name="xml-close-tag" pos="20225" class="cl">li</span><span name="x-tag-end" pos="20227" class="z">&gt;</span><span pos="20228" class="txt">&#xD;
 :  </span><span pos="20234" class="es">&lt;</span><span name="xml-open-tag" pos="20235" class="en">li</span><span name="x-tag-end" pos="20237" class="z">&gt;</span><span pos="20238" class="txt">param</span><span pos="20243" class="sc">&lt;/</span><span name="xml-close-tag" pos="20245" class="cl">li</span><span name="x-tag-end" pos="20247" class="z">&gt;</span><span pos="20248" class="txt">&#xD;
 :  </span><span pos="20254" class="es">&lt;</span><span name="xml-open-tag" pos="20255" class="en">li</span><span name="x-tag-end" pos="20257" class="z">&gt;</span><span pos="20258" class="txt">return</span><span pos="20264" class="sc">&lt;/</span><span name="xml-close-tag" pos="20266" class="cl">li</span><span name="x-tag-end" pos="20268" class="z">&gt;</span><span pos="20269" class="txt">&#xD;
 :  </span><span pos="20275" class="es">&lt;</span><span name="xml-open-tag" pos="20276" class="en">li</span><span name="x-tag-end" pos="20278" class="z">&gt;</span><span pos="20279" class="txt">error</span><span pos="20284" class="sc">&lt;/</span><span name="xml-close-tag" pos="20286" class="cl">li</span><span name="x-tag-end" pos="20288" class="z">&gt;</span><span pos="20289" class="txt">&#xD;
 :  </span><span pos="20295" class="es">&lt;</span><span name="xml-open-tag" pos="20296" class="en">li</span><span name="x-tag-end" pos="20298" class="z">&gt;</span><span pos="20299" class="txt">deprecated</span><span pos="20309" class="sc">&lt;/</span><span name="xml-close-tag" pos="20311" class="cl">li</span><span name="x-tag-end" pos="20313" class="z">&gt;</span><span pos="20314" class="txt">&#xD;
 :  </span><span pos="20320" class="es">&lt;</span><span name="xml-open-tag" pos="20321" class="en">li</span><span name="x-tag-end" pos="20323" class="z">&gt;</span><span pos="20324" class="txt">see</span><span pos="20327" class="sc">&lt;/</span><span name="xml-close-tag" pos="20329" class="cl">li</span><span name="x-tag-end" pos="20331" class="z">&gt;</span><span pos="20332" class="txt">&#xD;
 :  </span><span pos="20338" class="es">&lt;</span><span name="xml-open-tag" pos="20339" class="en">li</span><span name="x-tag-end" pos="20341" class="z">&gt;</span><span pos="20342" class="txt">since</span><span pos="20347" class="sc">&lt;/</span><span name="xml-close-tag" pos="20349" class="cl">li</span><span name="x-tag-end" pos="20351" class="z">&gt;</span><span pos="20352" class="txt">&#xD;
 :  </span><span pos="20358" class="es">&lt;</span><span name="xml-open-tag" pos="20359" class="en">li</span><span name="x-tag-end" pos="20361" class="z">&gt;</span><span pos="20362" class="es">&lt;</span><span name="xml-open-tag" pos="20363" class="en">i</span><span name="x-tag-end" pos="20364" class="z">&gt;</span><span pos="20365" class="txt">empty</span><span pos="20370" class="sc">&lt;/</span><span name="xml-close-tag" pos="20372" class="cl">i</span><span name="x-tag-end" pos="20373" class="z">&gt;</span><span pos="20374" class="txt"> which indicates a </span><span pos="20393" class="es">&lt;</span><span name="xml-open-tag" pos="20394" class="en">i</span><span name="x-tag-end" pos="20395" class="z">&gt;</span><span pos="20396" class="txt">description</span><span pos="20407" class="sc">&lt;/</span><span name="xml-close-tag" pos="20409" class="cl">i</span><span name="x-tag-end" pos="20410" class="z">&gt;</span><span pos="20411" class="sc">&lt;/</span><span name="xml-close-tag" pos="20413" class="cl">li</span><span name="x-tag-end" pos="20415" class="z">&gt;</span><span pos="20416" class="txt">&#xD;
 :  </span><span pos="20422" class="sc">&lt;/</span><span name="xml-close-tag" pos="20424" class="cl">ul</span><span name="x-tag-end" pos="20426" class="z">&gt;</span><span pos="20427" class="txt">&#xD;
 :&#xD;
 :  @param $comment the xqDoc comment element associated with a function&#xD;
 :  @param $name the xqDoc comment name to process (i.e. author, version, etc.)&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
&#xD;
declare function display:print-detail-comment($comment as element()*, $name as xs:string?, $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="20883" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$comment</span><span xq="yes" start="27" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="30" prev-is-closed="true" class="op">then</span><span xq="yes" start="34" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="40" prev-is-closed="false" class="if">if</span><span xq="yes" start="42" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="43" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="44" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="54" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="59" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="60" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="61" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="62" prev-is-closed="true" class="op">then</span><span xq="yes" start="66" prev-is-closed="false" class="whitespace">       &#xD;
      </span><span xq="yes" start="81" prev-is-closed="false" class="parenthesis">(</span><span pos="20965" class="es">&lt;</span><span name="xml-open-tag" pos="20966" class="en">li</span><span name="x-tag-end" pos="20968" class="z">&gt;</span><span name="nested-query" pos="20969" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$name</span><span name="unnested-xquery" pos="20975" class="op">}</span><span pos="20976" class="sc">&lt;/</span><span name="xml-close-tag" pos="20978" class="cl">li</span><span name="x-tag-end" pos="20980" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
       </span><span pos="20991" class="es">&lt;</span><span name="xml-open-tag" pos="20992" class="en">ul</span><span name="x-tag-end" pos="20994" class="z">&gt;</span><span pos="20995" class="txt">&#xD;
          </span><span name="nested-query" pos="21007" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
            </span><span xq="yes" start="15" prev-is-closed="true" class="higher">for</span><span xq="yes" start="18" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="21" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="true" class="op">in</span><span xq="yes" start="24" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="25" prev-is-closed="false" class="variable">$comment</span><span xq="yes" start="33" prev-is-closed="true" class="whitespace">&#xD;
            </span><span xq="yes" start="47" prev-is-closed="true" class="op">return</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="69" prev-is-closed="false" class="if">if</span><span xq="yes" start="71" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="72" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="73" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="78" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="79" prev-is-closed="true" class="op">=</span><span xq="yes" start="80" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="21088" xq="yes">Parameters:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="true" class="op">then</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace">&#xD;
                </span><span pos="21125" class="es">&lt;</span><span name="xml-open-tag" pos="21126" class="en">li</span><span name="x-tag-end" pos="21128" class="z">&gt;</span><span name="nested-query" pos="21129" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:print-comment-param</span><span class="parenthesis">(</span><span xq="yes" start="29" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="31" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="21161" class="op">}</span><span pos="21162" class="sc">&lt;/</span><span name="xml-close-tag" pos="21164" class="cl">li</span><span name="x-tag-end" pos="21166" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">             &#xD;
              </span><span xq="yes" start="30" prev-is-closed="true" class="op">else</span><span xq="yes" start="34" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="35" prev-is-closed="false" class="if">if</span><span xq="yes" start="37" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="38" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="39" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="44" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="45" prev-is-closed="true" class="op">=</span><span xq="yes" start="46" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="21213" xq="yes">See:</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="true" class="op">then</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace">&#xD;
                </span><span pos="21243" class="es">&lt;</span><span name="xml-open-tag" pos="21244" class="en">li</span><span name="x-tag-end" pos="21246" class="z">&gt;</span><span name="nested-query" pos="21247" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:print-comment-see</span><span class="parenthesis">(</span><span xq="yes" start="27" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="29" prev-is-closed="true" class="op">,</span><span xq="yes" start="30" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="31" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="37" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="21285" class="op">}</span><span pos="21286" class="sc">&lt;/</span><span name="xml-close-tag" pos="21288" class="cl">li</span><span name="x-tag-end" pos="21290" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
              </span><span xq="yes" start="17" prev-is-closed="true" class="op">else</span><span xq="yes" start="21" prev-is-closed="false" class="whitespace">&#xD;
                </span><span pos="21329" class="es">&lt;</span><span name="xml-open-tag" pos="21330" class="en">li</span><span name="x-tag-end" pos="21332" class="z">&gt;</span><span name="nested-query" pos="21333" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="3" prev-is-closed="true" class="step">/</span><span xq="yes" start="4" prev-is-closed="false" class="node">node(</span><span xq="yes" start="9" prev-is-closed="false" class="parenthesis">)</span><span name="unnested-xquery" pos="21343" class="op">}</span><span pos="21344" class="sc">&lt;/</span><span name="xml-close-tag" pos="21346" class="cl">li</span><span name="x-tag-end" pos="21348" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
          </span><span name="unnested-xquery" pos="21361" class="op">}</span><span name="resume-x-literal-txt" pos="21362" class="txt">&#xD;
      </span><span pos="21370" class="sc">&lt;/</span><span name="xml-close-tag" pos="21372" class="cl">ul</span><span name="x-tag-end" pos="21374" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> &#xD;
    </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
      </span><span pos="21395" class="es">&lt;</span><span name="xml-open-tag" pos="21396" class="en">p</span><span name="x-tag-end" pos="21397" class="z">&gt;</span><span name="nested-query" pos="21398" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$comment</span><span xq="yes" start="9" prev-is-closed="true" class="step">/</span><span xq="yes" start="10" prev-is-closed="false" class="node">node(</span><span xq="yes" start="15" prev-is-closed="false" class="parenthesis">)</span><span name="unnested-xquery" pos="21414" class="op">}</span><span pos="21415" class="sc">&lt;/</span><span name="xml-close-tag" pos="21417" class="cl">p</span><span name="x-tag-end" pos="21418" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> &#xD;
  </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">  &#xD;
</span><span name="unnested-xquery" pos="21440" class="op">}</span><span name="resume-x-literal-txt" pos="21441" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the xqDoc HTML for the specified xqDoc </span><span pos="21504" class="es">&lt;</span><span name="xml-open-tag" pos="21505" class="en">i</span><span name="x-tag-end" pos="21506" class="z">&gt;</span><span pos="21507" class="txt">param</span><span pos="21512" class="sc">&lt;/</span><span name="xml-close-tag" pos="21514" class="cl">i</span><span name="x-tag-end" pos="21515" class="z">&gt;</span><span pos="21516" class="txt"> comment element.  &#xD;
 :&#xD;
 :  @param $entry the xqDoc </span><span pos="21569" class="es">&lt;</span><span name="xml-open-tag" pos="21570" class="en">i</span><span name="x-tag-end" pos="21571" class="z">&gt;</span><span pos="21572" class="txt">param</span><span pos="21577" class="sc">&lt;/</span><span name="xml-close-tag" pos="21579" class="cl">i</span><span name="x-tag-end" pos="21580" class="z">&gt;</span><span pos="21581" class="txt"> comment element associated with a function&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-comment-param($entry as element()) as item()* &#xD;
</span><span name="nested-query" pos="21728" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="7" prev-is-closed="true" class="higher">let</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="11" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="15" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="16" prev-is-closed="true" class="op">:=</span><span xq="yes" start="18" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="29" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="30" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="36" prev-is-closed="true" class="step">/</span><span xq="yes" start="37" prev-is-closed="false" class="node">node(</span><span xq="yes" start="42" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="43" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="44" prev-is-closed="true" class="filter">[</span><span xq="yes" start="45" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="46" prev-is-closed="true" class="filter">]</span><span xq="yes" start="47" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="48" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="54" prev-is-closed="true" class="higher">let</span><span xq="yes" start="57" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="58" prev-is-closed="false" class="variable">$bef</span><span xq="yes" start="62" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="63" prev-is-closed="true" class="op">:=</span><span xq="yes" start="65" prev-is-closed="false" class="whitespace">  </span><span xq="yes" start="67" prev-is-closed="false" class="function">fn:substring-before</span><span class="parenthesis">(</span><span xq="yes" start="87" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="106" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="110" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="111" prev-is-closed="true" class="op">,</span><span xq="yes" start="112" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="21841" xq="yes"> </span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="8" prev-is-closed="true" class="higher">let</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="12" prev-is-closed="false" class="variable">$aft</span><span xq="yes" start="16" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="17" prev-is-closed="true" class="op">:=</span><span xq="yes" start="19" prev-is-closed="false" class="whitespace">  </span><span xq="yes" start="21" prev-is-closed="false" class="function">fn:substring-after</span><span class="parenthesis">(</span><span xq="yes" start="40" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="59" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="63" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="64" prev-is-closed="true" class="op">,</span><span xq="yes" start="65" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="21909" xq="yes"> </span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
    </span><span xq="yes" start="8" prev-is-closed="true" class="op">return</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace">&#xD;
       </span><span xq="yes" start="23" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="if">if</span><span xq="yes" start="26" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="27" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="28" prev-is-closed="false" class="function">fn:string-length</span><span class="parenthesis">(</span><span xq="yes" start="45" prev-is-closed="false" class="variable">$bef</span><span xq="yes" start="49" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="50" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="51" prev-is-closed="true" class="op">&gt;</span><span xq="yes" start="52" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="53" prev-is-closed="false" class="numeric">0</span><span xq="yes" start="54" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="55" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="56" prev-is-closed="true" class="op">then</span><span xq="yes" start="60" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="64" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span xq="yes" start="74" prev-is-closed="false" class="variable">$bef</span><span xq="yes" start="78" prev-is-closed="true" class="op">,</span><span xq="yes" start="79" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="21991" xq="yes"> - </span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$aft</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="whitespace">&#xD;
	  </span><span xq="yes" start="13" prev-is-closed="true" class="op">else</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="21" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="25" prev-is-closed="true" class="op">,</span><span xq="yes" start="26" prev-is-closed="false" class="whitespace">&#xD;
	  </span><span xq="yes" start="31" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="higher">for</span><span xq="yes" start="35" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="36" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="38" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="39" prev-is-closed="true" class="qname">at</span><span xq="yes" start="41" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="42" prev-is-closed="true" class="variable">$y</span><span xq="yes" start="44" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="45" prev-is-closed="true" class="op">in</span><span xq="yes" start="47" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="48" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="54" prev-is-closed="true" class="step">/</span><span xq="yes" start="55" prev-is-closed="false" class="node">node(</span><span xq="yes" start="60" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="61" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="72" prev-is-closed="true" class="op">return</span><span xq="yes" start="78" prev-is-closed="false" class="whitespace">&#xD;
           </span><span xq="yes" start="91" prev-is-closed="false" class="if">if</span><span xq="yes" start="93" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="94" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="95" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="97" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="98" prev-is-closed="true" class="op">&gt;</span><span xq="yes" start="99" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="100" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="101" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="102" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="103" prev-is-closed="true" class="op">then</span><span xq="yes" start="107" prev-is-closed="false" class="whitespace">&#xD;
               </span><span xq="yes" start="124" prev-is-closed="false" class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="22120" xq="yes"> </span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="5" prev-is-closed="true" class="op">,</span><span xq="yes" start="6" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="22129" xq="yes"> </span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
           </span><span xq="yes" start="15" prev-is-closed="true" class="op">else</span><span xq="yes" start="19" prev-is-closed="false" class="whitespace">&#xD;
               </span><span xq="yes" start="36" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="37" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="38" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="39" prev-is-closed="true" class="op">,</span><span xq="yes" start="40" prev-is-closed="false" class="whitespace">&#xD;
         </span><span pos="22182" class="es">&lt;</span><span name="xml-open-tag" pos="22183" class="en">br</span><span name="x-tag-end" pos="22185" class="z">/&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="22190" class="op">}</span><span name="resume-x-literal-txt" pos="22191" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the xqDoc HTML for the specified xqDoc </span><span pos="22254" class="es">&lt;</span><span name="xml-open-tag" pos="22255" class="en">i</span><span name="x-tag-end" pos="22256" class="z">&gt;</span><span pos="22257" class="txt">see</span><span pos="22260" class="sc">&lt;/</span><span name="xml-close-tag" pos="22262" class="cl">i</span><span name="x-tag-end" pos="22263" class="z">&gt;</span><span pos="22264" class="txt"> comment element. &#xD;
 :  If the comment is a URI that exists for a module contained within&#xD;
 :  xqDoc, build a link to this module (and optionally method or variable&#xD;
 :  name.  If the comment is a 'http://' URL, then build a link to the URL.  If the&#xD;
 :  comment is simply text, return the text.  With version 1.1, it is now also&#xD;
 :  possible to specify the visible display name for the link.  This is accomplished&#xD;
 :  by specifying an option second semi-colon followed by the link name.  So, the&#xD;
 :  format for the parameter would be as follows:&#xD;
 :  </span><span pos="22819" class="es">&lt;</span><span name="xml-open-tag" pos="22820" class="en">p</span><span name="x-tag-end" pos="22821" class="z">/&gt;</span><span pos="22823" class="txt">&#xD;
 :&#xD;
 :    a mandatory uri (or text) ';' an optional variable or method name ';' an optional link name&#xD;
 :&#xD;
 :  @param $entry the xqDoc param comment element associated with a function&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-comment-see($entry as element(), $local as xs:boolean) as item()* &#xD;
</span><span name="nested-query" pos="23274" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="higher">let</span><span xq="yes" start="8" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="9" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="13" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="true" class="op">:=</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="17" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="52" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="53" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="54" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="58" prev-is-closed="true" class="higher">let</span><span xq="yes" start="61" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="62" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="69" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="70" prev-is-closed="true" class="op">:=</span><span xq="yes" start="72" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="73" prev-is-closed="false" class="function">fn:tokenize</span><span class="parenthesis">(</span><span xq="yes" start="85" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="89" prev-is-closed="true" class="op">,</span><span xq="yes" start="90" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="23365" xq="yes">;</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="6" prev-is-closed="true" class="op">return</span><span xq="yes" start="12" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="18" prev-is-closed="false" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="31" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="38" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="39" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="40" prev-is-closed="true" class="op">=</span><span xq="yes" start="41" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="42" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="43" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="44" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="45" prev-is-closed="true" class="op">then</span><span xq="yes" start="49" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="57" prev-is-closed="false" class="if">if</span><span xq="yes" start="59" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="60" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="61" prev-is-closed="false" class="function">fn:not</span><span class="parenthesis">(</span><span xq="yes" start="68" prev-is-closed="false" class="function">fn:contains</span><span class="parenthesis">(</span><span xq="yes" start="80" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="87" prev-is-closed="true" class="op">,</span><span class="op">"</span><span class="literal" pos="23455" xq="yes">#</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="4" prev-is-closed="true" class="op">and</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="46" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="57" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="58" prev-is-closed="true" class="step">/</span><span xq="yes" start="59" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="67" prev-is-closed="true" class="step">/</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="77" prev-is-closed="true" class="filter">[</span><span xq="yes" start="78" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="84" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="85" prev-is-closed="true" class="op">=</span><span xq="yes" start="86" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="87" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="94" prev-is-closed="true" class="filter">]</span><span xq="yes" start="95" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="96" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="97" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="98" prev-is-closed="true" class="op">then</span><span xq="yes" start="102" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
        </span><span xq="yes" start="114" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="23590" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="31" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="37" prev-is-closed="true" class="op">,</span><span xq="yes" start="38" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="67" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="74" prev-is-closed="true" class="op">,</span><span xq="yes" start="75" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="104" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="108" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="109" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="117" prev-is-closed="true" class="op">else</span><span xq="yes" start="121" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="122" prev-is-closed="false" class="if">if</span><span xq="yes" start="124" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="125" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="126" prev-is-closed="false" class="function">fn:starts-with</span><span class="parenthesis">(</span><span xq="yes" start="141" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="148" prev-is-closed="true" class="op">,</span><span xq="yes" start="149" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="23751" xq="yes">http</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="4" prev-is-closed="true" class="op">then</span><span xq="yes" start="8" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
        </span><span pos="23776" class="es">&lt;</span><span name="xml-open-tag" pos="23777" class="en">a</span><span name="xml-name-end" pos="23778" class="atn"> href</span><span name="x-equals" pos="23783" class="atneq">=</span><span name="xml-att-quote" pos="23784" class="z">"</span><span name="nested-query" pos="23785" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$tokens</span><span name="unnested-xquery" pos="23793" class="op">}</span><span name="xml-att-quote" pos="23794" class="z">"</span><span name="x-tag-end" pos="23795" class="z">&gt;</span><span name="nested-query" pos="23796" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$tokens</span><span name="unnested-xquery" pos="23804" class="op">}</span><span pos="23805" class="sc">&lt;/</span><span name="xml-close-tag" pos="23807" class="cl">a</span><span name="x-tag-end" pos="23808" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
        </span><span xq="yes" start="25" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="31" prev-is-closed="true" class="step">/</span><span xq="yes" start="32" prev-is-closed="false" class="node">node(</span><span xq="yes" start="37" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="38" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="44" prev-is-closed="true" class="op">else</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="if">if</span><span xq="yes" start="51" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="53" prev-is-closed="false" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="62" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="69" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="70" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="71" prev-is-closed="true" class="op">=</span><span xq="yes" start="72" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="73" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="74" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="75" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="76" prev-is-closed="true" class="op">then</span><span xq="yes" start="80" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="88" prev-is-closed="false" class="if">if</span><span xq="yes" start="90" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="91" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="92" prev-is-closed="false" class="function">fn:not</span><span class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="function">fn:contains</span><span class="parenthesis">(</span><span xq="yes" start="111" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="118" prev-is-closed="true" class="filter">[</span><span xq="yes" start="119" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="120" prev-is-closed="true" class="filter">]</span><span xq="yes" start="121" prev-is-closed="true" class="op">,</span><span class="op">"</span><span class="literal" pos="23930" xq="yes">#</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="4" prev-is-closed="true" class="op">and</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="46" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="57" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="58" prev-is-closed="true" class="step">/</span><span xq="yes" start="59" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="67" prev-is-closed="true" class="filter">[</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="77" prev-is-closed="true" class="step">/</span><span xq="yes" start="78" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="84" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="85" prev-is-closed="true" class="op">=</span><span xq="yes" start="86" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="87" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="94" prev-is-closed="true" class="filter">[</span><span xq="yes" start="95" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="96" prev-is-closed="true" class="filter">]</span><span xq="yes" start="97" prev-is-closed="true" class="filter">]</span><span xq="yes" start="98" prev-is-closed="true" class="step">/</span><span xq="yes" start="99" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="111" prev-is-closed="true" class="step">/</span><span xq="yes" start="112" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="123" prev-is-closed="true" class="filter">[</span><span xq="yes" start="124" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="131" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="132" prev-is-closed="true" class="op">=</span><span xq="yes" start="133" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="134" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="153" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="160" prev-is-closed="true" class="filter">[</span><span xq="yes" start="161" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="162" prev-is-closed="true" class="filter">]</span><span xq="yes" start="163" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="164" prev-is-closed="true" class="filter">]</span><span xq="yes" start="165" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="166" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="167" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="168" prev-is-closed="true" class="op">then</span><span xq="yes" start="172" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
        </span><span xq="yes" start="184" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="24135" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="31" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="37" prev-is-closed="true" class="op">,</span><span xq="yes" start="38" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="67" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="74" prev-is-closed="true" class="op">,</span><span xq="yes" start="75" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="104" prev-is-closed="false" class="variable">$tmp</span><span xq="yes" start="108" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="109" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="117" prev-is-closed="true" class="op">else</span><span xq="yes" start="121" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
      </span><span xq="yes" start="131" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="137" prev-is-closed="true" class="step">/</span><span xq="yes" start="138" prev-is-closed="false" class="node">node(</span><span xq="yes" start="143" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="144" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="150" prev-is-closed="true" class="op">else</span><span xq="yes" start="154" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="155" prev-is-closed="false" class="if">if</span><span xq="yes" start="157" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="158" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="159" prev-is-closed="false" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="168" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="175" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="176" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="177" prev-is-closed="true" class="op">=</span><span xq="yes" start="178" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="179" prev-is-closed="false" class="numeric">3</span><span xq="yes" start="180" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="181" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="182" prev-is-closed="true" class="op">then</span><span xq="yes" start="186" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="194" prev-is-closed="false" class="if">if</span><span xq="yes" start="196" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="197" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="198" prev-is-closed="false" class="function">fn:string-length</span><span class="parenthesis">(</span><span xq="yes" start="215" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="222" prev-is-closed="true" class="filter">[</span><span xq="yes" start="223" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="224" prev-is-closed="true" class="filter">]</span><span xq="yes" start="225" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="226" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="227" prev-is-closed="true" class="op">=</span><span xq="yes" start="228" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="229" prev-is-closed="false" class="numeric">0</span><span xq="yes" start="230" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="231" prev-is-closed="true" class="op">and</span><span xq="yes" start="234" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="235" prev-is-closed="false" class="function">fn:not</span><span class="parenthesis">(</span><span xq="yes" start="242" prev-is-closed="false" class="function">fn:contains</span><span class="parenthesis">(</span><span xq="yes" start="254" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="261" prev-is-closed="true" class="filter">[</span><span xq="yes" start="262" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="263" prev-is-closed="true" class="filter">]</span><span xq="yes" start="264" prev-is-closed="true" class="op">,</span><span class="op">"</span><span class="literal" pos="24411" xq="yes">#</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="4" prev-is-closed="true" class="op">and</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="46" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="57" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="58" prev-is-closed="true" class="step">/</span><span xq="yes" start="59" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="67" prev-is-closed="true" class="step">/</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="77" prev-is-closed="true" class="filter">[</span><span xq="yes" start="78" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="84" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="85" prev-is-closed="true" class="op">=</span><span xq="yes" start="86" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="87" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="94" prev-is-closed="true" class="filter">[</span><span xq="yes" start="95" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="96" prev-is-closed="true" class="filter">]</span><span xq="yes" start="97" prev-is-closed="true" class="filter">]</span><span xq="yes" start="98" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="99" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="100" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="true" class="op">then</span><span xq="yes" start="105" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
        </span><span xq="yes" start="117" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="24549" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="31" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="37" prev-is-closed="true" class="op">,</span><span xq="yes" start="38" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="67" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="74" prev-is-closed="true" class="op">,</span><span xq="yes" start="75" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="104" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="111" prev-is-closed="true" class="filter">[</span><span xq="yes" start="112" prev-is-closed="false" class="numeric">3</span><span xq="yes" start="113" prev-is-closed="true" class="filter">]</span><span xq="yes" start="114" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="115" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="123" prev-is-closed="true" class="op">else</span><span xq="yes" start="127" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="128" prev-is-closed="false" class="if">if</span><span xq="yes" start="130" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="131" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="132" prev-is-closed="false" class="function">fn:string-length</span><span class="parenthesis">(</span><span xq="yes" start="149" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="156" prev-is-closed="true" class="filter">[</span><span xq="yes" start="157" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="158" prev-is-closed="true" class="filter">]</span><span xq="yes" start="159" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="160" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="161" prev-is-closed="true" class="op">=</span><span xq="yes" start="162" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="false" class="numeric">0</span><span xq="yes" start="164" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="165" prev-is-closed="true" class="op">and</span><span xq="yes" start="168" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="169" prev-is-closed="false" class="function">fn:starts-with</span><span class="parenthesis">(</span><span xq="yes" start="184" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="191" prev-is-closed="true" class="filter">[</span><span xq="yes" start="192" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="193" prev-is-closed="true" class="filter">]</span><span xq="yes" start="194" prev-is-closed="true" class="op">,</span><span xq="yes" start="195" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="24756" xq="yes">http</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="4" prev-is-closed="true" class="op">then</span><span xq="yes" start="8" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
        </span><span pos="24781" class="es">&lt;</span><span name="xml-open-tag" pos="24782" class="en">a</span><span name="xml-name-end" pos="24783" class="atn"> href</span><span name="x-equals" pos="24788" class="atneq">=</span><span name="xml-att-quote" pos="24789" class="z">"</span><span name="nested-query" pos="24790" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$tokens</span><span xq="yes" start="8" prev-is-closed="true" class="filter">[</span><span xq="yes" start="9" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="10" prev-is-closed="true" class="filter">]</span><span name="unnested-xquery" pos="24801" class="op">}</span><span name="xml-att-quote" pos="24802" class="z">"</span><span name="x-tag-end" pos="24803" class="z">&gt;</span><span name="nested-query" pos="24804" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$tokens</span><span xq="yes" start="8" prev-is-closed="true" class="filter">[</span><span xq="yes" start="9" prev-is-closed="false" class="numeric">3</span><span xq="yes" start="10" prev-is-closed="true" class="filter">]</span><span name="unnested-xquery" pos="24815" class="op">}</span><span pos="24816" class="sc">&lt;/</span><span name="xml-close-tag" pos="24818" class="cl">a</span><span name="x-tag-end" pos="24819" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="false" class="if">if</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="function">fn:string-length</span><span class="parenthesis">(</span><span xq="yes" start="35" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="42" prev-is-closed="true" class="filter">[</span><span xq="yes" start="43" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="44" prev-is-closed="true" class="filter">]</span><span xq="yes" start="45" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="46" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="47" prev-is-closed="true" class="op">&gt;</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="numeric">0</span><span xq="yes" start="50" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="51" prev-is-closed="true" class="op">and</span><span xq="yes" start="54" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="55" prev-is-closed="false" class="function">fn:not</span><span class="parenthesis">(</span><span xq="yes" start="62" prev-is-closed="false" class="function">fn:contains</span><span class="parenthesis">(</span><span xq="yes" start="74" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="83" prev-is-closed="true" class="filter">]</span><span xq="yes" start="84" prev-is-closed="true" class="op">,</span><span class="op">"</span><span class="literal" pos="24904" xq="yes">#</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="3" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="4" prev-is-closed="true" class="op">and</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="46" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="57" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="58" prev-is-closed="true" class="step">/</span><span xq="yes" start="59" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="67" prev-is-closed="true" class="filter">[</span><span xq="yes" start="68" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="77" prev-is-closed="true" class="step">/</span><span xq="yes" start="78" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="84" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="85" prev-is-closed="true" class="op">=</span><span xq="yes" start="86" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="87" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="94" prev-is-closed="true" class="filter">[</span><span xq="yes" start="95" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="96" prev-is-closed="true" class="filter">]</span><span xq="yes" start="97" prev-is-closed="true" class="filter">]</span><span xq="yes" start="98" prev-is-closed="true" class="step">/</span><span xq="yes" start="99" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="111" prev-is-closed="true" class="step">/</span><span xq="yes" start="112" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="123" prev-is-closed="true" class="filter">[</span><span xq="yes" start="124" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="131" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="132" prev-is-closed="true" class="op">=</span><span xq="yes" start="133" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="134" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="153" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="160" prev-is-closed="true" class="filter">[</span><span xq="yes" start="161" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="162" prev-is-closed="true" class="filter">]</span><span xq="yes" start="163" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="164" prev-is-closed="true" class="filter">]</span><span xq="yes" start="165" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="166" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="167" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="168" prev-is-closed="true" class="op">then</span><span xq="yes" start="172" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
        </span><span xq="yes" start="184" prev-is-closed="false" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="25109" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="31" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="37" prev-is-closed="true" class="op">,</span><span xq="yes" start="38" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="67" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="74" prev-is-closed="true" class="op">,</span><span xq="yes" start="75" prev-is-closed="false" class="whitespace">&#xD;
                           </span><span xq="yes" start="104" prev-is-closed="false" class="variable">$tokens</span><span xq="yes" start="111" prev-is-closed="true" class="filter">[</span><span xq="yes" start="112" prev-is-closed="false" class="numeric">3</span><span xq="yes" start="113" prev-is-closed="true" class="filter">]</span><span xq="yes" start="114" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="115" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="123" prev-is-closed="true" class="op">else</span><span xq="yes" start="127" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
      </span><span xq="yes" start="137" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="143" prev-is-closed="true" class="step">/</span><span xq="yes" start="144" prev-is-closed="false" class="node">node(</span><span xq="yes" start="149" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="150" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="156" prev-is-closed="true" class="op">else</span><span xq="yes" start="160" prev-is-closed="false" class="whitespace"> &#xD;
&#xD;
    </span><span xq="yes" start="169" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="175" prev-is-closed="true" class="step">/</span><span xq="yes" start="176" prev-is-closed="false" class="node">node(</span><span xq="yes" start="181" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="182" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="25304" class="op">}</span><span name="resume-x-literal-txt" pos="25305" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (contained in&#xD;
 :  other modules) that are </span><span pos="25416" class="es">&lt;</span><span name="xml-open-tag" pos="25417" class="en">i</span><span name="x-tag-end" pos="25418" class="z">&gt;</span><span pos="25419" class="txt">used by</span><span pos="25426" class="sc">&lt;/</span><span name="xml-close-tag" pos="25428" class="cl">i</span><span name="x-tag-end" pos="25429" class="z">&gt;</span><span pos="25430" class="txt"> the current function.  If that &#xD;
 :  module exists in xqDoc, construct a link to the module and function.&#xD;
 :  If that module does not exist in xqDoc, simply identify the &#xD;
 :  module and function name.&#xD;
 :&#xD;
 :  @param $function the current function&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-external-functions-invoked($function as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="25966" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="28" prev-is-closed="true" class="step">/</span><span xq="yes" start="29" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="39" prev-is-closed="true" class="filter">[</span><span xq="yes" start="40" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="46" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="47" prev-is-closed="true" class="op">!=</span><span xq="yes" start="49" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="50" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="69" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="78" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="79" prev-is-closed="true" class="filter">]</span><span xq="yes" start="80" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="81" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="82" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="83" prev-is-closed="true" class="op">then</span><span xq="yes" start="87" prev-is-closed="false" class="whitespace">&#xD;
     </span><span pos="26060" class="es">&lt;</span><span name="xml-open-tag" pos="26061" class="en">div</span><span name="xml-name-end" pos="26064" class="atn"> class</span><span name="x-equals" pos="26070" class="atneq">=</span><span name="xml-att-quote" pos="26071" class="z">"</span><span name="xml-literal-start" pos="26072" class="av">methoddetail</span><span name="xml-att-quote" pos="26084" class="z">"</span><span name="x-tag-end" pos="26085" class="z">&gt;</span><span pos="26086" class="txt">&#xD;
     </span><span pos="26093" class="es">&lt;</span><span name="xml-open-tag" pos="26094" class="en">h6</span><span name="x-tag-end" pos="26096" class="z">&gt;</span><span pos="26097" class="txt">External Functions that are used by this Function</span><span pos="26146" class="sc">&lt;/</span><span name="xml-close-tag" pos="26148" class="cl">h6</span><span name="x-tag-end" pos="26150" class="z">&gt;</span><span pos="26151" class="txt">&#xD;
     </span><span pos="26158" class="es">&lt;</span><span name="xml-open-tag" pos="26159" class="en">table</span><span name="xml-name-end" pos="26164" class="atn"> class</span><span name="x-equals" pos="26170" class="atneq">=</span><span name="xml-att-quote" pos="26171" class="z">"</span><span name="xml-literal-start" pos="26172" class="av">inexternal</span><span name="xml-att-quote" pos="26182" class="z">"</span><span name="x-tag-end" pos="26183" class="z">&gt;</span><span pos="26184" class="txt">&#xD;
       </span><span pos="26193" class="es">&lt;</span><span name="xml-open-tag" pos="26194" class="en">tr</span><span name="x-tag-end" pos="26196" class="z">&gt;</span><span pos="26197" class="txt">&#xD;
        </span><span pos="26207" class="es">&lt;</span><span name="xml-open-tag" pos="26208" class="en">th</span><span name="xml-name-end" pos="26210" class="atn"> align</span><span name="x-equals" pos="26216" class="atneq">=</span><span name="xml-att-quote" pos="26217" class="z">"</span><span name="xml-literal-start" pos="26218" class="av">left</span><span name="xml-att-quote" pos="26222" class="z">"</span><span name="x-tag-end" pos="26223" class="z">&gt;</span><span pos="26224" class="txt">Module URI</span><span pos="26234" class="sc">&lt;/</span><span name="xml-close-tag" pos="26236" class="cl">th</span><span name="x-tag-end" pos="26238" class="z">&gt;</span><span pos="26239" class="txt">&#xD;
        </span><span pos="26249" class="es">&lt;</span><span name="xml-open-tag" pos="26250" class="en">th</span><span name="xml-name-end" pos="26252" class="atn"> align</span><span name="x-equals" pos="26258" class="atneq">=</span><span name="xml-att-quote" pos="26259" class="z">"</span><span name="xml-literal-start" pos="26260" class="av">left</span><span name="xml-att-quote" pos="26264" class="z">"</span><span name="x-tag-end" pos="26265" class="z">&gt;</span><span pos="26266" class="txt">Function Name</span><span pos="26279" class="sc">&lt;/</span><span name="xml-close-tag" pos="26281" class="cl">th</span><span name="x-tag-end" pos="26283" class="z">&gt;</span><span pos="26284" class="txt">&#xD;
       </span><span pos="26293" class="sc">&lt;/</span><span name="xml-close-tag" pos="26295" class="cl">tr</span><span name="x-tag-end" pos="26297" class="z">&gt;</span><span pos="26298" class="txt">&#xD;
       </span><span name="nested-query" pos="26307" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="10" prev-is-closed="true" class="higher">let</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="op">:=</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="23" prev-is-closed="false" class="higher">for</span><span xq="yes" start="26" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="27" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="30" prev-is-closed="true" class="op">in</span><span xq="yes" start="32" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="33" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="52" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="61" prev-is-closed="true" class="step">/</span><span xq="yes" start="62" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="79" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="80" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="102" prev-is-closed="true" class="qname">where</span><span xq="yes" start="107" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="108" prev-is-closed="true" class="variable">$x</span><span xq="yes" start="110" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="111" prev-is-closed="true" class="op">!=</span><span xq="yes" start="113" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="114" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="133" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="142" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="143" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="165" prev-is-closed="true" class="qname">order</span><span xq="yes" start="170" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="171" prev-is-closed="true" class="qname">by</span><span xq="yes" start="173" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="174" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="184" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="186" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="187" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="209" prev-is-closed="true" class="op">return</span><span xq="yes" start="215" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="216" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="226" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="228" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="229" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="238" prev-is-closed="true" class="higher">for</span><span xq="yes" start="241" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="242" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="246" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="247" prev-is-closed="true" class="op">in</span><span xq="yes" start="249" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="250" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="255" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="264" prev-is-closed="true" class="higher">let</span><span xq="yes" start="267" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="268" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="274" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="275" prev-is-closed="true" class="op">:=</span><span xq="yes" start="277" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="278" prev-is-closed="false" class="higher">for</span><span xq="yes" start="281" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="282" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="284" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="285" prev-is-closed="true" class="op">in</span><span xq="yes" start="287" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="288" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="297" prev-is-closed="true" class="step">/</span><span xq="yes" start="298" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="308" prev-is-closed="true" class="filter">[</span><span xq="yes" start="309" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="315" prev-is-closed="true" class="op">=</span><span xq="yes" start="316" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="320" prev-is-closed="true" class="filter">]</span><span xq="yes" start="321" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="344" prev-is-closed="true" class="qname">order</span><span xq="yes" start="349" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="350" prev-is-closed="true" class="qname">by</span><span xq="yes" start="352" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="353" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="363" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="365" prev-is-closed="true" class="step">/</span><span xq="yes" start="366" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="373" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="374" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="397" prev-is-closed="true" class="op">return</span><span xq="yes" start="403" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="404" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="414" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="416" prev-is-closed="true" class="step">/</span><span xq="yes" start="417" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="424" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="425" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="434" prev-is-closed="true" class="higher">for</span><span xq="yes" start="437" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="438" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="443" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="444" prev-is-closed="true" class="qname">at</span><span xq="yes" start="446" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="447" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="449" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="450" prev-is-closed="true" class="op">in</span><span xq="yes" start="452" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="453" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="459" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="468" prev-is-closed="true" class="op">return</span><span xq="yes" start="474" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="485" prev-is-closed="false" class="if">if</span><span xq="yes" start="487" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="488" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="489" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="491" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="492" prev-is-closed="true" class="op">=</span><span xq="yes" start="493" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="494" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="495" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="496" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="497" prev-is-closed="true" class="op">then</span><span xq="yes" start="501" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="505" prev-is-closed="false" class="parenthesis">(</span><span pos="26813" class="es">&lt;</span><span name="xml-open-tag" pos="26814" class="en">tr</span><span name="x-tag-end" pos="26816" class="z">&gt;</span><span pos="26817" class="es">&lt;</span><span name="xml-open-tag" pos="26818" class="en">td</span><span name="x-tag-end" pos="26820" class="z">&gt;</span><span name="nested-query" pos="26821" class="op">{</span><span class="op">"</span><span class="literal" pos="26822" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="26830" class="op">}</span><span pos="26831" class="sc">&lt;/</span><span name="xml-close-tag" pos="26833" class="cl">td</span><span name="x-tag-end" pos="26835" class="z">&gt;</span><span pos="26836" class="es">&lt;</span><span name="xml-open-tag" pos="26837" class="en">td</span><span name="x-tag-end" pos="26839" class="z">&gt;</span><span name="nested-query" pos="26840" class="op">{</span><span class="op">"</span><span class="literal" pos="26841" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="26849" class="op">}</span><span pos="26850" class="sc">&lt;/</span><span name="xml-close-tag" pos="26852" class="cl">td</span><span name="x-tag-end" pos="26854" class="z">&gt;</span><span pos="26855" class="sc">&lt;/</span><span name="xml-close-tag" pos="26857" class="cl">tr</span><span name="x-tag-end" pos="26859" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="26875" class="es">&lt;</span><span name="xml-open-tag" pos="26876" class="en">tr</span><span name="x-tag-end" pos="26878" class="z">&gt;</span><span pos="26879" class="txt">&#xD;
             </span><span pos="26894" class="es">&lt;</span><span name="xml-open-tag" pos="26895" class="en">td</span><span name="xml-name-end" pos="26897" class="atn"> rowspan</span><span name="x-equals" pos="26905" class="atneq">=</span><span name="xml-att-quote" pos="26906" class="z">"</span><span name="nested-query" pos="26907" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="16" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="26924" class="op">}</span><span name="xml-att-quote" pos="26925" class="z">"</span><span name="x-tag-end" pos="26926" class="z">&gt;</span><span name="nested-query" pos="26927" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="26952" class="op">}</span><span pos="26953" class="sc">&lt;/</span><span name="xml-close-tag" pos="26955" class="cl">td</span><span name="x-tag-end" pos="26957" class="z">&gt;</span><span pos="26958" class="txt">&#xD;
             </span><span name="nested-query" pos="26973" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="147" prev-is-closed="true" class="filter">]</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="150" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="151" prev-is-closed="true" class="op">then</span><span xq="yes" start="155" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="27147" class="es">&lt;</span><span name="xml-open-tag" pos="27148" class="en">td</span><span name="x-tag-end" pos="27150" class="z">&gt;</span><span pos="27151" class="txt">&#xD;
                     </span><span name="nested-query" pos="27174" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="27219" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="110" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="111" prev-is-closed="true" class="op">,</span><span xq="yes" start="112" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="156" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="27415" class="op">}</span><span name="resume-x-literal-txt" pos="27416" class="txt">&#xD;
                 </span><span pos="27435" class="sc">&lt;/</span><span name="xml-close-tag" pos="27437" class="cl">td</span><span name="x-tag-end" pos="27439" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="27480" class="es">&lt;</span><span name="xml-open-tag" pos="27481" class="en">td</span><span name="x-tag-end" pos="27483" class="z">&gt;</span><span name="nested-query" pos="27484" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$name</span><span name="unnested-xquery" pos="27490" class="op">}</span><span pos="27491" class="sc">&lt;/</span><span name="xml-close-tag" pos="27493" class="cl">td</span><span name="x-tag-end" pos="27495" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="27511" class="op">}</span><span name="resume-x-literal-txt" pos="27512" class="txt">&#xD;
           </span><span pos="27525" class="sc">&lt;/</span><span name="xml-close-tag" pos="27527" class="cl">tr</span><span name="x-tag-end" pos="27529" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="13" prev-is-closed="true" class="op">else</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace">&#xD;
           </span><span pos="27559" class="es">&lt;</span><span name="xml-open-tag" pos="27560" class="en">tr</span><span name="x-tag-end" pos="27562" class="z">&gt;</span><span pos="27563" class="txt">&#xD;
             </span><span name="nested-query" pos="27578" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="147" prev-is-closed="true" class="filter">]</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="150" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="151" prev-is-closed="true" class="op">then</span><span xq="yes" start="155" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="27752" class="es">&lt;</span><span name="xml-open-tag" pos="27753" class="en">td</span><span name="x-tag-end" pos="27755" class="z">&gt;</span><span pos="27756" class="txt">&#xD;
                     </span><span name="nested-query" pos="27779" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="27824" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="110" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="111" prev-is-closed="true" class="op">,</span><span xq="yes" start="112" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="156" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="28020" class="op">}</span><span name="resume-x-literal-txt" pos="28021" class="txt">                   &#xD;
                 </span><span pos="28059" class="sc">&lt;/</span><span name="xml-close-tag" pos="28061" class="cl">td</span><span name="x-tag-end" pos="28063" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="28104" class="es">&lt;</span><span name="xml-open-tag" pos="28105" class="en">td</span><span name="x-tag-end" pos="28107" class="z">&gt;</span><span name="nested-query" pos="28108" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$name</span><span name="unnested-xquery" pos="28114" class="op">}</span><span pos="28115" class="sc">&lt;/</span><span name="xml-close-tag" pos="28117" class="cl">td</span><span name="x-tag-end" pos="28119" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="28135" class="op">}</span><span name="resume-x-literal-txt" pos="28136" class="txt">&#xD;
           </span><span pos="28149" class="sc">&lt;/</span><span name="xml-close-tag" pos="28151" class="cl">tr</span><span name="x-tag-end" pos="28153" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span name="unnested-xquery" pos="28162" class="op">}</span><span name="resume-x-literal-txt" pos="28163" class="txt">&#xD;
    </span><span pos="28169" class="sc">&lt;/</span><span name="xml-close-tag" pos="28171" class="cl">table</span><span name="x-tag-end" pos="28176" class="z">&gt;</span><span pos="28177" class="txt">&#xD;
   </span><span pos="28182" class="sc">&lt;/</span><span name="xml-close-tag" pos="28184" class="cl">div</span><span name="x-tag-end" pos="28187" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="7" prev-is-closed="true" class="op">else</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="28208" class="op">}</span><span name="resume-x-literal-txt" pos="28209" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (contained in&#xD;
 :  other modules) that </span><span pos="28316" class="es">&lt;</span><span name="xml-open-tag" pos="28317" class="en">i</span><span name="x-tag-end" pos="28318" class="z">&gt;</span><span pos="28319" class="txt">use</span><span pos="28322" class="sc">&lt;/</span><span name="xml-close-tag" pos="28324" class="cl">i</span><span name="x-tag-end" pos="28325" class="z">&gt;</span><span pos="28326" class="txt"> the current function.  If that &#xD;
 :  module exists in xqDoc, construct a link to the module and function.&#xD;
 :  If that module does not exist in xqDoc, simply identify the &#xD;
 :  module and function name.&#xD;
 :&#xD;
 :  @param $function the current function&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-external-functions-invoked-by($function as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="28865" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="step">/</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="104" prev-is-closed="true" class="filter">[</span><span xq="yes" start="105" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="124" prev-is-closed="false" class="context">.</span><span xq="yes" start="125" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="126" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="127" prev-is-closed="true" class="op">!=</span><span xq="yes" start="129" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="130" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="149" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="158" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="159" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="160" prev-is-closed="true" class="op">and</span><span xq="yes" start="163" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="164" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="170" prev-is-closed="true" class="op">=</span><span xq="yes" start="171" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="190" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="199" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="200" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="201" prev-is-closed="true" class="op">and</span><span xq="yes" start="204" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="205" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="212" prev-is-closed="true" class="op">=</span><span xq="yes" start="213" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="223" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="232" prev-is-closed="true" class="step">/</span><span xq="yes" start="233" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="240" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="241" prev-is-closed="true" class="filter">]</span><span xq="yes" start="242" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="243" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="244" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="245" prev-is-closed="true" class="op">then</span><span xq="yes" start="249" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="29120" class="es">&lt;</span><span name="xml-open-tag" pos="29121" class="en">div</span><span name="xml-name-end" pos="29124" class="atn"> class</span><span name="x-equals" pos="29130" class="atneq">=</span><span name="xml-att-quote" pos="29131" class="z">"</span><span name="xml-literal-start" pos="29132" class="av">methoddetail</span><span name="xml-att-quote" pos="29144" class="z">"</span><span name="x-tag-end" pos="29145" class="z">&gt;</span><span pos="29146" class="txt">&#xD;
     </span><span pos="29153" class="es">&lt;</span><span name="xml-open-tag" pos="29154" class="en">h6</span><span name="x-tag-end" pos="29156" class="z">&gt;</span><span pos="29157" class="txt">External Functions that invoke this Function</span><span pos="29201" class="sc">&lt;/</span><span name="xml-close-tag" pos="29203" class="cl">h6</span><span name="x-tag-end" pos="29205" class="z">&gt;</span><span pos="29206" class="txt">&#xD;
     </span><span pos="29213" class="es">&lt;</span><span name="xml-open-tag" pos="29214" class="en">table</span><span name="xml-name-end" pos="29219" class="atn"> class</span><span name="x-equals" pos="29225" class="atneq">=</span><span name="xml-att-quote" pos="29226" class="z">"</span><span name="xml-literal-start" pos="29227" class="av">inexternal</span><span name="xml-att-quote" pos="29237" class="z">"</span><span name="x-tag-end" pos="29238" class="z">&gt;</span><span pos="29239" class="txt">&#xD;
       </span><span pos="29248" class="es">&lt;</span><span name="xml-open-tag" pos="29249" class="en">tr</span><span name="x-tag-end" pos="29251" class="z">&gt;</span><span pos="29252" class="txt">&#xD;
        </span><span pos="29262" class="es">&lt;</span><span name="xml-open-tag" pos="29263" class="en">th</span><span name="xml-name-end" pos="29265" class="atn"> align</span><span name="x-equals" pos="29271" class="atneq">=</span><span name="xml-att-quote" pos="29272" class="z">"</span><span name="xml-literal-start" pos="29273" class="av">left</span><span name="xml-att-quote" pos="29277" class="z">"</span><span name="x-tag-end" pos="29278" class="z">&gt;</span><span pos="29279" class="txt">Module URI</span><span pos="29289" class="sc">&lt;/</span><span name="xml-close-tag" pos="29291" class="cl">th</span><span name="x-tag-end" pos="29293" class="z">&gt;</span><span pos="29294" class="txt">&#xD;
        </span><span pos="29304" class="es">&lt;</span><span name="xml-open-tag" pos="29305" class="en">th</span><span name="xml-name-end" pos="29307" class="atn"> align</span><span name="x-equals" pos="29313" class="atneq">=</span><span name="xml-att-quote" pos="29314" class="z">"</span><span name="xml-literal-start" pos="29315" class="av">left</span><span name="xml-att-quote" pos="29319" class="z">"</span><span name="x-tag-end" pos="29320" class="z">&gt;</span><span pos="29321" class="txt">Function Name</span><span pos="29334" class="sc">&lt;/</span><span name="xml-close-tag" pos="29336" class="cl">th</span><span name="x-tag-end" pos="29338" class="z">&gt;</span><span pos="29339" class="txt">&#xD;
       </span><span pos="29348" class="sc">&lt;/</span><span name="xml-close-tag" pos="29350" class="cl">tr</span><span name="x-tag-end" pos="29352" class="z">&gt;</span><span pos="29353" class="txt">&#xD;
       </span><span name="nested-query" pos="29362" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="11" prev-is-closed="true" class="higher">let</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="20" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="true" class="op">:=</span><span xq="yes" start="23" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="24" prev-is-closed="false" class="higher">for</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="30" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="31" prev-is-closed="true" class="op">in</span><span xq="yes" start="33" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="34" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="48" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="62" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="73" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="74" prev-is-closed="true" class="step">/</span><span xq="yes" start="75" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="83" prev-is-closed="true" class="step">/</span><span xq="yes" start="84" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="108" prev-is-closed="true" class="step">/</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="119" prev-is-closed="true" class="filter">[</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="126" prev-is-closed="true" class="op">=</span><span xq="yes" start="127" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="146" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="155" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="156" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="157" prev-is-closed="true" class="op">and</span><span xq="yes" start="160" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="161" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="168" prev-is-closed="true" class="op">=</span><span xq="yes" start="169" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="179" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="188" prev-is-closed="true" class="step">/</span><span xq="yes" start="189" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="196" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="197" prev-is-closed="true" class="filter">]</span><span xq="yes" start="198" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="221" prev-is-closed="true" class="op">return</span><span xq="yes" start="227" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="228" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="230" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="240" prev-is-closed="true" class="higher">let</span><span xq="yes" start="243" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="244" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="249" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="250" prev-is-closed="true" class="op">:=</span><span xq="yes" start="252" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="253" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="272" prev-is-closed="false" class="higher">for</span><span xq="yes" start="275" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="276" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="278" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="279" prev-is-closed="true" class="op">in</span><span xq="yes" start="281" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="282" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="287" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="326" prev-is-closed="true" class="qname">where</span><span xq="yes" start="331" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="332" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="351" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="353" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="354" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="355" prev-is-closed="true" class="op">!=</span><span xq="yes" start="357" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="358" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="377" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="386" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="387" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="426" prev-is-closed="true" class="qname">order</span><span xq="yes" start="431" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="432" prev-is-closed="true" class="qname">by</span><span xq="yes" start="434" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="435" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="454" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="456" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="457" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="496" prev-is-closed="true" class="op">return</span><span xq="yes" start="502" prev-is-closed="false" class="whitespace">&#xD;
                                       </span><span xq="yes" start="543" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="562" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="564" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="565" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="566" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="576" prev-is-closed="true" class="higher">for</span><span xq="yes" start="579" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="580" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="584" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="585" prev-is-closed="true" class="op">in</span><span xq="yes" start="587" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="588" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="593" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="603" prev-is-closed="true" class="higher">let</span><span xq="yes" start="606" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="607" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="615" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="616" prev-is-closed="true" class="op">:=</span><span xq="yes" start="618" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="619" prev-is-closed="false" class="higher">for</span><span xq="yes" start="622" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="623" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="629" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="630" prev-is-closed="true" class="op">in</span><span xq="yes" start="632" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="633" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="638" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="664" prev-is-closed="true" class="qname">where</span><span xq="yes" start="669" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="670" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="689" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="695" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="696" prev-is-closed="true" class="op">=</span><span xq="yes" start="697" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="701" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="727" prev-is-closed="true" class="qname">order</span><span xq="yes" start="732" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="733" prev-is-closed="true" class="qname">by</span><span xq="yes" start="735" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="736" prev-is-closed="true" class="variable">$entry</span><span xq="yes" start="742" prev-is-closed="true" class="step">/</span><span xq="yes" start="743" prev-is-closed="false" class="context">..</span><span xq="yes" start="745" prev-is-closed="true" class="step">/</span><span xq="yes" start="746" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="753" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="779" prev-is-closed="true" class="op">return</span><span xq="yes" start="785" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="786" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="792" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="802" prev-is-closed="true" class="higher">for</span><span xq="yes" start="805" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="806" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="812" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="813" prev-is-closed="true" class="qname">at</span><span xq="yes" start="815" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="816" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="818" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="819" prev-is-closed="true" class="op">in</span><span xq="yes" start="821" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="822" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="830" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="840" prev-is-closed="true" class="op">return</span><span xq="yes" start="846" prev-is-closed="false" class="whitespace"> &#xD;
           </span><span xq="yes" start="860" prev-is-closed="false" class="if">if</span><span xq="yes" start="862" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="863" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="864" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="866" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="867" prev-is-closed="true" class="op">=</span><span xq="yes" start="868" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="869" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="870" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="871" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="872" prev-is-closed="true" class="op">then</span><span xq="yes" start="876" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="880" prev-is-closed="false" class="parenthesis">(</span><span pos="30243" class="es">&lt;</span><span name="xml-open-tag" pos="30244" class="en">tr</span><span name="x-tag-end" pos="30246" class="z">&gt;</span><span pos="30247" class="es">&lt;</span><span name="xml-open-tag" pos="30248" class="en">td</span><span name="x-tag-end" pos="30250" class="z">&gt;</span><span name="nested-query" pos="30251" class="op">{</span><span class="op">"</span><span class="literal" pos="30252" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="30260" class="op">}</span><span pos="30261" class="sc">&lt;/</span><span name="xml-close-tag" pos="30263" class="cl">td</span><span name="x-tag-end" pos="30265" class="z">&gt;</span><span pos="30266" class="es">&lt;</span><span name="xml-open-tag" pos="30267" class="en">td</span><span name="x-tag-end" pos="30269" class="z">&gt;</span><span name="nested-query" pos="30270" class="op">{</span><span class="op">"</span><span class="literal" pos="30271" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="30279" class="op">}</span><span pos="30280" class="sc">&lt;/</span><span name="xml-close-tag" pos="30282" class="cl">td</span><span name="x-tag-end" pos="30284" class="z">&gt;</span><span pos="30285" class="sc">&lt;/</span><span name="xml-close-tag" pos="30287" class="cl">tr</span><span name="x-tag-end" pos="30289" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="30305" class="es">&lt;</span><span name="xml-open-tag" pos="30306" class="en">tr</span><span name="x-tag-end" pos="30308" class="z">&gt;</span><span pos="30309" class="txt">&#xD;
             </span><span pos="30324" class="es">&lt;</span><span name="xml-open-tag" pos="30325" class="en">td</span><span name="xml-name-end" pos="30327" class="atn"> rowspan</span><span name="x-equals" pos="30335" class="atneq">=</span><span name="xml-att-quote" pos="30336" class="z">"</span><span name="nested-query" pos="30337" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="18" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="30356" class="op">}</span><span name="xml-att-quote" pos="30357" class="z">"</span><span name="x-tag-end" pos="30358" class="z">&gt;</span><span name="nested-query" pos="30359" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="30384" class="op">}</span><span pos="30385" class="sc">&lt;/</span><span name="xml-close-tag" pos="30387" class="cl">td</span><span name="x-tag-end" pos="30389" class="z">&gt;</span><span pos="30390" class="txt">&#xD;
             </span><span name="nested-query" pos="30405" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="30591" class="es">&lt;</span><span name="xml-open-tag" pos="30592" class="en">td</span><span name="x-tag-end" pos="30594" class="z">&gt;</span><span pos="30595" class="txt">&#xD;
                     </span><span name="nested-query" pos="30618" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="30663" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="30905" class="op">}</span><span name="resume-x-literal-txt" pos="30906" class="txt">&#xD;
                 </span><span pos="30925" class="sc">&lt;/</span><span name="xml-close-tag" pos="30927" class="cl">td</span><span name="x-tag-end" pos="30929" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="30970" class="es">&lt;</span><span name="xml-open-tag" pos="30971" class="en">td</span><span name="x-tag-end" pos="30973" class="z">&gt;</span><span name="nested-query" pos="30974" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="31003" class="op">}</span><span pos="31004" class="sc">&lt;/</span><span name="xml-close-tag" pos="31006" class="cl">td</span><span name="x-tag-end" pos="31008" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="31024" class="op">}</span><span name="resume-x-literal-txt" pos="31025" class="txt">&#xD;
            </span><span pos="31039" class="sc">&lt;/</span><span name="xml-close-tag" pos="31041" class="cl">tr</span><span name="x-tag-end" pos="31043" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
           </span><span xq="yes" start="15" prev-is-closed="true" class="op">else</span><span xq="yes" start="19" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="31076" class="es">&lt;</span><span name="xml-open-tag" pos="31077" class="en">tr</span><span name="x-tag-end" pos="31079" class="z">&gt;</span><span pos="31080" class="txt">&#xD;
             </span><span name="nested-query" pos="31095" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="31281" class="es">&lt;</span><span name="xml-open-tag" pos="31282" class="en">td</span><span name="x-tag-end" pos="31284" class="z">&gt;</span><span pos="31285" class="txt">&#xD;
                     </span><span name="nested-query" pos="31308" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="31353" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="31595" class="op">}</span><span name="resume-x-literal-txt" pos="31596" class="txt">&#xD;
                 </span><span pos="31615" class="sc">&lt;/</span><span name="xml-close-tag" pos="31617" class="cl">td</span><span name="x-tag-end" pos="31619" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="31660" class="es">&lt;</span><span name="xml-open-tag" pos="31661" class="en">td</span><span name="x-tag-end" pos="31663" class="z">&gt;</span><span name="nested-query" pos="31664" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="31693" class="op">}</span><span pos="31694" class="sc">&lt;/</span><span name="xml-close-tag" pos="31696" class="cl">td</span><span name="x-tag-end" pos="31698" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="31714" class="op">}</span><span name="resume-x-literal-txt" pos="31715" class="txt">&#xD;
            </span><span pos="31729" class="sc">&lt;/</span><span name="xml-close-tag" pos="31731" class="cl">tr</span><span name="x-tag-end" pos="31733" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span name="unnested-xquery" pos="31744" class="op">}</span><span name="resume-x-literal-txt" pos="31745" class="txt">	  &#xD;
        </span><span pos="31758" class="sc">&lt;/</span><span name="xml-close-tag" pos="31760" class="cl">table</span><span name="x-tag-end" pos="31765" class="z">&gt;</span><span pos="31766" class="txt">&#xD;
       </span><span pos="31775" class="sc">&lt;/</span><span name="xml-close-tag" pos="31777" class="cl">div</span><span name="x-tag-end" pos="31780" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="31800" class="op">}</span><span name="resume-x-literal-txt" pos="31801" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (contained in the module&#xD;
 :  for the current function) that are </span><span pos="31934" class="es">&lt;</span><span name="xml-open-tag" pos="31935" class="en">i</span><span name="x-tag-end" pos="31936" class="z">&gt;</span><span pos="31937" class="txt">used by</span><span pos="31944" class="sc">&lt;/</span><span name="xml-close-tag" pos="31946" class="cl">i</span><span name="x-tag-end" pos="31947" class="z">&gt;</span><span pos="31948" class="txt"> the current function.  &#xD;
 :  Construct a link to the module and function.&#xD;
 :&#xD;
 :  @param $function the current function&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-internal-functions-invoked($function as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="32355" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="28" prev-is-closed="true" class="step">/</span><span xq="yes" start="29" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="39" prev-is-closed="true" class="filter">[</span><span xq="yes" start="40" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="46" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="47" prev-is-closed="true" class="op">=</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="68" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="77" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="78" prev-is-closed="true" class="filter">]</span><span xq="yes" start="79" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="80" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="81" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="82" prev-is-closed="true" class="op">then</span><span xq="yes" start="86" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="32447" class="es">&lt;</span><span name="xml-open-tag" pos="32448" class="en">div</span><span name="xml-name-end" pos="32451" class="atn"> class</span><span name="x-equals" pos="32457" class="atneq">=</span><span name="xml-att-quote" pos="32458" class="z">"</span><span name="xml-literal-start" pos="32459" class="av">methoddetail</span><span name="xml-att-quote" pos="32471" class="z">"</span><span name="x-tag-end" pos="32472" class="z">&gt;</span><span pos="32473" class="txt">&#xD;
     </span><span pos="32480" class="es">&lt;</span><span name="xml-open-tag" pos="32481" class="en">h6</span><span name="x-tag-end" pos="32483" class="z">&gt;</span><span pos="32484" class="txt">Internal Functions used by this Function</span><span pos="32524" class="sc">&lt;/</span><span name="xml-close-tag" pos="32526" class="cl">h6</span><span name="x-tag-end" pos="32528" class="z">&gt;</span><span pos="32529" class="txt">&#xD;
     </span><span pos="32536" class="es">&lt;</span><span name="xml-open-tag" pos="32537" class="en">table</span><span name="xml-name-end" pos="32542" class="atn"> class</span><span name="x-equals" pos="32548" class="atneq">=</span><span name="xml-att-quote" pos="32549" class="z">"</span><span name="xml-literal-start" pos="32550" class="av">inexternal</span><span name="xml-att-quote" pos="32560" class="z">"</span><span name="x-tag-end" pos="32561" class="z">&gt;</span><span pos="32562" class="txt">&#xD;
       </span><span pos="32571" class="es">&lt;</span><span name="xml-open-tag" pos="32572" class="en">tr</span><span name="x-tag-end" pos="32574" class="z">&gt;</span><span pos="32575" class="txt">&#xD;
        </span><span pos="32585" class="es">&lt;</span><span name="xml-open-tag" pos="32586" class="en">th</span><span name="xml-name-end" pos="32588" class="atn"> align</span><span name="x-equals" pos="32594" class="atneq">=</span><span name="xml-att-quote" pos="32595" class="z">"</span><span name="xml-literal-start" pos="32596" class="av">left</span><span name="xml-att-quote" pos="32600" class="z">"</span><span name="x-tag-end" pos="32601" class="z">&gt;</span><span pos="32602" class="txt">Module URI</span><span pos="32612" class="sc">&lt;/</span><span name="xml-close-tag" pos="32614" class="cl">th</span><span name="x-tag-end" pos="32616" class="z">&gt;</span><span pos="32617" class="txt">&#xD;
        </span><span pos="32627" class="es">&lt;</span><span name="xml-open-tag" pos="32628" class="en">th</span><span name="xml-name-end" pos="32630" class="atn"> align</span><span name="x-equals" pos="32636" class="atneq">=</span><span name="xml-att-quote" pos="32637" class="z">"</span><span name="xml-literal-start" pos="32638" class="av">left</span><span name="xml-att-quote" pos="32642" class="z">"</span><span name="x-tag-end" pos="32643" class="z">&gt;</span><span pos="32644" class="txt">Function Name</span><span pos="32657" class="sc">&lt;/</span><span name="xml-close-tag" pos="32659" class="cl">th</span><span name="x-tag-end" pos="32661" class="z">&gt;</span><span pos="32662" class="txt">&#xD;
       </span><span pos="32671" class="sc">&lt;/</span><span name="xml-close-tag" pos="32673" class="cl">tr</span><span name="x-tag-end" pos="32675" class="z">&gt;</span><span pos="32676" class="txt">&#xD;
      </span><span name="nested-query" pos="32684" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="10" prev-is-closed="true" class="higher">let</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="op">:=</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="23" prev-is-closed="false" class="higher">for</span><span xq="yes" start="26" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="27" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="30" prev-is-closed="true" class="op">in</span><span xq="yes" start="32" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="33" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="52" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="61" prev-is-closed="true" class="step">/</span><span xq="yes" start="62" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="79" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="80" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="102" prev-is-closed="true" class="qname">where</span><span xq="yes" start="107" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="108" prev-is-closed="true" class="variable">$x</span><span xq="yes" start="110" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="111" prev-is-closed="true" class="op">=</span><span xq="yes" start="112" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="113" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="132" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="141" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="142" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="164" prev-is-closed="true" class="qname">order</span><span xq="yes" start="169" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="170" prev-is-closed="true" class="qname">by</span><span xq="yes" start="172" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="173" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="183" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="185" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="186" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="208" prev-is-closed="true" class="op">return</span><span xq="yes" start="214" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="215" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="225" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="227" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="228" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="237" prev-is-closed="true" class="higher">for</span><span xq="yes" start="240" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="241" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="245" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="246" prev-is-closed="true" class="op">in</span><span xq="yes" start="248" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="249" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="254" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="263" prev-is-closed="true" class="higher">let</span><span xq="yes" start="266" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="267" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="273" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="274" prev-is-closed="true" class="op">:=</span><span xq="yes" start="276" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="277" prev-is-closed="false" class="higher">for</span><span xq="yes" start="280" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="281" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="283" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="284" prev-is-closed="true" class="op">in</span><span xq="yes" start="286" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="287" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="296" prev-is-closed="true" class="step">/</span><span xq="yes" start="297" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="307" prev-is-closed="true" class="filter">[</span><span xq="yes" start="308" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="314" prev-is-closed="true" class="op">=</span><span xq="yes" start="315" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="319" prev-is-closed="true" class="filter">]</span><span xq="yes" start="320" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="343" prev-is-closed="true" class="qname">order</span><span xq="yes" start="348" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="349" prev-is-closed="true" class="qname">by</span><span xq="yes" start="351" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="352" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="362" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="364" prev-is-closed="true" class="step">/</span><span xq="yes" start="365" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="372" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="373" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="396" prev-is-closed="true" class="op">return</span><span xq="yes" start="402" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="403" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="413" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="415" prev-is-closed="true" class="step">/</span><span xq="yes" start="416" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="423" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="424" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="433" prev-is-closed="true" class="higher">for</span><span xq="yes" start="436" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="437" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="442" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="443" prev-is-closed="true" class="qname">at</span><span xq="yes" start="445" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="446" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="448" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="449" prev-is-closed="true" class="op">in</span><span xq="yes" start="451" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="452" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="458" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="467" prev-is-closed="true" class="op">return</span><span xq="yes" start="473" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="484" prev-is-closed="false" class="if">if</span><span xq="yes" start="486" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="487" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="488" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="490" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="491" prev-is-closed="true" class="op">=</span><span xq="yes" start="492" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="493" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="494" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="495" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="496" prev-is-closed="true" class="op">then</span><span xq="yes" start="500" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="504" prev-is-closed="false" class="parenthesis">(</span><span pos="33189" class="es">&lt;</span><span name="xml-open-tag" pos="33190" class="en">tr</span><span name="x-tag-end" pos="33192" class="z">&gt;</span><span pos="33193" class="es">&lt;</span><span name="xml-open-tag" pos="33194" class="en">td</span><span name="x-tag-end" pos="33196" class="z">&gt;</span><span name="nested-query" pos="33197" class="op">{</span><span class="op">"</span><span class="literal" pos="33198" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="33206" class="op">}</span><span pos="33207" class="sc">&lt;/</span><span name="xml-close-tag" pos="33209" class="cl">td</span><span name="x-tag-end" pos="33211" class="z">&gt;</span><span pos="33212" class="es">&lt;</span><span name="xml-open-tag" pos="33213" class="en">td</span><span name="x-tag-end" pos="33215" class="z">&gt;</span><span name="nested-query" pos="33216" class="op">{</span><span class="op">"</span><span class="literal" pos="33217" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="33225" class="op">}</span><span pos="33226" class="sc">&lt;/</span><span name="xml-close-tag" pos="33228" class="cl">td</span><span name="x-tag-end" pos="33230" class="z">&gt;</span><span pos="33231" class="sc">&lt;/</span><span name="xml-close-tag" pos="33233" class="cl">tr</span><span name="x-tag-end" pos="33235" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="33251" class="es">&lt;</span><span name="xml-open-tag" pos="33252" class="en">tr</span><span name="x-tag-end" pos="33254" class="z">&gt;</span><span pos="33255" class="txt">&#xD;
             </span><span pos="33270" class="es">&lt;</span><span name="xml-open-tag" pos="33271" class="en">td</span><span name="xml-name-end" pos="33273" class="atn"> rowspan</span><span name="x-equals" pos="33281" class="atneq">=</span><span name="xml-att-quote" pos="33282" class="z">"</span><span name="nested-query" pos="33283" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="16" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="33300" class="op">}</span><span name="xml-att-quote" pos="33301" class="z">"</span><span name="x-tag-end" pos="33302" class="z">&gt;</span><span name="nested-query" pos="33303" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="33328" class="op">}</span><span pos="33329" class="sc">&lt;/</span><span name="xml-close-tag" pos="33331" class="cl">td</span><span name="x-tag-end" pos="33333" class="z">&gt;</span><span pos="33334" class="txt">&#xD;
             </span><span name="nested-query" pos="33349" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="147" prev-is-closed="true" class="filter">]</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="150" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="151" prev-is-closed="true" class="op">then</span><span xq="yes" start="155" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="33523" class="es">&lt;</span><span name="xml-open-tag" pos="33524" class="en">td</span><span name="x-tag-end" pos="33526" class="z">&gt;</span><span pos="33527" class="txt">&#xD;
                     </span><span name="nested-query" pos="33550" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="33595" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="110" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="111" prev-is-closed="true" class="op">,</span><span xq="yes" start="112" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="156" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="33791" class="op">}</span><span name="resume-x-literal-txt" pos="33792" class="txt">&#xD;
                 </span><span pos="33811" class="sc">&lt;/</span><span name="xml-close-tag" pos="33813" class="cl">td</span><span name="x-tag-end" pos="33815" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="33856" class="es">&lt;</span><span name="xml-open-tag" pos="33857" class="en">td</span><span name="x-tag-end" pos="33859" class="z">&gt;</span><span name="nested-query" pos="33860" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$name</span><span name="unnested-xquery" pos="33866" class="op">}</span><span pos="33867" class="sc">&lt;/</span><span name="xml-close-tag" pos="33869" class="cl">td</span><span name="x-tag-end" pos="33871" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="33887" class="op">}</span><span name="resume-x-literal-txt" pos="33888" class="txt">&#xD;
           </span><span pos="33901" class="sc">&lt;/</span><span name="xml-close-tag" pos="33903" class="cl">tr</span><span name="x-tag-end" pos="33905" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="13" prev-is-closed="true" class="op">else</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace">&#xD;
           </span><span pos="33935" class="es">&lt;</span><span name="xml-open-tag" pos="33936" class="en">tr</span><span name="x-tag-end" pos="33938" class="z">&gt;</span><span pos="33939" class="txt">&#xD;
             </span><span name="nested-query" pos="33954" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="147" prev-is-closed="true" class="filter">]</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="150" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="151" prev-is-closed="true" class="op">then</span><span xq="yes" start="155" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="34128" class="es">&lt;</span><span name="xml-open-tag" pos="34129" class="en">td</span><span name="x-tag-end" pos="34131" class="z">&gt;</span><span pos="34132" class="txt">&#xD;
                     </span><span name="nested-query" pos="34155" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="34200" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="110" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="111" prev-is-closed="true" class="op">,</span><span xq="yes" start="112" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="156" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="34396" class="op">}</span><span name="resume-x-literal-txt" pos="34397" class="txt">&#xD;
                 </span><span pos="34416" class="sc">&lt;/</span><span name="xml-close-tag" pos="34418" class="cl">td</span><span name="x-tag-end" pos="34420" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="34461" class="es">&lt;</span><span name="xml-open-tag" pos="34462" class="en">td</span><span name="x-tag-end" pos="34464" class="z">&gt;</span><span name="nested-query" pos="34465" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="variable">$name</span><span name="unnested-xquery" pos="34471" class="op">}</span><span pos="34472" class="sc">&lt;/</span><span name="xml-close-tag" pos="34474" class="cl">td</span><span name="x-tag-end" pos="34476" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="34492" class="op">}</span><span name="resume-x-literal-txt" pos="34493" class="txt">&#xD;
           </span><span pos="34506" class="sc">&lt;/</span><span name="xml-close-tag" pos="34508" class="cl">tr</span><span name="x-tag-end" pos="34510" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span name="unnested-xquery" pos="34519" class="op">}</span><span name="resume-x-literal-txt" pos="34520" class="txt">&#xD;
    </span><span pos="34526" class="sc">&lt;/</span><span name="xml-close-tag" pos="34528" class="cl">table</span><span name="x-tag-end" pos="34533" class="z">&gt;</span><span pos="34534" class="txt">&#xD;
   </span><span pos="34539" class="sc">&lt;/</span><span name="xml-close-tag" pos="34541" class="cl">div</span><span name="x-tag-end" pos="34544" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="7" prev-is-closed="true" class="op">else</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="34565" class="op">}</span><span name="resume-x-literal-txt" pos="34566" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (contained in the module&#xD;
 :  for the current function) that </span><span pos="34695" class="es">&lt;</span><span name="xml-open-tag" pos="34696" class="en">i</span><span name="x-tag-end" pos="34697" class="z">&gt;</span><span pos="34698" class="txt">use</span><span pos="34701" class="sc">&lt;/</span><span name="xml-close-tag" pos="34703" class="cl">i</span><span name="x-tag-end" pos="34704" class="z">&gt;</span><span pos="34705" class="txt"> the current function.  &#xD;
 :  Construct a link to the module and function.&#xD;
 :&#xD;
 :  @param $function the current function&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-internal-functions-invoked-by($function as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="35115" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="step">/</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="104" prev-is-closed="true" class="filter">[</span><span xq="yes" start="105" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="124" prev-is-closed="false" class="context">.</span><span xq="yes" start="125" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="126" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="127" prev-is-closed="true" class="op">=</span><span xq="yes" start="128" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="129" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="148" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="157" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="158" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="159" prev-is-closed="true" class="op">and</span><span xq="yes" start="162" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="169" prev-is-closed="true" class="op">=</span><span xq="yes" start="170" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="198" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="199" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="200" prev-is-closed="true" class="op">and</span><span xq="yes" start="203" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="204" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="211" prev-is-closed="true" class="op">=</span><span xq="yes" start="212" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="222" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="231" prev-is-closed="true" class="step">/</span><span xq="yes" start="232" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="239" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="240" prev-is-closed="true" class="filter">]</span><span xq="yes" start="241" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="242" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="243" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="244" prev-is-closed="true" class="op">then</span><span xq="yes" start="248" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="35369" class="es">&lt;</span><span name="xml-open-tag" pos="35370" class="en">div</span><span name="xml-name-end" pos="35373" class="atn"> class</span><span name="x-equals" pos="35379" class="atneq">=</span><span name="xml-att-quote" pos="35380" class="z">"</span><span name="xml-literal-start" pos="35381" class="av">methoddetail</span><span name="xml-att-quote" pos="35393" class="z">"</span><span name="x-tag-end" pos="35394" class="z">&gt;</span><span pos="35395" class="txt">&#xD;
     </span><span pos="35402" class="es">&lt;</span><span name="xml-open-tag" pos="35403" class="en">h6</span><span name="x-tag-end" pos="35405" class="z">&gt;</span><span pos="35406" class="txt">Internal Functions that invoke this Function</span><span pos="35450" class="sc">&lt;/</span><span name="xml-close-tag" pos="35452" class="cl">h6</span><span name="x-tag-end" pos="35454" class="z">&gt;</span><span pos="35455" class="txt">&#xD;
     </span><span pos="35462" class="es">&lt;</span><span name="xml-open-tag" pos="35463" class="en">table</span><span name="xml-name-end" pos="35468" class="atn"> class</span><span name="x-equals" pos="35474" class="atneq">=</span><span name="xml-att-quote" pos="35475" class="z">"</span><span name="xml-literal-start" pos="35476" class="av">inexternal</span><span name="xml-att-quote" pos="35486" class="z">"</span><span name="x-tag-end" pos="35487" class="z">&gt;</span><span pos="35488" class="txt">&#xD;
       </span><span pos="35497" class="es">&lt;</span><span name="xml-open-tag" pos="35498" class="en">tr</span><span name="x-tag-end" pos="35500" class="z">&gt;</span><span pos="35501" class="txt">&#xD;
        </span><span pos="35511" class="es">&lt;</span><span name="xml-open-tag" pos="35512" class="en">th</span><span name="xml-name-end" pos="35514" class="atn"> align</span><span name="x-equals" pos="35520" class="atneq">=</span><span name="xml-att-quote" pos="35521" class="z">"</span><span name="xml-literal-start" pos="35522" class="av">left</span><span name="xml-att-quote" pos="35526" class="z">"</span><span name="x-tag-end" pos="35527" class="z">&gt;</span><span pos="35528" class="txt">Module URI</span><span pos="35538" class="sc">&lt;/</span><span name="xml-close-tag" pos="35540" class="cl">th</span><span name="x-tag-end" pos="35542" class="z">&gt;</span><span pos="35543" class="txt">&#xD;
        </span><span pos="35553" class="es">&lt;</span><span name="xml-open-tag" pos="35554" class="en">th</span><span name="xml-name-end" pos="35556" class="atn"> align</span><span name="x-equals" pos="35562" class="atneq">=</span><span name="xml-att-quote" pos="35563" class="z">"</span><span name="xml-literal-start" pos="35564" class="av">left</span><span name="xml-att-quote" pos="35568" class="z">"</span><span name="x-tag-end" pos="35569" class="z">&gt;</span><span pos="35570" class="txt">Function Name</span><span pos="35583" class="sc">&lt;/</span><span name="xml-close-tag" pos="35585" class="cl">th</span><span name="x-tag-end" pos="35587" class="z">&gt;</span><span pos="35588" class="txt">&#xD;
       </span><span pos="35597" class="sc">&lt;/</span><span name="xml-close-tag" pos="35599" class="cl">tr</span><span name="x-tag-end" pos="35601" class="z">&gt;</span><span pos="35602" class="txt">&#xD;
       </span><span name="nested-query" pos="35611" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="11" prev-is-closed="true" class="higher">let</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="20" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="true" class="op">:=</span><span xq="yes" start="23" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="24" prev-is-closed="false" class="higher">for</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="30" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="31" prev-is-closed="true" class="op">in</span><span xq="yes" start="33" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="34" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="48" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="62" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="73" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="74" prev-is-closed="true" class="step">/</span><span xq="yes" start="75" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="83" prev-is-closed="true" class="step">/</span><span xq="yes" start="84" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="108" prev-is-closed="true" class="step">/</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:invoked</span><span xq="yes" start="119" prev-is-closed="true" class="filter">[</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="126" prev-is-closed="true" class="op">=</span><span xq="yes" start="127" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="146" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="155" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="156" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="157" prev-is-closed="true" class="op">and</span><span xq="yes" start="160" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="161" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="168" prev-is-closed="true" class="op">=</span><span xq="yes" start="169" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="179" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="188" prev-is-closed="true" class="step">/</span><span xq="yes" start="189" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="196" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="197" prev-is-closed="true" class="filter">]</span><span xq="yes" start="198" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="221" prev-is-closed="true" class="op">return</span><span xq="yes" start="227" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="228" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="230" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="240" prev-is-closed="true" class="higher">let</span><span xq="yes" start="243" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="244" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="249" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="250" prev-is-closed="true" class="op">:=</span><span xq="yes" start="252" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="253" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="272" prev-is-closed="false" class="higher">for</span><span xq="yes" start="275" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="276" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="278" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="279" prev-is-closed="true" class="op">in</span><span xq="yes" start="281" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="282" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="287" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="326" prev-is-closed="true" class="qname">where</span><span xq="yes" start="331" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="332" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="351" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="353" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="354" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="355" prev-is-closed="true" class="op">=</span><span xq="yes" start="356" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="357" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="376" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="385" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="386" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="425" prev-is-closed="true" class="qname">order</span><span xq="yes" start="430" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="431" prev-is-closed="true" class="qname">by</span><span xq="yes" start="433" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="434" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="453" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="455" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="456" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="495" prev-is-closed="true" class="op">return</span><span xq="yes" start="501" prev-is-closed="false" class="whitespace">&#xD;
                                       </span><span xq="yes" start="542" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="561" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="563" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="564" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="565" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="575" prev-is-closed="true" class="higher">for</span><span xq="yes" start="578" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="579" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="583" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="584" prev-is-closed="true" class="op">in</span><span xq="yes" start="586" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="587" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="592" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="602" prev-is-closed="true" class="higher">let</span><span xq="yes" start="605" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="606" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="614" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="615" prev-is-closed="true" class="op">:=</span><span xq="yes" start="617" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="618" prev-is-closed="false" class="higher">for</span><span xq="yes" start="621" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="622" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="628" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="629" prev-is-closed="true" class="op">in</span><span xq="yes" start="631" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="632" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="637" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="663" prev-is-closed="true" class="qname">where</span><span xq="yes" start="668" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="669" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="688" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="694" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="695" prev-is-closed="true" class="op">=</span><span xq="yes" start="696" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="700" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="726" prev-is-closed="true" class="qname">order</span><span xq="yes" start="731" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="732" prev-is-closed="true" class="qname">by</span><span xq="yes" start="734" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="735" prev-is-closed="true" class="variable">$entry</span><span xq="yes" start="741" prev-is-closed="true" class="step">/</span><span xq="yes" start="742" prev-is-closed="false" class="context">..</span><span xq="yes" start="744" prev-is-closed="true" class="step">/</span><span xq="yes" start="745" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="752" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="778" prev-is-closed="true" class="op">return</span><span xq="yes" start="784" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="785" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="791" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="801" prev-is-closed="true" class="higher">for</span><span xq="yes" start="804" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="805" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="811" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="812" prev-is-closed="true" class="qname">at</span><span xq="yes" start="814" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="815" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="817" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="818" prev-is-closed="true" class="op">in</span><span xq="yes" start="820" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="821" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="829" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="839" prev-is-closed="true" class="op">return</span><span xq="yes" start="845" prev-is-closed="false" class="whitespace"> &#xD;
           </span><span xq="yes" start="859" prev-is-closed="false" class="if">if</span><span xq="yes" start="861" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="862" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="863" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="865" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="866" prev-is-closed="true" class="op">=</span><span xq="yes" start="867" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="868" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="869" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="870" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="871" prev-is-closed="true" class="op">then</span><span xq="yes" start="875" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="879" prev-is-closed="false" class="parenthesis">(</span><span pos="36491" class="es">&lt;</span><span name="xml-open-tag" pos="36492" class="en">tr</span><span name="x-tag-end" pos="36494" class="z">&gt;</span><span pos="36495" class="es">&lt;</span><span name="xml-open-tag" pos="36496" class="en">td</span><span name="x-tag-end" pos="36498" class="z">&gt;</span><span name="nested-query" pos="36499" class="op">{</span><span class="op">"</span><span class="literal" pos="36500" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="36508" class="op">}</span><span pos="36509" class="sc">&lt;/</span><span name="xml-close-tag" pos="36511" class="cl">td</span><span name="x-tag-end" pos="36513" class="z">&gt;</span><span pos="36514" class="es">&lt;</span><span name="xml-open-tag" pos="36515" class="en">td</span><span name="x-tag-end" pos="36517" class="z">&gt;</span><span name="nested-query" pos="36518" class="op">{</span><span class="op">"</span><span class="literal" pos="36519" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="36527" class="op">}</span><span pos="36528" class="sc">&lt;/</span><span name="xml-close-tag" pos="36530" class="cl">td</span><span name="x-tag-end" pos="36532" class="z">&gt;</span><span pos="36533" class="sc">&lt;/</span><span name="xml-close-tag" pos="36535" class="cl">tr</span><span name="x-tag-end" pos="36537" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="36553" class="es">&lt;</span><span name="xml-open-tag" pos="36554" class="en">tr</span><span name="x-tag-end" pos="36556" class="z">&gt;</span><span pos="36557" class="txt">&#xD;
             </span><span pos="36572" class="es">&lt;</span><span name="xml-open-tag" pos="36573" class="en">td</span><span name="xml-name-end" pos="36575" class="atn"> rowspan</span><span name="x-equals" pos="36583" class="atneq">=</span><span name="xml-att-quote" pos="36584" class="z">"</span><span name="nested-query" pos="36585" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="18" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="36604" class="op">}</span><span name="xml-att-quote" pos="36605" class="z">"</span><span name="x-tag-end" pos="36606" class="z">&gt;</span><span name="nested-query" pos="36607" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="36632" class="op">}</span><span pos="36633" class="sc">&lt;/</span><span name="xml-close-tag" pos="36635" class="cl">td</span><span name="x-tag-end" pos="36637" class="z">&gt;</span><span pos="36638" class="txt">&#xD;
             </span><span name="nested-query" pos="36653" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="36839" class="es">&lt;</span><span name="xml-open-tag" pos="36840" class="en">td</span><span name="x-tag-end" pos="36842" class="z">&gt;</span><span pos="36843" class="txt">&#xD;
                     </span><span name="nested-query" pos="36866" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="36911" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="37153" class="op">}</span><span name="resume-x-literal-txt" pos="37154" class="txt">&#xD;
                 </span><span pos="37173" class="sc">&lt;/</span><span name="xml-close-tag" pos="37175" class="cl">td</span><span name="x-tag-end" pos="37177" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="37218" class="es">&lt;</span><span name="xml-open-tag" pos="37219" class="en">td</span><span name="x-tag-end" pos="37221" class="z">&gt;</span><span name="nested-query" pos="37222" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="37251" class="op">}</span><span pos="37252" class="sc">&lt;/</span><span name="xml-close-tag" pos="37254" class="cl">td</span><span name="x-tag-end" pos="37256" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="37272" class="op">}</span><span name="resume-x-literal-txt" pos="37273" class="txt">&#xD;
            </span><span pos="37287" class="sc">&lt;/</span><span name="xml-close-tag" pos="37289" class="cl">tr</span><span name="x-tag-end" pos="37291" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
           </span><span xq="yes" start="15" prev-is-closed="true" class="op">else</span><span xq="yes" start="19" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="37324" class="es">&lt;</span><span name="xml-open-tag" pos="37325" class="en">tr</span><span name="x-tag-end" pos="37327" class="z">&gt;</span><span pos="37328" class="txt">&#xD;
             </span><span name="nested-query" pos="37343" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="37529" class="es">&lt;</span><span name="xml-open-tag" pos="37530" class="en">td</span><span name="x-tag-end" pos="37532" class="z">&gt;</span><span pos="37533" class="txt">&#xD;
                     </span><span name="nested-query" pos="37556" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="37601" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="37843" class="op">}</span><span name="resume-x-literal-txt" pos="37844" class="txt">&#xD;
                 </span><span pos="37863" class="sc">&lt;/</span><span name="xml-close-tag" pos="37865" class="cl">td</span><span name="x-tag-end" pos="37867" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="37908" class="es">&lt;</span><span name="xml-open-tag" pos="37909" class="en">td</span><span name="x-tag-end" pos="37911" class="z">&gt;</span><span name="nested-query" pos="37912" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="37941" class="op">}</span><span pos="37942" class="sc">&lt;/</span><span name="xml-close-tag" pos="37944" class="cl">td</span><span name="x-tag-end" pos="37946" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="37962" class="op">}</span><span name="resume-x-literal-txt" pos="37963" class="txt">&#xD;
            </span><span pos="37977" class="sc">&lt;/</span><span name="xml-close-tag" pos="37979" class="cl">tr</span><span name="x-tag-end" pos="37981" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span name="unnested-xquery" pos="37992" class="op">}</span><span name="resume-x-literal-txt" pos="37993" class="txt">&#xD;
        </span><span pos="38003" class="sc">&lt;/</span><span name="xml-close-tag" pos="38005" class="cl">table</span><span name="x-tag-end" pos="38010" class="z">&gt;</span><span pos="38011" class="txt">&#xD;
       </span><span pos="38020" class="sc">&lt;/</span><span name="xml-close-tag" pos="38022" class="cl">div</span><span name="x-tag-end" pos="38025" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="38045" class="op">}</span><span name="resume-x-literal-txt" pos="38046" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (defined in other modules&#xD;
 :  from the current variable) that </span><span pos="38177" class="es">&lt;</span><span name="xml-open-tag" pos="38178" class="en">i</span><span name="x-tag-end" pos="38179" class="z">&gt;</span><span pos="38180" class="txt">used</span><span pos="38184" class="sc">&lt;/</span><span name="xml-close-tag" pos="38186" class="cl">i</span><span name="x-tag-end" pos="38187" class="z">&gt;</span><span pos="38188" class="txt"> the current variable.  If that &#xD;
 :  module exists in xqDoc, construct a link to the module and function.&#xD;
 :  If that module does not exist in xqDoc, simply identify the &#xD;
 :  module and function name.&#xD;
 :&#xD;
 :  @param $variable the current variable&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-external-variable-references($variable as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="38726" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="step">/</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="109" prev-is-closed="true" class="filter">[</span><span xq="yes" start="110" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="129" prev-is-closed="false" class="context">.</span><span xq="yes" start="130" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="131" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="132" prev-is-closed="true" class="op">!=</span><span xq="yes" start="134" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="135" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="154" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="163" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="164" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="165" prev-is-closed="true" class="op">and</span><span xq="yes" start="168" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="169" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="175" prev-is-closed="true" class="op">=</span><span xq="yes" start="176" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="195" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="204" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="205" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="206" prev-is-closed="true" class="op">and</span><span xq="yes" start="209" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="210" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="217" prev-is-closed="true" class="op">=</span><span xq="yes" start="218" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="228" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="237" prev-is-closed="true" class="step">/</span><span xq="yes" start="238" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="244" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="245" prev-is-closed="true" class="filter">]</span><span xq="yes" start="246" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="247" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="248" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="249" prev-is-closed="true" class="op">then</span><span xq="yes" start="253" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="38985" class="es">&lt;</span><span name="xml-open-tag" pos="38986" class="en">div</span><span name="xml-name-end" pos="38989" class="atn"> class</span><span name="x-equals" pos="38995" class="atneq">=</span><span name="xml-att-quote" pos="38996" class="z">"</span><span name="xml-literal-start" pos="38997" class="av">methoddetail</span><span name="xml-att-quote" pos="39009" class="z">"</span><span name="x-tag-end" pos="39010" class="z">&gt;</span><span pos="39011" class="txt">&#xD;
     </span><span pos="39018" class="es">&lt;</span><span name="xml-open-tag" pos="39019" class="en">h6</span><span name="x-tag-end" pos="39021" class="z">&gt;</span><span pos="39022" class="txt">External Functions that reference this Variable</span><span pos="39069" class="sc">&lt;/</span><span name="xml-close-tag" pos="39071" class="cl">h6</span><span name="x-tag-end" pos="39073" class="z">&gt;</span><span pos="39074" class="txt">&#xD;
     </span><span pos="39081" class="es">&lt;</span><span name="xml-open-tag" pos="39082" class="en">table</span><span name="xml-name-end" pos="39087" class="atn"> class</span><span name="x-equals" pos="39093" class="atneq">=</span><span name="xml-att-quote" pos="39094" class="z">"</span><span name="xml-literal-start" pos="39095" class="av">inexternal</span><span name="xml-att-quote" pos="39105" class="z">"</span><span name="x-tag-end" pos="39106" class="z">&gt;</span><span pos="39107" class="txt">&#xD;
       </span><span pos="39116" class="es">&lt;</span><span name="xml-open-tag" pos="39117" class="en">tr</span><span name="x-tag-end" pos="39119" class="z">&gt;</span><span pos="39120" class="txt">&#xD;
        </span><span pos="39130" class="es">&lt;</span><span name="xml-open-tag" pos="39131" class="en">th</span><span name="xml-name-end" pos="39133" class="atn"> align</span><span name="x-equals" pos="39139" class="atneq">=</span><span name="xml-att-quote" pos="39140" class="z">"</span><span name="xml-literal-start" pos="39141" class="av">left</span><span name="xml-att-quote" pos="39145" class="z">"</span><span name="x-tag-end" pos="39146" class="z">&gt;</span><span pos="39147" class="txt">Module URI</span><span pos="39157" class="sc">&lt;/</span><span name="xml-close-tag" pos="39159" class="cl">th</span><span name="x-tag-end" pos="39161" class="z">&gt;</span><span pos="39162" class="txt">&#xD;
        </span><span pos="39172" class="es">&lt;</span><span name="xml-open-tag" pos="39173" class="en">th</span><span name="xml-name-end" pos="39175" class="atn"> align</span><span name="x-equals" pos="39181" class="atneq">=</span><span name="xml-att-quote" pos="39182" class="z">"</span><span name="xml-literal-start" pos="39183" class="av">left</span><span name="xml-att-quote" pos="39187" class="z">"</span><span name="x-tag-end" pos="39188" class="z">&gt;</span><span pos="39189" class="txt">Function Name</span><span pos="39202" class="sc">&lt;/</span><span name="xml-close-tag" pos="39204" class="cl">th</span><span name="x-tag-end" pos="39206" class="z">&gt;</span><span pos="39207" class="txt">&#xD;
       </span><span pos="39216" class="sc">&lt;/</span><span name="xml-close-tag" pos="39218" class="cl">tr</span><span name="x-tag-end" pos="39220" class="z">&gt;</span><span pos="39221" class="txt">&#xD;
       </span><span name="nested-query" pos="39230" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="11" prev-is-closed="true" class="higher">let</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="20" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="true" class="op">:=</span><span xq="yes" start="23" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="24" prev-is-closed="false" class="higher">for</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="30" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="31" prev-is-closed="true" class="op">in</span><span xq="yes" start="33" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="34" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="48" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="62" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="73" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="74" prev-is-closed="true" class="step">/</span><span xq="yes" start="75" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="83" prev-is-closed="true" class="step">/</span><span xq="yes" start="84" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="108" prev-is-closed="true" class="step">/</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="124" prev-is-closed="true" class="filter">[</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="131" prev-is-closed="true" class="op">=</span><span xq="yes" start="132" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="151" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="162" prev-is-closed="true" class="op">and</span><span xq="yes" start="165" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="166" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="173" prev-is-closed="true" class="op">=</span><span xq="yes" start="174" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="184" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="193" prev-is-closed="true" class="step">/</span><span xq="yes" start="194" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="200" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="201" prev-is-closed="true" class="filter">]</span><span xq="yes" start="202" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="225" prev-is-closed="true" class="op">return</span><span xq="yes" start="231" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="232" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="234" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="244" prev-is-closed="true" class="higher">let</span><span xq="yes" start="247" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="248" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="253" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="254" prev-is-closed="true" class="op">:=</span><span xq="yes" start="256" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="257" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="276" prev-is-closed="false" class="higher">for</span><span xq="yes" start="279" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="280" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="282" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="283" prev-is-closed="true" class="op">in</span><span xq="yes" start="285" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="286" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="291" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="330" prev-is-closed="true" class="qname">where</span><span xq="yes" start="335" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="336" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="355" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="357" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="358" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="359" prev-is-closed="true" class="op">!=</span><span xq="yes" start="361" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="362" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="381" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="390" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="391" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="430" prev-is-closed="true" class="qname">order</span><span xq="yes" start="435" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="436" prev-is-closed="true" class="qname">by</span><span xq="yes" start="438" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="439" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="458" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="460" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="461" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="500" prev-is-closed="true" class="op">return</span><span xq="yes" start="506" prev-is-closed="false" class="whitespace">&#xD;
                                       </span><span xq="yes" start="547" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="566" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="568" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="569" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="570" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="580" prev-is-closed="true" class="higher">for</span><span xq="yes" start="583" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="584" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="588" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="589" prev-is-closed="true" class="op">in</span><span xq="yes" start="591" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="592" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="597" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="607" prev-is-closed="true" class="higher">let</span><span xq="yes" start="610" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="611" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="619" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="620" prev-is-closed="true" class="op">:=</span><span xq="yes" start="622" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="623" prev-is-closed="false" class="higher">for</span><span xq="yes" start="626" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="627" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="633" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="634" prev-is-closed="true" class="op">in</span><span xq="yes" start="636" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="637" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="642" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="668" prev-is-closed="true" class="qname">where</span><span xq="yes" start="673" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="674" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="693" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="699" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="700" prev-is-closed="true" class="op">=</span><span xq="yes" start="701" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="705" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="731" prev-is-closed="true" class="qname">order</span><span xq="yes" start="736" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="737" prev-is-closed="true" class="qname">by</span><span xq="yes" start="739" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="740" prev-is-closed="true" class="variable">$entry</span><span xq="yes" start="746" prev-is-closed="true" class="step">/</span><span xq="yes" start="747" prev-is-closed="false" class="context">..</span><span xq="yes" start="749" prev-is-closed="true" class="step">/</span><span xq="yes" start="750" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="757" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="783" prev-is-closed="true" class="op">return</span><span xq="yes" start="789" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="790" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="796" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="806" prev-is-closed="true" class="higher">for</span><span xq="yes" start="809" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="810" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="816" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="817" prev-is-closed="true" class="qname">at</span><span xq="yes" start="819" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="820" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="822" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="823" prev-is-closed="true" class="op">in</span><span xq="yes" start="825" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="826" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="834" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="844" prev-is-closed="true" class="op">return</span><span xq="yes" start="850" prev-is-closed="false" class="whitespace"> &#xD;
           </span><span xq="yes" start="864" prev-is-closed="false" class="if">if</span><span xq="yes" start="866" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="867" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="868" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="870" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="871" prev-is-closed="true" class="op">=</span><span xq="yes" start="872" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="873" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="874" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="875" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="876" prev-is-closed="true" class="op">then</span><span xq="yes" start="880" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="884" prev-is-closed="false" class="parenthesis">(</span><span pos="40115" class="es">&lt;</span><span name="xml-open-tag" pos="40116" class="en">tr</span><span name="x-tag-end" pos="40118" class="z">&gt;</span><span pos="40119" class="es">&lt;</span><span name="xml-open-tag" pos="40120" class="en">td</span><span name="x-tag-end" pos="40122" class="z">&gt;</span><span name="nested-query" pos="40123" class="op">{</span><span class="op">"</span><span class="literal" pos="40124" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="40132" class="op">}</span><span pos="40133" class="sc">&lt;/</span><span name="xml-close-tag" pos="40135" class="cl">td</span><span name="x-tag-end" pos="40137" class="z">&gt;</span><span pos="40138" class="es">&lt;</span><span name="xml-open-tag" pos="40139" class="en">td</span><span name="x-tag-end" pos="40141" class="z">&gt;</span><span name="nested-query" pos="40142" class="op">{</span><span class="op">"</span><span class="literal" pos="40143" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="40151" class="op">}</span><span pos="40152" class="sc">&lt;/</span><span name="xml-close-tag" pos="40154" class="cl">td</span><span name="x-tag-end" pos="40156" class="z">&gt;</span><span pos="40157" class="sc">&lt;/</span><span name="xml-close-tag" pos="40159" class="cl">tr</span><span name="x-tag-end" pos="40161" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="40177" class="es">&lt;</span><span name="xml-open-tag" pos="40178" class="en">tr</span><span name="x-tag-end" pos="40180" class="z">&gt;</span><span pos="40181" class="txt">&#xD;
             </span><span pos="40196" class="es">&lt;</span><span name="xml-open-tag" pos="40197" class="en">td</span><span name="xml-name-end" pos="40199" class="atn"> rowspan</span><span name="x-equals" pos="40207" class="atneq">=</span><span name="xml-att-quote" pos="40208" class="z">"</span><span name="nested-query" pos="40209" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="18" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="40228" class="op">}</span><span name="xml-att-quote" pos="40229" class="z">"</span><span name="x-tag-end" pos="40230" class="z">&gt;</span><span name="nested-query" pos="40231" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="40256" class="op">}</span><span pos="40257" class="sc">&lt;/</span><span name="xml-close-tag" pos="40259" class="cl">td</span><span name="x-tag-end" pos="40261" class="z">&gt;</span><span pos="40262" class="txt">&#xD;
             </span><span name="nested-query" pos="40277" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="40463" class="es">&lt;</span><span name="xml-open-tag" pos="40464" class="en">td</span><span name="x-tag-end" pos="40466" class="z">&gt;</span><span pos="40467" class="txt">&#xD;
                     </span><span name="nested-query" pos="40490" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="40535" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="40777" class="op">}</span><span name="resume-x-literal-txt" pos="40778" class="txt">&#xD;
                 </span><span pos="40797" class="sc">&lt;/</span><span name="xml-close-tag" pos="40799" class="cl">td</span><span name="x-tag-end" pos="40801" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="40842" class="es">&lt;</span><span name="xml-open-tag" pos="40843" class="en">td</span><span name="x-tag-end" pos="40845" class="z">&gt;</span><span name="nested-query" pos="40846" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="40875" class="op">}</span><span pos="40876" class="sc">&lt;/</span><span name="xml-close-tag" pos="40878" class="cl">td</span><span name="x-tag-end" pos="40880" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="40896" class="op">}</span><span name="resume-x-literal-txt" pos="40897" class="txt">&#xD;
            </span><span pos="40911" class="sc">&lt;/</span><span name="xml-close-tag" pos="40913" class="cl">tr</span><span name="x-tag-end" pos="40915" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
           </span><span xq="yes" start="15" prev-is-closed="true" class="op">else</span><span xq="yes" start="19" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="40948" class="es">&lt;</span><span name="xml-open-tag" pos="40949" class="en">tr</span><span name="x-tag-end" pos="40951" class="z">&gt;</span><span pos="40952" class="txt">&#xD;
             </span><span name="nested-query" pos="40967" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="41153" class="es">&lt;</span><span name="xml-open-tag" pos="41154" class="en">td</span><span name="x-tag-end" pos="41156" class="z">&gt;</span><span pos="41157" class="txt">&#xD;
                     </span><span name="nested-query" pos="41180" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="41225" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="41467" class="op">}</span><span name="resume-x-literal-txt" pos="41468" class="txt">&#xD;
                 </span><span pos="41487" class="sc">&lt;/</span><span name="xml-close-tag" pos="41489" class="cl">td</span><span name="x-tag-end" pos="41491" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="41532" class="es">&lt;</span><span name="xml-open-tag" pos="41533" class="en">td</span><span name="x-tag-end" pos="41535" class="z">&gt;</span><span name="nested-query" pos="41536" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="41565" class="op">}</span><span pos="41566" class="sc">&lt;/</span><span name="xml-close-tag" pos="41568" class="cl">td</span><span name="x-tag-end" pos="41570" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="41586" class="op">}</span><span name="resume-x-literal-txt" pos="41587" class="txt">&#xD;
            </span><span pos="41601" class="sc">&lt;/</span><span name="xml-close-tag" pos="41603" class="cl">tr</span><span name="x-tag-end" pos="41605" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span name="unnested-xquery" pos="41616" class="op">}</span><span name="resume-x-literal-txt" pos="41617" class="txt">&#xD;
        </span><span pos="41627" class="sc">&lt;/</span><span name="xml-close-tag" pos="41629" class="cl">table</span><span name="x-tag-end" pos="41634" class="z">&gt;</span><span pos="41635" class="txt">&#xD;
       </span><span pos="41644" class="sc">&lt;/</span><span name="xml-close-tag" pos="41646" class="cl">div</span><span name="x-tag-end" pos="41649" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="41669" class="op">}</span><span name="resume-x-literal-txt" pos="41670" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (defined in the module&#xD;
 :  for the current variable) that </span><span pos="41797" class="es">&lt;</span><span name="xml-open-tag" pos="41798" class="en">i</span><span name="x-tag-end" pos="41799" class="z">&gt;</span><span pos="41800" class="txt">use</span><span pos="41803" class="sc">&lt;/</span><span name="xml-close-tag" pos="41805" class="cl">i</span><span name="x-tag-end" pos="41806" class="z">&gt;</span><span pos="41807" class="txt"> the current variable.  &#xD;
 :  Construct a link to the module and function.&#xD;
 :&#xD;
 :  @param $variable the current variable&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-internal-variable-references($variable as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="42216" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="33" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="47" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="58" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="59" prev-is-closed="true" class="step">/</span><span xq="yes" start="60" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="68" prev-is-closed="true" class="step">/</span><span xq="yes" start="69" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="93" prev-is-closed="true" class="step">/</span><span xq="yes" start="94" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="109" prev-is-closed="true" class="filter">[</span><span xq="yes" start="110" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="129" prev-is-closed="false" class="context">.</span><span xq="yes" start="130" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="131" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="132" prev-is-closed="true" class="op">=</span><span xq="yes" start="133" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="134" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="153" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="162" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="163" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="164" prev-is-closed="true" class="op">and</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="168" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="174" prev-is-closed="true" class="op">=</span><span xq="yes" start="175" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="194" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="203" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="204" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="205" prev-is-closed="true" class="op">and</span><span xq="yes" start="208" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="209" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="216" prev-is-closed="true" class="op">=</span><span xq="yes" start="217" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="227" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="236" prev-is-closed="true" class="step">/</span><span xq="yes" start="237" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="243" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="244" prev-is-closed="true" class="filter">]</span><span xq="yes" start="245" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="246" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="247" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="248" prev-is-closed="true" class="op">then</span><span xq="yes" start="252" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="42474" class="es">&lt;</span><span name="xml-open-tag" pos="42475" class="en">div</span><span name="xml-name-end" pos="42478" class="atn"> class</span><span name="x-equals" pos="42484" class="atneq">=</span><span name="xml-att-quote" pos="42485" class="z">"</span><span name="xml-literal-start" pos="42486" class="av">methoddetail</span><span name="xml-att-quote" pos="42498" class="z">"</span><span name="x-tag-end" pos="42499" class="z">&gt;</span><span pos="42500" class="txt">&#xD;
     </span><span pos="42507" class="es">&lt;</span><span name="xml-open-tag" pos="42508" class="en">h6</span><span name="x-tag-end" pos="42510" class="z">&gt;</span><span pos="42511" class="txt">Internal Functions that reference this Variable</span><span pos="42558" class="sc">&lt;/</span><span name="xml-close-tag" pos="42560" class="cl">h6</span><span name="x-tag-end" pos="42562" class="z">&gt;</span><span pos="42563" class="txt">&#xD;
     </span><span pos="42570" class="es">&lt;</span><span name="xml-open-tag" pos="42571" class="en">table</span><span name="xml-name-end" pos="42576" class="atn"> class</span><span name="x-equals" pos="42582" class="atneq">=</span><span name="xml-att-quote" pos="42583" class="z">"</span><span name="xml-literal-start" pos="42584" class="av">inexternal</span><span name="xml-att-quote" pos="42594" class="z">"</span><span name="x-tag-end" pos="42595" class="z">&gt;</span><span pos="42596" class="txt">&#xD;
       </span><span pos="42605" class="es">&lt;</span><span name="xml-open-tag" pos="42606" class="en">tr</span><span name="x-tag-end" pos="42608" class="z">&gt;</span><span pos="42609" class="txt">&#xD;
        </span><span pos="42619" class="es">&lt;</span><span name="xml-open-tag" pos="42620" class="en">th</span><span name="xml-name-end" pos="42622" class="atn"> align</span><span name="x-equals" pos="42628" class="atneq">=</span><span name="xml-att-quote" pos="42629" class="z">"</span><span name="xml-literal-start" pos="42630" class="av">left</span><span name="xml-att-quote" pos="42634" class="z">"</span><span name="x-tag-end" pos="42635" class="z">&gt;</span><span pos="42636" class="txt">Module URI</span><span pos="42646" class="sc">&lt;/</span><span name="xml-close-tag" pos="42648" class="cl">th</span><span name="x-tag-end" pos="42650" class="z">&gt;</span><span pos="42651" class="txt">&#xD;
        </span><span pos="42661" class="es">&lt;</span><span name="xml-open-tag" pos="42662" class="en">th</span><span name="xml-name-end" pos="42664" class="atn"> align</span><span name="x-equals" pos="42670" class="atneq">=</span><span name="xml-att-quote" pos="42671" class="z">"</span><span name="xml-literal-start" pos="42672" class="av">left</span><span name="xml-att-quote" pos="42676" class="z">"</span><span name="x-tag-end" pos="42677" class="z">&gt;</span><span pos="42678" class="txt">Function Name</span><span pos="42691" class="sc">&lt;/</span><span name="xml-close-tag" pos="42693" class="cl">th</span><span name="x-tag-end" pos="42695" class="z">&gt;</span><span pos="42696" class="txt">&#xD;
       </span><span pos="42705" class="sc">&lt;/</span><span name="xml-close-tag" pos="42707" class="cl">tr</span><span name="x-tag-end" pos="42709" class="z">&gt;</span><span pos="42710" class="txt">&#xD;
       </span><span name="nested-query" pos="42719" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="11" prev-is-closed="true" class="higher">let</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="20" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="true" class="op">:=</span><span xq="yes" start="23" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="24" prev-is-closed="false" class="higher">for</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="30" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="31" prev-is-closed="true" class="op">in</span><span xq="yes" start="33" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="34" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="48" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="62" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="73" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="74" prev-is-closed="true" class="step">/</span><span xq="yes" start="75" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="83" prev-is-closed="true" class="step">/</span><span xq="yes" start="84" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="108" prev-is-closed="true" class="step">/</span><span xq="yes" start="109" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="124" prev-is-closed="true" class="filter">[</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="131" prev-is-closed="true" class="op">=</span><span xq="yes" start="132" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="151" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="162" prev-is-closed="true" class="op">and</span><span xq="yes" start="165" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="166" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="173" prev-is-closed="true" class="op">=</span><span xq="yes" start="174" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="184" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="193" prev-is-closed="true" class="step">/</span><span xq="yes" start="194" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="200" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="201" prev-is-closed="true" class="filter">]</span><span xq="yes" start="202" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="225" prev-is-closed="true" class="op">return</span><span xq="yes" start="231" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="232" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="234" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="244" prev-is-closed="true" class="higher">let</span><span xq="yes" start="247" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="248" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="253" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="254" prev-is-closed="true" class="op">:=</span><span xq="yes" start="256" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="257" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="276" prev-is-closed="false" class="higher">for</span><span xq="yes" start="279" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="280" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="282" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="283" prev-is-closed="true" class="op">in</span><span xq="yes" start="285" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="286" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="291" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="330" prev-is-closed="true" class="qname">where</span><span xq="yes" start="335" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="336" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="355" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="357" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="358" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="359" prev-is-closed="true" class="op">=</span><span xq="yes" start="360" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="361" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="380" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="389" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="390" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="429" prev-is-closed="true" class="qname">order</span><span xq="yes" start="434" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="435" prev-is-closed="true" class="qname">by</span><span xq="yes" start="437" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="438" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="457" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="459" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="460" prev-is-closed="true" class="whitespace">&#xD;
                                     </span><span xq="yes" start="499" prev-is-closed="true" class="op">return</span><span xq="yes" start="505" prev-is-closed="false" class="whitespace">&#xD;
                                       </span><span xq="yes" start="546" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="565" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="567" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="568" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="569" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="579" prev-is-closed="true" class="higher">for</span><span xq="yes" start="582" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="583" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="587" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="588" prev-is-closed="true" class="op">in</span><span xq="yes" start="590" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="591" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="596" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="606" prev-is-closed="true" class="higher">let</span><span xq="yes" start="609" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="610" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="618" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="619" prev-is-closed="true" class="op">:=</span><span xq="yes" start="621" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="622" prev-is-closed="false" class="higher">for</span><span xq="yes" start="625" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="626" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="632" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="633" prev-is-closed="true" class="op">in</span><span xq="yes" start="635" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="636" prev-is-closed="false" class="variable">$list</span><span xq="yes" start="641" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="667" prev-is-closed="true" class="qname">where</span><span xq="yes" start="672" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="673" prev-is-closed="true" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="692" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="698" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="699" prev-is-closed="true" class="op">=</span><span xq="yes" start="700" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="704" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="730" prev-is-closed="true" class="qname">order</span><span xq="yes" start="735" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="736" prev-is-closed="true" class="qname">by</span><span xq="yes" start="738" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="739" prev-is-closed="true" class="variable">$entry</span><span xq="yes" start="745" prev-is-closed="true" class="step">/</span><span xq="yes" start="746" prev-is-closed="false" class="context">..</span><span xq="yes" start="748" prev-is-closed="true" class="step">/</span><span xq="yes" start="749" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="756" prev-is-closed="true" class="whitespace">&#xD;
                        </span><span xq="yes" start="782" prev-is-closed="true" class="op">return</span><span xq="yes" start="788" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="789" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="795" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="805" prev-is-closed="true" class="higher">for</span><span xq="yes" start="808" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="809" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="815" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="816" prev-is-closed="true" class="qname">at</span><span xq="yes" start="818" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="819" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="821" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="822" prev-is-closed="true" class="op">in</span><span xq="yes" start="824" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="825" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="833" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="843" prev-is-closed="true" class="op">return</span><span xq="yes" start="849" prev-is-closed="false" class="whitespace"> &#xD;
           </span><span xq="yes" start="863" prev-is-closed="false" class="if">if</span><span xq="yes" start="865" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="866" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="867" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="869" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="870" prev-is-closed="true" class="op">=</span><span xq="yes" start="871" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="872" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="873" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="874" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="875" prev-is-closed="true" class="op">then</span><span xq="yes" start="879" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="883" prev-is-closed="false" class="parenthesis">(</span><span pos="43603" class="es">&lt;</span><span name="xml-open-tag" pos="43604" class="en">tr</span><span name="x-tag-end" pos="43606" class="z">&gt;</span><span pos="43607" class="es">&lt;</span><span name="xml-open-tag" pos="43608" class="en">td</span><span name="x-tag-end" pos="43610" class="z">&gt;</span><span name="nested-query" pos="43611" class="op">{</span><span class="op">"</span><span class="literal" pos="43612" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="43620" class="op">}</span><span pos="43621" class="sc">&lt;/</span><span name="xml-close-tag" pos="43623" class="cl">td</span><span name="x-tag-end" pos="43625" class="z">&gt;</span><span pos="43626" class="es">&lt;</span><span name="xml-open-tag" pos="43627" class="en">td</span><span name="x-tag-end" pos="43629" class="z">&gt;</span><span name="nested-query" pos="43630" class="op">{</span><span class="op">"</span><span class="literal" pos="43631" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="43639" class="op">}</span><span pos="43640" class="sc">&lt;/</span><span name="xml-close-tag" pos="43642" class="cl">td</span><span name="x-tag-end" pos="43644" class="z">&gt;</span><span pos="43645" class="sc">&lt;/</span><span name="xml-close-tag" pos="43647" class="cl">tr</span><span name="x-tag-end" pos="43649" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="43665" class="es">&lt;</span><span name="xml-open-tag" pos="43666" class="en">tr</span><span name="x-tag-end" pos="43668" class="z">&gt;</span><span pos="43669" class="txt">&#xD;
             </span><span pos="43684" class="es">&lt;</span><span name="xml-open-tag" pos="43685" class="en">td</span><span name="xml-name-end" pos="43687" class="atn"> rowspan</span><span name="x-equals" pos="43695" class="atneq">=</span><span name="xml-att-quote" pos="43696" class="z">"</span><span name="nested-query" pos="43697" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$entries</span><span xq="yes" start="18" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="43716" class="op">}</span><span name="xml-att-quote" pos="43717" class="z">"</span><span name="x-tag-end" pos="43718" class="z">&gt;</span><span name="nested-query" pos="43719" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="43744" class="op">}</span><span pos="43745" class="sc">&lt;/</span><span name="xml-close-tag" pos="43747" class="cl">td</span><span name="x-tag-end" pos="43749" class="z">&gt;</span><span pos="43750" class="txt">&#xD;
             </span><span name="nested-query" pos="43765" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="43951" class="es">&lt;</span><span name="xml-open-tag" pos="43952" class="en">td</span><span name="x-tag-end" pos="43954" class="z">&gt;</span><span pos="43955" class="txt">&#xD;
                     </span><span name="nested-query" pos="43978" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="44023" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="44265" class="op">}</span><span name="resume-x-literal-txt" pos="44266" class="txt">&#xD;
                 </span><span pos="44285" class="sc">&lt;/</span><span name="xml-close-tag" pos="44287" class="cl">td</span><span name="x-tag-end" pos="44289" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="44330" class="es">&lt;</span><span name="xml-open-tag" pos="44331" class="en">td</span><span name="x-tag-end" pos="44333" class="z">&gt;</span><span name="nested-query" pos="44334" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="44363" class="op">}</span><span pos="44364" class="sc">&lt;/</span><span name="xml-close-tag" pos="44366" class="cl">td</span><span name="x-tag-end" pos="44368" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="44384" class="op">}</span><span name="resume-x-literal-txt" pos="44385" class="txt">&#xD;
            </span><span pos="44399" class="sc">&lt;/</span><span name="xml-close-tag" pos="44401" class="cl">tr</span><span name="x-tag-end" pos="44403" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
           </span><span xq="yes" start="15" prev-is-closed="true" class="op">else</span><span xq="yes" start="19" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="44436" class="es">&lt;</span><span name="xml-open-tag" pos="44437" class="en">tr</span><span name="x-tag-end" pos="44439" class="z">&gt;</span><span pos="44440" class="txt">&#xD;
             </span><span name="nested-query" pos="44455" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="139" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="140" prev-is-closed="true" class="op">=</span><span xq="yes" start="141" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="142" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="148" prev-is-closed="true" class="step">/</span><span xq="yes" start="149" prev-is-closed="false" class="context">..</span><span xq="yes" start="151" prev-is-closed="true" class="step">/</span><span xq="yes" start="152" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="159" prev-is-closed="true" class="filter">]</span><span xq="yes" start="160" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="161" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="162" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="163" prev-is-closed="true" class="op">then</span><span xq="yes" start="167" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="44641" class="es">&lt;</span><span name="xml-open-tag" pos="44642" class="en">td</span><span name="x-tag-end" pos="44644" class="z">&gt;</span><span pos="44645" class="txt">&#xD;
                     </span><span name="nested-query" pos="44668" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="44713" xq="yes">get-module</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="115" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="121" prev-is-closed="true" class="step">/</span><span xq="yes" start="122" prev-is-closed="false" class="context">..</span><span xq="yes" start="124" prev-is-closed="true" class="step">/</span><span xq="yes" start="125" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="132" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="133" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="134" prev-is-closed="true" class="op">,</span><span xq="yes" start="135" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="179" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="195" prev-is-closed="true" class="step">/</span><span xq="yes" start="196" prev-is-closed="false" class="context">..</span><span xq="yes" start="198" prev-is-closed="true" class="step">/</span><span xq="yes" start="199" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="206" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="207" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="208" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="44955" class="op">}</span><span name="resume-x-literal-txt" pos="44956" class="txt">&#xD;
                 </span><span pos="44975" class="sc">&lt;/</span><span name="xml-close-tag" pos="44977" class="cl">td</span><span name="x-tag-end" pos="44979" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="45020" class="es">&lt;</span><span name="xml-open-tag" pos="45021" class="en">td</span><span name="x-tag-end" pos="45023" class="z">&gt;</span><span name="nested-query" pos="45024" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="variable">$entry</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="context">..</span><span xq="yes" start="20" prev-is-closed="true" class="step">/</span><span xq="yes" start="21" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="45053" class="op">}</span><span pos="45054" class="sc">&lt;/</span><span name="xml-close-tag" pos="45056" class="cl">td</span><span name="x-tag-end" pos="45058" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="45074" class="op">}</span><span name="resume-x-literal-txt" pos="45075" class="txt">&#xD;
            </span><span pos="45089" class="sc">&lt;/</span><span name="xml-close-tag" pos="45091" class="cl">tr</span><span name="x-tag-end" pos="45093" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
        </span><span name="unnested-xquery" pos="45104" class="op">}</span><span name="resume-x-literal-txt" pos="45105" class="txt">&#xD;
        </span><span pos="45115" class="sc">&lt;/</span><span name="xml-close-tag" pos="45117" class="cl">table</span><span name="x-tag-end" pos="45122" class="z">&gt;</span><span pos="45123" class="txt">&#xD;
       </span><span pos="45132" class="sc">&lt;/</span><span name="xml-close-tag" pos="45134" class="cl">div</span><span name="x-tag-end" pos="45137" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
   </span><span xq="yes" start="6" prev-is-closed="true" class="op">else</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="45157" class="op">}</span><span name="resume-x-literal-txt" pos="45158" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (defined in other modules&#xD;
 :  from the current variable) that </span><span pos="45289" class="es">&lt;</span><span name="xml-open-tag" pos="45290" class="en">i</span><span name="x-tag-end" pos="45291" class="z">&gt;</span><span pos="45292" class="txt">use</span><span pos="45295" class="sc">&lt;/</span><span name="xml-close-tag" pos="45297" class="cl">i</span><span name="x-tag-end" pos="45298" class="z">&gt;</span><span pos="45299" class="txt"> the current variable.  If that &#xD;
 :  module exists in xqDoc, construct a link to the module and function.&#xD;
 :  If that module does not exist in xqDoc, simply identify the &#xD;
 :  module and function name.&#xD;
 :&#xD;
 :  @param $variable the current variable&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-external-variables-referenced($variable as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="45838" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="28" prev-is-closed="true" class="step">/</span><span xq="yes" start="29" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="44" prev-is-closed="true" class="filter">[</span><span xq="yes" start="45" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="51" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="true" class="op">!=</span><span xq="yes" start="54" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="55" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="74" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="83" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="84" prev-is-closed="true" class="filter">]</span><span xq="yes" start="85" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="86" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="87" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="88" prev-is-closed="true" class="op">then</span><span xq="yes" start="92" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="45936" class="es">&lt;</span><span name="xml-open-tag" pos="45937" class="en">div</span><span name="xml-name-end" pos="45940" class="atn"> class</span><span name="x-equals" pos="45946" class="atneq">=</span><span name="xml-att-quote" pos="45947" class="z">"</span><span name="xml-literal-start" pos="45948" class="av">methoddetail</span><span name="xml-att-quote" pos="45960" class="z">"</span><span name="x-tag-end" pos="45961" class="z">&gt;</span><span pos="45962" class="txt">&#xD;
     </span><span pos="45969" class="es">&lt;</span><span name="xml-open-tag" pos="45970" class="en">h6</span><span name="x-tag-end" pos="45972" class="z">&gt;</span><span pos="45973" class="txt">External Variables used by this Function</span><span pos="46013" class="sc">&lt;/</span><span name="xml-close-tag" pos="46015" class="cl">h6</span><span name="x-tag-end" pos="46017" class="z">&gt;</span><span pos="46018" class="txt">&#xD;
     </span><span pos="46025" class="es">&lt;</span><span name="xml-open-tag" pos="46026" class="en">table</span><span name="xml-name-end" pos="46031" class="atn"> class</span><span name="x-equals" pos="46037" class="atneq">=</span><span name="xml-att-quote" pos="46038" class="z">"</span><span name="xml-literal-start" pos="46039" class="av">inexternal</span><span name="xml-att-quote" pos="46049" class="z">"</span><span name="x-tag-end" pos="46050" class="z">&gt;</span><span pos="46051" class="txt">&#xD;
       </span><span pos="46060" class="es">&lt;</span><span name="xml-open-tag" pos="46061" class="en">tr</span><span name="x-tag-end" pos="46063" class="z">&gt;</span><span pos="46064" class="txt">&#xD;
        </span><span pos="46074" class="es">&lt;</span><span name="xml-open-tag" pos="46075" class="en">th</span><span name="xml-name-end" pos="46077" class="atn"> align</span><span name="x-equals" pos="46083" class="atneq">=</span><span name="xml-att-quote" pos="46084" class="z">"</span><span name="xml-literal-start" pos="46085" class="av">left</span><span name="xml-att-quote" pos="46089" class="z">"</span><span name="x-tag-end" pos="46090" class="z">&gt;</span><span pos="46091" class="txt">Module URI</span><span pos="46101" class="sc">&lt;/</span><span name="xml-close-tag" pos="46103" class="cl">th</span><span name="x-tag-end" pos="46105" class="z">&gt;</span><span pos="46106" class="txt">&#xD;
        </span><span pos="46116" class="es">&lt;</span><span name="xml-open-tag" pos="46117" class="en">th</span><span name="xml-name-end" pos="46119" class="atn"> align</span><span name="x-equals" pos="46125" class="atneq">=</span><span name="xml-att-quote" pos="46126" class="z">"</span><span name="xml-literal-start" pos="46127" class="av">left</span><span name="xml-att-quote" pos="46131" class="z">"</span><span name="x-tag-end" pos="46132" class="z">&gt;</span><span pos="46133" class="txt">Variable Name</span><span pos="46146" class="sc">&lt;/</span><span name="xml-close-tag" pos="46148" class="cl">th</span><span name="x-tag-end" pos="46150" class="z">&gt;</span><span pos="46151" class="txt">&#xD;
       </span><span pos="46160" class="sc">&lt;/</span><span name="xml-close-tag" pos="46162" class="cl">tr</span><span name="x-tag-end" pos="46164" class="z">&gt;</span><span pos="46165" class="txt">&#xD;
      </span><span name="nested-query" pos="46173" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="10" prev-is-closed="true" class="higher">let</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="op">:=</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="23" prev-is-closed="false" class="higher">for</span><span xq="yes" start="26" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="27" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="30" prev-is-closed="true" class="op">in</span><span xq="yes" start="32" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="33" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="52" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="61" prev-is-closed="true" class="step">/</span><span xq="yes" start="62" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="77" prev-is-closed="true" class="step">/</span><span xq="yes" start="78" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="84" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="107" prev-is-closed="true" class="qname">where</span><span xq="yes" start="112" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="113" prev-is-closed="true" class="variable">$x</span><span xq="yes" start="115" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="116" prev-is-closed="true" class="op">!=</span><span xq="yes" start="118" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="119" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="138" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="147" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="148" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="170" prev-is-closed="true" class="qname">order</span><span xq="yes" start="175" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="176" prev-is-closed="true" class="qname">by</span><span xq="yes" start="178" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="179" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="189" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="191" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="192" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="214" prev-is-closed="true" class="op">return</span><span xq="yes" start="220" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="221" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="231" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="233" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="234" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="243" prev-is-closed="true" class="higher">for</span><span xq="yes" start="246" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="247" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="251" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="252" prev-is-closed="true" class="op">in</span><span xq="yes" start="254" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="255" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="260" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="269" prev-is-closed="true" class="higher">let</span><span xq="yes" start="272" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="273" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="279" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="280" prev-is-closed="true" class="op">:=</span><span xq="yes" start="282" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="283" prev-is-closed="false" class="higher">for</span><span xq="yes" start="286" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="287" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="289" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="290" prev-is-closed="true" class="op">in</span><span xq="yes" start="292" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="293" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="302" prev-is-closed="true" class="step">/</span><span xq="yes" start="303" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="318" prev-is-closed="true" class="filter">[</span><span xq="yes" start="319" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="325" prev-is-closed="true" class="op">=</span><span xq="yes" start="326" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="330" prev-is-closed="true" class="filter">]</span><span xq="yes" start="331" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="354" prev-is-closed="true" class="qname">order</span><span xq="yes" start="359" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="360" prev-is-closed="true" class="qname">by</span><span xq="yes" start="362" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="363" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="373" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="375" prev-is-closed="true" class="step">/</span><span xq="yes" start="376" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="383" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="384" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="407" prev-is-closed="true" class="op">return</span><span xq="yes" start="413" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="414" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="424" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="426" prev-is-closed="true" class="step">/</span><span xq="yes" start="427" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="434" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="435" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="444" prev-is-closed="true" class="higher">for</span><span xq="yes" start="447" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="448" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="453" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="454" prev-is-closed="true" class="qname">at</span><span xq="yes" start="456" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="457" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="459" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="460" prev-is-closed="true" class="op">in</span><span xq="yes" start="462" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="463" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="469" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="478" prev-is-closed="true" class="op">return</span><span xq="yes" start="484" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="495" prev-is-closed="false" class="if">if</span><span xq="yes" start="497" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="498" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="499" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="501" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="502" prev-is-closed="true" class="op">=</span><span xq="yes" start="503" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="504" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="505" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="506" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="507" prev-is-closed="true" class="op">then</span><span xq="yes" start="511" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="515" prev-is-closed="false" class="parenthesis">(</span><span pos="46689" class="es">&lt;</span><span name="xml-open-tag" pos="46690" class="en">tr</span><span name="x-tag-end" pos="46692" class="z">&gt;</span><span pos="46693" class="es">&lt;</span><span name="xml-open-tag" pos="46694" class="en">td</span><span name="x-tag-end" pos="46696" class="z">&gt;</span><span name="nested-query" pos="46697" class="op">{</span><span class="op">"</span><span class="literal" pos="46698" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="46706" class="op">}</span><span pos="46707" class="sc">&lt;/</span><span name="xml-close-tag" pos="46709" class="cl">td</span><span name="x-tag-end" pos="46711" class="z">&gt;</span><span pos="46712" class="es">&lt;</span><span name="xml-open-tag" pos="46713" class="en">td</span><span name="x-tag-end" pos="46715" class="z">&gt;</span><span name="nested-query" pos="46716" class="op">{</span><span class="op">"</span><span class="literal" pos="46717" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="46725" class="op">}</span><span pos="46726" class="sc">&lt;/</span><span name="xml-close-tag" pos="46728" class="cl">td</span><span name="x-tag-end" pos="46730" class="z">&gt;</span><span pos="46731" class="sc">&lt;/</span><span name="xml-close-tag" pos="46733" class="cl">tr</span><span name="x-tag-end" pos="46735" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="46751" class="es">&lt;</span><span name="xml-open-tag" pos="46752" class="en">tr</span><span name="x-tag-end" pos="46754" class="z">&gt;</span><span pos="46755" class="txt">&#xD;
             </span><span pos="46770" class="es">&lt;</span><span name="xml-open-tag" pos="46771" class="en">td</span><span name="xml-name-end" pos="46773" class="atn"> rowspan</span><span name="x-equals" pos="46781" class="atneq">=</span><span name="xml-att-quote" pos="46782" class="z">"</span><span name="nested-query" pos="46783" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="16" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="46800" class="op">}</span><span name="xml-att-quote" pos="46801" class="z">"</span><span name="x-tag-end" pos="46802" class="z">&gt;</span><span name="nested-query" pos="46803" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="46828" class="op">}</span><span pos="46829" class="sc">&lt;/</span><span name="xml-close-tag" pos="46831" class="cl">td</span><span name="x-tag-end" pos="46833" class="z">&gt;</span><span pos="46834" class="txt">&#xD;
             </span><span name="nested-query" pos="46849" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:variables</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:variable</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="138" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="139" prev-is-closed="true" class="op">=</span><span xq="yes" start="140" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="141" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="146" prev-is-closed="true" class="filter">]</span><span xq="yes" start="147" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="150" prev-is-closed="true" class="op">then</span><span xq="yes" start="154" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="47022" class="es">&lt;</span><span name="xml-open-tag" pos="47023" class="en">td</span><span name="x-tag-end" pos="47025" class="z">&gt;</span><span pos="47026" class="txt">&#xD;
                     </span><span name="nested-query" pos="47049" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="47094" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="47220" xq="yes">$</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="op">,</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="54" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="47286" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="47320" class="op">}</span><span name="resume-x-literal-txt" pos="47321" class="txt">&#xD;
                 </span><span pos="47340" class="sc">&lt;/</span><span name="xml-close-tag" pos="47342" class="cl">td</span><span name="x-tag-end" pos="47344" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="47385" class="es">&lt;</span><span name="xml-open-tag" pos="47386" class="en">td</span><span name="x-tag-end" pos="47388" class="z">&gt;</span><span name="nested-query" pos="47389" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="47400" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="47410" class="op">}</span><span pos="47411" class="sc">&lt;/</span><span name="xml-close-tag" pos="47413" class="cl">td</span><span name="x-tag-end" pos="47415" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="47431" class="op">}</span><span name="resume-x-literal-txt" pos="47432" class="txt">&#xD;
           </span><span pos="47445" class="sc">&lt;/</span><span name="xml-close-tag" pos="47447" class="cl">tr</span><span name="x-tag-end" pos="47449" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="13" prev-is-closed="true" class="op">else</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace">&#xD;
           </span><span pos="47479" class="es">&lt;</span><span name="xml-open-tag" pos="47480" class="en">tr</span><span name="x-tag-end" pos="47482" class="z">&gt;</span><span pos="47483" class="txt">&#xD;
             </span><span name="nested-query" pos="47498" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:variables</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:variable</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="138" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="139" prev-is-closed="true" class="op">=</span><span xq="yes" start="140" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="141" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="146" prev-is-closed="true" class="filter">]</span><span xq="yes" start="147" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="150" prev-is-closed="true" class="op">then</span><span xq="yes" start="154" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="47671" class="es">&lt;</span><span name="xml-open-tag" pos="47672" class="en">td</span><span name="x-tag-end" pos="47674" class="z">&gt;</span><span pos="47675" class="txt">&#xD;
                     </span><span name="nested-query" pos="47698" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="47743" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="47869" xq="yes">$</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="op">,</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="54" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="47935" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="47969" class="op">}</span><span name="resume-x-literal-txt" pos="47970" class="txt">&#xD;
                 </span><span pos="47989" class="sc">&lt;/</span><span name="xml-close-tag" pos="47991" class="cl">td</span><span name="x-tag-end" pos="47993" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="48034" class="es">&lt;</span><span name="xml-open-tag" pos="48035" class="en">td</span><span name="x-tag-end" pos="48037" class="z">&gt;</span><span name="nested-query" pos="48038" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="48049" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="48059" class="op">}</span><span pos="48060" class="sc">&lt;/</span><span name="xml-close-tag" pos="48062" class="cl">td</span><span name="x-tag-end" pos="48064" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="48080" class="op">}</span><span name="resume-x-literal-txt" pos="48081" class="txt">&#xD;
           </span><span pos="48094" class="sc">&lt;/</span><span name="xml-close-tag" pos="48096" class="cl">tr</span><span name="x-tag-end" pos="48098" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span name="unnested-xquery" pos="48107" class="op">}</span><span name="resume-x-literal-txt" pos="48108" class="txt">&#xD;
    </span><span pos="48114" class="sc">&lt;/</span><span name="xml-close-tag" pos="48116" class="cl">table</span><span name="x-tag-end" pos="48121" class="z">&gt;</span><span pos="48122" class="txt">&#xD;
   </span><span pos="48127" class="sc">&lt;/</span><span name="xml-close-tag" pos="48129" class="cl">div</span><span name="x-tag-end" pos="48132" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="7" prev-is-closed="true" class="op">else</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="48153" class="op">}</span><span name="resume-x-literal-txt" pos="48154" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the information to identify those functions (defined in the module&#xD;
 :  for the current variable) that </span><span pos="48281" class="es">&lt;</span><span name="xml-open-tag" pos="48282" class="en">i</span><span name="x-tag-end" pos="48283" class="z">&gt;</span><span pos="48284" class="txt">use</span><span pos="48287" class="sc">&lt;/</span><span name="xml-close-tag" pos="48289" class="cl">i</span><span name="x-tag-end" pos="48290" class="z">&gt;</span><span pos="48291" class="txt"> the current variable.  &#xD;
 :  Construct a link to the module and function.&#xD;
 :&#xD;
 :  @param $variable the current variable&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-internal-variables-referenced($variable as element(), $local as xs:boolean) as element()*&#xD;
</span><span name="nested-query" pos="48701" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="28" prev-is-closed="true" class="step">/</span><span xq="yes" start="29" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="44" prev-is-closed="true" class="filter">[</span><span xq="yes" start="45" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="51" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="true" class="op">=</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="54" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="73" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="82" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="83" prev-is-closed="true" class="filter">]</span><span xq="yes" start="84" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="85" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="86" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="87" prev-is-closed="true" class="op">then</span><span xq="yes" start="91" prev-is-closed="false" class="whitespace">&#xD;
    </span><span pos="48798" class="es">&lt;</span><span name="xml-open-tag" pos="48799" class="en">div</span><span name="xml-name-end" pos="48802" class="atn"> class</span><span name="x-equals" pos="48808" class="atneq">=</span><span name="xml-att-quote" pos="48809" class="z">"</span><span name="xml-literal-start" pos="48810" class="av">methoddetail</span><span name="xml-att-quote" pos="48822" class="z">"</span><span name="x-tag-end" pos="48823" class="z">&gt;</span><span pos="48824" class="txt">&#xD;
     </span><span pos="48831" class="es">&lt;</span><span name="xml-open-tag" pos="48832" class="en">h6</span><span name="x-tag-end" pos="48834" class="z">&gt;</span><span pos="48835" class="txt">Internal Variables used by this Function</span><span pos="48875" class="sc">&lt;/</span><span name="xml-close-tag" pos="48877" class="cl">h6</span><span name="x-tag-end" pos="48879" class="z">&gt;</span><span pos="48880" class="txt">&#xD;
     </span><span pos="48887" class="es">&lt;</span><span name="xml-open-tag" pos="48888" class="en">table</span><span name="xml-name-end" pos="48893" class="atn"> class</span><span name="x-equals" pos="48899" class="atneq">=</span><span name="xml-att-quote" pos="48900" class="z">"</span><span name="xml-literal-start" pos="48901" class="av">inexternal</span><span name="xml-att-quote" pos="48911" class="z">"</span><span name="x-tag-end" pos="48912" class="z">&gt;</span><span pos="48913" class="txt">&#xD;
       </span><span pos="48922" class="es">&lt;</span><span name="xml-open-tag" pos="48923" class="en">tr</span><span name="x-tag-end" pos="48925" class="z">&gt;</span><span pos="48926" class="txt">&#xD;
        </span><span pos="48936" class="es">&lt;</span><span name="xml-open-tag" pos="48937" class="en">th</span><span name="xml-name-end" pos="48939" class="atn"> align</span><span name="x-equals" pos="48945" class="atneq">=</span><span name="xml-att-quote" pos="48946" class="z">"</span><span name="xml-literal-start" pos="48947" class="av">left</span><span name="xml-att-quote" pos="48951" class="z">"</span><span name="x-tag-end" pos="48952" class="z">&gt;</span><span pos="48953" class="txt">Module URI</span><span pos="48963" class="sc">&lt;/</span><span name="xml-close-tag" pos="48965" class="cl">th</span><span name="x-tag-end" pos="48967" class="z">&gt;</span><span pos="48968" class="txt">&#xD;
        </span><span pos="48978" class="es">&lt;</span><span name="xml-open-tag" pos="48979" class="en">th</span><span name="xml-name-end" pos="48981" class="atn"> align</span><span name="x-equals" pos="48987" class="atneq">=</span><span name="xml-att-quote" pos="48988" class="z">"</span><span name="xml-literal-start" pos="48989" class="av">left</span><span name="xml-att-quote" pos="48993" class="z">"</span><span name="x-tag-end" pos="48994" class="z">&gt;</span><span pos="48995" class="txt">Variable Name</span><span pos="49008" class="sc">&lt;/</span><span name="xml-close-tag" pos="49010" class="cl">th</span><span name="x-tag-end" pos="49012" class="z">&gt;</span><span pos="49013" class="txt">&#xD;
       </span><span pos="49022" class="sc">&lt;/</span><span name="xml-close-tag" pos="49024" class="cl">tr</span><span name="x-tag-end" pos="49026" class="z">&gt;</span><span pos="49027" class="txt">&#xD;
      </span><span name="nested-query" pos="49035" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="10" prev-is-closed="true" class="higher">let</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="20" prev-is-closed="true" class="op">:=</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="23" prev-is-closed="false" class="higher">for</span><span xq="yes" start="26" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="27" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="30" prev-is-closed="true" class="op">in</span><span xq="yes" start="32" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="33" prev-is-closed="false" class="function">fn:distinct-values</span><span class="parenthesis">(</span><span xq="yes" start="52" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="61" prev-is-closed="true" class="step">/</span><span xq="yes" start="62" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="77" prev-is-closed="true" class="step">/</span><span xq="yes" start="78" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="84" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="85" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="107" prev-is-closed="true" class="qname">where</span><span xq="yes" start="112" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="113" prev-is-closed="true" class="variable">$x</span><span xq="yes" start="115" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="116" prev-is-closed="true" class="op">=</span><span xq="yes" start="117" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="118" prev-is-closed="false" class="function">display:module-uri</span><span class="parenthesis">(</span><span xq="yes" start="137" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="146" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="147" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="169" prev-is-closed="true" class="qname">order</span><span xq="yes" start="174" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="175" prev-is-closed="true" class="qname">by</span><span xq="yes" start="177" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="178" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="188" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="190" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="191" prev-is-closed="true" class="whitespace">&#xD;
                    </span><span xq="yes" start="213" prev-is-closed="true" class="op">return</span><span xq="yes" start="219" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="220" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="230" prev-is-closed="false" class="variable">$x</span><span xq="yes" start="232" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="233" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="242" prev-is-closed="true" class="higher">for</span><span xq="yes" start="245" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="246" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="250" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="251" prev-is-closed="true" class="op">in</span><span xq="yes" start="253" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="254" prev-is-closed="false" class="variable">$uris</span><span xq="yes" start="259" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="268" prev-is-closed="true" class="higher">let</span><span xq="yes" start="271" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="272" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="278" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="279" prev-is-closed="true" class="op">:=</span><span xq="yes" start="281" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="282" prev-is-closed="false" class="higher">for</span><span xq="yes" start="285" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="286" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="288" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="289" prev-is-closed="true" class="op">in</span><span xq="yes" start="291" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="292" prev-is-closed="false" class="variable">$variable</span><span xq="yes" start="301" prev-is-closed="true" class="step">/</span><span xq="yes" start="302" prev-is-closed="false" class="qname">xq:ref-variable</span><span xq="yes" start="317" prev-is-closed="true" class="filter">[</span><span xq="yes" start="318" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="324" prev-is-closed="true" class="op">=</span><span xq="yes" start="325" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="329" prev-is-closed="true" class="filter">]</span><span xq="yes" start="330" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="353" prev-is-closed="true" class="qname">order</span><span xq="yes" start="358" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="359" prev-is-closed="true" class="qname">by</span><span xq="yes" start="361" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="362" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="372" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="374" prev-is-closed="true" class="step">/</span><span xq="yes" start="375" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="382" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="383" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span xq="yes" start="406" prev-is-closed="true" class="op">return</span><span xq="yes" start="412" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="413" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="423" prev-is-closed="false" class="variable">$y</span><span xq="yes" start="425" prev-is-closed="true" class="step">/</span><span xq="yes" start="426" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="433" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="434" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="443" prev-is-closed="true" class="higher">for</span><span xq="yes" start="446" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="447" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="452" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="453" prev-is-closed="true" class="qname">at</span><span xq="yes" start="455" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="456" prev-is-closed="true" class="variable">$i</span><span xq="yes" start="458" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="459" prev-is-closed="true" class="op">in</span><span xq="yes" start="461" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="462" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="468" prev-is-closed="true" class="whitespace">&#xD;
       </span><span xq="yes" start="477" prev-is-closed="true" class="op">return</span><span xq="yes" start="483" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="494" prev-is-closed="false" class="if">if</span><span xq="yes" start="496" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="497" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="498" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="500" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="501" prev-is-closed="true" class="op">=</span><span xq="yes" start="502" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="503" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="504" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="505" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="506" prev-is-closed="true" class="op">then</span><span xq="yes" start="510" prev-is-closed="false" class="whitespace">&#xD;
		</span><span xq="yes" start="514" prev-is-closed="false" class="parenthesis">(</span><span pos="49550" class="es">&lt;</span><span name="xml-open-tag" pos="49551" class="en">tr</span><span name="x-tag-end" pos="49553" class="z">&gt;</span><span pos="49554" class="es">&lt;</span><span name="xml-open-tag" pos="49555" class="en">td</span><span name="x-tag-end" pos="49557" class="z">&gt;</span><span name="nested-query" pos="49558" class="op">{</span><span class="op">"</span><span class="literal" pos="49559" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="49567" class="op">}</span><span pos="49568" class="sc">&lt;/</span><span name="xml-close-tag" pos="49570" class="cl">td</span><span name="x-tag-end" pos="49572" class="z">&gt;</span><span pos="49573" class="es">&lt;</span><span name="xml-open-tag" pos="49574" class="en">td</span><span name="x-tag-end" pos="49576" class="z">&gt;</span><span name="nested-query" pos="49577" class="op">{</span><span class="op">"</span><span class="literal" pos="49578" xq="yes">&amp;#160;</span><span class="op">"</span><span name="unnested-xquery" pos="49586" class="op">}</span><span pos="49587" class="sc">&lt;/</span><span name="xml-close-tag" pos="49589" class="cl">td</span><span name="x-tag-end" pos="49591" class="z">&gt;</span><span pos="49592" class="sc">&lt;/</span><span name="xml-close-tag" pos="49594" class="cl">tr</span><span name="x-tag-end" pos="49596" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
            </span><span pos="49612" class="es">&lt;</span><span name="xml-open-tag" pos="49613" class="en">tr</span><span name="x-tag-end" pos="49615" class="z">&gt;</span><span pos="49616" class="txt">&#xD;
             </span><span pos="49631" class="es">&lt;</span><span name="xml-open-tag" pos="49632" class="en">td</span><span name="xml-name-end" pos="49634" class="atn"> rowspan</span><span name="x-equals" pos="49642" class="atneq">=</span><span name="xml-att-quote" pos="49643" class="z">"</span><span name="nested-query" pos="49644" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="10" prev-is-closed="false" class="variable">$names</span><span xq="yes" start="16" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="49661" class="op">}</span><span name="xml-att-quote" pos="49662" class="z">"</span><span name="x-tag-end" pos="49663" class="z">&gt;</span><span name="nested-query" pos="49664" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">display:decode-uri</span><span class="parenthesis">(</span><span xq="yes" start="20" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="24" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="49689" class="op">}</span><span pos="49690" class="sc">&lt;/</span><span name="xml-close-tag" pos="49692" class="cl">td</span><span name="x-tag-end" pos="49694" class="z">&gt;</span><span pos="49695" class="txt">&#xD;
             </span><span name="nested-query" pos="49710" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:variables</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:variable</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="138" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="139" prev-is-closed="true" class="op">=</span><span xq="yes" start="140" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="141" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="146" prev-is-closed="true" class="filter">]</span><span xq="yes" start="147" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="150" prev-is-closed="true" class="op">then</span><span xq="yes" start="154" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="49883" class="es">&lt;</span><span name="xml-open-tag" pos="49884" class="en">td</span><span name="x-tag-end" pos="49886" class="z">&gt;</span><span pos="49887" class="txt">&#xD;
                     </span><span name="nested-query" pos="49910" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="49955" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="50081" xq="yes">$</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="op">,</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="54" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="50147" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="50181" class="op">}</span><span name="resume-x-literal-txt" pos="50182" class="txt">&#xD;
                 </span><span pos="50201" class="sc">&lt;/</span><span name="xml-close-tag" pos="50203" class="cl">td</span><span name="x-tag-end" pos="50205" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="50246" class="es">&lt;</span><span name="xml-open-tag" pos="50247" class="en">td</span><span name="x-tag-end" pos="50249" class="z">&gt;</span><span name="nested-query" pos="50250" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="50261" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="50271" class="op">}</span><span pos="50272" class="sc">&lt;/</span><span name="xml-close-tag" pos="50274" class="cl">td</span><span name="x-tag-end" pos="50276" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="50292" class="op">}</span><span name="resume-x-literal-txt" pos="50293" class="txt">&#xD;
           </span><span pos="50306" class="sc">&lt;/</span><span name="xml-close-tag" pos="50308" class="cl">tr</span><span name="x-tag-end" pos="50310" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="13" prev-is-closed="true" class="op">else</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace">&#xD;
           </span><span pos="50340" class="es">&lt;</span><span name="xml-open-tag" pos="50341" class="en">tr</span><span name="x-tag-end" pos="50343" class="z">&gt;</span><span pos="50344" class="txt">&#xD;
             </span><span name="nested-query" pos="50359" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="if">if</span><span xq="yes" start="20" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="21" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="32" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="46" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="60" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="71" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="72" prev-is-closed="true" class="step">/</span><span xq="yes" start="73" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="81" prev-is-closed="true" class="filter">[</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="91" prev-is-closed="true" class="step">/</span><span xq="yes" start="92" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="98" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="99" prev-is-closed="true" class="op">=</span><span xq="yes" start="100" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="101" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="105" prev-is-closed="true" class="filter">]</span><span xq="yes" start="106" prev-is-closed="true" class="step">/</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:variables</span><span xq="yes" start="119" prev-is-closed="true" class="step">/</span><span xq="yes" start="120" prev-is-closed="false" class="qname">xq:variable</span><span xq="yes" start="131" prev-is-closed="true" class="filter">[</span><span xq="yes" start="132" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="138" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="139" prev-is-closed="true" class="op">=</span><span xq="yes" start="140" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="141" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="146" prev-is-closed="true" class="filter">]</span><span xq="yes" start="147" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="148" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="149" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="150" prev-is-closed="true" class="op">then</span><span xq="yes" start="154" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="50532" class="es">&lt;</span><span name="xml-open-tag" pos="50533" class="en">td</span><span name="x-tag-end" pos="50535" class="z">&gt;</span><span pos="50536" class="txt">&#xD;
                     </span><span name="nested-query" pos="50559" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
                       </span><span xq="yes" start="26" prev-is-closed="true" class="function">display:build-link</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="50604" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="46" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="52" prev-is-closed="true" class="op">,</span><span xq="yes" start="53" prev-is-closed="false" class="whitespace"> &#xD;
                                          </span><span xq="yes" start="98" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="99" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="103" prev-is-closed="true" class="op">,</span><span xq="yes" start="104" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="105" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="50730" xq="yes">$</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="op">,</span><span xq="yes" start="10" prev-is-closed="false" class="whitespace">&#xD;
                                          </span><span xq="yes" start="54" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="50796" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="8" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="9" prev-is-closed="true" class="whitespace">&#xD;
                     </span><span name="unnested-xquery" pos="50830" class="op">}</span><span name="resume-x-literal-txt" pos="50831" class="txt">&#xD;
                 </span><span pos="50850" class="sc">&lt;/</span><span name="xml-close-tag" pos="50852" class="cl">td</span><span name="x-tag-end" pos="50854" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
               </span><span xq="yes" start="18" prev-is-closed="true" class="op">else</span><span xq="yes" start="22" prev-is-closed="false" class="whitespace">&#xD;
                 </span><span pos="50895" class="es">&lt;</span><span name="xml-open-tag" pos="50896" class="en">td</span><span name="x-tag-end" pos="50898" class="z">&gt;</span><span name="nested-query" pos="50899" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="50910" xq="yes">$</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="50920" class="op">}</span><span pos="50921" class="sc">&lt;/</span><span name="xml-close-tag" pos="50923" class="cl">td</span><span name="x-tag-end" pos="50925" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
             </span><span name="unnested-xquery" pos="50941" class="op">}</span><span name="resume-x-literal-txt" pos="50942" class="txt">&#xD;
           </span><span pos="50955" class="sc">&lt;/</span><span name="xml-close-tag" pos="50957" class="cl">tr</span><span name="x-tag-end" pos="50959" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span name="unnested-xquery" pos="50968" class="op">}</span><span name="resume-x-literal-txt" pos="50969" class="txt">&#xD;
    </span><span pos="50975" class="sc">&lt;/</span><span name="xml-close-tag" pos="50977" class="cl">table</span><span name="x-tag-end" pos="50982" class="z">&gt;</span><span pos="50983" class="txt">&#xD;
   </span><span pos="50988" class="sc">&lt;/</span><span name="xml-close-tag" pos="50990" class="cl">div</span><span name="x-tag-end" pos="50993" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="7" prev-is-closed="true" class="op">else</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="19" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="51014" class="op">}</span><span name="resume-x-literal-txt" pos="51015" class="txt">;&#xD;
&#xD;
(:~&#xD;
 : Decode the uri.  This routine is needed for some XML databases that&#xD;
 : have problems with specific characters contained in a document URI.&#xD;
 : This routine makes the URI more human readable ... by removing the&#xD;
 : encoding.  Currently, the only character encoded is a "/".  Other&#xD;
 : characters could easily be added.  However, they would also need to&#xD;
 : be specified in the xqDoc conversion package (XQDocContext).&#xD;
 :&#xD;
 : @param $uri the string to be decoded&#xD;
 : @return the decoded string&#xD;
 :)&#xD;
declare function display:decode-uri($uri as xs:string) as xs:string&#xD;
</span><span name="nested-query" pos="51597" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="function">fn:replace</span><span class="parenthesis">(</span><span xq="yes" start="16" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="20" prev-is-closed="true" class="op">,</span><span xq="yes" start="21" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="51619" xq="yes">~2F</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="51626" xq="yes">/</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="51632" class="op">}</span><span name="resume-x-literal-txt" pos="51633" class="txt">;&#xD;
&#xD;
(:~&#xD;
 : Find the module uri for the associated element.  This routine is needed &#xD;
 : since we can't rely soley on base-uri().  Instead, the xqDoc XML URI is&#xD;
 : contained in the XML of the document (the xqDoc module section).&#xD;
 :&#xD;
 : @param $e the element (i.e. function or variable) that we want to find the module uri&#xD;
 : @return the module URI associated with the element&#xD;
 :)&#xD;
declare function display:module-uri($e as element()) as xs:string&#xD;
</span><span name="nested-query" pos="52086" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="15" prev-is-closed="false" class="variable">$e</span><span xq="yes" start="17" prev-is-closed="true" class="step">/</span><span xq="yes" start="18" prev-is-closed="false" class="axis">ancestor::</span><span xq="yes" start="28" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="36" prev-is-closed="true" class="step">/</span><span xq="yes" start="37" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="46" prev-is-closed="true" class="step">/</span><span xq="yes" start="47" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="53" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="54" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="52142" class="op">}</span><span name="resume-x-literal-txt" pos="52143" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the fotter information for the current module.&#xD;
 :  The footer will contain the version of the xqDoc conversion program&#xD;
 :  used to generate the xqDoc XML stored in the XML database and the&#xD;
 :  time when the XML was created.  If the xqDoc conversion program was not&#xD;
 :  used (i.e. XPath F &amp;amp; O) then this information will be marked as N/A.&#xD;
 :&#xD;
 :  @param $uri the current module uri&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:print-footer($uri as xs:string) as element()*&#xD;
</span><span name="nested-query" pos="52653" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
</span><span pos="52658" class="es">&lt;</span><span name="xml-open-tag" pos="52659" class="en">div</span><span name="xml-name-end" pos="52662" class="atn"> align</span><span name="x-equals" pos="52668" class="atneq">=</span><span name="xml-att-quote" pos="52669" class="z">"</span><span name="xml-literal-start" pos="52670" class="av">left</span><span name="xml-att-quote" pos="52674" class="z">"</span><span name="x-tag-end" pos="52675" class="z">&gt;</span><span pos="52676" class="txt">&#xD;
     </span><span pos="52683" class="es">&lt;</span><span name="xml-open-tag" pos="52684" class="en">i</span><span name="x-tag-end" pos="52685" class="z">&gt;</span><span pos="52686" class="txt">Created by xqDoc version </span><span name="nested-query" pos="52711" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="39" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="50" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="51" prev-is-closed="true" class="step">/</span><span xq="yes" start="52" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="60" prev-is-closed="true" class="filter">[</span><span xq="yes" start="61" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="70" prev-is-closed="true" class="step">/</span><span xq="yes" start="71" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="77" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="78" prev-is-closed="true" class="op">=</span><span xq="yes" start="79" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="80" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="84" prev-is-closed="true" class="filter">]</span><span xq="yes" start="85" prev-is-closed="true" class="step">/</span><span xq="yes" start="86" prev-is-closed="false" class="qname">xq:control</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:version</span><span xq="yes" start="107" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="108" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="52820" class="op">}</span><span name="resume-x-literal-txt" pos="52821" class="txt"> on </span><span name="nested-query" pos="52825" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="11" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="39" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="50" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="51" prev-is-closed="true" class="step">/</span><span xq="yes" start="52" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="60" prev-is-closed="true" class="filter">[</span><span xq="yes" start="61" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="70" prev-is-closed="true" class="step">/</span><span xq="yes" start="71" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="77" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="78" prev-is-closed="true" class="op">=</span><span xq="yes" start="79" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="80" prev-is-closed="false" class="variable">$uri</span><span xq="yes" start="84" prev-is-closed="true" class="filter">]</span><span xq="yes" start="85" prev-is-closed="true" class="step">/</span><span xq="yes" start="86" prev-is-closed="false" class="qname">xq:control</span><span xq="yes" start="96" prev-is-closed="true" class="step">/</span><span xq="yes" start="97" prev-is-closed="false" class="qname">xq:date</span><span xq="yes" start="104" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="105" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="52931" class="op">}</span><span pos="52932" class="sc">&lt;/</span><span name="xml-close-tag" pos="52934" class="cl">i</span><span name="x-tag-end" pos="52935" class="z">&gt;</span><span pos="52936" class="txt">&#xD;
</span><span pos="52938" class="sc">&lt;/</span><span name="xml-close-tag" pos="52940" class="cl">div</span><span name="x-tag-end" pos="52943" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="52946" class="op">}</span><span name="resume-x-literal-txt" pos="52947" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the HTML for the xqDoc home page.  This will include the welcome&#xD;
 :  text and the list of modules available in xqDoc.&#xD;
 :&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:get-default-html($local as xs:boolean) as element()&#xD;
</span><span name="nested-query" pos="53338" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span pos="53343" class="es">&lt;</span><span name="xml-open-tag" pos="53344" class="en">html</span><span name="xml-name-end" pos="53348" class="atn"> xml:space</span><span name="x-equals" pos="53358" class="atneq">=</span><span name="xml-att-quote" pos="53359" class="z">"</span><span name="xml-literal-start" pos="53360" class="av">preserve</span><span name="xml-att-quote" pos="53368" class="z">"</span><span name="x-tag-end" pos="53369" class="z">&gt;</span><span pos="53370" class="txt">&#xD;
    </span><span pos="53376" class="es">&lt;</span><span name="xml-open-tag" pos="53377" class="en">head</span><span name="x-tag-end" pos="53381" class="z">&gt;</span><span pos="53382" class="txt">&#xD;
      </span><span pos="53390" class="es">&lt;</span><span name="xml-open-tag" pos="53391" class="en">title</span><span name="x-tag-end" pos="53396" class="z">&gt;</span><span pos="53397" class="txt">xqDoc -- Module List</span><span pos="53417" class="sc">&lt;/</span><span name="xml-close-tag" pos="53419" class="cl">title</span><span name="x-tag-end" pos="53424" class="z">&gt;</span><span pos="53425" class="txt">&#xD;
      </span><span name="nested-query" pos="53433" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:get-stylesheet</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="26" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="53460" class="op">}</span><span name="resume-x-literal-txt" pos="53461" class="txt">&#xD;
    </span><span pos="53467" class="sc">&lt;/</span><span name="xml-close-tag" pos="53469" class="cl">head</span><span name="x-tag-end" pos="53473" class="z">&gt;</span><span pos="53474" class="txt">&#xD;
    </span><span pos="53480" class="es">&lt;</span><span name="xml-open-tag" pos="53481" class="en">body</span><span name="x-tag-end" pos="53485" class="z">&gt;</span><span pos="53486" class="txt">&#xD;
    </span><span name="nested-query" pos="53492" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-intro</span><span class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="53522" class="op">}</span><span name="resume-x-literal-txt" pos="53523" class="txt">&#xD;
    </span><span name="nested-query" pos="53529" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-modules</span><span class="parenthesis">(</span><span xq="yes" start="24" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="30" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="31" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="53561" class="op">}</span><span name="resume-x-literal-txt" pos="53562" class="txt">&#xD;
    </span><span pos="53568" class="sc">&lt;/</span><span name="xml-close-tag" pos="53570" class="cl">body</span><span name="x-tag-end" pos="53574" class="z">&gt;</span><span pos="53575" class="txt">&#xD;
  </span><span pos="53579" class="sc">&lt;/</span><span name="xml-close-tag" pos="53581" class="cl">html</span><span name="x-tag-end" pos="53585" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="53588" class="op">}</span><span name="resume-x-literal-txt" pos="53589" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the HTML for a xqDoc module page.  &#xD;
 :&#xD;
 :  @param $module the module uri&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:get-module-html($module as xs:string, $local as xs:boolean) as element()&#xD;
</span><span name="nested-query" pos="53953" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span pos="53958" class="es">&lt;</span><span name="xml-open-tag" pos="53959" class="en">html</span><span name="xml-name-end" pos="53963" class="atn"> xml:space</span><span name="x-equals" pos="53973" class="atneq">=</span><span name="xml-att-quote" pos="53974" class="z">"</span><span name="xml-literal-start" pos="53975" class="av">preserve</span><span name="xml-att-quote" pos="53983" class="z">"</span><span name="x-tag-end" pos="53984" class="z">&gt;</span><span pos="53985" class="txt">&#xD;
    </span><span pos="53991" class="es">&lt;</span><span name="xml-open-tag" pos="53992" class="en">head</span><span name="x-tag-end" pos="53996" class="z">&gt;</span><span pos="53997" class="txt">&#xD;
      </span><span pos="54005" class="es">&lt;</span><span name="xml-open-tag" pos="54006" class="en">title</span><span name="x-tag-end" pos="54011" class="z">&gt;</span><span pos="54012" class="txt">xqDoc -- Module</span><span pos="54027" class="sc">&lt;/</span><span name="xml-close-tag" pos="54029" class="cl">title</span><span name="x-tag-end" pos="54034" class="z">&gt;</span><span pos="54035" class="txt">&#xD;
      </span><span pos="54043" class="es">&lt;</span><span name="xml-open-tag" pos="54044" class="en">script</span><span name="xml-name-end" pos="54050" class="atn"> language</span><span name="x-equals" pos="54059" class="atneq">=</span><span name="xml-att-quote" pos="54060" class="z">"</span><span name="xml-literal-start" pos="54061" class="av">JavaScript</span><span name="xml-att-quote" pos="54071" class="z">"</span><span name="x-tag-end" pos="54072" class="z">&gt;</span><span pos="54073" class="txt">&#xD;
      </span><span name="xml-tag" pos="54081" class="z">&lt;!--</span><span pos="54085" class="cm">&#xD;
        function popUp(URL) {&#xD;
                 day = new Date();&#xD;
                 id = day.getTime();&#xD;
                 eval("page = window.open(URL, 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');")&#xD;
                 page.focus();&#xD;
        }&#xD;
      </span><span name="x-tag-end" pos="54418" class="z">--&gt;</span><span pos="54421" class="txt">&#xD;
      </span><span pos="54429" class="sc">&lt;/</span><span name="xml-close-tag" pos="54431" class="cl">script</span><span name="x-tag-end" pos="54437" class="z">&gt;</span><span pos="54438" class="txt">&#xD;
      </span><span name="nested-query" pos="54446" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:get-stylesheet</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="26" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="54473" class="op">}</span><span name="resume-x-literal-txt" pos="54474" class="txt">&#xD;
    </span><span pos="54480" class="sc">&lt;/</span><span name="xml-close-tag" pos="54482" class="cl">head</span><span name="x-tag-end" pos="54486" class="z">&gt;</span><span pos="54487" class="txt">&#xD;
    </span><span pos="54493" class="es">&lt;</span><span name="xml-open-tag" pos="54494" class="en">body</span><span name="x-tag-end" pos="54498" class="z">&gt;</span><span pos="54499" class="txt">&#xD;
    </span><span name="nested-query" pos="54505" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-module-intro</span><span class="parenthesis">(</span><span xq="yes" start="29" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="35" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="36" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="54542" class="op">}</span><span name="resume-x-literal-txt" pos="54543" class="txt">&#xD;
    </span><span name="nested-query" pos="54549" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="function">display:print-module-control</span><span class="parenthesis">(</span><span xq="yes" start="31" prev-is-closed="false" class="variable">$module</span><span xq="yes" start="38" prev-is-closed="true" class="op">,</span><span xq="yes" start="39" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="40" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="46" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="47" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="54597" class="op">}</span><span name="resume-x-literal-txt" pos="54598" class="txt">&#xD;
    </span><span pos="54604" class="sc">&lt;/</span><span name="xml-close-tag" pos="54606" class="cl">body</span><span name="x-tag-end" pos="54610" class="z">&gt;</span><span pos="54611" class="txt">&#xD;
  </span><span pos="54615" class="sc">&lt;/</span><span name="xml-close-tag" pos="54617" class="cl">html</span><span name="x-tag-end" pos="54621" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="54624" class="op">}</span><span name="resume-x-literal-txt" pos="54625" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct a link.  Based on the parameters, the link will be built&#xD;
 :  for the static (off-line viewing mode of xqDoc) or the dynamic viewing&#xD;
 :  mode of xqDoc.   The parameters will also indicate which link to construct,&#xD;
 :  supply the appropriate paramters for the link, and assign a name for the link.&#xD;
 :&#xD;
 :  @param $type the type of link to construct.  The link can be for the xqDoc home&#xD;
 :               page, the module page for a particular module, or for the&#xD;
 :               XQuery code for a specific function.&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @param $parms the parameters associated with the link </span><span pos="55368" class="es">&lt;</span><span name="xml-open-tag" pos="55369" class="en">i</span><span name="x-tag-end" pos="55370" class="z">&gt;</span><span pos="55371" class="txt">$type</span><span pos="55376" class="sc">&lt;/</span><span name="xml-close-tag" pos="55378" class="cl">i</span><span name="x-tag-end" pos="55379" class="z">&gt;</span><span pos="55380" class="txt">&#xD;
 :  @param $name the name to assign for the link&#xD;
 :  @return HTML&#xD;
 :)&#xD;
declare function display:build-link($type as xs:string, $local as xs:boolean, $parms as xs:string*, $name as xs:string?) as element()?&#xD;
</span><span name="nested-query" pos="55591" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="if">if</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="8" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="9" prev-is-closed="false" class="variable">$type</span><span xq="yes" start="14" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="true" class="op">=</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="55608" xq="yes">default</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="true" class="op">then</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="15" prev-is-closed="false" class="if">if</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="18" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="25" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="26" prev-is-closed="true" class="op">=</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="false" class="function">fn:true</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="37" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="38" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="39" prev-is-closed="true" class="op">then</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace">&#xD;
      </span><span pos="55667" class="es">&lt;</span><span name="xml-open-tag" pos="55668" class="en">a</span><span name="xml-name-end" pos="55669" class="atn"> href</span><span name="x-equals" pos="55674" class="atneq">=</span><span name="xml-att-quote" pos="55675" class="z">"</span><span name="xml-literal-start" pos="55676" class="av">default.html</span><span name="xml-att-quote" pos="55688" class="z">"</span><span name="x-tag-end" pos="55689" class="z">&gt;</span><span pos="55690" class="txt">&#xD;
         </span><span pos="55701" class="es">&lt;</span><span name="xml-open-tag" pos="55702" class="en">h1</span><span name="x-tag-end" pos="55704" class="z">&gt;</span><span pos="55705" class="txt">xqDoc Home</span><span pos="55715" class="sc">&lt;/</span><span name="xml-close-tag" pos="55717" class="cl">h1</span><span name="x-tag-end" pos="55719" class="z">&gt;</span><span pos="55720" class="txt">&#xD;
      </span><span pos="55728" class="sc">&lt;/</span><span name="xml-close-tag" pos="55730" class="cl">a</span><span name="x-tag-end" pos="55731" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
      </span><span pos="55752" class="es">&lt;</span><span name="xml-open-tag" pos="55753" class="en">a</span><span name="xml-name-end" pos="55754" class="atn"> href</span><span name="x-equals" pos="55759" class="atneq">=</span><span name="xml-att-quote" pos="55760" class="z">"</span><span name="xml-literal-start" pos="55761" class="av">default.xqy</span><span name="xml-att-quote" pos="55772" class="z">"</span><span name="x-tag-end" pos="55773" class="z">&gt;</span><span pos="55774" class="txt">&#xD;
         xqDoc Home&#xD;
      </span><span pos="55803" class="sc">&lt;/</span><span name="xml-close-tag" pos="55805" class="cl">a</span><span name="x-tag-end" pos="55806" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
  </span><span xq="yes" start="7" prev-is-closed="true" class="op">else</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="12" prev-is-closed="false" class="if">if</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="16" prev-is-closed="false" class="variable">$type</span><span xq="yes" start="21" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="true" class="op">=</span><span xq="yes" start="23" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="55830" xq="yes">get-module</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="true" class="op">then</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="15" prev-is-closed="false" class="if">if</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="18" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="25" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="26" prev-is-closed="true" class="op">=</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="false" class="function">fn:true</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="37" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="38" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="39" prev-is-closed="true" class="op">then</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace">&#xD;
      </span><span pos="55892" class="es">&lt;</span><span name="xml-open-tag" pos="55893" class="en">a</span><span name="xml-name-end" pos="55894" class="atn"> href</span><span name="x-equals" pos="55899" class="atneq">=</span><span name="xml-att-quote" pos="55900" class="z">"</span><span name="nested-query" pos="55901" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" pos="55912" xq="yes">xqdoc-file-</span><span class="op">'</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="13" prev-is-closed="false" class="function">fn:index-of</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="function">display:get-module-uris</span><span class="parenthesis">(</span><span xq="yes" start="49" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="50" prev-is-closed="true" class="op">,</span><span xq="yes" start="51" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="58" prev-is-closed="true" class="filter">[</span><span xq="yes" start="59" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="60" prev-is-closed="true" class="filter">]</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="63" prev-is-closed="true" class="op">,</span><span xq="yes" start="64" prev-is-closed="false" class="whitespace"> </span><span class="op">'</span><span class="literal" pos="55989" xq="yes">.html</span><span class="op">'</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="13" prev-is-closed="false" class="if">if</span><span xq="yes" start="15" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="17" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="27" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="33" prev-is-closed="true" class="filter">[</span><span xq="yes" start="34" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="35" prev-is-closed="true" class="filter">]</span><span xq="yes" start="36" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="37" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="38" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="39" prev-is-closed="true" class="op">then</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace">&#xD;
           </span><span xq="yes" start="56" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" pos="56061" xq="yes">#</span><span class="op">'</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="9" prev-is-closed="true" class="filter">[</span><span xq="yes" start="10" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="11" prev-is-closed="true" class="filter">]</span><span xq="yes" start="12" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="13" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="24" prev-is-closed="true" class="op">else</span><span xq="yes" start="28" prev-is-closed="false" class="whitespace">&#xD;
           </span><span xq="yes" start="41" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="42" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="43" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="54" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="56118" class="op">}</span><span name="xml-att-quote" pos="56119" class="z">"</span><span name="x-tag-end" pos="56120" class="z">&gt;</span><span pos="56121" class="txt">&#xD;
        </span><span name="nested-query" pos="56131" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="56139" class="op">}</span><span name="resume-x-literal-txt" pos="56140" class="txt">&#xD;
      </span><span pos="56148" class="sc">&lt;/</span><span name="xml-close-tag" pos="56150" class="cl">a</span><span name="x-tag-end" pos="56151" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
      </span><span pos="56172" class="es">&lt;</span><span name="xml-open-tag" pos="56173" class="en">a</span><span name="xml-name-end" pos="56174" class="atn"> href</span><span name="x-equals" pos="56179" class="atneq">=</span><span name="xml-att-quote" pos="56180" class="z">"</span><span name="nested-query" pos="56181" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" pos="56192" xq="yes">get-module.xqy?module=</span><span class="op">'</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="9" prev-is-closed="true" class="filter">[</span><span xq="yes" start="10" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="11" prev-is-closed="true" class="filter">]</span><span xq="yes" start="12" prev-is-closed="true" class="op">,</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
         </span><span xq="yes" start="24" prev-is-closed="false" class="if">if</span><span xq="yes" start="26" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="27" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="28" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="38" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="44" prev-is-closed="true" class="filter">[</span><span xq="yes" start="45" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="46" prev-is-closed="true" class="filter">]</span><span xq="yes" start="47" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="48" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="49" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="50" prev-is-closed="true" class="op">then</span><span xq="yes" start="54" prev-is-closed="false" class="whitespace">&#xD;
           </span><span xq="yes" start="67" prev-is-closed="false" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" pos="56292" xq="yes">#</span><span class="op">'</span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="9" prev-is-closed="true" class="filter">[</span><span xq="yes" start="10" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="11" prev-is-closed="true" class="filter">]</span><span xq="yes" start="12" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="13" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="24" prev-is-closed="true" class="op">else</span><span xq="yes" start="28" prev-is-closed="false" class="whitespace">&#xD;
           </span><span xq="yes" start="41" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="42" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="43" prev-is-closed="true" class="whitespace">&#xD;
         </span><span xq="yes" start="54" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="56349" class="op">}</span><span name="xml-att-quote" pos="56350" class="z">"</span><span name="x-tag-end" pos="56351" class="z">&gt;</span><span pos="56352" class="txt">&#xD;
        </span><span name="nested-query" pos="56362" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="2" prev-is-closed="true" class="variable">$name</span><span xq="yes" start="7" prev-is-closed="true" class="whitespace"> </span><span name="unnested-xquery" pos="56370" class="op">}</span><span name="resume-x-literal-txt" pos="56371" class="txt">&#xD;
      </span><span pos="56379" class="sc">&lt;/</span><span name="xml-close-tag" pos="56381" class="cl">a</span><span name="x-tag-end" pos="56382" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
&#xD;
  </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="false" class="if">if</span><span xq="yes" start="16" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="17" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="18" prev-is-closed="false" class="variable">$type</span><span xq="yes" start="23" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="24" prev-is-closed="true" class="op">=</span><span xq="yes" start="25" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="56408" xq="yes">get-code</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="true" class="op">then</span><span xq="yes" start="7" prev-is-closed="false" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="15" prev-is-closed="false" class="if">if</span><span xq="yes" start="17" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="18" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="19" prev-is-closed="false" class="variable">$local</span><span xq="yes" start="25" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="26" prev-is-closed="true" class="op">=</span><span xq="yes" start="27" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="28" prev-is-closed="false" class="function">fn:true</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="37" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="38" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="39" prev-is-closed="true" class="op">then</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace">&#xD;
	</span><span xq="yes" start="46" prev-is-closed="false" class="if">if</span><span xq="yes" start="48" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="49" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="50" prev-is-closed="false" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="59" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="65" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="66" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="67" prev-is-closed="true" class="op">&gt;</span><span xq="yes" start="68" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="69" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="70" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="71" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="72" prev-is-closed="true" class="op">then</span><span xq="yes" start="76" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="56503" class="es">&lt;</span><span name="xml-open-tag" pos="56504" class="en">a</span><span name="xml-name-end" pos="56505" class="atn"> href</span><span name="x-equals" pos="56510" class="atneq">=</span><span name="xml-att-quote" pos="56511" class="z">"</span><span name="nested-query" pos="56512" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="56523" xq="yes">javascript:popUp('xqdoc-file-</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="13" prev-is-closed="false" class="function">fn:index-of</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="function">display:get-module-uris</span><span class="parenthesis">(</span><span xq="yes" start="49" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="50" prev-is-closed="true" class="op">,</span><span xq="yes" start="51" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="58" prev-is-closed="true" class="filter">[</span><span xq="yes" start="59" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="60" prev-is-closed="true" class="filter">]</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="63" prev-is-closed="true" class="op">,</span><span xq="yes" start="64" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="56618" xq="yes">-</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="9" prev-is-closed="true" class="filter">[</span><span xq="yes" start="10" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="11" prev-is-closed="true" class="filter">]</span><span xq="yes" start="12" prev-is-closed="true" class="op">,</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="56634" xq="yes">.html')</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="56644" class="op">}</span><span name="xml-att-quote" pos="56645" class="z">"</span><span name="x-tag-end" pos="56646" class="z">&gt;</span><span pos="56647" class="txt">&#xD;
          view code&#xD;
        </span><span pos="56678" class="sc">&lt;/</span><span name="xml-close-tag" pos="56680" class="cl">a</span><span name="x-tag-end" pos="56681" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="56704" class="es">&lt;</span><span name="xml-open-tag" pos="56705" class="en">a</span><span name="xml-name-end" pos="56706" class="atn"> href</span><span name="x-equals" pos="56711" class="atneq">=</span><span name="xml-att-quote" pos="56712" class="z">"</span><span name="nested-query" pos="56713" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="56724" xq="yes">javascript:popUp('xqdoc-file-</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="13" prev-is-closed="false" class="function">fn:index-of</span><span class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="function">display:get-module-uris</span><span class="parenthesis">(</span><span xq="yes" start="49" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="50" prev-is-closed="true" class="op">,</span><span xq="yes" start="51" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="52" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="58" prev-is-closed="true" class="filter">[</span><span xq="yes" start="59" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="60" prev-is-closed="true" class="filter">]</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="63" prev-is-closed="true" class="op">,</span><span xq="yes" start="64" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="56819" xq="yes">_source.html')</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="56836" class="op">}</span><span name="xml-att-quote" pos="56837" class="z">"</span><span name="x-tag-end" pos="56838" class="z">&gt;</span><span pos="56839" class="txt">&#xD;
          view code&#xD;
        </span><span pos="56870" class="sc">&lt;/</span><span name="xml-close-tag" pos="56872" class="cl">a</span><span name="x-tag-end" pos="56873" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
    </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
      </span><span xq="yes" start="21" prev-is-closed="false" class="if">if</span><span xq="yes" start="23" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="24" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="25" prev-is-closed="false" class="function">fn:count</span><span class="parenthesis">(</span><span xq="yes" start="34" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="40" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="41" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="42" prev-is-closed="true" class="op">&gt;</span><span xq="yes" start="43" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="44" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="45" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="46" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="47" prev-is-closed="true" class="op">then</span><span xq="yes" start="51" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="56934" class="es">&lt;</span><span name="xml-open-tag" pos="56935" class="en">a</span><span name="xml-name-end" pos="56936" class="atn"> href</span><span name="x-equals" pos="56941" class="atneq">=</span><span name="xml-att-quote" pos="56942" class="z">"</span><span name="nested-query" pos="56943" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="56954" xq="yes">javascript:popUp('get-code.xqy?module=</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="9" prev-is-closed="true" class="filter">[</span><span xq="yes" start="10" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="11" prev-is-closed="true" class="filter">]</span><span xq="yes" start="12" prev-is-closed="true" class="op">,</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="57007" xq="yes">&amp;#38;</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="57016" xq="yes">function=</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="9" prev-is-closed="true" class="filter">[</span><span xq="yes" start="10" prev-is-closed="false" class="numeric">2</span><span xq="yes" start="11" prev-is-closed="true" class="filter">]</span><span xq="yes" start="12" prev-is-closed="true" class="op">,</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="57040" xq="yes">')</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="57045" class="op">}</span><span name="xml-att-quote" pos="57046" class="z">"</span><span name="x-tag-end" pos="57047" class="z">&gt;</span><span pos="57048" class="txt">&#xD;
          view code&#xD;
        </span><span pos="57079" class="sc">&lt;/</span><span name="xml-close-tag" pos="57081" class="cl">a</span><span name="x-tag-end" pos="57082" class="z">&gt;</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="9" prev-is-closed="true" class="op">else</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace">&#xD;
        </span><span pos="57105" class="es">&lt;</span><span name="xml-open-tag" pos="57106" class="en">a</span><span name="xml-name-end" pos="57107" class="atn"> href</span><span name="x-equals" pos="57112" class="atneq">=</span><span name="xml-att-quote" pos="57113" class="z">"</span><span name="nested-query" pos="57114" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="function">fn:concat</span><span class="parenthesis">(</span><span class="op">"</span><span class="literal" pos="57125" xq="yes">javascript:popUp('get-code.xqy?module=</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="op">,</span><span xq="yes" start="2" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="3" prev-is-closed="false" class="variable">$parms</span><span xq="yes" start="9" prev-is-closed="true" class="filter">[</span><span xq="yes" start="10" prev-is-closed="false" class="numeric">1</span><span xq="yes" start="11" prev-is-closed="true" class="filter">]</span><span xq="yes" start="12" prev-is-closed="true" class="op">,</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="57178" xq="yes">')</span><span class="op">"</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span name="unnested-xquery" pos="57183" class="op">}</span><span name="xml-att-quote" pos="57184" class="z">"</span><span name="x-tag-end" pos="57185" class="z">&gt;</span><span pos="57186" class="txt">&#xD;
          view code&#xD;
        </span><span pos="57217" class="sc">&lt;/</span><span name="xml-close-tag" pos="57219" class="cl">a</span><span name="x-tag-end" pos="57220" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="op">else</span><span xq="yes" start="9" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="15" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="16" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="17" prev-is-closed="true" class="whitespace">&#xD;
&#xD;
</span><span name="unnested-xquery" pos="57241" class="op">}</span><span name="resume-x-literal-txt" pos="57242" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct a list of module uris contained in xqDoc.&#xD;
 :&#xD;
 :  @return List of module uris contained in xqDoc&#xD;
 :)&#xD;
declare function display:get-module-uris() as xs:string*&#xD;
</span><span name="nested-query" pos="57428" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="variable">$display:XQDOC</span><span xq="yes" start="19" prev-is-closed="true" class="qname">_URIS</span><span xq="yes" start="24" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="57454" class="op">}</span><span name="resume-x-literal-txt" pos="57455" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct a list of function names defined in the current module.&#xD;
 :&#xD;
 :  @param $module the uri for the current module&#xD;
 :  @return List of function names defined in the current module &#xD;
 :)&#xD;
declare function display:get-function-names($module as xs:string) as xs:string*&#xD;
</span><span name="nested-query" pos="57744" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="higher">for</span><span xq="yes" start="8" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="9" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="18" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="19" prev-is-closed="true" class="op">in</span><span xq="yes" start="21" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="22" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="36" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="50" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="61" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="62" prev-is-closed="true" class="step">/</span><span xq="yes" start="63" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="71" prev-is-closed="true" class="filter">[</span><span xq="yes" start="72" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="81" prev-is-closed="true" class="step">/</span><span xq="yes" start="82" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="88" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="89" prev-is-closed="true" class="op">=</span><span xq="yes" start="90" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="91" prev-is-closed="false" class="variable">$module</span><span xq="yes" start="98" prev-is-closed="true" class="filter">]</span><span xq="yes" start="99" prev-is-closed="true" class="step">/</span><span xq="yes" start="100" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="112" prev-is-closed="true" class="step">/</span><span xq="yes" start="113" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="124" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="128" prev-is-closed="true" class="op">return</span><span xq="yes" start="134" prev-is-closed="false" class="whitespace">&#xD;
  </span><span xq="yes" start="138" prev-is-closed="false" class="if">if</span><span xq="yes" start="140" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="141" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="142" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="152" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="161" prev-is-closed="true" class="step">/</span><span xq="yes" start="162" prev-is-closed="false" class="qname">xq:body</span><span xq="yes" start="169" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="170" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="171" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="172" prev-is-closed="true" class="op">then</span><span xq="yes" start="176" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="182" prev-is-closed="false" class="function">fn:normalize-space</span><span class="parenthesis">(</span><span xq="yes" start="201" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="211" prev-is-closed="false" class="variable">$function</span><span xq="yes" start="220" prev-is-closed="true" class="step">/</span><span xq="yes" start="221" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="228" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="229" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="230" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="234" prev-is-closed="true" class="op">else</span><span xq="yes" start="238" prev-is-closed="false" class="whitespace">&#xD;
    </span><span xq="yes" start="244" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="245" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="246" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="57992" class="op">}</span><span name="resume-x-literal-txt" pos="57993" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Construct the HTML that will contain the XQuery code for the function&#xD;
 :  in the current module (or the entire module).  The code will be &#xD;
 :  presented via a Javascript popup Window from the module.  The lack&#xD;
 :  of a $name parameter indicates  to construct the HTML for entire module.&#xD;
 :  &#xD;
 :&#xD;
 :  @param $module the uri associated with the current module&#xD;
 :  @param $name the name associated with the current function contained in the module&#xD;
 :  @param $local indicates whether to build static HTML link for offline&#xD;
 :                viewing or dynamic links for real-time viewing.&#xD;
 :  @return HTML ... the XQuery code for the function&#xD;
 :)&#xD;
declare function display:get-code-html($module as xs:string, $name as xs:string?, $local as xs:boolean) as element()&#xD;
</span><span name="nested-query" pos="58779" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span pos="58784" class="es">&lt;</span><span name="xml-open-tag" pos="58785" class="en">html</span><span name="xml-name-end" pos="58789" class="atn"> xml:space</span><span name="x-equals" pos="58799" class="atneq">=</span><span name="xml-att-quote" pos="58800" class="z">"</span><span name="xml-literal-start" pos="58801" class="av">preserve</span><span name="xml-att-quote" pos="58809" class="z">"</span><span name="x-tag-end" pos="58810" class="z">&gt;</span><span pos="58811" class="txt">&#xD;
    </span><span pos="58817" class="es">&lt;</span><span name="xml-open-tag" pos="58818" class="en">head</span><span name="x-tag-end" pos="58822" class="z">&gt;</span><span pos="58823" class="txt">&#xD;
      </span><span pos="58831" class="es">&lt;</span><span name="xml-open-tag" pos="58832" class="en">title</span><span name="x-tag-end" pos="58837" class="z">&gt;</span><span pos="58838" class="txt">xqDoc -- Code Sample</span><span pos="58858" class="sc">&lt;/</span><span name="xml-close-tag" pos="58860" class="cl">title</span><span name="x-tag-end" pos="58865" class="z">&gt;</span><span pos="58866" class="txt">&#xD;
    </span><span pos="58872" class="sc">&lt;/</span><span name="xml-close-tag" pos="58874" class="cl">head</span><span name="x-tag-end" pos="58878" class="z">&gt;</span><span pos="58879" class="txt">&#xD;
    </span><span pos="58885" class="es">&lt;</span><span name="xml-open-tag" pos="58886" class="en">body</span><span name="xml-name-end" pos="58890" class="atn"> xml:space</span><span name="x-equals" pos="58900" class="atneq">=</span><span name="xml-att-quote" pos="58901" class="z">"</span><span name="xml-literal-start" pos="58902" class="av">preserve</span><span name="xml-att-quote" pos="58910" class="z">"</span><span name="x-tag-end" pos="58911" class="z">&gt;</span><span pos="58912" class="txt">&#xD;
    </span><span pos="58918" class="es">&lt;</span><span name="xml-open-tag" pos="58919" class="en">pre</span><span name="x-tag-end" pos="58922" class="z">&gt;</span><span name="nested-query" pos="58923" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="9" prev-is-closed="true" class="if">if</span><span xq="yes" start="11" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="12" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="13" prev-is-closed="false" class="function">fn:empty</span><span class="parenthesis">(</span><span xq="yes" start="22" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="27" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="28" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="29" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="30" prev-is-closed="true" class="op">then</span><span xq="yes" start="34" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="44" prev-is-closed="false" class="higher">let</span><span xq="yes" start="47" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="48" prev-is-closed="false" class="variable">$body</span><span xq="yes" start="53" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="54" prev-is-closed="true" class="op">:=</span><span xq="yes" start="56" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="57" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="71" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="85" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="96" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="97" prev-is-closed="true" class="step">/</span><span xq="yes" start="98" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="106" prev-is-closed="true" class="filter">[</span><span xq="yes" start="107" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="116" prev-is-closed="true" class="step">/</span><span xq="yes" start="117" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="123" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="124" prev-is-closed="true" class="op">=</span><span xq="yes" start="125" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="126" prev-is-closed="false" class="variable">$module</span><span xq="yes" start="133" prev-is-closed="true" class="filter">]</span><span xq="yes" start="134" prev-is-closed="true" class="step">/</span><span xq="yes" start="135" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="144" prev-is-closed="true" class="whitespace">&#xD;
        </span><span xq="yes" start="154" prev-is-closed="true" class="op">return</span><span xq="yes" start="160" prev-is-closed="false" class="whitespace">    &#xD;
            </span><span xq="yes" start="178" prev-is-closed="false" class="if">if</span><span xq="yes" start="180" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="181" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="182" prev-is-closed="false" class="function">fn:exists</span><span class="parenthesis">(</span><span xq="yes" start="192" prev-is-closed="false" class="variable">$body</span><span xq="yes" start="197" prev-is-closed="true" class="step">/</span><span xq="yes" start="198" prev-is-closed="false" class="qname">*:body</span><span xq="yes" start="204" prev-is-closed="true" class="filter">[</span><span xq="yes" start="205" prev-is-closed="false" class="axis">@</span><span xq="yes" start="206" prev-is-closed="false" class="qname">xml:space</span><span xq="yes" start="215" prev-is-closed="true" class="filter">]</span><span xq="yes" start="216" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="217" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="218" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="219" prev-is-closed="true" class="op">then</span><span xq="yes" start="223" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="239" prev-is-closed="false" class="function">display:print-preserve-newlines</span><span class="parenthesis">(</span><span xq="yes" start="271" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="281" prev-is-closed="false" class="variable">$body</span><span xq="yes" start="286" prev-is-closed="true" class="step">/</span><span xq="yes" start="287" prev-is-closed="false" class="qname">*:body</span><span xq="yes" start="293" prev-is-closed="true" class="filter">[</span><span xq="yes" start="294" prev-is-closed="false" class="axis">@</span><span xq="yes" start="295" prev-is-closed="false" class="qname">xml:space</span><span xq="yes" start="304" prev-is-closed="true" class="filter">]</span><span xq="yes" start="305" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="306" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="307" prev-is-closed="true" class="whitespace"> &#xD;
            </span><span xq="yes" start="322" prev-is-closed="true" class="op">else</span><span xq="yes" start="326" prev-is-closed="false" class="whitespace">&#xD;
              </span><span xq="yes" start="342" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="343" prev-is-closed="false" class="parenthesis">)</span><span xq="yes" start="344" prev-is-closed="true" class="whitespace">&#xD;
      </span><span xq="yes" start="352" prev-is-closed="true" class="op">else</span><span xq="yes" start="356" prev-is-closed="false" class="whitespace">&#xD;
        </span><span xq="yes" start="366" prev-is-closed="false" class="higher">let</span><span xq="yes" start="369" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="370" prev-is-closed="false" class="variable">$body</span><span xq="yes" start="375" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="376" prev-is-closed="true" class="op">:=</span><span xq="yes" start="378" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="379" prev-is-closed="false" class="function">fn:collection</span><span class="parenthesis">(</span><span xq="yes" start="393" prev-is-closed="false" class="variable">$display:XQDOC</span><span xq="yes" start="407" prev-is-closed="true" class="qname">_COLLECTION</span><span xq="yes" start="418" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="419" prev-is-closed="true" class="step">/</span><span xq="yes" start="420" prev-is-closed="false" class="qname">xq:xqdoc</span><span xq="yes" start="428" prev-is-closed="true" class="filter">[</span><span xq="yes" start="429" prev-is-closed="false" class="qname">xq:module</span><span xq="yes" start="438" prev-is-closed="true" class="step">/</span><span xq="yes" start="439" prev-is-closed="false" class="qname">xq:uri</span><span xq="yes" start="445" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="446" prev-is-closed="true" class="op">=</span><span xq="yes" start="447" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="448" prev-is-closed="false" class="variable">$module</span><span xq="yes" start="455" prev-is-closed="true" class="filter">]</span><span xq="yes" start="456" prev-is-closed="true" class="step">/</span><span xq="yes" start="457" prev-is-closed="false" class="qname">xq:functions</span><span xq="yes" start="469" prev-is-closed="true" class="step">/</span><span xq="yes" start="470" prev-is-closed="false" class="qname">xq:function</span><span xq="yes" start="481" prev-is-closed="true" class="filter">[</span><span xq="yes" start="482" prev-is-closed="false" class="qname">xq:name</span><span xq="yes" start="489" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="490" prev-is-closed="true" class="op">=</span><span xq="yes" start="491" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="492" prev-is-closed="false" class="variable">$name</span><span xq="yes" start="497" prev-is-closed="true" class="filter">]</span><span xq="yes" start="498" prev-is-closed="true" class="whitespace">   &#xD;
        </span><span xq="yes" start="511" prev-is-closed="true" class="op">return</span><span xq="yes" start="517" prev-is-closed="false" class="whitespace">      &#xD;
          </span><span xq="yes" start="535" prev-is-closed="false" class="function">display:print-preserve-newlines</span><span class="parenthesis">(</span><span xq="yes" start="567" prev-is-closed="false" class="function">xs:string</span><span class="parenthesis">(</span><span xq="yes" start="577" prev-is-closed="false" class="variable">$body</span><span xq="yes" start="582" prev-is-closed="true" class="step">/</span><span xq="yes" start="583" prev-is-closed="false" class="qname">*:body</span><span xq="yes" start="589" prev-is-closed="true" class="filter">[</span><span xq="yes" start="590" prev-is-closed="false" class="axis">@</span><span xq="yes" start="591" prev-is-closed="false" class="qname">xml:space</span><span xq="yes" start="600" prev-is-closed="true" class="filter">]</span><span xq="yes" start="601" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="602" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="603" prev-is-closed="true" class="whitespace"> &#xD;
    </span><span name="unnested-xquery" pos="59533" class="op">}</span><span name="resume-x-literal-txt" pos="59534" class="txt">&#xD;
    </span><span pos="59540" class="sc">&lt;/</span><span name="xml-close-tag" pos="59542" class="cl">pre</span><span name="x-tag-end" pos="59545" class="z">&gt;</span><span pos="59546" class="txt">&#xD;
    </span><span pos="59552" class="sc">&lt;/</span><span name="xml-close-tag" pos="59554" class="cl">body</span><span name="x-tag-end" pos="59558" class="z">&gt;</span><span pos="59559" class="txt">&#xD;
  </span><span pos="59563" class="sc">&lt;/</span><span name="xml-close-tag" pos="59565" class="cl">html</span><span name="x-tag-end" pos="59569" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="59572" class="op">}</span><span name="resume-x-literal-txt" pos="59573" class="txt">;   &#xD;
&#xD;
(:~&#xD;
 :  Modify the markup (i.e. newlines) associated with an XQuery function so that &#xD;
 :  it presents cleanly in HTML. &#xD;
 :&#xD;
 :  @param $strin the code associated with an XQuery function&#xD;
 :  @return the presentation friendly version of the code &#xD;
 :)&#xD;
declare function display:print-preserve-newlines($strin as xs:string?) as item()*&#xD;
</span><span name="nested-query" pos="59919" class="op">{</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
  </span><span xq="yes" start="5" prev-is-closed="true" class="higher">for</span><span xq="yes" start="8" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="9" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="11" prev-is-closed="true" class="whitespace"> </span><span xq="yes" start="12" prev-is-closed="true" class="op">in</span><span xq="yes" start="14" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="15" prev-is-closed="false" class="function">fn:tokenize</span><span class="parenthesis">(</span><span xq="yes" start="27" prev-is-closed="false" class="variable">$strin</span><span xq="yes" start="33" prev-is-closed="true" class="op">,</span><span xq="yes" start="34" prev-is-closed="false" class="whitespace"> </span><span class="op">"</span><span class="literal" pos="59954" xq="yes">\n</span><span class="op">"</span><span class="open"></span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> &#xD;
  </span><span xq="yes" start="7" prev-is-closed="true" class="op">return</span><span xq="yes" start="13" prev-is-closed="false" class="whitespace"> </span><span xq="yes" start="14" prev-is-closed="false" class="parenthesis">(</span><span xq="yes" start="15" prev-is-closed="false" class="variable">$i</span><span xq="yes" start="17" prev-is-closed="true" class="op">,</span><span xq="yes" start="18" prev-is-closed="false" class="whitespace"> </span><span pos="59976" class="es">&lt;</span><span name="xml-open-tag" pos="59977" class="en">br</span><span name="x-tag-end" pos="59979" class="z">/&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="parenthesis">)</span><span xq="yes" start="2" prev-is-closed="true" class="whitespace"> &#xD;
&#xD;
</span><span name="unnested-xquery" pos="59987" class="op">}</span><span name="resume-x-literal-txt" pos="59988" class="txt">;&#xD;
&#xD;
(:~&#xD;
 :  Get the xqDoc presentation stylesheet.  This is embedded into&#xD;
 :  the returned XHTML for all of the presentation pages.  It is&#xD;
 :  embedded into pages (instead of referencing a link) to keep &#xD;
 :  things simple for the off-line viewing mode.&#xD;
 :&#xD;
 :  @return the stylesheet&#xD;
 :)&#xD;
declare function display:get-stylesheet() as element()&#xD;
</span><span name="nested-query" pos="60340" class="op">{</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span pos="60343" class="es">&lt;</span><span name="xml-open-tag" pos="60344" class="en">style</span><span name="x-tag-end" pos="60349" class="z">&gt;</span><span pos="60350" class="txt">&#xD;
</span><span name="xml-tag" pos="60352" class="z">&lt;!--</span><span pos="60356" class="cm">&#xD;
body		{&#xD;
		font: 80% Verdana;&#xD;
		}&#xD;
table		{&#xD;
		font-size: 100%;&#xD;
		}&#xD;
h1, h2, h3, h4, h5, h6&#xD;
		{&#xD;
		clear: both;&#xD;
		float: none;&#xD;
		}&#xD;
h1		{&#xD;
		font-size: 100%;&#xD;
		margin: 0em;&#xD;
		}&#xD;
h2		{&#xD;
		font-size: 180%;&#xD;
		margin-bottom: -1em;&#xD;
		margin-top: .3em;&#xD;
		}&#xD;
h3		{&#xD;
		font-size: 150%;&#xD;
		}	&#xD;
h4		{&#xD;
		font-size: 140%;&#xD;
		background-color: #ccf;&#xD;
		border-bottom: 1px solid #99f;&#xD;
		width: 100%;&#xD;
		}&#xD;
h5		{&#xD;
		margin: 1em 0em 0em 0em;&#xD;
		font-size: 120%;&#xD;
		}&#xD;
h6		{&#xD;
		margin: 0em 0em 0em 3em;&#xD;
		font-style: italic;&#xD;
		font: bold italic;&#xD;
		font-size: 100%;&#xD;
		}&#xD;
#variables, #methods, #methoddetail&#xD;
		{&#xD;
		padding-left: 3em;&#xD;
		margin-bottom: 1.4em;&#xD;
		clear: both;&#xD;
		float: none;&#xD;
		}&#xD;
#methods ul.method, #variables ul.method&#xD;
		{&#xD;
		margin: 1em 0em 0em;&#xD;
		}&#xD;
#methoddetail ul.method&#xD;
		{&#xD;
		margin: 0em;&#xD;
		}&#xD;
div.inexternal&#xD;
		{&#xD;
		padding-left: 2em;&#xD;
		margin-bottom: 1em;&#xD;
		}&#xD;
div.methoddetail p&#xD;
		{&#xD;
		float: none;&#xD;
		clear: both;&#xD;
		padding-left: 2em;&#xD;
		margin-bottom: 1em;&#xD;
		}&#xD;
div.methoddetail{&#xD;
		padding-bottom: 1em;&#xD;
		}&#xD;
div.methoddetail li&#xD;
		{&#xD;
		list-style-type: none;&#xD;
		font-weight: bold;&#xD;
		}&#xD;
div.methoddetail li li&#xD;
		{&#xD;
		list-style-type: circle;&#xD;
		font-weight: normal;&#xD;
		}&#xD;
div.methoddetail li ul&#xD;
		{&#xD;
		padding-bottom: 0.5em;&#xD;
		font-weight: normal;&#xD;
		}&#xD;
table.inexternal{&#xD;
		clear: both;&#xD;
		float: none;&#xD;
		width: 80%;&#xD;
		margin-left: 3em;&#xD;
		padding: 0em;&#xD;
		&#xD;
		}&#xD;
table.inexternal th&#xD;
		{&#xD;
		background-color:#dedede;&#xD;
		width: 50%;&#xD;
		}			&#xD;
td		{&#xD;
		vertical-align: top;&#xD;
		}&#xD;
div.description {&#xD;
		margin-top: .5em;&#xD;
		font-weight: normal;&#xD;
		padding-left: 1em;&#xD;
		}&#xD;
ul.method	{&#xD;
		clear: both;&#xD;
		float: none;&#xD;
		width: 90%;&#xD;
		list-style-type: none;&#xD;
		border-top: 1px solid #ccc;&#xD;
		}&#xD;
ul.method li.left&#xD;
		{&#xD;
		float: left;&#xD;
		clear: none;&#xD;
		width: 40%;&#xD;
		font-weight: bold;&#xD;
		margin-bottom: 2em;&#xD;
		}&#xD;
ul.method li.right&#xD;
		{&#xD;
		position: relative;&#xD;
            top: 0em;&#xD;
		float: left;&#xD;
            width: 55%;&#xD;
		margin-bottom: 2em;&#xD;
		padding-left: 2em;&#xD;
		}&#xD;
div.home 	{&#xD;
		width: 60%;&#xD;
		float: left;&#xD;
		margin-right: 1%;&#xD;
		border: 1px&#xD;
		}&#xD;
div.home h4	{&#xD;
		font-size: 120%;&#xD;
		background-color: #fff;&#xD;
		border-bottom: 1px solid #99f;&#xD;
		width: 100%;&#xD;
		margin-bottom: -1em;&#xD;
		}&#xD;
div.overview p {&#xD;
               width: 60%;&#xD;
               }&#xD;
     &#xD;
 </span><span name="x-tag-end" pos="62676" class="z">--&gt;</span><span pos="62679" class="txt">&#xD;
</span><span pos="62681" class="sc">&lt;/</span><span name="xml-close-tag" pos="62683" class="cl">style</span><span name="x-tag-end" pos="62688" class="z">&gt;</span><span xq="yes" start="1" prev-is-closed="true" class="whitespace">&#xD;
</span><span name="unnested-xquery" pos="62691" class="op">}</span><span name="resume-x-literal-txt" pos="62692" class="txt">;&#xD;
&#xD;
&#xD;
(: Stylus Studio meta-information - (c) 2004-2006. Progress Software Corporation. All rights reserved.&#xD;
</span><span pos="62803" class="es">&lt;</span><span name="xml-open-tag" pos="62804" class="en">metaInformation</span><span name="x-tag-end" pos="62819" class="z">&gt;</span><span pos="62820" class="txt">&#xD;
</span><span pos="62822" class="es">&lt;</span><span name="xml-open-tag" pos="62823" class="en">scenarios</span><span name="x-tag-end" pos="62832" class="z">/&gt;</span><span pos="62834" class="es">&lt;</span><span name="xml-open-tag" pos="62835" class="en">MapperMetaTag</span><span name="x-tag-end" pos="62848" class="z">&gt;</span><span pos="62849" class="es">&lt;</span><span name="xml-open-tag" pos="62850" class="en">MapperInfo</span><span name="xml-name-end" pos="62860" class="atn"> srcSchemaPathIsRelative</span><span name="x-equals" pos="62884" class="atneq">=</span><span name="xml-att-quote" pos="62885" class="z">"</span><span name="xml-literal-start" pos="62886" class="av">yes</span><span name="xml-att-quote" pos="62889" class="z">"</span><span name="xml-literal-end" pos="62890" class="atn"> srcSchemaInterpretAsXML</span><span name="x-equals" pos="62914" class="atneq">=</span><span name="xml-att-quote" pos="62915" class="z">"</span><span name="xml-literal-start" pos="62916" class="av">no</span><span name="xml-att-quote" pos="62918" class="z">"</span><span name="xml-literal-end" pos="62919" class="atn"> destSchemaPath</span><span name="x-equals" pos="62934" class="atneq">=</span><span name="xml-att-quote" pos="62935" class="z">"</span><span name="xml-att-quote" pos="62936" class="z">"</span><span name="xml-literal-end" pos="62937" class="atn"> destSchemaRoot</span><span name="x-equals" pos="62952" class="atneq">=</span><span name="xml-att-quote" pos="62953" class="z">"</span><span name="xml-att-quote" pos="62954" class="z">"</span><span name="xml-literal-end" pos="62955" class="atn"> destSchemaPathIsRelative</span><span name="x-equals" pos="62980" class="atneq">=</span><span name="xml-att-quote" pos="62981" class="z">"</span><span name="xml-literal-start" pos="62982" class="av">yes</span><span name="xml-att-quote" pos="62985" class="z">"</span><span name="xml-literal-end" pos="62986" class="atn"> destSchemaInterpretAsXML</span><span name="x-equals" pos="63011" class="atneq">=</span><span name="xml-att-quote" pos="63012" class="z">"</span><span name="xml-literal-start" pos="63013" class="av">no</span><span name="xml-att-quote" pos="63015" class="z">"</span><span name="x-tag-end" pos="63016" class="z">/&gt;</span><span pos="63018" class="es">&lt;</span><span name="xml-open-tag" pos="63019" class="en">MapperBlockPosition</span><span name="x-tag-end" pos="63038" class="z">&gt;</span><span pos="63039" class="sc">&lt;/</span><span name="xml-close-tag" pos="63041" class="cl">MapperBlockPosition</span><span name="x-tag-end" pos="63060" class="z">&gt;</span><span pos="63061" class="es">&lt;</span><span name="xml-open-tag" pos="63062" class="en">TemplateContext</span><span name="x-tag-end" pos="63077" class="z">&gt;</span><span pos="63078" class="sc">&lt;/</span><span name="xml-close-tag" pos="63080" class="cl">TemplateContext</span><span name="x-tag-end" pos="63095" class="z">&gt;</span><span pos="63096" class="es">&lt;</span><span name="xml-open-tag" pos="63097" class="en">MapperFilter</span><span name="xml-name-end" pos="63109" class="atn"> side</span><span name="x-equals" pos="63114" class="atneq">=</span><span name="xml-att-quote" pos="63115" class="z">"</span><span name="xml-literal-start" pos="63116" class="av">source</span><span name="xml-att-quote" pos="63122" class="z">"</span><span name="x-tag-end" pos="63123" class="z">&gt;</span><span pos="63124" class="sc">&lt;/</span><span name="xml-close-tag" pos="63126" class="cl">MapperFilter</span><span name="x-tag-end" pos="63138" class="z">&gt;</span><span pos="63139" class="sc">&lt;/</span><span name="xml-close-tag" pos="63141" class="cl">MapperMetaTag</span><span name="x-tag-end" pos="63154" class="z">&gt;</span><span pos="63155" class="txt">&#xD;
</span><span pos="63157" class="sc">&lt;/</span><span name="xml-close-tag" pos="63159" class="cl">metaInformation</span><span name="x-tag-end" pos="63174" class="z">&gt;</span></pre></div></body></html>
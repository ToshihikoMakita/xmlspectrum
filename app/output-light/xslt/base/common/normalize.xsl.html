<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>normalize.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:fn</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:ghost</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook/ephemeral</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:mp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode/private</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:n</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/normalize</span><span class="z">"</span><span class="z">
                		</span><span class="atn">xmlns:tp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template/private</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:xlink</span><span class="atneq">=</span><span class="z">'</span><span class="av">http://www.w3.org/1999/xlink</span><span class="z">'</span><span class="z">
                                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                                </span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fn m mp n xlink xs ghost</span><span class="z">"</span><span class="z">
                                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="ww" id="w93"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?schemafile">schemafile</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1"></span><span class="op">'</span><span class="z">"</span><span id="wx109" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm">	   select="'../../docbook/relaxng/dita4db/dita4db.rng'"/&gt; </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w115"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?schema">schema</span><span class="z">"</span><span class="z">
           	   </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="21" select="quick">(</span><a href="xslt/base/common/normalize.xsl.html#v?schemafile" class="solar"><span class="variable" start="5" select="quick">$schemafile</span></a><span class="whitespace" start="16"> </span><span class="op" start="17">=</span><span class="whitespace" start="18"> </span><span class="op">'</span><span class="literal" start="19"></span><span class="op">'</span><span class="parenthesis" start="21">)</span><span class="whitespace" start="22">
                   </span><span class="qname" start="23" select="quick">	</span><span class="qname" start="24" select="quick">	</span><span class="whitespace" start="25">   </span><span class="op" start="28">then</span><span class="whitespace" start="32"> </span><span class="parenthesis" start="33" pair-end="34" select="quick">(</span><span class="parenthesis" start="34">)</span><span class="whitespace" start="35">
                   </span><span class="qname" start="36" select="quick">	</span><span class="qname" start="37" select="quick">	</span><span class="whitespace" start="38">   </span><span class="op" start="41">else</span><span class="whitespace" start="45"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="46" pair-end="66" select="quick">document</span></a><span class="parenthesis">(</span><a href="xslt/base/common/normalize.xsl.html#v?schemafile" class="solar"><span class="variable" start="55" select="quick">$schemafile</span></a><span class="parenthesis" start="66">)</span><span class="z">"</span><span id="wx157" class="sc">/&gt;</span></span><span class="txt">

</span><span class="ww" id="w159"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?schema-extensions">schema-extensions</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx180" class="sc">/&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
</span><span class="z">&lt;!--</span><span class="cm"> normalize content </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w190"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?external.glossary">external.glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w200"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w204"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?glossary.collection" class="solar"><span class="variable" start="1" select="quick">$glossary.collection</span></a><span class="whitespace" start="21"> </span><span class="op" start="22">=</span><span class="whitespace" start="23"> </span><span class="op">'</span><span class="literal" start="24"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w220"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx229" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx233" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w235"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w239"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="32" select="quick">document</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?glossary.collection" class="solar"><span class="variable" start="10" select="quick">$glossary.collection</span></a><span class="op" start="30">,</span><span class="context" start="31">.</span><span class="parenthesis" start="32">)</span><span class="z">"</span><span id="wx252" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx256" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx260" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx264" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w266"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?external.bibliography">external.bibliography</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w276"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w280"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?bibliography.collection" class="solar"><span class="variable" start="1" select="quick">$bibliography.collection</span></a><span class="whitespace" start="25"> </span><span class="op" start="26">=</span><span class="whitespace" start="27"> </span><span class="op">'</span><span class="literal" start="28"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w296"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx305" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx309" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w311"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w315"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="36" select="quick">document</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?bibliography.collection" class="solar"><span class="variable" start="10" select="quick">$bibliography.collection</span></a><span class="op" start="34">,</span><span class="context" start="35">.</span><span class="parenthesis" start="36">)</span><span class="z">"</span><span id="wx328" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx332" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx336" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx340" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w346"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w362"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for normalizing a DocBook document</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx368" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w370"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w374"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to normalize an input document. Normalization
moves all </span><span class="ww" id="w378"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">title</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx384" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w386"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">subtitle</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx392" class="ec">&gt;</span></span><span class="txt">, and
</span><span class="ww" id="w394"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">titleabbrev</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx400" class="ec">&gt;</span></span><span class="txt"> elements inside </span><span class="ww" id="w402"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx408" class="ec">&gt;</span></span><span class="txt"> wrappers,
creating the wrapper if necessary.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx412" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w414"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">If the element being normalized has a default title (e.g.,
</span><span class="ww" id="w418"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">bibligraphy</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx424" class="ec">&gt;</span></span><span class="txt"> and </span><span class="ww" id="w426"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">glossary</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx432" class="ec">&gt;</span></span><span class="txt">), the title is made
explicit during normalization.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx436" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w438"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">External glossaries and bibliographies (not yet!) are also
copied by normalization.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx444" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx448" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx452" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w454"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="step" start="1">/</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w470"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx478" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx482" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w488"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalize-movetitle</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w504"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Moves titles inside </span><span class="ww" id="w508"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx514" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx518" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w520"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w524"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template moves </span><span class="ww" id="w528"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">title</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx534" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w536"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">subtitle</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx542" class="ec">&gt;</span></span><span class="txt">, and
</span><span class="ww" id="w544"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">titleabbrev</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx550" class="ec">&gt;</span></span><span class="txt"> elements inside an </span><span class="ww" id="w552"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx558" class="ec">&gt;</span></span><span class="txt">.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx562" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx566" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w568"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w572"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The transformed node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx578" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx582" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx586" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w588"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/normalize}normalize-movetitle">n:normalize-movetitle</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w598"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w602"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx611" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w613"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w617"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w627"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx635" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx639" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w641"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w655"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">info</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w673"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo" class="solar"><span class="tcall">n:normalize-dbinfo</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w683"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">copynodes</span><span class="z">"</span><span class="z">
                			    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="z">"</span><span id="wx701" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx705" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx709" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w711"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx719" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx723" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w725"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w729"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx737" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx741" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx745" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx749" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx753" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w755"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w775"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:info</span><span class="whitespace" start="16">
                              </span><span class="op" start="33">|</span><span class="axis" start="34">parent::</span><span class="qname" start="42" select="quick">db:biblioentry</span><span class="whitespace" start="56">
                              </span><span class="op" start="73">|</span><span class="axis" start="74">parent::</span><span class="qname" start="82" select="quick">db:bibliomixed</span><span class="whitespace" start="96">
                              </span><span class="op" start="113">|</span><span class="axis" start="114">parent::</span><span class="qname" start="122" select="quick">db:bibliomset</span><span class="whitespace" start="135">
                              </span><span class="op" start="152">|</span><span class="axis" start="153">parent::</span><span class="qname" start="161" select="quick">db:biblioset</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w802"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w806"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx815" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w817"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx825" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx829" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx833" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx837" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w839"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliography</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w855"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w865"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx882" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx886" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx890" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w892"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliomixed</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:biblioentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w910"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w914"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="11" select="quick">not</span></a><span class="parenthesis">(</span><span class="node" start="5" pair-end="10" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="10">)</span><span class="parenthesis" start="11">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt"> </span><span class="z">&lt;!--</span><span class="cm"> totally empty </span><span class="z">--&gt;</span><span class="txt">
      </span><span class="ww" id="w933"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?id">id</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="13" select="quick">(</span><span class="axis" start="2">@</span><span class="qname" start="3" select="quick">id</span><span class="op" start="5">|</span><span class="axis" start="6">@</span><span class="qname" start="7" select="quick">xml:id</span><span class="parenthesis" start="13">)</span><span class="filter" start="14" pair-end="16" select="quick">[</span><span class="numeric" start="15">1</span><span class="filter" start="16">]</span><span class="z">"</span><span id="wx956" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w958"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w962"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="8" select="quick">not</span></a><span class="parenthesis">(</span><span class="variable" start="5" select="quick">$id</span><span class="parenthesis" start="8">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w975"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w979"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Error: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx985" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w987"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">empty </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx993" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w995"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1006" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1008"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt"> with no id.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1014" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1018" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1022" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1024"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#v?external.bibliography" class="solar"><span class="variable" start="1" select="quick">$external.bibliography</span></a><span class="step" start="23">/</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="24" pair-end="37" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="28">id</span><span class="op">'</span><span class="op" start="32">,</span><span class="whitespace" start="33"> </span><span class="variable" start="34" select="quick">$id</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1044"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#v?external.bibliography" class="solar"><span class="variable" start="1" select="quick">$external.bibliography</span></a><span class="step" start="23">/</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="24" pair-end="37" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="28">id</span><span class="op">'</span><span class="op" start="32">,</span><span class="whitespace" start="33"> </span><span class="variable" start="34" select="quick">$id</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span class="z">
                     			       </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx1068" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1072" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1074"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1078"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1082"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Error: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1088" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1090"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">$bibliography.collection doesn't contain </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1096" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1098"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$id</span><span class="z">"</span><span id="wx1106" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1110" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1112"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1116"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx1125" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w1127"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">???</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1133" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx1137" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1141" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1145" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1149" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1151"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1155"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1159"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx1168" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1170"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx1178" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx1182" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1186" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1190" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1194" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1196"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossary</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1212"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?glossary">glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1222"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1232"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1249" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1253" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1257" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1259"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1263"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">db:glossary</span><span class="filter" start="22" pair-end="35" select="quick">[</span><span class="axis" start="23">@</span><span class="qname" start="24" select="quick">role</span><span class="op" start="28">=</span><span class="op">'</span><span class="literal" start="29">auto</span><span class="op">'</span><span class="filter" start="35">]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1283"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="23" select="quick">not</span></a><span class="parenthesis">(</span><a href="xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="5" select="quick">$external.glossary</span></a><span class="parenthesis" start="23">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1296"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1300"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: processing automatic glossary </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1306" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1308"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">without an external glossary.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx1314" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx1318" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1322" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w1324"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">glossary</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1342"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">db:glossary</span><span class="step" start="22">/</span><span class="axis" start="23">@</span><span class="qname" start="24" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1357"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-name" class="solar"><span class="function" start="1" pair-end="7" select="quick">name</span></a><span class="parenthesis">(</span><span class="context" start="6">.</span><span class="parenthesis" start="7">)</span><span class="whitespace" start="8"> </span><span class="op" start="9">!=</span><span class="whitespace" start="11"> </span><span class="op">'</span><span class="literal" start="12">role</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1376"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1384" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1388" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx1392" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1394"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">db:glossary</span><span class="step" start="22">/</span><span class="qname" start="23" select="quick">db:info</span><span class="z">"</span><span id="wx1406" class="sc">/&gt;</span></span><span class="txt">

	</span><span class="ww" id="w1408"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?seealsos">seealsos</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1424"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="1" select="quick">$external.glossary</span></a><span class="step" start="19">//</span><span class="qname" start="21" select="quick">db:glossseealso</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1436"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="26" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="5" pair-end="25" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="9">id</span><span class="op">'</span><span class="op" start="13">,</span><span class="whitespace" start="14"> </span><span class="axis" start="15">@</span><span class="qname" start="16" select="quick">otherterm</span><span class="parenthesis" start="25">)</span><span class="parenthesis" start="26">)</span><span class="whitespace" start="27">
                     </span><span class="qname" start="28" select="quick">	</span><span class="qname" start="29" select="quick">	</span><span class="qname" start="30" select="quick">	</span><span class="qname" start="31" select="quick">	</span><span class="whitespace" start="32">  </span><span class="op" start="34">then</span><span class="whitespace" start="38"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="39" pair-end="59" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="43">id</span><span class="op">'</span><span class="op" start="47">,</span><span class="whitespace" start="48"> </span><span class="axis" start="49">@</span><span class="qname" start="50" select="quick">otherterm</span><span class="parenthesis" start="59">)</span><span class="filter" start="60" pair-end="62" select="quick">[</span><span class="numeric" start="61">1</span><span class="filter" start="62">]</span><span class="whitespace" start="63">
                     </span><span class="qname" start="64" select="quick">	</span><span class="qname" start="65" select="quick">	</span><span class="qname" start="66" select="quick">	</span><span class="qname" start="67" select="quick">	</span><span class="whitespace" start="68">  </span><span class="op" start="70">else</span><span class="whitespace" start="74"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="75" pair-end="101" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="79">glossterm</span><span class="op">'</span><span class="op" start="90">,</span><span class="whitespace" start="91"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="92" pair-end="100" select="quick">string</span></a><span class="parenthesis">(</span><span class="context" start="99">.</span><span class="parenthesis" start="100">)</span><span class="parenthesis" start="101">)</span><span class="z">"</span><span id="wx1498" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx1502" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1506" class="ec">&gt;</span></span><span class="txt">

	</span><span class="ww" id="w1508"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span class="z">
              		      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="step" start="10">//</span><span class="qname" start="12" select="quick">db:glossary</span><span class="step" start="23">/</span><span class="qname" start="24" select="quick">db:glossdiv</span><span class="z">"</span><span id="wx1526" class="sc">/&gt;</span></span><span class="txt">

	</span><span class="ww" id="w1528"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1532"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="whitespace" start="6"> </span><span class="op" start="7">and</span><span class="whitespace" start="10"> </span><a href="xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="11" select="quick">$external.glossary</span></a><span class="step" start="29">//</span><span class="qname" start="31" select="quick">db:glossdiv</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1548"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="1" select="quick">$external.glossary</span></a><span class="step" start="19">//</span><span class="qname" start="21" select="quick">db:glossdiv</span><span class="z">"</span><span class="z">
                     				 </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w1566"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z">
                			      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="step" start="1">//</span><span class="qname" start="3" select="quick">db:glossterm</span><span class="filter" start="15" pair-end="40" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="16" pair-end="39" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="20">parent::</span><span class="qname" start="28" select="quick">db:glossdef</span><span class="parenthesis" start="39">)</span><span class="filter" start="40">]</span><span class="whitespace" start="41">
                        </span><span class="qname" start="42" select="quick">	</span><span class="qname" start="43" select="quick">	</span><span class="qname" start="44" select="quick">	</span><span class="qname" start="45" select="quick">	</span><span class="whitespace" start="46">      </span><span class="op" start="52">|</span><span class="step" start="53">//</span><span class="qname" start="55" select="quick">db:firstterm</span><span class="whitespace" start="67">
                        </span><span class="qname" start="68" select="quick">	</span><span class="qname" start="69" select="quick">	</span><span class="qname" start="70" select="quick">	</span><span class="qname" start="71" select="quick">	</span><span class="whitespace" start="72">      </span><span class="op" start="78">|</span><span class="variable" start="79" select="quick">$seealsos</span><span class="z">"</span><span id="wx1605" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w1607"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx1621" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1625" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1629" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1631"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1635"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#v?external.glossary" class="solar"><span class="variable" start="1" select="quick">$external.glossary</span></a><span class="step" start="19">//</span><span class="qname" start="21" select="quick">db:glossentry</span><span class="z">"</span><span class="z">
                     				 </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w1653"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z">
                			      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="step" start="1">//</span><span class="qname" start="3" select="quick">db:glossterm</span><span class="filter" start="15" pair-end="40" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="16" pair-end="39" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="20">parent::</span><span class="qname" start="28" select="quick">db:glossdef</span><span class="parenthesis" start="39">)</span><span class="filter" start="40">]</span><span class="whitespace" start="41">
                        </span><span class="qname" start="42" select="quick">	</span><span class="qname" start="43" select="quick">	</span><span class="qname" start="44" select="quick">	</span><span class="qname" start="45" select="quick">	</span><span class="whitespace" start="46">      </span><span class="op" start="52">|</span><span class="step" start="53">//</span><span class="qname" start="55" select="quick">db:firstterm</span><span class="whitespace" start="67">
                        </span><span class="qname" start="68" select="quick">	</span><span class="qname" start="69" select="quick">	</span><span class="qname" start="70" select="quick">	</span><span class="qname" start="71" select="quick">	</span><span class="whitespace" start="72">      </span><span class="op" start="78">|</span><span class="variable" start="79" select="quick">$seealsos</span><span class="z">"</span><span id="wx1692" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w1694"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx1708" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1712" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1716" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1720" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx1724" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1728" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1730"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1734"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$glossary</span><span class="z">"</span><span id="wx1742" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1746" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1750" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1754" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1756"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:index</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1772"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1782"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1799" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1803" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1807" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1809"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:setindex</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1825"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1835"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1852" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1856" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1860" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1862"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:abstract</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1878"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1888"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1905" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1909" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1913" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1915"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:legalnotice</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1931"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1941"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx1958" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1962" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1966" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1968"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:note</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1984"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1994"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2011" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2015" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2019" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2021"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:tip</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2037"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2047"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2064" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2068" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2072" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2074"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:caution</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2090"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2100"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2117" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2121" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2125" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2127"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:warning</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2143"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2153"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2170" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2174" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2178" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2180"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:important</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2196"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title" class="solar"><span class="tcall">n:normalize-generated-title</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2206"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx2223" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2227" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2231" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2237"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalize-generated-title</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2253"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Generate a title, if necessary, and see that its moved into
</span><span class="ww" id="w2257"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2263" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2267" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2269"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2273"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">If the context node does not have a title, this template will
generate one. In either case, the title will be placed or moved inside
an </span><span class="ww" id="w2277"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2283" class="ec">&gt;</span></span><span class="txt"> which will be created if necessary.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2287" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2291" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2293"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2297"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2301"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2305"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">title-key</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2311" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2313"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2317"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The key to use for creating the generated-text title if one is
necessary.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2323" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2327" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2331" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2335" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2339" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2341"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2345"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The transformed node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2351" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2355" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2359" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2361"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/normalize}normalize-generated-title">n:normalize-generated-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2371"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title-key">title-key</span><span class="z">"</span><span id="wx2379" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2381"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2385"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:info</span><span class="step" start="17">/</span><span class="qname" start="18" select="quick">db:title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2399"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-movetitle" class="solar"><span class="tcall">n:normalize-movetitle</span></a><span class="z">"</span><span id="wx2407" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2411" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2413"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2417"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w2421"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx2430" class="sc">/&gt;</span></span><span class="txt">

	</span><span class="ww" id="w2432"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w2436"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w2446"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">info</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w2464"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="axis" start="9">@</span><span class="qname" start="10" select="quick">*</span><span class="z">"</span><span id="wx2475" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w2477"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w2495"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalized-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		  </span><span class="ww" id="w2511"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title-key</span><span class="z">"</span><span id="wx2525" class="sc">/&gt;</span></span><span class="txt">
		</span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2529" class="ec">&gt;</span></span><span class="txt">
	      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2533" class="ec">&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w2535"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="axis" start="9">preceding-sibling::</span><span class="node" start="28" pair-end="33" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span id="wx2548" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w2550"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="qname" start="9" select="quick">*</span><span class="z">"</span><span id="wx2560" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2564" class="ec">&gt;</span></span><span class="txt">

	    </span><span class="ww" id="w2566"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="step" start="8">/</span><span class="axis" start="9">following-sibling::</span><span class="node" start="28" pair-end="33" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span class="z">
                     				 </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx2585" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2589" class="ec">&gt;</span></span><span class="txt">

	  </span><span class="ww" id="w2591"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w2595"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node-tree">node-tree</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w2605"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w2623"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">ghost:title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">yes</span><span class="op">'</span><span class="z">"</span><span id="wx2639" class="sc">/&gt;</span></span><span class="txt">
		</span><span class="ww" id="w2641"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalized-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		  </span><span class="ww" id="w2657"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">title-key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title-key</span><span class="z">"</span><span id="wx2671" class="sc">/&gt;</span></span><span class="txt">
		</span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2675" class="ec">&gt;</span></span><span class="txt">
	      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2679" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2683" class="ec">&gt;</span></span><span class="txt">

	    </span><span class="ww" id="w2685"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">info</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?docbook-namespace" class="solar"><span class="variable" start="1" select="quick">$docbook-namespace</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w2703"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo" class="solar"><span class="tcall">n:normalize-dbinfo</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
		</span><span class="ww" id="w2713"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">copynodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node-tree</span><span class="step" start="11">/</span><span class="qname" start="12" select="quick">*</span><span class="z">"</span><span id="wx2729" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2733" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2737" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w2739"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx2747" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2751" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2755" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx2759" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2763" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2767" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2771" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2773"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalized-title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2789"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title-key">title-key</span><span class="z">"</span><span id="wx2797" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2799"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2809"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title-key</span><span class="z">"</span><span id="wx2823" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2827" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2831" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2833"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2849"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2853"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx2862" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2864"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo" class="solar"><span class="tcall">n:normalize-dbinfo</span></a><span class="z">"</span><span id="wx2872" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx2876" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2880" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2886"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">n:normalize-dbinfo</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2902"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Copy the specified nodes, normalizing other content
if appropriate</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2908" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2910"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2914"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The specified nodes are copied. If the context node is an
</span><span class="ww" id="w2918"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">info</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2924" class="ec">&gt;</span></span><span class="txt"> element, then the rest of its contents are also normalized.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2928" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2932" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2934"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2938"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2942"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2946"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">copynodes</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2952" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2954"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2958"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The nodes to copy.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2964" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2968" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2972" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2976" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2980" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2982"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2986"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The transformed node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2992" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2996" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx3000" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3002"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/normalize}normalize-dbinfo">n:normalize-dbinfo</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3012"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?copynodes">copynodes</span><span class="z">"</span><span id="wx3020" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3022"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$copynodes</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3032"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3036"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3045" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3047"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3055" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3059" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx3063" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3065"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:info</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3076"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3084" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3088" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3092" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3094"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:inlinemediaobject</span><span class="whitespace" start="21">
                     </span><span class="qname" start="22" select="quick">	</span><span class="qname" start="23" select="quick">	</span><span class="whitespace" start="24">     </span><span class="filter" start="29" pair-end="284" select="quick">[</span><span class="parenthesis" start="30" pair-end="194" select="quick">(</span><span class="axis" start="31">parent::</span><span class="qname" start="39" select="quick">db:programlisting</span><span class="whitespace" start="56">
                     </span><span class="qname" start="57" select="quick">	</span><span class="qname" start="58" select="quick">	</span><span class="whitespace" start="59">       </span><span class="op" start="66">or</span><span class="whitespace" start="68"> </span><span class="axis" start="69">parent::</span><span class="qname" start="77" select="quick">db:screen</span><span class="whitespace" start="86">
                     </span><span class="qname" start="87" select="quick">	</span><span class="qname" start="88" select="quick">	</span><span class="whitespace" start="89">       </span><span class="op" start="96">or</span><span class="whitespace" start="98"> </span><span class="axis" start="99">parent::</span><span class="qname" start="107" select="quick">db:literallayout</span><span class="whitespace" start="123">
                     </span><span class="qname" start="124" select="quick">	</span><span class="qname" start="125" select="quick">	</span><span class="whitespace" start="126">       </span><span class="op" start="133">or</span><span class="whitespace" start="135"> </span><span class="axis" start="136">parent::</span><span class="qname" start="144" select="quick">db:address</span><span class="whitespace" start="154">
                     </span><span class="qname" start="155" select="quick">	</span><span class="qname" start="156" select="quick">	</span><span class="whitespace" start="157">       </span><span class="op" start="164">or</span><span class="whitespace" start="166"> </span><span class="axis" start="167">parent::</span><span class="qname" start="175" select="quick">db:funcsynopsisinfo</span><span class="parenthesis" start="194">)</span><span class="whitespace" start="195">
                     </span><span class="qname" start="196" select="quick">	</span><span class="qname" start="197" select="quick">	</span><span class="whitespace" start="198">     </span><span class="op" start="203">and</span><span class="whitespace" start="206"> </span><span class="qname" start="207" select="quick">db:imageobject</span><span class="whitespace" start="221">
                     </span><span class="qname" start="222" select="quick">	</span><span class="qname" start="223" select="quick">	</span><span class="whitespace" start="224">     </span><span class="op" start="229">and</span><span class="whitespace" start="232"> </span><span class="qname" start="233" select="quick">db:imageobject</span><span class="step" start="247">/</span><span class="qname" start="248" select="quick">db:imagedata</span><span class="filter" start="260" pair-end="283" select="quick">[</span><span class="axis" start="261">@</span><span class="qname" start="262" select="quick">format</span><span class="op" start="268">=</span><span class="op">'</span><span class="literal" start="269">linespecific</span><span class="op">'</span><span class="filter" start="283">]</span><span class="filter" start="284">]</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

  </span><span class="ww" id="w3176"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?data">data</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="58" select="quick">(</span><span class="qname" start="2" select="quick">db:imageobject</span><span class="whitespace" start="16">
                      </span><span class="qname" start="17" select="quick">	</span><span class="qname" start="18" select="quick">	</span><span class="qname" start="19" select="quick">	</span><span class="whitespace" start="20"> </span><span class="step" start="21">/</span><span class="qname" start="22" select="quick">db:imagedata</span><span class="filter" start="34" pair-end="57" select="quick">[</span><span class="axis" start="35">@</span><span class="qname" start="36" select="quick">format</span><span class="op" start="42">=</span><span class="op">'</span><span class="literal" start="43">linespecific</span><span class="op">'</span><span class="filter" start="57">]</span><span class="parenthesis" start="58">)</span><span class="filter" start="59" pair-end="61" select="quick">[</span><span class="numeric" start="60">1</span><span class="filter" start="61">]</span><span class="z">"</span><span id="wx3210" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3212"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3216"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$data</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">entityref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3229"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="52" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-entity-uri" class="solar"><span class="function" start="15" pair-end="51" select="quick">unparsed-entity-uri</span></a><span class="parenthesis">(</span><span class="variable" start="35" select="quick">$data</span><span class="step" start="40">/</span><span class="axis" start="41">@</span><span class="qname" start="42" select="quick">entityref</span><span class="parenthesis" start="51">)</span><span class="parenthesis" start="52">)</span><span class="z">"</span><span id="wx3246" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3250" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3252"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3256"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="29" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$data</span><span class="step" start="20">/</span><span class="axis" start="21">@</span><span class="qname" start="22" select="quick">fileref</span><span class="parenthesis" start="29">)</span><span class="z">"</span><span id="wx3270" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3274" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3278" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3282" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3284"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:textobject</span><span class="whitespace" start="14">
                     </span><span class="qname" start="15" select="quick">	</span><span class="qname" start="16" select="quick">	</span><span class="whitespace" start="17">     </span><span class="filter" start="22" pair-end="182" select="quick">[</span><span class="axis" start="23">parent::</span><span class="qname" start="31" select="quick">db:programlisting</span><span class="whitespace" start="48">
                     </span><span class="qname" start="49" select="quick">	</span><span class="qname" start="50" select="quick">	</span><span class="whitespace" start="51">      </span><span class="op" start="57">or</span><span class="whitespace" start="59"> </span><span class="axis" start="60">parent::</span><span class="qname" start="68" select="quick">db:screen</span><span class="whitespace" start="77">
                     </span><span class="qname" start="78" select="quick">	</span><span class="qname" start="79" select="quick">	</span><span class="whitespace" start="80">      </span><span class="op" start="86">or</span><span class="whitespace" start="88"> </span><span class="axis" start="89">parent::</span><span class="qname" start="97" select="quick">db:literallayout</span><span class="whitespace" start="113">
                     </span><span class="qname" start="114" select="quick">	</span><span class="qname" start="115" select="quick">	</span><span class="whitespace" start="116">      </span><span class="op" start="122">or</span><span class="whitespace" start="124"> </span><span class="axis" start="125">parent::</span><span class="qname" start="133" select="quick">db:address</span><span class="whitespace" start="143">
                     </span><span class="qname" start="144" select="quick">	</span><span class="qname" start="145" select="quick">	</span><span class="whitespace" start="146">      </span><span class="op" start="152">or</span><span class="whitespace" start="154"> </span><span class="axis" start="155">parent::</span><span class="qname" start="163" select="quick">db:funcsynopsisinfo</span><span class="filter" start="182">]</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3340"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3344"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:textdata</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">entityref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3357"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="58" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-entity-uri" class="solar"><span class="function" start="15" pair-end="57" select="quick">unparsed-entity-uri</span></a><span class="parenthesis">(</span><span class="qname" start="35" select="quick">db:textdata</span><span class="step" start="46">/</span><span class="axis" start="47">@</span><span class="qname" start="48" select="quick">entityref</span><span class="parenthesis" start="57">)</span><span class="parenthesis" start="58">)</span><span class="z">"</span><span id="wx3374" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3378" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3380"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3384"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-unparsed-text" class="solar"><span class="function" start="1" pair-end="35" select="quick">unparsed-text</span></a><span class="parenthesis">(</span><span class="qname" start="15" select="quick">db:textdata</span><span class="step" start="26">/</span><span class="axis" start="27">@</span><span class="qname" start="28" select="quick">fileref</span><span class="parenthesis" start="35">)</span><span class="z">"</span><span id="wx3398" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3402" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3406" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3410" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> CALS tables are normalized here so that they're in the right context later </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ww" id="w3416"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:tgroup</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3432"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:cals-phase-1</span><span class="z">"</span><span id="wx3446" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3450" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> Verbatim environments are normalized here too </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ww" id="w3456"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z">
        </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlisting</span><span class="op" start="18">|</span><span class="qname" start="19" select="quick">db:address</span><span class="op" start="29">|</span><span class="qname" start="30" select="quick">db:screen</span><span class="op" start="39">|</span><span class="qname" start="40" select="quick">db:synopsis</span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:literallayout</span><span class="z">"</span><span class="z">
        </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

  </span><span class="ww" id="w3480"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?normalized">normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3496"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3500"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3509" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3511"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3519" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3523" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3527" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3529"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:verbatim-phase-1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3545"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">origelem</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx3559" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx3563" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3567" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3569"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlistingco</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3585"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?normalized">normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3601"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3605"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3614" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3616"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span id="wx3624" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3626"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:areaspec</span><span class="z">"</span><span id="wx3634" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3636"><span class="es">&lt;</span><span class="en">db:programlisting</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3640"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlisting</span><span class="step" start="18">/</span><span class="axis" start="19">@</span><span class="qname" start="20" select="quick">*</span><span class="z">"</span><span id="wx3651" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3653"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:programlisting</span><span class="step" start="18">/</span><span class="node" start="19" pair-end="24" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3671" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">db:programlisting</span><span id="wx3675" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3677"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:calloutlist</span><span class="z">"</span><span id="wx3685" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3689" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3693" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3695"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$normalized</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:verbatim-phase-1</span><span class="z">"</span><span id="wx3709" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3713" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3715"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns:r</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xmlns/schema-remap/</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns:rng</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://relaxng.org/ns/structure/1.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

  </span><span class="ww" id="w3743"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?element">element</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span id="wx3760" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3762"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?element-name">element-name</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="1" pair-end="12" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="context" start="11">.</span><span class="parenthesis" start="12">)</span><span class="z">"</span><span id="wx3779" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3781"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?known">known</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="higher" start="1">for</span><span class="whitespace" start="4"> </span><span id="rng-$n" class="variable" start="5" select="quick">$n</span><span class="whitespace" start="7"> </span><span class="op" start="8">in</span><span class="whitespace" start="10"> </span><a href="xslt/base/common/normalize.xsl.html#v?schema-extensions" class="solar"><span class="variable" start="11" select="quick">$schema-extensions</span></a><span class="whitespace" start="29">
                                   </span><span class="qname" start="30" select="quick">	</span><span class="qname" start="31" select="quick">	</span><span class="qname" start="32" select="quick">	</span><span class="qname" start="33" select="quick">	</span><span class="whitespace" start="34">     </span><span class="op" start="39">return</span><span class="whitespace" start="45">
                                   </span><span class="qname" start="46" select="quick">	</span><span class="qname" start="47" select="quick">	</span><span class="qname" start="48" select="quick">	</span><span class="qname" start="49" select="quick">	</span><span class="whitespace" start="50">        </span><span class="if" start="58">if</span><span class="whitespace" start="60"> </span><span class="parenthesis" start="61" pair-end="91" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="62" pair-end="74" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="variable" start="72" select="quick">$n</span><span class="parenthesis" start="74">)</span><span class="whitespace" start="75"> </span><span class="op" start="76">=</span><span class="whitespace" start="77"> </span><span class="variable" start="78" select="quick">$element-name</span><span class="parenthesis" start="91">)</span><span class="whitespace" start="92">
                                   </span><span class="qname" start="93" select="quick">	</span><span class="qname" start="94" select="quick">	</span><span class="qname" start="95" select="quick">	</span><span class="qname" start="96" select="quick">	</span><span class="qname" start="97" select="quick">	</span><span class="op" start="98">then</span><span class="whitespace" start="102"> </span><span class="variable" start="103" select="quick">$n</span><span class="whitespace" start="105">
                                   </span><span class="qname" start="106" select="quick">	</span><span class="qname" start="107" select="quick">	</span><span class="qname" start="108" select="quick">	</span><span class="qname" start="109" select="quick">	</span><span class="qname" start="110" select="quick">	</span><span class="op" start="111">else</span><span class="whitespace" start="115"> </span><span class="parenthesis" start="116" pair-end="117" select="quick">(</span><span class="parenthesis" start="117">)</span><span class="z">"</span><span id="wx3845" class="sc">/&gt;</span></span><span class="txt">


  </span><span class="z">&lt;!--</span><span class="cm"> There are some limitations here with multiple patterns that define
       the same element, with namespaced elements, and with multiple remaps.
       We can come back to them if they ever matter. </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w3851"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?remap">remap</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#v?schema" class="solar"><span class="variable" start="1" select="quick">$schema</span></a><span class="whitespace" start="8">
                      </span><span class="qname" start="9" select="quick">	</span><span class="qname" start="10" select="quick">	</span><span class="qname" start="11" select="quick">	</span><span class="step" start="12">//</span><span class="qname" start="14" select="quick">rng:element</span><span class="filter" start="25" pair-end="52" select="quick">[</span><span class="axis" start="26">@</span><span class="qname" start="27" select="quick">name</span><span class="op" start="31">=</span><span class="variable" start="32" select="quick">$element</span><span class="whitespace" start="40"> </span><span class="op" start="41">and</span><span class="whitespace" start="44"> </span><span class="qname" start="45" select="quick">r:remap</span><span class="filter" start="52">]</span><span class="step" start="53">/</span><span class="qname" start="54" select="quick">r:remap</span><span class="filter" start="61" pair-end="63" select="quick">[</span><span class="numeric" start="62">1</span><span class="filter" start="63">]</span><span class="z">"</span><span id="wx3886" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm">
  &lt;xsl:message&gt;
    &lt;xsl:text&gt;normalize &lt;/xsl:text&gt;
    &lt;xsl:value-of select="name(.)"/&gt;
    &lt;xsl:text&gt; (&lt;/xsl:text&gt;
    &lt;xsl:value-of select="name($remap/*[1])"/&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
  &lt;/xsl:message&gt;
  </span><span class="z">--&gt;</span><span class="txt">

  </span><span class="ww" id="w3892"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3896"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$known</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3906"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w3910"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx3919" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ww" id="w3921"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx3929" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx3933" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3937" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3939"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3949"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?mapped">mapped</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w3965"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w3969"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="step" start="7">//</span><span class="qname" start="9" select="quick">r:content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w3981"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="step" start="7">/</span><span class="qname" start="8" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w3999"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4014" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w4016"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx4032" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx4036" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4040" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w4042"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w4046"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="23" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$remap</span><span class="step" start="18">/</span><span class="qname" start="19" select="quick">*</span><span class="filter" start="20" pair-end="22" select="quick">[</span><span class="numeric" start="21">1</span><span class="filter" start="22">]</span><span class="parenthesis" start="23">)</span><span class="op">}</span><span class="z">"</span><span class="z">
             			 </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-namespace-uri" class="solar"><span class="function" start="1" pair-end="26" select="quick">namespace-uri</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$remap</span><span class="step" start="21">/</span><span class="qname" start="22" select="quick">*</span><span class="filter" start="23" pair-end="25" select="quick">[</span><span class="numeric" start="24">1</span><span class="filter" start="25">]</span><span class="parenthesis" start="26">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w4082"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$remap</span><span class="step" start="7">/</span><span class="qname" start="8" select="quick">*</span><span class="filter" start="9" pair-end="11" select="quick">[</span><span class="numeric" start="10">1</span><span class="filter" start="11">]</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">*</span><span class="z">"</span><span id="wx4098" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w4100"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4109" class="sc">/&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w4111"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">node</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx4121" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx4125" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4129" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4133" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4137" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4139"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$mapped</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx4153" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4157" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4159"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:subtitle</span><span class="op" start="21">|</span><span class="qname" start="22" select="quick">db:titleabbrev</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:info</span><span class="step" start="44">/</span><span class="qname" start="45" select="quick">db:title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4177"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4181"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:biblioentry</span><span class="whitespace" start="23">
                                        </span><span class="op" start="48">|</span><span class="axis" start="49">parent::</span><span class="qname" start="57" select="quick">db:bibliomixed</span><span class="whitespace" start="71">
                                        </span><span class="op" start="96">|</span><span class="axis" start="97">parent::</span><span class="qname" start="105" select="quick">db:bibliomset</span><span class="whitespace" start="118">
                                        </span><span class="op" start="143">|</span><span class="axis" start="144">parent::</span><span class="qname" start="152" select="quick">db:biblioset</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4204"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w4208"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4217" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ww" id="w4219"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx4227" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4231" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4235" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4237"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w4241"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/normalize.xsl.html#t?{http://docbook.org/xslt/ns/normalize}normalize-movetitle" class="solar"><span class="tcall">n:normalize-movetitle</span></a><span class="z">"</span><span id="wx4249" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4253" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4257" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4261" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4263"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4267"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w4271"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4280" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ww" id="w4282"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span id="wx4290" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4294" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4298" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4302" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4306" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4308"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="9" select="quick">comment</span><span class="parenthesis">(</span><span class="parenthesis" start="9">)</span><span class="op" start="10">|</span><span class="node" start="11" pair-end="34" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="parenthesis" start="34">)</span><span class="op" start="35">|</span><span class="node" start="36" pair-end="41" select="quick">text</span><span class="parenthesis">(</span><span class="parenthesis" start="41">)</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:normalize</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4334"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4336" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4340" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4346"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">r:content</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns:r</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xmlns/schema-remap/</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4368"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attrs">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4383" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4385"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4400" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4402"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx4410" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4414" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4416"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4432"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attrs">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4447" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4449"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4464" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4466"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="13" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="12">.</span><span class="parenthesis" start="13">)</span><span class="op">}</span><span class="z">"</span><span class="z">
             	       </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="http://www.w3.org/TR/xpath-functions/#func-namespace-uri" class="solar"><span class="function" start="1" pair-end="16" select="quick">namespace-uri</span></a><span class="parenthesis">(</span><span class="context" start="15">.</span><span class="parenthesis" start="16">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4492"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4501" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4503"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$attrs</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4513"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$attrs</span><span class="z">"</span><span id="wx4521" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4525" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4527"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4537"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx4551" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx4555" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx4559" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4563" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4565"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="node" start="1" pair-end="6" select="quick">text</span><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="op" start="7">|</span><span class="node" start="8" pair-end="31" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="parenthesis" start="31">)</span><span class="op" start="32">|</span><span class="node" start="33" pair-end="41" select="quick">comment</span><span class="parenthesis">(</span><span class="parenthesis" start="41">)</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:remap</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4591"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attrs">attrs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4606" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4608"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx4623" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4625"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span id="wx4627" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4631" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">
</span><span class="z">&lt;!--</span><span class="cm"> copy external glossary </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4641"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4657"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for copying external glossary entries</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4663" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4665"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4669"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to copy glossary entries from the
</span><span class="ww" id="w4673"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">glossary.collection</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx4679" class="ec">&gt;</span></span><span class="txt"> into the current document.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4683" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4687" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx4691" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4693"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossdiv</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4709"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?terms">terms</span><span class="z">"</span><span id="wx4717" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4719"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span id="wx4727" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4729"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?entries">entries</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4745"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4761"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$terms</span><span class="z">"</span><span id="wx4775" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4777"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx4791" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx4795" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4799" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4801"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$entries</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4811"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4815"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w4825"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w4829"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx4838" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w4840"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="z">"</span><span id="wx4848" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w4850"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$entries</span><span class="z">"</span><span id="wx4858" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx4862" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4866" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w4868"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w4872"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$entries</span><span class="z">"</span><span id="wx4880" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4884" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4888" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4892" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4896" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4898"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:glossentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4914"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?terms">terms</span><span class="z">"</span><span id="wx4922" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4924"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span id="wx4932" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4934"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?include">include</span><span class="z">"</span><span class="z">
                              </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="higher" start="1">for</span><span class="whitespace" start="4"> </span><span id="rng-$dterm" class="variable" start="5" select="quick">$dterm</span><span class="whitespace" start="11"> </span><span class="op" start="12">in</span><span class="whitespace" start="14"> </span><span class="variable" start="15" select="quick">$terms</span><span class="whitespace" start="21">
                                                 </span><span class="op" start="49">return</span><span class="whitespace" start="55"> 
                                                    </span><span class="higher" start="87">for</span><span class="whitespace" start="90"> </span><span id="rng-$gterm" class="variable" start="91" select="quick">$gterm</span><span class="whitespace" start="97"> </span><span class="op" start="98">in</span><span class="whitespace" start="100"> </span><span class="qname" start="101" select="quick">db:glossterm</span><span class="whitespace" start="113">
                                                       </span><span class="op" start="147">return</span><span class="whitespace" start="153">
                                                          </span><span class="if" start="190">if</span><span class="whitespace" start="192"> </span><span class="parenthesis" start="193" pair-end="302" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="194" pair-end="207" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="201" select="quick">$dterm</span><span class="parenthesis" start="207">)</span><span class="whitespace" start="208"> </span><span class="op" start="209">=</span><span class="whitespace" start="210"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="211" pair-end="224" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="218" select="quick">$gterm</span><span class="parenthesis" start="224">)</span><span class="whitespace" start="225">
                                                              </span><span class="op" start="266">or</span><span class="whitespace" start="268"> </span><span class="variable" start="269" select="quick">$dterm</span><span class="step" start="275">/</span><span class="axis" start="276">@</span><span class="qname" start="277" select="quick">baseform</span><span class="whitespace" start="285"> </span><span class="op" start="286">=</span><span class="whitespace" start="287"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="288" pair-end="301" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="295" select="quick">$gterm</span><span class="parenthesis" start="301">)</span><span class="parenthesis" start="302">)</span><span class="whitespace" start="303">
                                                          </span><span class="op" start="340">then</span><span class="whitespace" start="344"> </span><span class="op">'</span><span class="literal" start="345">x</span><span class="op">'</span><span class="whitespace" start="348">
                                                          </span><span class="op" start="385">else</span><span class="whitespace" start="389"> </span><span class="parenthesis" start="390" pair-end="391" select="quick">(</span><span class="parenthesis" start="391">)</span><span class="z">"</span><span id="wx5007" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5009"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$include</span><span class="whitespace" start="9"> </span><span class="op" start="10">!=</span><span class="whitespace" start="12"> </span><span class="op">'</span><span class="literal" start="13"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5025"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx5033" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx5037" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5041" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5043"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5059"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?terms">terms</span><span class="z">"</span><span id="wx5067" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5069"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?divs">divs</span><span class="z">"</span><span id="wx5077" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5079"><span class="es">&lt;</span><span class="enxsl">xsl:copy</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5083"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">@</span><span class="qname" start="2" select="quick">*</span><span class="z">"</span><span id="wx5092" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5094"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:copy-external-glossary</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5104"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">terms</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$terms</span><span class="z">"</span><span id="wx5118" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5120"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">divs</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$divs</span><span class="z">"</span><span id="wx5134" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx5138" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:copy</span><span id="wx5142" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5146" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx5150" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
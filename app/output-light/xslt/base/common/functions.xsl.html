<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>functions.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:fp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension/private</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:l</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.sourceforge.net/xmlns/l10n/1.0</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:mp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode/private</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:u</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/unittests#</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                                </span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fp l m mp u xs</span><span class="z">"</span><span class="z">
                                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="ww" id="w81"><span class="es">&lt;</span><span class="en">doc:reference</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w91"><span class="es">&lt;</span><span class="en">info</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w95"><span class="es">&lt;</span><span class="en">title</span><span class="scx">&gt;</span><span class="txt">Common Functions Reference</span><span class="ez">&lt;/</span><span class="cl">title</span><span id="wx101" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w103"><span class="es">&lt;</span><span class="en">author</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w107"><span class="es">&lt;</span><span class="en">personname</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w111"><span class="es">&lt;</span><span class="en">surname</span><span class="scx">&gt;</span><span class="txt">Walsh</span><span class="ez">&lt;/</span><span class="cl">surname</span><span id="wx117" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w119"><span class="es">&lt;</span><span class="en">firstname</span><span class="scx">&gt;</span><span class="txt">Norman</span><span class="ez">&lt;/</span><span class="cl">firstname</span><span id="wx125" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">personname</span><span id="wx129" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">author</span><span id="wx133" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w135"><span class="es">&lt;</span><span class="en">copyright</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w139"><span class="es">&lt;</span><span class="en">year</span><span class="scx">&gt;</span><span class="txt">2004</span><span class="ez">&lt;/</span><span class="cl">year</span><span id="wx145" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w147"><span class="es">&lt;</span><span class="en">holder</span><span class="scx">&gt;</span><span class="txt">Norman Walsh</span><span class="ez">&lt;/</span><span class="cl">holder</span><span id="wx153" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">copyright</span><span id="wx157" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w159"><span class="es">&lt;</span><span class="en">releaseinfo</span><span class="z"> </span><span class="atn">role</span><span class="atneq">=</span><span class="z">"</span><span class="av">cvs</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
$Id: functions.xsl 8562 2009-12-17 23:10:25Z nwalsh $
</span><span class="ez">&lt;/</span><span class="cl">releaseinfo</span><span id="wx171" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">info</span><span id="wx175" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w177"><span class="es">&lt;</span><span class="en">partintro</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w181"><span class="es">&lt;</span><span class="en">section</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w185"><span class="es">&lt;</span><span class="en">title</span><span class="scx">&gt;</span><span class="txt">Introduction</span><span class="ez">&lt;/</span><span class="cl">title</span><span id="wx191" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w193"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This is technical reference documentation for the DocBook XSL
Stylesheets; it documents (some of) the parameters, templates, and
other elements of the stylesheets.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx199" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w201"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This is not intended to be </span><span class="ww" id="w205"><span class="es">&lt;</span><span class="en">quote</span><span class="scx">&gt;</span><span class="txt">user</span><span class="ez">&lt;/</span><span class="cl">quote</span><span id="wx211" class="ec">&gt;</span></span><span class="txt"> documentation.
It is provided for developers writing customization layers for the
stylesheets, and for anyone who's interested in </span><span class="ww" id="w213"><span class="es">&lt;</span><span class="en">quote</span><span class="scx">&gt;</span><span class="txt">how it
works</span><span class="ez">&lt;/</span><span class="cl">quote</span><span id="wx219" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx223" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w225"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Although I am trying to be thorough, this documentation is known
to be incomplete. Don't forget to read the source, too :-)</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx231" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">section</span><span id="wx235" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">partintro</span><span id="wx239" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:reference</span><span id="wx243" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w249"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:node-id</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w265"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns an ID for the specified node</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx271" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w273"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w277"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the </span><span class="ww" id="w281"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">id</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx293" class="ec">&gt;</span></span><span class="txt"> or
</span><span class="ww" id="w295"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xml:id</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx307" class="ec">&gt;</span></span><span class="txt"> of the specified node. If the
node does not have an ID, the XSLT
</span><span class="ww" id="w309"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">generate-id()</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx315" class="ec">&gt;</span></span><span class="txt"> function is used to create one.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx319" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx323" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w325"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w329"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w333"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w337"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx343" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w345"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w349"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node for which an ID will be generated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx355" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx359" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx363" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx367" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx371" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w373"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w377"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The ID.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx383" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx387" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w389"><span class="es">&lt;</span><span class="en">u:unittests</span><span class="z"> </span><span class="atn">function</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:node-id</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w399"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w403"><span class="es">&lt;</span><span class="en">u:param</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w407"><span class="es">&lt;</span><span class="en">db:anchor</span><span class="z"> </span><span class="atn">xml:id</span><span class="atneq">=</span><span class="z">'</span><span class="av">id</span><span class="z">'</span><span id="wx415" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx419" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w421"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'id'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx427" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx431" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w433"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w437"><span class="es">&lt;</span><span class="en">u:param</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w441"><span class="es">&lt;</span><span class="en">db:anchor</span><span class="z"> </span><span class="atn">id</span><span class="atneq">=</span><span class="z">'</span><span class="av">id</span><span class="z">'</span><span id="wx449" class="sc">/&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx453" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w455"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'id'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx461" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx465" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w467"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w471"><span class="es">&lt;</span><span class="en">u:param</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w475"><span class="es">&lt;</span><span class="en">db:anchor</span><span id="wx477" class="sc">/&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx481" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w483"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'R.1'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx489" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx493" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w495"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w499"><span class="es">&lt;</span><span class="en">u:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">mydoc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w509"><span class="es">&lt;</span><span class="en">db:book</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w513"><span class="es">&lt;</span><span class="en">db:title</span><span class="scx">&gt;</span><span class="txt">Some Title</span><span class="ez">&lt;/</span><span class="cl">db:title</span><span id="wx519" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w521"><span class="es">&lt;</span><span class="en">db:chapter</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w525"><span class="es">&lt;</span><span class="en">db:title</span><span class="scx">&gt;</span><span class="txt">Some Chapter Title</span><span class="ez">&lt;/</span><span class="cl">db:title</span><span id="wx531" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w533"><span class="es">&lt;</span><span class="en">db:para</span><span class="scx">&gt;</span><span class="txt">My para.</span><span class="ez">&lt;/</span><span class="cl">db:para</span><span id="wx539" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="cl">db:chapter</span><span id="wx543" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">db:book</span><span id="wx547" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:variable</span><span id="wx551" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w553"><span class="es">&lt;</span><span class="en">u:param</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="av">$mydoc//db:para[1]</span><span class="z">"</span><span id="wx561" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w563"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'R.1.2.2'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx569" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx573" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w575"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w579"><span class="es">&lt;</span><span class="en">u:param</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="av">//db:para[1]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w589"><span class="es">&lt;</span><span class="en">db:book</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w593"><span class="es">&lt;</span><span class="en">db:title</span><span class="scx">&gt;</span><span class="txt">Some Title</span><span class="ez">&lt;/</span><span class="cl">db:title</span><span id="wx599" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w601"><span class="es">&lt;</span><span class="en">db:chapter</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w605"><span class="es">&lt;</span><span class="en">db:title</span><span class="scx">&gt;</span><span class="txt">Some Chapter Title</span><span class="ez">&lt;/</span><span class="cl">db:title</span><span id="wx611" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w613"><span class="es">&lt;</span><span class="en">db:para</span><span class="scx">&gt;</span><span class="txt">My para.</span><span class="ez">&lt;/</span><span class="cl">db:para</span><span id="wx619" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="cl">db:chapter</span><span id="wx623" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">db:book</span><span id="wx627" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx631" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w633"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'R.1.2.2'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx639" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx643" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">u:unittests</span><span id="wx647" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx651" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w653"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}node-id">f:node-id</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w669"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()</span><span class="z">"</span><span id="wx683" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w685"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w689"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">xml:id</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w702"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">xml:id</span><span class="z">"</span><span id="wx713" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx717" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w719"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">id</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w732"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">id</span><span class="z">"</span><span id="wx743" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx747" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w749"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?persistent.generated.ids" class="solar"><span class="variable" start="1" select="quick">$persistent.generated.ids</span></a><span class="whitespace" start="26"> </span><span class="op" start="27">!=</span><span class="whitespace" start="29"> </span><span class="numeric" start="30">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w763"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xpid">xpid</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}xptr-id" class="solar"><span class="function" start="1" pair-end="16" select="quick">f:xptr-id</span></a><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$node</span><span class="parenthesis" start="16">)</span><span class="z">"</span><span id="wx780" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w782"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="z">&lt;!--</span><span class="cm"> FIXME: what if $node/key('id', $xpid)? I can't test that because
	     sometimes $node isn't in a tree and then that test causes
	     a runtime error. </span><span class="z">--&gt;</span><span class="txt">
	</span><span class="ww" id="w790"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xpid</span><span class="whitespace" start="6"> </span><span class="op" start="7">=</span><span class="whitespace" start="8"> </span><span class="op">'</span><span class="literal" start="9"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w806"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-generate-id" class="solar"><span class="function" start="1" pair-end="18" select="quick">generate-id</span></a><span class="parenthesis">(</span><span class="variable" start="13" select="quick">$node</span><span class="parenthesis" start="18">)</span><span class="z">"</span><span id="wx817" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx821" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w823"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w827"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$xpid</span><span class="z">"</span><span id="wx835" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx839" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx843" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx847" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w849"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w853"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-generate-id" class="solar"><span class="function" start="1" pair-end="18" select="quick">generate-id</span></a><span class="parenthesis">(</span><span class="variable" start="13" select="quick">$node</span><span class="parenthesis" start="18">)</span><span class="z">"</span><span id="wx864" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx868" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx872" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx876" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w882"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:xptr-id</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w898"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns an XPointer-style ID for the specified node</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx904" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w906"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w910"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the </span><span class="ww" id="w914"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">id</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx926" class="ec">&gt;</span></span><span class="txt"> or
</span><span class="ww" id="w928"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xml:id</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx940" class="ec">&gt;</span></span><span class="txt"> of the specified node. If the
node does not have an ID, an XPointer-style “tumbler” ID is used
to create one. In order to make sure that the value is a valid ID,
the root is represented by “R.” and “.”s are used between each
number.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx944" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w946"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The value of </span><span class="ww" id="w950"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">xptr-id</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx956" class="ec">&gt;</span></span><span class="txt">’s over
</span><span class="ww" id="w958"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">node-id</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx964" class="ec">&gt;</span></span><span class="txt">s is that they are stable. If the same
document is processed more than once, each pass will produce the
same XPointer IDs.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx968" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx972" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w974"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w978"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w982"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w986"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx992" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w994"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w998"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node for which an ID will be generated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1004" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx1008" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx1012" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx1016" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx1020" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1022"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1026"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The ID.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1032" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx1036" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx1040" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1042"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}xptr-id">f:xptr-id</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1058"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx1072" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1074"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1078"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">xml:id</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1091"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">xml:id</span><span class="z">"</span><span id="wx1102" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1106" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1108"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">id</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1121"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">id</span><span class="z">"</span><span id="wx1132" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1136" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1138"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1142"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1146"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1150"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="variable" start="5" select="quick">$node</span><span class="step" start="10">/</span><span class="axis" start="11">parent::</span><span class="qname" start="19" select="quick">*</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">R.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1168" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1170"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w1174"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="39" select="quick">concat</span></a><span class="parenthesis">(</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}xptr-id" class="solar"><span class="function" start="8" pair-end="33" select="quick">f:xptr-id</span></a><span class="parenthesis">(</span><span class="variable" start="18" select="quick">$node</span><span class="step" start="23">/</span><span class="axis" start="24">parent::</span><span class="qname" start="32" select="quick">*</span><span class="parenthesis" start="33">)</span><span class="op" start="34">,</span><span class="whitespace" start="35"> </span><span class="op">'</span><span class="literal" start="36">.</span><span class="op">'</span><span class="parenthesis" start="39">)</span><span class="z">"</span><span id="wx1196" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1200" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1204" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1206"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="33" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$node</span><span class="step" start="12">/</span><span class="axis" start="13">preceding-sibling::</span><span class="qname" start="32" select="quick">*</span><span class="parenthesis" start="33">)</span><span class="quantifier" start="34">+</span><span class="numeric" start="35">1</span><span class="z">"</span><span id="wx1222" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:value-of</span><span id="wx1226" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1230" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1234" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx1238" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1244"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:orderedlist-starting-number</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1260"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the number of the first item in an ordered list</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx1266" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1268"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1272"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the number of the first item in an
</span><span class="ww" id="w1276"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">orderedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx1282" class="ec">&gt;</span></span><span class="txt">.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1286" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx1290" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1292"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1296"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1300"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w1304"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">list</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx1310" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w1312"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1316"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w1320"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">orderedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx1326" class="ec">&gt;</span></span><span class="txt"> element for which the starting number
is to be determined.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1330" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx1334" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx1338" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx1342" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx1346" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1348"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1352"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The starting list number.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1358" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx1362" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx1366" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1368"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}orderedlist-starting-number">f:orderedlist-starting-number</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1384"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?list">list</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element(db:orderedlist)</span><span class="z">"</span><span id="wx1398" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1400"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pi-start">pi-start</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pi" class="solar"><span class="function" start="1" pair-end="53" select="quick">f:pi</span></a><span class="parenthesis">(</span><span class="variable" start="6" select="quick">$list</span><span class="step" start="11">/</span><span class="node" start="12" pair-end="43" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="35">db-xsl</span><span class="op">'</span><span class="parenthesis" start="43">)</span><span class="op" start="44">,</span><span class="whitespace" start="45"> </span><span class="op">'</span><span class="literal" start="46">start</span><span class="op">'</span><span class="parenthesis" start="53">)</span><span class="z">"</span><span id="wx1429" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1431"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1435"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$list</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">startingnumber</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1448"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$list</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">startingnumber</span><span class="z">"</span><span id="wx1459" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1463" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1465"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pi-start</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1475"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pi-start</span><span class="whitespace" start="10"> </span><span class="type-op" start="11">cast as</span><span class="whitespace" start="18"> </span><span class="type-name" start="19">xs:integer</span><span class="z">"</span><span id="wx1487" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1491" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1493"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="38" select="quick">not</span></a><span class="parenthesis">(</span><span class="variable" start="5" select="quick">$list</span><span class="step" start="10">/</span><span class="axis" start="11">@</span><span class="qname" start="12" select="quick">continuation</span><span class="whitespace" start="24"> </span><span class="op" start="25">=</span><span class="whitespace" start="26"> </span><span class="op">'</span><span class="literal" start="27">continues</span><span class="op">'</span><span class="parenthesis" start="38">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1515"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx1523" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1527" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1529"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1533"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prevlist">prevlist</span><span class="z">"</span><span class="z">
              		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$list</span><span class="step" start="6">/</span><span class="axis" start="7">preceding::</span><span class="qname" start="18" select="quick">db:orderedlist</span><span class="filter" start="32" pair-end="34" select="quick">[</span><span class="numeric" start="33">1</span><span class="filter" start="34">]</span><span class="z">"</span><span id="wx1553" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1555"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w1559"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="16" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$prevlist</span><span class="parenthesis" start="16">)</span><span class="whitespace" start="17"> </span><span class="op" start="18">=</span><span class="whitespace" start="19"> </span><span class="numeric" start="20">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1576"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx1584" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1588" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w1590"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w1594"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prevlength">prevlength</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="28" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$prevlist</span><span class="step" start="16">/</span><span class="qname" start="17" select="quick">db:listitem</span><span class="parenthesis" start="28">)</span><span class="z">"</span><span id="wx1613" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1615"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prevstart">prevstart</span><span class="z">"</span><span class="z">
              			</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}orderedlist-starting-number" class="solar"><span class="function" start="1" pair-end="40" select="quick">f:orderedlist-starting-number</span></a><span class="parenthesis">(</span><span class="variable" start="31" select="quick">$prevlist</span><span class="parenthesis" start="40">)</span><span class="z">"</span><span id="wx1632" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w1634"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$prevstart</span><span class="whitespace" start="11"> </span><span class="op" start="12">+</span><span class="whitespace" start="13"> </span><span class="variable" start="14" select="quick">$prevlength</span><span class="z">"</span><span id="wx1646" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1650" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1654" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1658" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1662" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx1666" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1672"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:next-orderedlist-numeration</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1688"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the next numeration style</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx1694" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1696"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1700"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function uses the </span><span class="ww" id="w1704"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">orderedlist.numeration.styles</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx1710" class="ec">&gt;</span></span><span class="txt">
parameter to calculate the next numeration style. The default style
is the first style in that list.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1714" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx1718" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1720"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1724"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1728"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w1732"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">numeration</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx1738" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w1740"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1744"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The current numeration style.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1750" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx1754" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx1758" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx1762" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx1766" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1768"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1772"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The next numeration style.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1778" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx1782" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx1786" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1788"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}next-orderedlist-numeration">f:next-orderedlist-numeration</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1804"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?numeration">numeration</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx1818" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1820"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pos">pos</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="1" pair-end="97" select="quick">index-of</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?orderedlist.numeration.styles" class="solar"><span class="variable" start="10" select="quick">$orderedlist.numeration.styles</span></a><span class="op" start="40">,</span><span class="whitespace" start="41">
                                                                             </span><span class="variable" start="86" select="quick">$numeration</span><span class="parenthesis" start="97">)</span><span class="filter" start="98" pair-end="100" select="quick">[</span><span class="numeric" start="99">1</span><span class="filter" start="100">]</span><span class="z">"</span><span id="wx1843" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1845"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1849"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="9" select="quick">not</span></a><span class="parenthesis">(</span><span class="variable" start="5" select="quick">$pos</span><span class="parenthesis" start="9">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1862"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?orderedlist.numeration.styles" class="solar"><span class="variable" start="1" select="quick">$orderedlist.numeration.styles</span></a><span class="filter" start="31" pair-end="33" select="quick">[</span><span class="numeric" start="32">1</span><span class="filter" start="33">]</span><span class="z">"</span><span id="wx1873" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1877" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1879"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-subsequence" class="solar"><span class="function" start="1" pair-end="52" select="quick">subsequence</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?orderedlist.numeration.styles" class="solar"><span class="variable" start="13" select="quick">$orderedlist.numeration.styles</span></a><span class="op" start="43">,</span><span class="variable" start="44" select="quick">$pos</span><span class="op" start="48">+</span><span class="numeric" start="49">1</span><span class="op" start="50">,</span><span class="numeric" start="51">1</span><span class="parenthesis" start="52">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1898"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-subsequence" class="solar"><span class="function" start="1" pair-end="72" select="quick">subsequence</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?orderedlist.numeration.styles" class="solar"><span class="variable" start="13" select="quick">$orderedlist.numeration.styles</span></a><span class="op" start="43">,</span><span class="whitespace" start="44">
                      </span><span class="qname" start="45" select="quick">	</span><span class="qname" start="46" select="quick">	</span><span class="qname" start="47" select="quick">	</span><span class="whitespace" start="48">                </span><span class="variable" start="64" select="quick">$pos</span><span class="op" start="68">+</span><span class="numeric" start="69">1</span><span class="op" start="70">,</span><span class="numeric" start="71">1</span><span class="parenthesis" start="72">)</span><span class="z">"</span><span id="wx1920" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1924" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1926"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1930"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?orderedlist.numeration.styles" class="solar"><span class="variable" start="1" select="quick">$orderedlist.numeration.styles</span></a><span class="filter" start="31" pair-end="33" select="quick">[</span><span class="numeric" start="32">1</span><span class="filter" start="33">]</span><span class="z">"</span><span id="wx1941" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1945" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1949" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx1953" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1959"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:orderedlist-numeration</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1975"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the next numeration style</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx1981" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1983"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1987"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the </span><span class="ww" id="w1991"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">orderedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx1997" class="ec">&gt;</span></span><span class="txt"> numeration style
for the specified list. If an explicit style is specified (using
</span><span class="ww" id="w1999"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">numeration</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2011" class="ec">&gt;</span></span><span class="txt"> on the list), that style will
be returned. Otherwise, the style returned depends on list nesting depth.
The </span><span class="ww" id="w2013"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">orderedlist.numeration.styles</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx2019" class="ec">&gt;</span></span><span class="txt"> parameter
controls the order and number of numeration styles that will be used.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2023" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2027" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2029"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2033"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2037"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2041"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">list</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2047" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2049"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2053"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w2057"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">orderedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2063" class="ec">&gt;</span></span><span class="txt"> for which a numeration style should
be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2067" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2071" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2075" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2079" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2083" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2085"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2089"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Numeration style.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2095" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2099" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx2103" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2105"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}orderedlist-numeration">f:orderedlist-numeration</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2121"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?list">list</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element(db:orderedlist)</span><span class="z">"</span><span id="wx2135" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2137"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2141"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$list</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">numeration</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2154"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$list</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">numeration</span><span class="z">"</span><span id="wx2165" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2169" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2171"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$list</span><span class="step" start="6">/</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:orderedlist</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2184"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?prevnumeration">prevnumeration</span><span class="z">"</span><span class="z">
              		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}orderedlist-numeration" class="solar"><span class="function" start="1" pair-end="59" select="quick">f:orderedlist-numeration</span></a><span class="parenthesis">(</span><span class="variable" start="26" select="quick">$list</span><span class="step" start="31">/</span><span class="axis" start="32">ancestor::</span><span class="qname" start="42" select="quick">db:orderedlist</span><span class="filter" start="56" pair-end="58" select="quick">[</span><span class="numeric" start="57">1</span><span class="filter" start="58">]</span><span class="parenthesis" start="59">)</span><span class="z">"</span><span id="wx2207" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2209"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}next-orderedlist-numeration" class="solar"><span class="function" start="1" pair-end="46" select="quick">f:next-orderedlist-numeration</span></a><span class="parenthesis">(</span><span class="variable" start="31" select="quick">$prevnumeration</span><span class="parenthesis" start="46">)</span><span class="z">"</span><span id="wx2220" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2224" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2226"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2230"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?orderedlist.numeration.styles" class="solar"><span class="variable" start="1" select="quick">$orderedlist.numeration.styles</span></a><span class="filter" start="31" pair-end="33" select="quick">[</span><span class="numeric" start="32">1</span><span class="filter" start="33">]</span><span class="z">"</span><span id="wx2241" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2245" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2249" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx2253" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2259"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:orderedlist-item-number</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2275"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the item number of the specified </span><span class="ww" id="w2279"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">listitem</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2285" class="ec">&gt;</span></span><span class="txt">
in an </span><span class="ww" id="w2287"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">orderedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2293" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2297" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2299"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2303"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the number of the specified list item.
This will be:</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2309" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2311"><span class="es">&lt;</span><span class="en">itemizedlist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2315"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2319"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The value of </span><span class="ww" id="w2323"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">override</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2335" class="ec">&gt;</span></span><span class="txt">, if
it is specified.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2339" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2343" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2345"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2349"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">One more than the number of the preceding item, if there is one.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2355" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2359" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2361"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2365"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">One more than the number of the last item in the preceding list, if
</span><span class="ww" id="w2369"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">continuation</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2381" class="ec">&gt;</span></span><span class="txt"> is “</span><span class="ww" id="w2383"><span class="es">&lt;</span><span class="en">literal</span><span class="scx">&gt;</span><span class="txt">continues</span><span class="ez">&lt;/</span><span class="cl">literal</span><span id="wx2389" class="ec">&gt;</span></span><span class="txt">”
and this is the first item.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2393" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2397" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2399"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2403"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Or 1.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2409" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2413" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">itemizedlist</span><span id="wx2417" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2421" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2423"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2427"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2431"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2435"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2441" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2443"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2447"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w2451"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">listitem</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2457" class="ec">&gt;</span></span><span class="txt"> in an </span><span class="ww" id="w2459"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">orderedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2465" class="ec">&gt;</span></span><span class="txt"> for which a number
style should be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2469" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2473" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2477" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2481" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2485" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2487"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2491"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The item number.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2497" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2501" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx2505" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2507"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}orderedlist-item-number">f:orderedlist-item-number</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2523"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element(db:listitem)</span><span class="z">"</span><span id="wx2537" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2539"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2543"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">override</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2556"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">override</span><span class="z">"</span><span id="wx2567" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2571" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w2573"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">preceding-sibling::</span><span class="qname" start="26" select="quick">db:listitem</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2586"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}orderedlist-item-number" class="solar"><span class="function" start="1" pair-end="66" select="quick">f:orderedlist-item-number</span></a><span class="parenthesis">(</span><span class="variable" start="27" select="quick">$node</span><span class="step" start="32">/</span><span class="axis" start="33">preceding-sibling::</span><span class="qname" start="52" select="quick">db:listitem</span><span class="filter" start="63" pair-end="65" select="quick">[</span><span class="numeric" start="64">1</span><span class="filter" start="65">]</span><span class="parenthesis" start="66">)</span><span class="whitespace" start="67"> </span><span class="op" start="68">+</span><span class="whitespace" start="69"> </span><span class="numeric" start="70">1</span><span class="z">"</span><span id="wx2607" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2611" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w2613"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2617"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}orderedlist-starting-number" class="solar"><span class="function" start="1" pair-end="59" select="quick">f:orderedlist-starting-number</span></a><span class="parenthesis">(</span><span class="variable" start="31" select="quick">$node</span><span class="step" start="36">/</span><span class="axis" start="37">parent::</span><span class="qname" start="45" select="quick">db:orderedlist</span><span class="parenthesis" start="59">)</span><span class="z">"</span><span id="wx2631" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2635" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2639" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx2643" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2649"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:next-itemizedlist-symbol</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2665"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the next symbol style</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2671" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2673"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2677"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function uses the
</span><span class="ww" id="w2681"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">itemizedlist.numeration.symbols</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx2687" class="ec">&gt;</span></span><span class="txt">
parameter to calculate the next symbol style. The default style
is the first style in that list.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2691" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2695" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2697"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2701"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2705"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2709"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">symbol</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2715" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2717"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2721"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The current symbol style.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2727" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2731" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2735" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2739" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2743" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2745"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2749"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The next symbol style.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2755" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2759" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx2763" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2765"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}next-itemizedlist-symbol">f:next-itemizedlist-symbol</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2781"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?symbol">symbol</span><span class="z">"</span><span id="wx2789" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2791"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pos">pos</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-index-of" class="solar"><span class="function" start="1" pair-end="95" select="quick">index-of</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?itemizedlist.numeration.symbols" class="solar"><span class="variable" start="10" select="quick">$itemizedlist.numeration.symbols</span></a><span class="op" start="42">,</span><span class="whitespace" start="43">
                                                                             </span><span class="variable" start="88" select="quick">$symbol</span><span class="parenthesis" start="95">)</span><span class="filter" start="96" pair-end="98" select="quick">[</span><span class="numeric" start="97">1</span><span class="filter" start="98">]</span><span class="z">"</span><span id="wx2814" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2816"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2820"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="9" select="quick">not</span></a><span class="parenthesis">(</span><span class="variable" start="5" select="quick">$pos</span><span class="parenthesis" start="9">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2833"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?itemizedlist.numeration.symbols" class="solar"><span class="variable" start="1" select="quick">$itemizedlist.numeration.symbols</span></a><span class="filter" start="33" pair-end="35" select="quick">[</span><span class="numeric" start="34">1</span><span class="filter" start="35">]</span><span class="z">"</span><span id="wx2844" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2848" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2850"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-subsequence" class="solar"><span class="function" start="1" pair-end="54" select="quick">subsequence</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?itemizedlist.numeration.symbols" class="solar"><span class="variable" start="13" select="quick">$itemizedlist.numeration.symbols</span></a><span class="op" start="45">,</span><span class="variable" start="46" select="quick">$pos</span><span class="op" start="50">+</span><span class="numeric" start="51">1</span><span class="op" start="52">,</span><span class="numeric" start="53">1</span><span class="parenthesis" start="54">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2869"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-subsequence" class="solar"><span class="function" start="1" pair-end="74" select="quick">subsequence</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?itemizedlist.numeration.symbols" class="solar"><span class="variable" start="13" select="quick">$itemizedlist.numeration.symbols</span></a><span class="op" start="45">,</span><span class="whitespace" start="46">
                      </span><span class="qname" start="47" select="quick">	</span><span class="qname" start="48" select="quick">	</span><span class="qname" start="49" select="quick">	</span><span class="whitespace" start="50">                </span><span class="variable" start="66" select="quick">$pos</span><span class="op" start="70">+</span><span class="numeric" start="71">1</span><span class="op" start="72">,</span><span class="numeric" start="73">1</span><span class="parenthesis" start="74">)</span><span class="z">"</span><span id="wx2891" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2895" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2897"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2901"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?itemizedlist.numeration.symbols" class="solar"><span class="variable" start="1" select="quick">$itemizedlist.numeration.symbols</span></a><span class="filter" start="33" pair-end="35" select="quick">[</span><span class="numeric" start="34">1</span><span class="filter" start="35">]</span><span class="z">"</span><span id="wx2912" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx2916" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx2920" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx2924" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2930"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:itemizedlist-symbol</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2946"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the mark that should be used for the specified
</span><span class="ww" id="w2950"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">listitem</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2956" class="ec">&gt;</span></span><span class="txt"> or </span><span class="ww" id="w2958"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">itemizedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx2964" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2968" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2970"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2974"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the mark that should be used for the
specified list item or itemized list. This will be:</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2980" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2982"><span class="es">&lt;</span><span class="en">itemizedlist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2986"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2990"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The value of </span><span class="ww" id="w2994"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">override</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3006" class="ec">&gt;</span></span><span class="txt">, if
it is specified.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3010" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3014" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3016"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3020"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The value of </span><span class="ww" id="w3024"><span class="es">&lt;</span><span class="en">tag</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">attribute</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">mark</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3036" class="ec">&gt;</span></span><span class="txt">, if
it is specified.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3040" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3044" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3046"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3050"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">An symbol appropriate for the list's current nesting depth.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3056" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3060" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3062"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3066"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Or the default style (the first style listed in
</span><span class="ww" id="w3070"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">itemizedlist.numeration.symbols</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx3076" class="ec">&gt;</span></span><span class="txt">).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3080" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3084" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">itemizedlist</span><span id="wx3088" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3092" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3094"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3098"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3102"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w3106"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx3112" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3114"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3118"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w3122"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">itemizedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3128" class="ec">&gt;</span></span><span class="txt"> or </span><span class="ww" id="w3130"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">listitem</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3136" class="ec">&gt;</span></span><span class="txt"> in an
</span><span class="ww" id="w3138"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">itemizedlist</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3144" class="ec">&gt;</span></span><span class="txt"> for which a mark should be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3148" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3152" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx3156" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx3160" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx3164" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3166"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3170"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The item symbol.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3176" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx3180" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx3184" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3186"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}itemizedlist-symbol">f:itemizedlist-symbol</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3202"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx3216" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3218"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3222"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">mark</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3235"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">mark</span><span class="z">"</span><span id="wx3246" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3250" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3252"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">override</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3265"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">override</span><span class="z">"</span><span id="wx3276" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3280" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3282"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3286"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3290"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">itemizedlist</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w3303"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}next-itemizedlist-symbol" class="solar"><span class="function" start="1" pair-end="85" select="quick">f:next-itemizedlist-symbol</span></a><span class="parenthesis">(</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}itemizedlist-symbol" class="solar"><span class="function" start="28" pair-end="84" select="quick">f:itemizedlist-symbol</span></a><span class="parenthesis">(</span><span class="variable" start="50" select="quick">$node</span><span class="step" start="55">/</span><span class="axis" start="56">ancestor::</span><span class="qname" start="66" select="quick">db:itemizedlist</span><span class="filter" start="81" pair-end="83" select="quick">[</span><span class="numeric" start="82">1</span><span class="filter" start="83">]</span><span class="parenthesis" start="84">)</span><span class="parenthesis" start="85">)</span><span class="z">"</span><span id="wx3323" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3327" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3329"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w3333"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}next-itemizedlist-symbol" class="solar"><span class="function" start="1" pair-end="37" select="quick">f:next-itemizedlist-symbol</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="28">default</span><span class="op">'</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span id="wx3346" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3350" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3354" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3358" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3362" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx3366" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3372"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:procedure-step-numeration</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3388"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the numeration style for procedure steps</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3394" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3396"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3400"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the numeration style for procedure steps.
The style returned depends on procedure nesting depth.
The </span><span class="ww" id="w3404"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">procedure.step.numeration.styles</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx3410" class="ec">&gt;</span></span><span class="txt"> parameter
controls the order and number of numeration styles that will be used.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3414" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3418" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3420"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3424"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3428"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w3432"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx3438" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3440"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3444"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The context element; must be </span><span class="ww" id="w3448"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">substeps</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3454" class="ec">&gt;</span></span><span class="txt">
or </span><span class="ww" id="w3456"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">steps</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx3462" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3466" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3470" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx3474" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx3478" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx3482" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3484"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3488"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Numeration style.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3494" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx3498" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx3502" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3504"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}procedure-step-numeration">f:procedure-step-numeration</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3520"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx3534" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3536"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?format.length">format.length</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="40" select="quick">count</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?procedure.step.numeration.styles" class="solar"><span class="variable" start="7" select="quick">$procedure.step.numeration.styles</span></a><span class="parenthesis" start="40">)</span><span class="z">"</span><span id="wx3553" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3555"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3559"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:substeps</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3572"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?ssdepth">ssdepth</span><span class="z">"</span><span class="z">
              		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="37" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$context</span><span class="step" start="15">/</span><span class="axis" start="16">ancestor::</span><span class="qname" start="26" select="quick">db:substeps</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span id="wx3592" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3594"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?sstype">sstype</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="29" select="quick">(</span><span class="variable" start="2" select="quick">$ssdepth</span><span class="whitespace" start="10"> </span><span class="op" start="11">mod</span><span class="whitespace" start="14"> </span><span class="variable" start="15" select="quick">$format.length</span><span class="parenthesis" start="29">)</span><span class="quantifier" start="30">+</span><span class="numeric" start="31">2</span><span class="z">"</span><span id="wx3616" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3618"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w3622"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$sstype</span><span class="whitespace" start="8"> </span><span class="qname" start="9" select="quick">&amp;</span><span class="op" start="10">gt</span><span class="qname" start="12" select="quick">;</span><span class="whitespace" start="13"> </span><span class="variable" start="14" select="quick">$format.length</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w3638"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?procedure.step.numeration.styles" class="solar"><span class="variable" start="1" select="quick">$procedure.step.numeration.styles</span></a><span class="filter" start="34" pair-end="36" select="quick">[</span><span class="numeric" start="35">1</span><span class="filter" start="36">]</span><span class="z">"</span><span id="wx3649" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3653" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w3655"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w3659"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-subsequence" class="solar"><span class="function" start="1" pair-end="73" select="quick">subsequence</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?procedure.step.numeration.styles" class="solar"><span class="variable" start="13" select="quick">$procedure.step.numeration.styles</span></a><span class="op" start="46">,</span><span class="whitespace" start="47">
                      </span><span class="qname" start="48" select="quick">	</span><span class="qname" start="49" select="quick">	</span><span class="qname" start="50" select="quick">	</span><span class="qname" start="51" select="quick">	</span><span class="whitespace" start="52">            </span><span class="variable" start="64" select="quick">$sstype</span><span class="op" start="71">,</span><span class="numeric" start="72">1</span><span class="parenthesis" start="73">)</span><span class="z">"</span><span id="wx3680" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3684" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3688" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3692" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3694"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:step</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3707"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?sdepth">sdepth</span><span class="z">"</span><span class="z">
              		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="37" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$context</span><span class="step" start="15">/</span><span class="axis" start="16">ancestor::</span><span class="qname" start="26" select="quick">db:substeps</span><span class="parenthesis" start="37">)</span><span class="z">"</span><span id="wx3727" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3729"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?stype">stype</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="28" select="quick">(</span><span class="variable" start="2" select="quick">$sdepth</span><span class="whitespace" start="9"> </span><span class="op" start="10">mod</span><span class="whitespace" start="13"> </span><span class="variable" start="14" select="quick">$format.length</span><span class="parenthesis" start="28">)</span><span class="quantifier" start="29">+</span><span class="numeric" start="30">1</span><span class="z">"</span><span id="wx3751" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3753"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-subsequence" class="solar"><span class="function" start="1" pair-end="75" select="quick">subsequence</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?procedure.step.numeration.styles" class="solar"><span class="variable" start="13" select="quick">$procedure.step.numeration.styles</span></a><span class="op" start="46">,</span><span class="whitespace" start="47">
                      </span><span class="qname" start="48" select="quick">	</span><span class="qname" start="49" select="quick">	</span><span class="qname" start="50" select="quick">	</span><span class="whitespace" start="51">                </span><span class="variable" start="67" select="quick">$stype</span><span class="op" start="73">,</span><span class="numeric" start="74">1</span><span class="parenthesis" start="75">)</span><span class="z">"</span><span id="wx3773" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3777" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3779"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:procedure</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3792"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-subsequence" class="solar"><span class="function" start="1" pair-end="50" select="quick">subsequence</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?procedure.step.numeration.styles" class="solar"><span class="variable" start="13" select="quick">$procedure.step.numeration.styles</span></a><span class="op" start="46">,</span><span class="numeric" start="47">1</span><span class="op" start="48">,</span><span class="numeric" start="49">1</span><span class="parenthesis" start="50">)</span><span class="z">"</span><span id="wx3807" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3811" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3813"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3817"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w3821"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Unexpected context in f:procedure-step-numeration: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx3827" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w3829"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="20" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$context</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span id="wx3840" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx3844" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3848" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3852" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx3856" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3862"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:in-scope-pis</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3878"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the processing-instructions that are in scope</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3884" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3886"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3890"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Processing instructions can be used to control some of the behavior of
the DocBook stylesheets. This function returns the ones that are “in scope” for
any given element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3896" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3898"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The general rules is that processing instructions that are the children
of the context node are in scope, as are processing instructions that appear
</span><span class="ww" id="w3902"><span class="es">&lt;</span><span class="en">emphasis</span><span class="scx">&gt;</span><span class="txt">before</span><span class="ez">&lt;/</span><span class="cl">emphasis</span><span id="wx3908" class="ec">&gt;</span></span><span class="txt"> the root node of the document.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3912" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3916" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3918"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3922"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3926"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w3930"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx3936" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3938"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3942"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The context node</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3948" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3952" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx3956" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3958"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w3962"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">target</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx3968" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w3970"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3974"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The PI target that is to be returned</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3980" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx3984" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx3988" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx3992" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx3996" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3998"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4002"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The sequence of in-scope PIs.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4008" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx4012" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx4016" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4018"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}in-scope-pis">f:in-scope-pis</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">processing-instruction()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4034"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()</span><span class="z">"</span><span id="wx4048" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4050"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target">target</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx4064" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4066"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="151" select="quick">(</span><span class="variable" start="2" select="quick">$context</span><span class="step" start="10">/</span><span class="node" start="11" pair-end="34" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="parenthesis" start="34">)</span><span class="filter" start="35" pair-end="59" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="36" pair-end="48" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="47">.</span><span class="parenthesis" start="48">)</span><span class="whitespace" start="49"> </span><span class="op" start="50">=</span><span class="whitespace" start="51"> </span><span class="variable" start="52" select="quick">$target</span><span class="filter" start="59">]</span><span class="op" start="60">,</span><span class="whitespace" start="61">
                                               </span><a href="http://www.w3.org/TR/xpath-functions/#func-root" class="solar"><span class="function" start="87" pair-end="100" select="quick">root</span></a><span class="parenthesis">(</span><span class="variable" start="92" select="quick">$context</span><span class="parenthesis" start="100">)</span><span class="step" start="101">/</span><span class="node" start="102" pair-end="125" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="parenthesis" start="125">)</span><span class="filter" start="126" pair-end="150" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="127" pair-end="139" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="138">.</span><span class="parenthesis" start="139">)</span><span class="whitespace" start="140"> </span><span class="op" start="141">=</span><span class="whitespace" start="142"> </span><span class="variable" start="143" select="quick">$target</span><span class="filter" start="150">]</span><span class="parenthesis" start="151">)</span><span class="z">"</span><span id="wx4110" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx4114" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4120"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:pi</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4136"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the value of the first matching pseudo-attribute</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4142" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4144"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4148"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function searches a list of processing instructions for the
first psuedo-attribute matching the specified name and returns its value.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4154" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4158" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4160"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4164"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4168"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w4172"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">pis</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx4178" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w4180"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4184"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The list of processing instructions.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4190" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx4194" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx4198" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w4200"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w4204"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">attribute</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx4210" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w4212"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4216"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The name of the pseudo-attribute to return.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4222" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx4226" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx4230" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx4234" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx4238" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4240"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4244"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The value of the pseudo-attribute or an empty sequence if no
such attribute can be found.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4250" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx4254" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx4258" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4260"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}pi">f:pi</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string?</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4276"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pis">pis</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">processing-instruction()*</span><span class="z">"</span><span id="wx4290" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4292"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attribute">attribute</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx4306" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4308"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?values">values</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4324"><span class="es">&lt;</span><span class="enxsl">xsl:for-each</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pis</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4334"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pivalue">pivalue</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4344"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="31" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="8"> </span><span class="op">'</span><span class="op" start="11">,</span><span class="whitespace" start="12"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-normalize-space" class="solar"><span class="function" start="13" pair-end="30" select="quick">normalize-space</span></a><span class="parenthesis">(</span><span class="context" start="29">.</span><span class="parenthesis" start="30">)</span><span class="parenthesis" start="31">)</span><span class="z">"</span><span id="wx4363" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4367" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w4369"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="1" pair-end="47" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$pivalue</span><span class="op" start="18">,</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="19" pair-end="46" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="26"> </span><span class="op">'</span><span class="op" start="29">,</span><span class="whitespace" start="30"> </span><span class="variable" start="31" select="quick">$attribute</span><span class="op" start="41">,</span><span class="whitespace" start="42"> </span><span class="op">'</span><span class="literal" start="43">=</span><span class="op">'</span><span class="parenthesis" start="46">)</span><span class="parenthesis" start="47">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w4397"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?rest">rest</span><span class="z">"</span><span class="z">
                                    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="1" pair-end="54" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$pivalue</span><span class="op" start="25">,</span><span class="whitespace" start="26"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="27" pair-end="53" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="34"> </span><span class="op">'</span><span class="op" start="37">,</span><span class="whitespace" start="38"> </span><span class="variable" start="39" select="quick">$attribute</span><span class="op" start="49">,</span><span class="op">'</span><span class="literal" start="50">=</span><span class="op">'</span><span class="parenthesis" start="53">)</span><span class="parenthesis" start="54">)</span><span class="z">"</span><span id="wx4429" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4431"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?quote">quote</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="1" pair-end="20" select="quick">substring</span></a><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$rest</span><span class="op" start="16">,</span><span class="numeric" start="17">1</span><span class="op" start="18">,</span><span class="numeric" start="19">1</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span id="wx4452" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w4454"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="1" pair-end="43" select="quick">substring-before</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="18" pair-end="35" select="quick">substring</span></a><span class="parenthesis">(</span><span class="variable" start="28" select="quick">$rest</span><span class="op" start="33">,</span><span class="numeric" start="34">2</span><span class="parenthesis" start="35">)</span><span class="op" start="36">,</span><span class="variable" start="37" select="quick">$quote</span><span class="parenthesis" start="43">)</span><span class="z">"</span><span id="wx4472" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4476" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:for-each</span><span id="wx4480" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4484" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4486"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$values</span><span class="filter" start="8" pair-end="10" select="quick">[</span><span class="numeric" start="9">1</span><span class="filter" start="10">]</span><span class="z">"</span><span id="wx4497" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx4501" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4507"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:xpath-location</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4523"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns a pseudo-XPath expression locating the specified node</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4529" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4531"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4535"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns a psuedo-XPath expression that navigates from
the root of the document to the specified node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4541" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4543"><span class="es">&lt;</span><span class="en">warning</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4547"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The XPath returned
uses only the </span><span class="ww" id="w4551"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">local-name</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx4557" class="ec">&gt;</span></span><span class="txt"> of the node so it relies
on the default namespace. For a mixed-namespace document, this may simply
be impossible.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4561" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">warning</span><span id="wx4565" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4569" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4571"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4575"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4579"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w4583"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx4589" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w4591"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4595"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node for which a pseudo-XPath will be generated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4601" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx4605" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx4609" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx4613" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx4617" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4619"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4623"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The pseudo-XPath.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4629" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx4633" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx4637" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4639"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}xpath-location">f:xpath-location</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4655"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx4669" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4671"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}xpath-location" class="solar"><span class="function" start="1" pair-end="27" select="quick">f:xpath-location</span></a><span class="parenthesis">(</span><span class="variable" start="18" select="quick">$node</span><span class="op" start="23">,</span><span class="whitespace" start="24"> </span><span class="op">'</span><span class="literal" start="25"></span><span class="op">'</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx4687" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx4691" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4693"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}xpath-location">f:xpath-location</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4709"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx4723" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4725"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?path">path</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx4739" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4741"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?next.path">next.path</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4751"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="17" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$node</span><span class="parenthesis" start="17">)</span><span class="z">"</span><span id="wx4762" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4764"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$path</span><span class="whitespace" start="6"> </span><span class="op" start="7">!=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">/</span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4782" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4784"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$path</span><span class="z">"</span><span id="wx4792" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx4796" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4798"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4802"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4815"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}xpath-location" class="solar"><span class="function" start="1" pair-end="45" select="quick">f:xpath-location</span></a><span class="parenthesis">(</span><span class="variable" start="18" select="quick">$node</span><span class="step" start="23">/</span><span class="axis" start="24">parent::</span><span class="qname" start="32" select="quick">*</span><span class="op" start="33">,</span><span class="whitespace" start="34"> </span><span class="variable" start="35" select="quick">$next.path</span><span class="parenthesis" start="45">)</span><span class="z">"</span><span id="wx4832" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx4836" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4838"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4842"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="23" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="8">/</span><span class="op">'</span><span class="op" start="11">,</span><span class="whitespace" start="12"> </span><span class="variable" start="13" select="quick">$next.path</span><span class="parenthesis" start="23">)</span><span class="z">"</span><span id="wx4858" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx4862" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx4866" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx4870" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ====================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w4876"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:is-component</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4892"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns true if the specified node is a “component”</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx4898" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4900"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4904"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function return true if the specified node is a “component,” that
is a </span><span class="ww" id="w4908"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">appendix</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4914" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w4916"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">article</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4922" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w4924"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">chapter</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4930" class="ec">&gt;</span></span><span class="txt">,
</span><span class="ww" id="w4932"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">preface</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4938" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w4940"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">bibliography</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4946" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w4948"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">glossary</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4954" class="ec">&gt;</span></span><span class="txt">,
or </span><span class="ww" id="w4956"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">index</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx4962" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4966" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w4968"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">It is defined as a function so that customizers can add other
elements to the list of components, if necessary.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx4974" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx4978" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4980"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4984"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w4988"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w4992"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx4998" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w5000"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5004"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node to test.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5010" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx5014" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx5018" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx5022" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx5026" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5028"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5032"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">True if the node is a component, false otherwise.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5038" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx5042" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx5046" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5048"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}is-component">f:is-component</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5064"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx5078" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5080"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="224" select="quick">(</span><span class="variable" start="5" select="quick">$node</span><span class="step" start="10">/</span><span class="axis" start="11">self::</span><span class="qname" start="17" select="quick">db:appendix</span><span class="whitespace" start="28">
                      </span><span class="qname" start="29" select="quick">	</span><span class="qname" start="30" select="quick">	</span><span class="qname" start="31" select="quick">	</span><span class="whitespace" start="32">    </span><span class="op" start="36">|</span><span class="whitespace" start="37"> </span><span class="variable" start="38" select="quick">$node</span><span class="step" start="43">/</span><span class="axis" start="44">self::</span><span class="qname" start="50" select="quick">db:article</span><span class="whitespace" start="60">
                      </span><span class="qname" start="61" select="quick">	</span><span class="qname" start="62" select="quick">	</span><span class="qname" start="63" select="quick">	</span><span class="whitespace" start="64">    </span><span class="op" start="68">|</span><span class="whitespace" start="69"> </span><span class="variable" start="70" select="quick">$node</span><span class="step" start="75">/</span><span class="axis" start="76">self::</span><span class="qname" start="82" select="quick">db:chapter</span><span class="whitespace" start="92">
                      </span><span class="qname" start="93" select="quick">	</span><span class="qname" start="94" select="quick">	</span><span class="qname" start="95" select="quick">	</span><span class="whitespace" start="96">    </span><span class="op" start="100">|</span><span class="whitespace" start="101"> </span><span class="variable" start="102" select="quick">$node</span><span class="step" start="107">/</span><span class="axis" start="108">self::</span><span class="qname" start="114" select="quick">db:preface</span><span class="whitespace" start="124">
                      </span><span class="qname" start="125" select="quick">	</span><span class="qname" start="126" select="quick">	</span><span class="qname" start="127" select="quick">	</span><span class="whitespace" start="128">    </span><span class="op" start="132">|</span><span class="whitespace" start="133"> </span><span class="variable" start="134" select="quick">$node</span><span class="step" start="139">/</span><span class="axis" start="140">self::</span><span class="qname" start="146" select="quick">db:bibliography</span><span class="whitespace" start="161">
                      </span><span class="qname" start="162" select="quick">	</span><span class="qname" start="163" select="quick">	</span><span class="qname" start="164" select="quick">	</span><span class="whitespace" start="165">    </span><span class="op" start="169">|</span><span class="whitespace" start="170"> </span><span class="variable" start="171" select="quick">$node</span><span class="step" start="176">/</span><span class="axis" start="177">self::</span><span class="qname" start="183" select="quick">db:glossary</span><span class="whitespace" start="194">
                      </span><span class="qname" start="195" select="quick">	</span><span class="qname" start="196" select="quick">	</span><span class="qname" start="197" select="quick">	</span><span class="whitespace" start="198">    </span><span class="op" start="202">|</span><span class="whitespace" start="203"> </span><span class="variable" start="204" select="quick">$node</span><span class="step" start="209">/</span><span class="axis" start="210">self::</span><span class="qname" start="216" select="quick">db:index</span><span class="parenthesis" start="224">)</span><span class="whitespace" start="225">
                      </span><span class="qname" start="226" select="quick">	</span><span class="qname" start="227" select="quick">	</span><span class="qname" start="228" select="quick">	</span><span class="op" start="229">then</span><span class="whitespace" start="233"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="234" pair-end="239" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="239">)</span><span class="whitespace" start="240">
                      </span><span class="qname" start="241" select="quick">	</span><span class="qname" start="242" select="quick">	</span><span class="qname" start="243" select="quick">	</span><span class="op" start="244">else</span><span class="whitespace" start="248"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-false" class="solar"><span class="function" start="249" pair-end="255" select="quick">false</span></a><span class="parenthesis">(</span><span class="parenthesis" start="255">)</span><span class="z">"</span><span id="wx5179" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx5183" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ====================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w5189"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:is-section</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5205"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns true if the specified node is a “section”</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx5211" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5213"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5217"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function return true if the specified node is a “section,” that
is a </span><span class="ww" id="w5221"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">section</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx5227" class="ec">&gt;</span></span><span class="txt">, </span><span class="ww" id="w5229"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">sect</span><span class="ww" id="w5233"><span class="es">&lt;</span><span class="en">replaceable</span><span class="scx">&gt;</span><span class="txt">1-5</span><span class="ez">&lt;/</span><span class="cl">replaceable</span><span id="wx5239" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx5243" class="ec">&gt;</span></span><span class="txt">,
</span><span class="ww" id="w5245"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refsect</span><span class="ww" id="w5249"><span class="es">&lt;</span><span class="en">replaceable</span><span class="scx">&gt;</span><span class="txt">1-3</span><span class="ez">&lt;/</span><span class="cl">replaceable</span><span id="wx5255" class="ec">&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx5259" class="ec">&gt;</span></span><span class="txt">, or
</span><span class="ww" id="w5261"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">simplesect</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx5267" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5271" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w5273"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">It is defined as a function so that customizers can add other
elements to the list of sections, if necessary.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5279" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx5283" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5285"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5289"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5293"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w5297"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx5303" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w5305"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5309"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node to test.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5315" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx5319" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx5323" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx5327" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx5331" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5333"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5337"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">True if the node is a section, false otherwise.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5343" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx5347" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx5351" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5353"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}is-section">f:is-section</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5369"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx5383" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5385"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="346" select="quick">(</span><span class="variable" start="5" select="quick">$node</span><span class="step" start="10">/</span><span class="axis" start="11">self::</span><span class="qname" start="17" select="quick">db:section</span><span class="whitespace" start="27">
                      </span><span class="qname" start="28" select="quick">	</span><span class="qname" start="29" select="quick">	</span><span class="qname" start="30" select="quick">	</span><span class="whitespace" start="31">    </span><span class="op" start="35">|</span><span class="whitespace" start="36"> </span><span class="variable" start="37" select="quick">$node</span><span class="step" start="42">/</span><span class="axis" start="43">self::</span><span class="qname" start="49" select="quick">db:sect1</span><span class="whitespace" start="57">
                      </span><span class="qname" start="58" select="quick">	</span><span class="qname" start="59" select="quick">	</span><span class="qname" start="60" select="quick">	</span><span class="whitespace" start="61">    </span><span class="op" start="65">|</span><span class="whitespace" start="66"> </span><span class="variable" start="67" select="quick">$node</span><span class="step" start="72">/</span><span class="axis" start="73">self::</span><span class="qname" start="79" select="quick">db:sect2</span><span class="whitespace" start="87">
                      </span><span class="qname" start="88" select="quick">	</span><span class="qname" start="89" select="quick">	</span><span class="qname" start="90" select="quick">	</span><span class="whitespace" start="91">    </span><span class="op" start="95">|</span><span class="whitespace" start="96"> </span><span class="variable" start="97" select="quick">$node</span><span class="step" start="102">/</span><span class="axis" start="103">self::</span><span class="qname" start="109" select="quick">db:sect3</span><span class="whitespace" start="117">
                      </span><span class="qname" start="118" select="quick">	</span><span class="qname" start="119" select="quick">	</span><span class="qname" start="120" select="quick">	</span><span class="whitespace" start="121">    </span><span class="op" start="125">|</span><span class="whitespace" start="126"> </span><span class="variable" start="127" select="quick">$node</span><span class="step" start="132">/</span><span class="axis" start="133">self::</span><span class="qname" start="139" select="quick">db:sect4</span><span class="whitespace" start="147">
                      </span><span class="qname" start="148" select="quick">	</span><span class="qname" start="149" select="quick">	</span><span class="qname" start="150" select="quick">	</span><span class="whitespace" start="151">    </span><span class="op" start="155">|</span><span class="whitespace" start="156"> </span><span class="variable" start="157" select="quick">$node</span><span class="step" start="162">/</span><span class="axis" start="163">self::</span><span class="qname" start="169" select="quick">db:sect5</span><span class="whitespace" start="177">
                      </span><span class="qname" start="178" select="quick">	</span><span class="qname" start="179" select="quick">	</span><span class="qname" start="180" select="quick">	</span><span class="whitespace" start="181">    </span><span class="op" start="185">|</span><span class="whitespace" start="186"> </span><span class="variable" start="187" select="quick">$node</span><span class="step" start="192">/</span><span class="axis" start="193">self::</span><span class="qname" start="199" select="quick">db:refsect1</span><span class="whitespace" start="210">
                      </span><span class="qname" start="211" select="quick">	</span><span class="qname" start="212" select="quick">	</span><span class="qname" start="213" select="quick">	</span><span class="whitespace" start="214">    </span><span class="op" start="218">|</span><span class="whitespace" start="219"> </span><span class="variable" start="220" select="quick">$node</span><span class="step" start="225">/</span><span class="axis" start="226">self::</span><span class="qname" start="232" select="quick">db:refsect2</span><span class="whitespace" start="243">
                      </span><span class="qname" start="244" select="quick">	</span><span class="qname" start="245" select="quick">	</span><span class="qname" start="246" select="quick">	</span><span class="whitespace" start="247">    </span><span class="op" start="251">|</span><span class="whitespace" start="252"> </span><span class="variable" start="253" select="quick">$node</span><span class="step" start="258">/</span><span class="axis" start="259">self::</span><span class="qname" start="265" select="quick">db:refsect3</span><span class="whitespace" start="276">
                      </span><span class="qname" start="277" select="quick">	</span><span class="qname" start="278" select="quick">	</span><span class="qname" start="279" select="quick">	</span><span class="whitespace" start="280">    </span><span class="op" start="284">|</span><span class="whitespace" start="285"> </span><span class="variable" start="286" select="quick">$node</span><span class="step" start="291">/</span><span class="axis" start="292">self::</span><span class="qname" start="298" select="quick">db:refsection</span><span class="whitespace" start="311">
                      </span><span class="qname" start="312" select="quick">	</span><span class="qname" start="313" select="quick">	</span><span class="qname" start="314" select="quick">	</span><span class="whitespace" start="315">    </span><span class="op" start="319">|</span><span class="whitespace" start="320"> </span><span class="variable" start="321" select="quick">$node</span><span class="step" start="326">/</span><span class="axis" start="327">self::</span><span class="qname" start="333" select="quick">db:simplesect</span><span class="parenthesis" start="346">)</span><span class="whitespace" start="347">
                      </span><span class="qname" start="348" select="quick">	</span><span class="qname" start="349" select="quick">	</span><span class="qname" start="350" select="quick">	</span><span class="whitespace" start="351"> </span><span class="op" start="352">then</span><span class="whitespace" start="356"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="357" pair-end="362" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="362">)</span><span class="whitespace" start="363">
                      </span><span class="qname" start="364" select="quick">	</span><span class="qname" start="365" select="quick">	</span><span class="qname" start="366" select="quick">	</span><span class="whitespace" start="367"> </span><span class="op" start="368">else</span><span class="whitespace" start="372"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-false" class="solar"><span class="function" start="373" pair-end="379" select="quick">false</span></a><span class="parenthesis">(</span><span class="parenthesis" start="379">)</span><span class="z">"</span><span id="wx5530" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx5534" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w5540"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:label-this-section</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5556"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns true if the specified section should be labelled
(numbered).</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx5562" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5564"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5568"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function return true if the specified section should be
labelled. Broadly speaking this is true if sections should be labelled
and the </span><span class="ww" id="w5572"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">section-level</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx5578" class="ec">&gt;</span></span><span class="txt"> of this section is less than
</span><span class="ww" id="w5580"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">section.autolabel.max.depth</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx5586" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5590" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx5594" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5596"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5600"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5604"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w5608"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">section</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx5614" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w5616"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5620"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The section element to test.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5626" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx5630" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx5634" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx5638" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx5642" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5644"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5648"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">True if the section should be labelled, false otherwise.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5654" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx5658" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx5662" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5664"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}label-this-section">f:label-this-section</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5680"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?section">section</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx5694" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5696"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5700"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}section-level" class="solar"><span class="function" start="1" pair-end="25" select="quick">f:section-level</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$section</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26">
                </span><span class="qname" start="27" select="quick">	</span><span class="qname" start="28" select="quick">	</span><span class="whitespace" start="29">    </span><span class="qname" start="33" select="quick">&amp;</span><span class="op" start="34">lt</span><span class="qname" start="36" select="quick">;</span><span class="op" start="37">=</span><span class="whitespace" start="38"> </span><a href="xslt/base/html/param.xsl.html#v?section.autolabel.max.depth" class="solar"><span class="variable" start="39" select="quick">$section.autolabel.max.depth</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5723"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="42" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?autolabel.elements" class="solar"><span class="variable" start="11" select="quick">$autolabel.elements</span></a><span class="step" start="30">/</span><span class="qname" start="31" select="quick">db:section</span><span class="parenthesis" start="41">)</span><span class="parenthesis" start="42">)</span><span class="z">"</span><span id="wx5739" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5743" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5745"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5749"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-false" class="solar"><span class="function" start="1" pair-end="7" select="quick">false</span></a><span class="parenthesis">(</span><span class="parenthesis" start="7">)</span><span class="z">"</span><span id="wx5759" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx5763" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx5767" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx5771" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w5777"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:section-level</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5793"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the nesting depth of the specified section</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx5799" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5801"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5805"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function return the nesting depth of the specified section.
Top level sections are at level “1”.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5811" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w5813"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">If the section belongs to a </span><span class="ww" id="w5817"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx5823" class="ec">&gt;</span></span><span class="txt">, the value of
</span><span class="ww" id="w5825"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">refentry-section-level</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx5831" class="ec">&gt;</span></span><span class="txt"> is returned.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5835" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx5839" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5841"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5845"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5849"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w5853"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">section</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx5859" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w5861"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5865"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The section element for which the depth should be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5871" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx5875" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx5879" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx5883" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx5887" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5889"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5893"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The section level.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5899" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx5903" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx5907" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5909"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}section-level">f:section-level</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5925"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx5939" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5941"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?level">level</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5957"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5961"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:sect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5976" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5978"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:sect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5993" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5995"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:sect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6010" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w6012"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:sect4</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6027" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w6029"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:sect5</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">5</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6044" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w6046"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:section</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w6059"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="33" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$node</span><span class="step" start="12">/</span><span class="axis" start="13">ancestor::</span><span class="qname" start="23" select="quick">db:section</span><span class="parenthesis" start="33">)</span><span class="quantifier" start="34">+</span><span class="numeric" start="35">1</span><span class="z">"</span><span id="wx6075" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6079" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w6081"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:refsect1</span><span class="whitespace" start="24"> </span><span class="op" start="25">or</span><span class="whitespace" start="27">
                </span><span class="qname" start="28" select="quick">	</span><span class="qname" start="29" select="quick">	</span><span class="whitespace" start="30">      </span><span class="variable" start="36" select="quick">$node</span><span class="step" start="41">/</span><span class="axis" start="42">self::</span><span class="qname" start="48" select="quick">db:refsect2</span><span class="whitespace" start="59"> </span><span class="op" start="60">or</span><span class="whitespace" start="62">
                </span><span class="qname" start="63" select="quick">	</span><span class="qname" start="64" select="quick">	</span><span class="whitespace" start="65">      </span><span class="variable" start="71" select="quick">$node</span><span class="step" start="76">/</span><span class="axis" start="77">self::</span><span class="qname" start="83" select="quick">db:refsect3</span><span class="whitespace" start="94"> </span><span class="op" start="95">or</span><span class="whitespace" start="97">
                </span><span class="qname" start="98" select="quick">	</span><span class="qname" start="99" select="quick">	</span><span class="whitespace" start="100">      </span><span class="variable" start="106" select="quick">$node</span><span class="step" start="111">/</span><span class="axis" start="112">self::</span><span class="qname" start="118" select="quick">db:refsection</span><span class="whitespace" start="131"> </span><span class="op" start="132">or</span><span class="whitespace" start="134">
                </span><span class="qname" start="135" select="quick">	</span><span class="qname" start="136" select="quick">	</span><span class="whitespace" start="137">      </span><span class="variable" start="143" select="quick">$node</span><span class="step" start="148">/</span><span class="axis" start="149">self::</span><span class="qname" start="155" select="quick">db:refsynopsisdiv</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w6134"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}refentry-section-level" class="solar"><span class="function" start="1" pair-end="31" select="quick">f:refentry-section-level</span></a><span class="parenthesis">(</span><span class="variable" start="26" select="quick">$node</span><span class="parenthesis" start="31">)</span><span class="z">"</span><span id="wx6145" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6149" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w6151"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">self::</span><span class="qname" start="13" select="quick">db:simplesect</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w6164"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w6168"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:sect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6183" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w6185"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:sect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6200" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w6202"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:sect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6217" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w6219"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:sect4</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">5</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6234" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w6236"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:sect5</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">6</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6251" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w6253"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">parent::</span><span class="qname" start="15" select="quick">db:section</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w6266"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="33" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$node</span><span class="step" start="12">/</span><span class="axis" start="13">ancestor::</span><span class="qname" start="23" select="quick">db:section</span><span class="parenthesis" start="33">)</span><span class="quantifier" start="34">+</span><span class="numeric" start="35">2</span><span class="z">"</span><span id="wx6282" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6286" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w6288"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6294" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6298" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6302" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w6304"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6310" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6314" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx6318" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6320"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6324"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:appendix</span><span class="filter" start="28" pair-end="47" select="quick">[</span><span class="axis" start="29">parent::</span><span class="qname" start="37" select="quick">db:article</span><span class="filter" start="47">]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6341"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$level</span><span class="whitespace" start="7"> </span><span class="op" start="8">+</span><span class="whitespace" start="9"> </span><span class="numeric" start="10">1</span><span class="z">"</span><span id="wx6353" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6357" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6359"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6363"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$level</span><span class="z">"</span><span id="wx6371" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6375" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6379" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx6383" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w6389"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:pseudo-section-level</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6405"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the nesting depth of the specified element</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx6411" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6413"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6417"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function return the nesting depth of the specified element.
The purpose of this function is to calculate the effective depth of an
element, as if it were a section. (If it really is a section, use
</span><span class="ww" id="w6421"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">section-level</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx6427" class="ec">&gt;</span></span><span class="txt"> instead.)</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx6431" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6433"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This can be used to calculate the appropriate size for the titles
of elements such as </span><span class="ww" id="w6437"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">qanda</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx6443" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx6447" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx6451" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6453"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6457"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6461"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w6465"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx6471" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w6473"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6477"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The element for which the depth should be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx6483" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx6487" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx6491" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx6495" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx6499" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6501"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6505"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The element's pseudo section level.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx6511" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx6515" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx6519" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6521"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}pseudo-section-level">f:pseudo-section-level</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6537"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx6551" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6553"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6557"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}is-section" class="solar"><span class="function" start="1" pair-end="19" select="quick">f:is-section</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$node</span><span class="parenthesis" start="19">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6570"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}section-level" class="solar"><span class="function" start="1" pair-end="22" select="quick">f:section-level</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$node</span><span class="parenthesis" start="22">)</span><span class="z">"</span><span id="wx6581" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6585" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6587"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6591"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?section">section</span><span class="z">"</span><span class="z">
              		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="377" select="quick">(</span><span class="variable" start="2" select="quick">$node</span><span class="step" start="7">/</span><span class="axis" start="8">ancestor::</span><span class="qname" start="18" select="quick">db:section</span><span class="whitespace" start="28">
                      </span><span class="qname" start="29" select="quick">	</span><span class="qname" start="30" select="quick">	</span><span class="qname" start="31" select="quick">	</span><span class="whitespace" start="32">    </span><span class="op" start="36">|</span><span class="variable" start="37" select="quick">$node</span><span class="step" start="42">/</span><span class="axis" start="43">ancestor::</span><span class="qname" start="53" select="quick">db:simplesect</span><span class="whitespace" start="66">
                      </span><span class="qname" start="67" select="quick">	</span><span class="qname" start="68" select="quick">	</span><span class="qname" start="69" select="quick">	</span><span class="whitespace" start="70">    </span><span class="op" start="74">|</span><span class="variable" start="75" select="quick">$node</span><span class="step" start="80">/</span><span class="axis" start="81">ancestor::</span><span class="qname" start="91" select="quick">db:sect5</span><span class="whitespace" start="99">
                      </span><span class="qname" start="100" select="quick">	</span><span class="qname" start="101" select="quick">	</span><span class="qname" start="102" select="quick">	</span><span class="whitespace" start="103">    </span><span class="op" start="107">|</span><span class="variable" start="108" select="quick">$node</span><span class="step" start="113">/</span><span class="axis" start="114">ancestor::</span><span class="qname" start="124" select="quick">db:sect4</span><span class="whitespace" start="132">
                      </span><span class="qname" start="133" select="quick">	</span><span class="qname" start="134" select="quick">	</span><span class="qname" start="135" select="quick">	</span><span class="whitespace" start="136">    </span><span class="op" start="140">|</span><span class="variable" start="141" select="quick">$node</span><span class="step" start="146">/</span><span class="axis" start="147">ancestor::</span><span class="qname" start="157" select="quick">db:sect3</span><span class="whitespace" start="165">
                      </span><span class="qname" start="166" select="quick">	</span><span class="qname" start="167" select="quick">	</span><span class="qname" start="168" select="quick">	</span><span class="whitespace" start="169">    </span><span class="op" start="173">|</span><span class="variable" start="174" select="quick">$node</span><span class="step" start="179">/</span><span class="axis" start="180">ancestor::</span><span class="qname" start="190" select="quick">db:sect2</span><span class="whitespace" start="198">
                      </span><span class="qname" start="199" select="quick">	</span><span class="qname" start="200" select="quick">	</span><span class="qname" start="201" select="quick">	</span><span class="whitespace" start="202">    </span><span class="op" start="206">|</span><span class="variable" start="207" select="quick">$node</span><span class="step" start="212">/</span><span class="axis" start="213">ancestor::</span><span class="qname" start="223" select="quick">db:sect1</span><span class="whitespace" start="231">
                      </span><span class="qname" start="232" select="quick">	</span><span class="qname" start="233" select="quick">	</span><span class="qname" start="234" select="quick">	</span><span class="whitespace" start="235">    </span><span class="op" start="239">|</span><span class="variable" start="240" select="quick">$node</span><span class="step" start="245">/</span><span class="axis" start="246">ancestor::</span><span class="qname" start="256" select="quick">db:refsection</span><span class="whitespace" start="269">
                      </span><span class="qname" start="270" select="quick">	</span><span class="qname" start="271" select="quick">	</span><span class="qname" start="272" select="quick">	</span><span class="whitespace" start="273">    </span><span class="op" start="277">|</span><span class="variable" start="278" select="quick">$node</span><span class="step" start="283">/</span><span class="axis" start="284">ancestor::</span><span class="qname" start="294" select="quick">db:refsect3</span><span class="whitespace" start="305">
                      </span><span class="qname" start="306" select="quick">	</span><span class="qname" start="307" select="quick">	</span><span class="qname" start="308" select="quick">	</span><span class="whitespace" start="309">    </span><span class="op" start="313">|</span><span class="variable" start="314" select="quick">$node</span><span class="step" start="319">/</span><span class="axis" start="320">ancestor::</span><span class="qname" start="330" select="quick">db:refsect2</span><span class="whitespace" start="341">
                      </span><span class="qname" start="342" select="quick">	</span><span class="qname" start="343" select="quick">	</span><span class="qname" start="344" select="quick">	</span><span class="whitespace" start="345">    </span><span class="op" start="349">|</span><span class="variable" start="350" select="quick">$node</span><span class="step" start="355">/</span><span class="axis" start="356">ancestor::</span><span class="qname" start="366" select="quick">db:refsect1</span><span class="parenthesis" start="377">)</span><span class="filter" start="378" pair-end="385" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="379" pair-end="384" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="384">)</span><span class="filter" start="385">]</span><span class="z">"</span><span id="wx6715" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w6717"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w6721"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="13" select="quick">not</span></a><span class="parenthesis">(</span><span class="variable" start="5" select="quick">$section</span><span class="parenthesis" start="13">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6736" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w6738"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w6742"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}section-level" class="solar"><span class="function" start="1" pair-end="25" select="quick">f:section-level</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$section</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26"> </span><span class="op" start="27">+</span><span class="whitespace" start="28"> </span><span class="numeric" start="29">1</span><span class="z">"</span><span id="wx6757" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6761" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6765" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6769" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6773" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx6777" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w6783"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:refentry-section-level</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6799"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the nesting depth of the specified </span><span class="ww" id="w6803"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx6809" class="ec">&gt;</span></span><span class="txt">
section</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx6813" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6815"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6819"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function return the nesting depth of the specified section in
a </span><span class="ww" id="w6823"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx6829" class="ec">&gt;</span></span><span class="txt">.
Top level sections are at level 1 greater than the level of the
enclosing </span><span class="ww" id="w6831"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx6837" class="ec">&gt;</span></span><span class="txt">; see </span><span class="ww" id="w6839"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">refentry-level</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx6845" class="ec">&gt;</span></span><span class="txt">.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx6849" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx6853" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6855"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6859"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6863"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w6867"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">section</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx6873" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w6875"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6879"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The section element for which the depth should be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx6885" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx6889" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx6893" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx6897" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx6901" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6903"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w6907"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The section level.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx6913" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx6917" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx6921" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6923"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}refentry-section-level">f:refentry-section-level</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6939"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?section">section</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx6953" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6955"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?RElevel">RElevel</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}refentry-level" class="solar"><span class="function" start="1" pair-end="51" select="quick">f:refentry-level</span></a><span class="parenthesis">(</span><span class="variable" start="18" select="quick">$section</span><span class="step" start="26">/</span><span class="axis" start="27">ancestor::</span><span class="qname" start="37" select="quick">db:refentry</span><span class="filter" start="48" pair-end="50" select="quick">[</span><span class="numeric" start="49">1</span><span class="filter" start="50">]</span><span class="parenthesis" start="51">)</span><span class="z">"</span><span id="wx6978" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6980"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?levelinRE">levelinRE</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6996"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7000"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$section</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:refsynopsisdiv</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7015" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w7017"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$section</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:refsect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7032" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w7034"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$section</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:refsect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7049" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w7051"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$section</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:refsect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7066" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w7068"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$section</span><span class="step" start="9">/</span><span class="axis" start="10">self::</span><span class="qname" start="16" select="quick">db:refsection</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w7081"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="39" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$section</span><span class="step" start="15">/</span><span class="axis" start="16">ancestor::</span><span class="qname" start="26" select="quick">db:refsection</span><span class="parenthesis" start="39">)</span><span class="quantifier" start="40">+</span><span class="numeric" start="41">1</span><span class="z">"</span><span id="wx7097" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7101" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w7103"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx7109" class="ec">&gt;</span></span><span class="txt"> </span><span class="z">&lt;!--</span><span class="cm"> this can't happen </span><span class="z">--&gt;</span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx7117" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx7121" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7123"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$levelinRE</span><span class="whitespace" start="11"> </span><span class="op" start="12">+</span><span class="whitespace" start="13"> </span><span class="variable" start="14" select="quick">$RElevel</span><span class="z">"</span><span id="wx7135" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx7139" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w7145"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:refentry-level</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7161"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the nesting depth of the specified </span><span class="ww" id="w7165"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx7171" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx7175" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7177"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7181"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function return the nesting depth of the specified
</span><span class="ww" id="w7185"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx7191" class="ec">&gt;</span></span><span class="txt">. The level of a </span><span class="ww" id="w7193"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx7199" class="ec">&gt;</span></span><span class="txt"> depends on the
context in which it occurs. They are at level 1 greater than the level of
the section that contains them, if they occur in a section, and at level
“1” otherwise.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx7203" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx7207" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7209"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7213"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7217"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w7221"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx7227" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w7229"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7233"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w7237"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx7243" class="ec">&gt;</span></span><span class="txt"> element for which the depth should
be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx7247" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx7251" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx7255" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx7259" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx7263" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7265"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7269"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w7273"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">refentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx7279" class="ec">&gt;</span></span><span class="txt"> level.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx7283" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx7287" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx7291" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7293"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}refentry-level">f:refentry-level</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7309"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?refentry">refentry</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element(db:refentry)</span><span class="z">"</span><span id="wx7323" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7325"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?container">container</span><span class="z">"</span><span class="z">
                              </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="228" select="quick">(</span><span class="variable" start="2" select="quick">$refentry</span><span class="step" start="11">/</span><span class="axis" start="12">ancestor::</span><span class="qname" start="22" select="quick">db:section</span><span class="whitespace" start="32">
                                               </span><span class="op" start="58">|</span><span class="whitespace" start="59"> </span><span class="variable" start="60" select="quick">$refentry</span><span class="step" start="69">/</span><span class="axis" start="70">ancestor::</span><span class="qname" start="80" select="quick">db:sect1</span><span class="whitespace" start="88">
                      </span><span class="qname" start="89" select="quick">	</span><span class="qname" start="90" select="quick">	</span><span class="qname" start="91" select="quick">	</span><span class="whitespace" start="92"> </span><span class="op" start="93">|</span><span class="whitespace" start="94"> </span><span class="variable" start="95" select="quick">$refentry</span><span class="step" start="104">/</span><span class="axis" start="105">ancestor::</span><span class="qname" start="115" select="quick">db:sect2</span><span class="whitespace" start="123">
                      </span><span class="qname" start="124" select="quick">	</span><span class="qname" start="125" select="quick">	</span><span class="qname" start="126" select="quick">	</span><span class="whitespace" start="127"> </span><span class="op" start="128">|</span><span class="whitespace" start="129"> </span><span class="variable" start="130" select="quick">$refentry</span><span class="step" start="139">/</span><span class="axis" start="140">ancestor::</span><span class="qname" start="150" select="quick">db:sect3</span><span class="whitespace" start="158">
                      </span><span class="qname" start="159" select="quick">	</span><span class="qname" start="160" select="quick">	</span><span class="qname" start="161" select="quick">	</span><span class="whitespace" start="162"> </span><span class="op" start="163">|</span><span class="whitespace" start="164"> </span><span class="variable" start="165" select="quick">$refentry</span><span class="step" start="174">/</span><span class="axis" start="175">ancestor::</span><span class="qname" start="185" select="quick">db:sect4</span><span class="whitespace" start="193">
                      </span><span class="qname" start="194" select="quick">	</span><span class="qname" start="195" select="quick">	</span><span class="qname" start="196" select="quick">	</span><span class="whitespace" start="197"> </span><span class="op" start="198">|</span><span class="whitespace" start="199"> </span><span class="variable" start="200" select="quick">$refentry</span><span class="step" start="209">/</span><span class="axis" start="210">ancestor::</span><span class="qname" start="220" select="quick">db:sect5</span><span class="parenthesis" start="228">)</span><span class="filter" start="229" pair-end="236" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="230" pair-end="235" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="235">)</span><span class="filter" start="236">]</span><span class="z">"</span><span id="wx7400" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7402"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7406"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$container</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7416"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}section-level" class="solar"><span class="function" start="1" pair-end="27" select="quick">f:section-level</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$container</span><span class="parenthesis" start="27">)</span><span class="whitespace" start="28"> </span><span class="op" start="29">+</span><span class="whitespace" start="30"> </span><span class="numeric" start="31">1</span><span class="z">"</span><span id="wx7431" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7435" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w7437"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx7443" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx7447" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx7451" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w7457"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:group-index</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7473"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the ordinal number of index group to which supplied term belongs.</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx7479" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7481"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7485"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Returns the ordinal number of index group to which supplied term belongs in a given language. 
This number is used to group index terms and to define order of groups.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx7491" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx7495" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7497"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7501"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7505"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w7509"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">term</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx7515" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w7517"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7521"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The string for which the group index should be calculated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx7527" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx7531" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx7535" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w7537"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w7541"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">lang</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx7547" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w7549"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7553"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Language of term.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx7559" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx7563" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx7567" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx7571" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx7575" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7577"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w7581"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Index of group to which specified term belongs in a given language.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx7587" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx7591" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx7595" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w7597"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}group-index">f:group-index</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w7607"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?term">term</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx7621" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7623"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?lang">lang</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx7637" class="sc">/&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w7639"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?letters">letters</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7655"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?l10n.letters">l10n.letters</span><span class="z">"</span><span class="z">
                    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="107" select="quick">(</span><a href="xslt/base/common/l10n.xsl.html#v?localization" class="solar"><span class="variable" start="2" select="quick">$localization</span></a><span class="whitespace" start="15">
                      </span><span class="qname" start="16" select="quick">	</span><span class="qname" start="17" select="quick">	</span><span class="qname" start="18" select="quick">	</span><span class="whitespace" start="19"> </span><span class="step" start="20">//</span><span class="qname" start="22" select="quick">l:l10n</span><span class="filter" start="28" pair-end="44" select="quick">[</span><span class="axis" start="29">@</span><span class="qname" start="30" select="quick">language</span><span class="op" start="38">=</span><span class="variable" start="39" select="quick">$lang</span><span class="filter" start="44">]</span><span class="whitespace" start="45">
                      </span><span class="qname" start="46" select="quick">	</span><span class="qname" start="47" select="quick">	</span><span class="qname" start="48" select="quick">	</span><span class="whitespace" start="49"> </span><span class="step" start="50">/</span><span class="qname" start="51" select="quick">l:letters</span><span class="op" start="60">,</span><span class="whitespace" start="61">
                                     </span><a href="xslt/base/common/l10n.xsl.html#f?{http://docbook.org/xslt/ns/extension}load-locale" class="solar"><span class="function" start="77" pair-end="96" select="quick">f:load-locale</span></a><span class="parenthesis">(</span><span class="variable" start="91" select="quick">$lang</span><span class="parenthesis" start="96">)</span><span class="step" start="97">/</span><span class="qname" start="98" select="quick">l:letters</span><span class="parenthesis" start="107">)</span><span class="filter" start="108" pair-end="110" select="quick">[</span><span class="numeric" start="109">1</span><span class="filter" start="110">]</span><span class="z">"</span><span id="wx7702" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w7704"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7708"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$l10n.letters</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w7718"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$l10n.letters</span><span class="z">"</span><span id="wx7726" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7730" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w7732"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w7736"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w7740"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">No "</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx7746" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w7748"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lang</span><span class="z">"</span><span id="wx7756" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w7758"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">" localization of index grouping letters exists</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx7764" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w7766"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w7770"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lang</span><span class="whitespace" start="6"> </span><span class="op" start="7">=</span><span class="whitespace" start="8"> </span><span class="op">'</span><span class="literal" start="9">en</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w7786"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx7792" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7796" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ww" id="w7798"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w7802"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">; using "en".</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx7808" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx7812" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx7816" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx7820" class="ec">&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w7822"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="94" select="quick">(</span><a href="xslt/base/common/l10n.xsl.html#v?localization" class="solar"><span class="variable" start="2" select="quick">$localization</span></a><span class="whitespace" start="15">
                     </span><span class="qname" start="16" select="quick">	</span><span class="qname" start="17" select="quick">	</span><span class="qname" start="18" select="quick">	</span><span class="whitespace" start="19"> </span><span class="step" start="20">//</span><span class="qname" start="22" select="quick">l:l10n</span><span class="filter" start="28" pair-end="43" select="quick">[</span><span class="axis" start="29">@</span><span class="qname" start="30" select="quick">language</span><span class="op" start="38">=</span><span class="op">'</span><span class="literal" start="39">en</span><span class="op">'</span><span class="filter" start="43">]</span><span class="whitespace" start="44">
                     </span><span class="qname" start="45" select="quick">	</span><span class="qname" start="46" select="quick">	</span><span class="qname" start="47" select="quick">	</span><span class="whitespace" start="48"> </span><span class="step" start="49">/</span><span class="qname" start="50" select="quick">l:letters</span><span class="op" start="59">,</span><span class="whitespace" start="60">
                     </span><span class="qname" start="61" select="quick">	</span><span class="qname" start="62" select="quick">	</span><span class="qname" start="63" select="quick">	</span><span class="whitespace" start="64"> </span><a href="xslt/base/common/l10n.xsl.html#f?{http://docbook.org/xslt/ns/extension}load-locale" class="solar"><span class="function" start="65" pair-end="83" select="quick">f:load-locale</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="79">en</span><span class="op">'</span><span class="parenthesis" start="83">)</span><span class="step" start="84">/</span><span class="qname" start="85" select="quick">l:letters</span><span class="parenthesis" start="94">)</span><span class="filter" start="95" pair-end="97" select="quick">[</span><span class="numeric" start="96">1</span><span class="filter" start="97">]</span><span class="z">"</span><span id="wx7871" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx7875" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx7879" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx7883" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w7885"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?long-letter-index">long-letter-index</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$letters</span><span class="step" start="9">/</span><span class="qname" start="10" select="quick">l:l</span><span class="filter" start="13" pair-end="38" select="quick">[</span><span class="context" start="14">.</span><span class="whitespace" start="15"> </span><span class="op" start="16">=</span><span class="whitespace" start="17"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="18" pair-end="37" select="quick">substring</span></a><span class="parenthesis">(</span><span class="variable" start="28" select="quick">$term</span><span class="op" start="33">,</span><span class="numeric" start="34">1</span><span class="op" start="35">,</span><span class="numeric" start="36">2</span><span class="parenthesis" start="37">)</span><span class="filter" start="38">]</span><span class="step" start="39">/</span><span class="axis" start="40">@</span><span class="qname" start="41" select="quick">i</span><span class="z">"</span><span id="wx7918" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7920"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?short-letter-index">short-letter-index</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$letters</span><span class="step" start="9">/</span><span class="qname" start="10" select="quick">l:l</span><span class="filter" start="13" pair-end="38" select="quick">[</span><span class="context" start="14">.</span><span class="whitespace" start="15"> </span><span class="op" start="16">=</span><span class="whitespace" start="17"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="18" pair-end="37" select="quick">substring</span></a><span class="parenthesis">(</span><span class="variable" start="28" select="quick">$term</span><span class="op" start="33">,</span><span class="numeric" start="34">1</span><span class="op" start="35">,</span><span class="numeric" start="36">1</span><span class="parenthesis" start="37">)</span><span class="filter" start="38">]</span><span class="step" start="39">/</span><span class="axis" start="40">@</span><span class="qname" start="41" select="quick">i</span><span class="z">"</span><span id="wx7953" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w7955"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?letter-index">letter-index</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w7965"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w7969"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$long-letter-index</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w7979"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$long-letter-index</span><span class="z">"</span><span id="wx7987" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx7991" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w7993"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$short-letter-index</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w8003"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$short-letter-index</span><span class="z">"</span><span id="wx8011" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx8015" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8017"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">0</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx8023" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx8027" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx8031" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8033"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-number" class="solar"><span class="function" start="1" pair-end="21" select="quick">number</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$letter-index</span><span class="parenthesis" start="21">)</span><span class="z">"</span><span id="wx8044" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx8048" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w8054"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:group-label</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8070"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the label of specified index group.</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx8076" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8078"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8082"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Returns the label of specified index group in a given language. 
The label is used to label corresponding index group. The label is usually just one letter, but
it can be also longer text like "Symbols" or "Ch".</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8088" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx8092" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8094"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8098"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8102"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w8106"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">index</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx8112" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w8114"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8118"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The index of group for which label should be generated.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8124" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx8128" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx8132" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w8134"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w8138"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">lang</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx8144" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w8146"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8150"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Language of label.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8156" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx8160" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx8164" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx8168" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx8172" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8174"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8178"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Label for specified index group in a given language.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8184" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx8188" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx8192" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8194"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}group-label">f:group-label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8204"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?index">index</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span id="wx8218" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8220"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?lang">lang</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx8234" class="sc">/&gt;</span></span><span class="txt">
  
  </span><span class="ww" id="w8236"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?letters">letters</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8252"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?l10n.letters">l10n.letters</span><span class="z">"</span><span class="z">
                    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="100" select="quick">(</span><a href="xslt/base/common/l10n.xsl.html#v?localization" class="solar"><span class="variable" start="2" select="quick">$localization</span></a><span class="whitespace" start="15">
                      </span><span class="qname" start="16" select="quick">	</span><span class="qname" start="17" select="quick">	</span><span class="qname" start="18" select="quick">	</span><span class="whitespace" start="19"> </span><span class="step" start="20">//</span><span class="qname" start="22" select="quick">l:l10n</span><span class="filter" start="28" pair-end="44" select="quick">[</span><span class="axis" start="29">@</span><span class="qname" start="30" select="quick">language</span><span class="op" start="38">=</span><span class="variable" start="39" select="quick">$lang</span><span class="filter" start="44">]</span><span class="whitespace" start="45">
                      </span><span class="qname" start="46" select="quick">	</span><span class="qname" start="47" select="quick">	</span><span class="qname" start="48" select="quick">	</span><span class="whitespace" start="49"> </span><span class="step" start="50">/</span><span class="qname" start="51" select="quick">l:letters</span><span class="op" start="60">,</span><span class="whitespace" start="61">
                      </span><span class="qname" start="62" select="quick">	</span><span class="whitespace" start="63">       </span><a href="xslt/base/common/l10n.xsl.html#f?{http://docbook.org/xslt/ns/extension}load-locale" class="solar"><span class="function" start="70" pair-end="89" select="quick">f:load-locale</span></a><span class="parenthesis">(</span><span class="variable" start="84" select="quick">$lang</span><span class="parenthesis" start="89">)</span><span class="step" start="90">/</span><span class="qname" start="91" select="quick">l:letters</span><span class="parenthesis" start="100">)</span><span class="filter" start="101" pair-end="103" select="quick">[</span><span class="numeric" start="102">1</span><span class="filter" start="103">]</span><span class="z">"</span><span id="wx8301" class="sc">/&gt;</span></span><span class="txt">
    
    </span><span class="ww" id="w8303"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w8307"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$l10n.letters</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w8317"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$l10n.letters</span><span class="z">"</span><span id="wx8325" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx8329" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8331"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w8335"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w8339"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">No "</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx8345" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w8347"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lang</span><span class="z">"</span><span id="wx8355" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w8357"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">" localization of index grouping letters exists</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx8363" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w8365"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w8369"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$lang</span><span class="whitespace" start="6"> </span><span class="op" start="7">=</span><span class="whitespace" start="8"> </span><span class="op">'</span><span class="literal" start="9">en</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w8385"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx8391" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx8395" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ww" id="w8397"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w8401"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">; using "en".</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx8407" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx8411" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx8415" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx8419" class="ec">&gt;</span></span><span class="txt">
        
        </span><span class="ww" id="w8421"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="94" select="quick">(</span><a href="xslt/base/common/l10n.xsl.html#v?localization" class="solar"><span class="variable" start="2" select="quick">$localization</span></a><span class="whitespace" start="15">
                     </span><span class="qname" start="16" select="quick">	</span><span class="qname" start="17" select="quick">	</span><span class="qname" start="18" select="quick">	</span><span class="whitespace" start="19"> </span><span class="step" start="20">//</span><span class="qname" start="22" select="quick">l:l10n</span><span class="filter" start="28" pair-end="43" select="quick">[</span><span class="axis" start="29">@</span><span class="qname" start="30" select="quick">language</span><span class="op" start="38">=</span><span class="op">'</span><span class="literal" start="39">en</span><span class="op">'</span><span class="filter" start="43">]</span><span class="whitespace" start="44">
                     </span><span class="qname" start="45" select="quick">	</span><span class="qname" start="46" select="quick">	</span><span class="qname" start="47" select="quick">	</span><span class="whitespace" start="48"> </span><span class="step" start="49">/</span><span class="qname" start="50" select="quick">l:letters</span><span class="op" start="59">,</span><span class="whitespace" start="60">
                     </span><span class="qname" start="61" select="quick">	</span><span class="qname" start="62" select="quick">	</span><span class="qname" start="63" select="quick">	</span><span class="whitespace" start="64"> </span><a href="xslt/base/common/l10n.xsl.html#f?{http://docbook.org/xslt/ns/extension}load-locale" class="solar"><span class="function" start="65" pair-end="83" select="quick">f:load-locale</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="79">en</span><span class="op">'</span><span class="parenthesis" start="83">)</span><span class="step" start="84">/</span><span class="qname" start="85" select="quick">l:letters</span><span class="parenthesis" start="94">)</span><span class="filter" start="95" pair-end="97" select="quick">[</span><span class="numeric" start="96">1</span><span class="filter" start="97">]</span><span class="z">"</span><span id="wx8470" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx8474" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx8478" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx8482" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8484"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$letters</span><span class="step" start="9">/</span><span class="qname" start="10" select="quick">l:l</span><span class="filter" start="13" pair-end="23" select="quick">[</span><span class="axis" start="14">@</span><span class="qname" start="15" select="quick">i</span><span class="op" start="16">=</span><span class="variable" start="17" select="quick">$index</span><span class="filter" start="23">]</span><span class="filter" start="24" pair-end="26" select="quick">[</span><span class="numeric" start="25">1</span><span class="filter" start="26">]</span><span class="z">"</span><span id="wx8503" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx8507" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w8513"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:pad</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8529"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Constructs a string of the specified length</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx8535" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8537"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8541"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Returns a string of </span><span class="ww" id="w8545"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">char</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx8551" class="ec">&gt;</span></span><span class="txt"> characters
that is </span><span class="ww" id="w8553"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">count</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx8559" class="ec">&gt;</span></span><span class="txt"> characters long.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8563" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx8567" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8569"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8573"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8577"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w8581"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">count</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx8587" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w8589"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8593"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The desired string length.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8599" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx8603" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx8607" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w8609"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w8613"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">char</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx8619" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w8621"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8625"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The single character that should be repeated to construct the string.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8631" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx8635" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx8639" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx8643" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx8647" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8649"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w8653"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The string of the specified length.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx8659" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx8663" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx8667" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w8669"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}pad">f:pad</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w8679"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?count">count</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span id="wx8693" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w8695"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?char">char</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx8709" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w8711"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w8715"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$count</span><span class="whitespace" start="7"> </span><span class="qname" start="8" select="quick">&amp;</span><span class="op" start="9">gt</span><span class="qname" start="11" select="quick">;</span><span class="whitespace" start="12"> </span><span class="numeric" start="13">4</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w8731"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8739" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8741"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8749" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8751"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8759" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8761"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8769" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8771"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pad" class="solar"><span class="function" start="1" pair-end="24" select="quick">f:pad</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$count</span><span class="whitespace" start="13"> </span><span class="op" start="14">-</span><span class="whitespace" start="15"> </span><span class="numeric" start="16">4</span><span class="op" start="17">,</span><span class="whitespace" start="18"> </span><span class="variable" start="19" select="quick">$char</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span id="wx8789" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx8793" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8795"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$count</span><span class="whitespace" start="7"> </span><span class="qname" start="8" select="quick">&amp;</span><span class="op" start="9">gt</span><span class="qname" start="11" select="quick">;</span><span class="whitespace" start="12"> </span><span class="numeric" start="13">3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w8811"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8819" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8821"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8829" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8831"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8839" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8841"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pad" class="solar"><span class="function" start="1" pair-end="24" select="quick">f:pad</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$count</span><span class="whitespace" start="13"> </span><span class="op" start="14">-</span><span class="whitespace" start="15"> </span><span class="numeric" start="16">3</span><span class="op" start="17">,</span><span class="whitespace" start="18"> </span><span class="variable" start="19" select="quick">$char</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span id="wx8859" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx8863" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8865"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$count</span><span class="whitespace" start="7"> </span><span class="qname" start="8" select="quick">&amp;</span><span class="op" start="9">gt</span><span class="qname" start="11" select="quick">;</span><span class="whitespace" start="12"> </span><span class="numeric" start="13">2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w8881"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8889" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8891"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8899" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8901"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pad" class="solar"><span class="function" start="1" pair-end="24" select="quick">f:pad</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$count</span><span class="whitespace" start="13"> </span><span class="op" start="14">-</span><span class="whitespace" start="15"> </span><span class="numeric" start="16">2</span><span class="op" start="17">,</span><span class="whitespace" start="18"> </span><span class="variable" start="19" select="quick">$char</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span id="wx8919" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx8923" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8925"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$count</span><span class="whitespace" start="7"> </span><span class="qname" start="8" select="quick">&amp;</span><span class="op" start="9">gt</span><span class="qname" start="11" select="quick">;</span><span class="whitespace" start="12"> </span><span class="numeric" start="13">1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w8941"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8949" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w8951"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pad" class="solar"><span class="function" start="1" pair-end="24" select="quick">f:pad</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$count</span><span class="whitespace" start="13"> </span><span class="op" start="14">-</span><span class="whitespace" start="15"> </span><span class="numeric" start="16">1</span><span class="op" start="17">,</span><span class="whitespace" start="18"> </span><span class="variable" start="19" select="quick">$char</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span id="wx8969" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx8973" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w8975"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$count</span><span class="whitespace" start="7"> </span><span class="qname" start="8" select="quick">&amp;</span><span class="op" start="9">gt</span><span class="qname" start="11" select="quick">;</span><span class="whitespace" start="12"> </span><span class="numeric" start="13">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w8991"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$char</span><span class="z">"</span><span id="wx8999" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx9003" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx9007" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx9011" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w9017"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:find-node-in-sequence</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9033"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Finds a particular node in a sequence of nodes</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx9039" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9041"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9045"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function searches a sequence of nodes and returns the position
of a particular node in that sequence. The function returns 0 if the
node is not found.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9051" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9053"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Note that this function searches based on node identity, the target
node must literally be in the sequence; it is not sufficient, for example,
for another node with the same name to appear in the sequence.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9059" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx9063" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9065"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9069"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9073"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w9077"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">nodes</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx9083" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9085"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9089"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The sequence to search.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9095" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx9099" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx9103" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9105"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w9109"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">target</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx9115" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9117"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9121"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node to find.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9127" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx9131" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx9135" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9137"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w9141"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">start</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx9147" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9149"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9153"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The position at which to begin searching.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9159" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx9163" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx9167" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx9171" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx9175" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9177"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9181"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The ordinal position of the node, or 0 if it is not found.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9187" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx9191" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx9195" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9197"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}find-node-in-sequence">f:find-node-in-sequence</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w9213"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?nodes">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span id="wx9227" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w9229"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?target">target</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()</span><span class="z">"</span><span id="wx9243" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w9245"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?start">start</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span id="wx9259" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w9261"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w9265"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$start</span><span class="whitespace" start="7"> </span><span class="qname" start="8" select="quick">&amp;</span><span class="op" start="9">gt</span><span class="qname" start="11" select="quick">;</span><span class="whitespace" start="12"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="13" pair-end="25" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="19" select="quick">$nodes</span><span class="parenthesis" start="25">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">0</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx9286" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w9288"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$nodes</span><span class="filter" start="7" pair-end="14" select="quick">[</span><span class="variable" start="8" select="quick">$start</span><span class="filter" start="14">]</span><span class="whitespace" start="15"> </span><span class="op" start="16">is</span><span class="whitespace" start="18"> </span><span class="variable" start="19" select="quick">$target</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w9305"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$start</span><span class="z">"</span><span id="wx9313" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx9317" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w9319"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w9323"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}find-node-in-sequence" class="solar"><span class="function" start="1" pair-end="81" select="quick">f:find-node-in-sequence</span></a><span class="parenthesis">(</span><span class="variable" start="25" select="quick">$nodes</span><span class="op" start="31">,</span><span class="whitespace" start="32"> </span><span class="variable" start="33" select="quick">$target</span><span class="op" start="40">,</span><span class="whitespace" start="41">
                      </span><span class="qname" start="42" select="quick">	</span><span class="qname" start="43" select="quick">	</span><span class="qname" start="44" select="quick">	</span><span class="whitespace" start="45">                            </span><span class="variable" start="73" select="quick">$start</span><span class="op" start="79">+</span><span class="numeric" start="80">1</span><span class="parenthesis" start="81">)</span><span class="z">"</span><span id="wx9346" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx9350" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx9354" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx9358" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w9364"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:find-toc-params</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9380"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Finds the TOC parameters for an element</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx9386" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9388"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9392"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the matching TOC parameter element in the
specified list. The matching parameter is the one with the longest
matching path.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9398" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx9402" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9404"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9408"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9412"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w9416"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx9422" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9424"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9428"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node to use for matching, usually the context node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9434" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx9438" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx9442" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9444"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w9448"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx9454" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9456"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9460"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The TOC parameter list.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9466" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx9470" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx9474" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx9478" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx9482" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9484"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9488"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The matching node or the empty sequence if no node matches.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9494" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx9498" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx9502" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9504"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}find-toc-params">f:find-toc-params</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()?</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w9520"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx9534" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w9536"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc">toc</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span id="wx9550" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w9552"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?location">location</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}xpath-location" class="solar"><span class="function" start="1" pair-end="23" select="quick">f:xpath-location</span></a><span class="parenthesis">(</span><span class="variable" start="18" select="quick">$node</span><span class="parenthesis" start="23">)</span><span class="z">"</span><span id="wx9569" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w9571"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension/private}find-toc-params" class="solar"><span class="function" start="1" pair-end="42" select="quick">fp:find-toc-params</span></a><span class="parenthesis">(</span><span class="variable" start="20" select="quick">$node</span><span class="op" start="25">,</span><span class="whitespace" start="26"> </span><span class="variable" start="27" select="quick">$toc</span><span class="op" start="31">,</span><span class="whitespace" start="32"> </span><span class="variable" start="33" select="quick">$location</span><span class="parenthesis" start="42">)</span><span class="z">"</span><span id="wx9588" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx9592" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9594"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension/private}find-toc-params">fp:find-toc-params</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()?</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w9610"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx9624" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w9626"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc">toc</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span id="wx9640" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w9642"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?location">location</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx9656" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w9658"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w9662"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc</span><span class="filter" start="5" pair-end="21" select="quick">[</span><span class="axis" start="6">@</span><span class="qname" start="7" select="quick">path</span><span class="op" start="11">=</span><span class="variable" start="12" select="quick">$location</span><span class="filter" start="21">]</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w9678"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc</span><span class="filter" start="5" pair-end="21" select="quick">[</span><span class="axis" start="6">@</span><span class="qname" start="7" select="quick">path</span><span class="op" start="11">=</span><span class="variable" start="12" select="quick">$location</span><span class="filter" start="21">]</span><span class="filter" start="22" pair-end="24" select="quick">[</span><span class="numeric" start="23">1</span><span class="filter" start="24">]</span><span class="z">"</span><span id="wx9695" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx9699" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w9701"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="29" select="quick">not</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="5" pair-end="28" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$location</span><span class="op" start="23">,</span><span class="whitespace" start="24"> </span><span class="op">'</span><span class="literal" start="25">/</span><span class="op">'</span><span class="parenthesis" start="28">)</span><span class="parenthesis" start="29">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w9722"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx9731" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx9735" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w9737"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w9741"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension/private}find-toc-params" class="solar"><span class="function" start="1" pair-end="76" select="quick">fp:find-toc-params</span></a><span class="parenthesis">(</span><span class="variable" start="20" select="quick">$node</span><span class="op" start="25">,</span><span class="whitespace" start="26"> </span><span class="variable" start="27" select="quick">$toc</span><span class="op" start="31">,</span><span class="whitespace" start="32">
                      </span><span class="qname" start="33" select="quick">	</span><span class="qname" start="34" select="quick">	</span><span class="qname" start="35" select="quick">	</span><span class="whitespace" start="36">         </span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="45" pair-end="75" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="61" select="quick">$location</span><span class="op" start="70">,</span><span class="whitespace" start="71"> </span><span class="op">'</span><span class="literal" start="72">/</span><span class="op">'</span><span class="parenthesis" start="75">)</span><span class="parenthesis" start="76">)</span><span class="z">"</span><span id="wx9770" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx9774" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx9778" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx9782" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w9788"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:trim-common-uri-paths</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9804"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Trim common leading path information from a URI</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx9810" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9812"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9816"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function trims common leading path components from a
relative URI.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9822" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx9826" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9828"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9832"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9836"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w9840"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">uriA</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx9846" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9848"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9852"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The first URI.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9858" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx9862" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx9866" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9868"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w9872"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">uriB</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx9878" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w9880"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9884"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The second URI.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9890" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx9894" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx9898" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx9902" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx9906" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9908"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w9912"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w9916"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">uriA</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx9922" class="ec">&gt;</span></span><span class="txt"> trimmed of all the initial path
components that it has in common with </span><span class="ww" id="w9924"><span class="es">&lt;</span><span class="en">parameter</span><span class="scx">&gt;</span><span class="txt">uriB</span><span class="ez">&lt;/</span><span class="cl">parameter</span><span id="wx9930" class="ec">&gt;</span></span><span class="txt">.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx9934" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx9938" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx9942" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w9944"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}trim-common-uri-paths">f:trim-common-uri-paths</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w9960"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?uriA">uriA</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string?</span><span class="z">"</span><span id="wx9974" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w9976"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?uriB">uriB</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string?</span><span class="z">"</span><span id="wx9990" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w9992"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w9996"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="type" start="1">empty</span><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$uriA</span><span class="parenthesis" start="12">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w10009"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$uriB</span><span class="z">"</span><span id="wx10017" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx10021" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w10023"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="25" select="quick">not</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="5" pair-end="24" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="14" select="quick">$uriA</span><span class="op" start="19">,</span><span class="whitespace" start="20"> </span><span class="op">'</span><span class="literal" start="21">/</span><span class="op">'</span><span class="parenthesis" start="24">)</span><span class="parenthesis" start="25">)</span><span class="whitespace" start="26">
                                    </span><span class="op" start="47">or</span><span class="whitespace" start="49"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="50" pair-end="74" select="quick">not</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="54" pair-end="73" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="63" select="quick">$uriB</span><span class="op" start="68">,</span><span class="whitespace" start="69"> </span><span class="op">'</span><span class="literal" start="70">/</span><span class="op">'</span><span class="parenthesis" start="73">)</span><span class="parenthesis" start="74">)</span><span class="whitespace" start="75">
                </span><span class="qname" start="76" select="quick">	</span><span class="qname" start="77" select="quick">	</span><span class="whitespace" start="78">    </span><span class="op" start="82">or</span><span class="whitespace" start="84"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="85" pair-end="112" select="quick">substring-before</span></a><span class="parenthesis">(</span><span class="variable" start="102" select="quick">$uriA</span><span class="op" start="107">,</span><span class="whitespace" start="108"> </span><span class="op">'</span><span class="literal" start="109">/</span><span class="op">'</span><span class="parenthesis" start="112">)</span><span class="whitespace" start="113"> 
                </span><span class="qname" start="115" select="quick">	</span><span class="qname" start="116" select="quick">	</span><span class="whitespace" start="117">       </span><span class="op" start="124">!=</span><span class="whitespace" start="126"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="127" pair-end="154" select="quick">substring-before</span></a><span class="parenthesis">(</span><span class="variable" start="144" select="quick">$uriB</span><span class="op" start="149">,</span><span class="whitespace" start="150"> </span><span class="op">'</span><span class="literal" start="151">/</span><span class="op">'</span><span class="parenthesis" start="154">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w10089"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$uriA</span><span class="z">"</span><span id="wx10097" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx10101" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w10103"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w10107"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}trim-common-uri-paths" class="solar"><span class="function" start="1" pair-end="104" select="quick">f:trim-common-uri-paths</span></a><span class="parenthesis">(</span><span class="whitespace" start="25">
                      </span><span class="qname" start="26" select="quick">	</span><span class="qname" start="27" select="quick">	</span><span class="qname" start="28" select="quick">	</span><span class="whitespace" start="29">        </span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="37" pair-end="63" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="53" select="quick">$uriA</span><span class="op" start="58">,</span><span class="whitespace" start="59"> </span><span class="op">'</span><span class="literal" start="60">/</span><span class="op">'</span><span class="parenthesis" start="63">)</span><span class="op" start="64">,</span><span class="whitespace" start="65">
                      </span><span class="qname" start="66" select="quick">	</span><span class="qname" start="67" select="quick">	</span><span class="qname" start="68" select="quick">	</span><span class="whitespace" start="69">        </span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="77" pair-end="103" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="93" select="quick">$uriB</span><span class="op" start="98">,</span><span class="whitespace" start="99"> </span><span class="op">'</span><span class="literal" start="100">/</span><span class="op">'</span><span class="parenthesis" start="103">)</span><span class="parenthesis" start="104">)</span><span class="z">"</span><span id="wx10146" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx10150" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx10154" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx10158" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w10164"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:filename-basename</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w10180"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Return the filename part of a directory name</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx10186" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10188"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w10192"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the last path component of a directory name
or URI in a hierarchical URI scheme.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx10198" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w10200"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function assumes all filenames are really URIs and always
expects “/” to be the component separator.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx10206" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx10210" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10212"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w10216"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w10220"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w10224"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">filename</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx10230" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w10232"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w10236"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The full filename with path or other components.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx10242" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx10246" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx10250" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx10254" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx10258" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10260"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w10264"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The last path component.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx10270" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx10274" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10276"><span class="es">&lt;</span><span class="en">u:unittests</span><span class="z"> </span><span class="atn">function</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:filename-basename</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10286"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w10290"><span class="es">&lt;</span><span class="en">u:param</span><span class="scx">&gt;</span><span class="txt">/path/to/my/file.ext</span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx10296" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w10298"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'file.ext'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx10304" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx10308" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w10310"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w10314"><span class="es">&lt;</span><span class="en">u:param</span><span class="scx">&gt;</span><span class="txt">http://path/spec/to/here</span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx10320" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w10322"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'here'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx10328" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx10332" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w10334"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w10338"><span class="es">&lt;</span><span class="en">u:param</span><span class="scx">&gt;</span><span class="txt">noslashes</span><span class="ez">&lt;/</span><span class="cl">u:param</span><span id="wx10344" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w10346"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'noslashes'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx10352" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx10356" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">u:unittests</span><span id="wx10360" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx10364" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10366"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}filename-basename">f:filename-basename</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10382"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?filename">filename</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10396" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w10398"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-tokenize" class="solar"><span class="function" start="1" pair-end="23" select="quick">tokenize</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$filename</span><span class="op" start="19">,</span><span class="op">'</span><span class="literal" start="20">/</span><span class="op">'</span><span class="parenthesis" start="23">)</span><span class="filter" start="24" pair-end="31" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="25" pair-end="30" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="30">)</span><span class="filter" start="31">]</span><span class="z">"</span><span id="wx10418" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx10422" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10424"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}filename-extension">f:filename-extension</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10440"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?filename">filename</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10454" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> Make sure we only look at the base name... </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w10460"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?basefn">basefn</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}filename-basename" class="solar"><span class="function" start="1" pair-end="30" select="quick">f:filename-basename</span></a><span class="parenthesis">(</span><span class="variable" start="21" select="quick">$filename</span><span class="parenthesis" start="30">)</span><span class="z">"</span><span id="wx10477" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w10479"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w10483"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="1" pair-end="22" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$basefn</span><span class="op" start="17">,</span><span class="whitespace" start="18"> </span><span class="op">'</span><span class="literal" start="19">.</span><span class="op">'</span><span class="parenthesis" start="22">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w10501"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-tokenize" class="solar"><span class="function" start="1" pair-end="22" select="quick">tokenize</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$basefn</span><span class="op" start="17">,</span><span class="op">'</span><span class="literal" start="18">\.</span><span class="op">'</span><span class="parenthesis" start="22">)</span><span class="filter" start="23" pair-end="30" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="24" pair-end="29" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="29">)</span><span class="filter" start="30">]</span><span class="z">"</span><span id="wx10521" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx10525" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w10527"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w10531"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1"></span><span class="op">'</span><span class="z">"</span><span id="wx10541" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx10545" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx10549" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx10553" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w10559"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}length-magnitude">f:length-magnitude</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:decimal?</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10575"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?length">length</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10589" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w10591"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-matches" class="solar"><span class="function" start="1" pair-end="46" select="quick">matches</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-normalize-space" class="solar"><span class="function" start="9" pair-end="32" select="quick">normalize-space</span></a><span class="parenthesis">(</span><span class="variable" start="25" select="quick">$length</span><span class="parenthesis" start="32">)</span><span class="op" start="33">,</span><span class="whitespace" start="34"> </span><span class="op">'</span><span class="literal" start="35">^[0-9\.]+</span><span class="op">'</span><span class="parenthesis" start="46">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w10612"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-replace" class="solar"><span class="function" start="1" pair-end="75" select="quick">replace</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-normalize-space" class="solar"><span class="function" start="9" pair-end="32" select="quick">normalize-space</span></a><span class="parenthesis">(</span><span class="variable" start="25" select="quick">$length</span><span class="parenthesis" start="32">)</span><span class="op" start="33">,</span><span class="whitespace" start="34">
                      </span><span class="qname" start="35" select="quick">	</span><span class="qname" start="36" select="quick">	</span><span class="qname" start="37" select="quick">	</span><span class="whitespace" start="38">          </span><span class="op">'</span><span class="literal" start="48">(^[0-9\.]+).*</span><span class="op">'</span><span class="op" start="63">,</span><span class="whitespace" start="64">
                      </span><span class="qname" start="65" select="quick">	</span><span class="qname" start="66" select="quick">	</span><span class="qname" start="67" select="quick">	</span><span class="qname" start="68" select="quick">	</span><span class="whitespace" start="69">  </span><span class="op">'</span><span class="literal" start="71">$1</span><span class="op">'</span><span class="parenthesis" start="75">)</span><span class="z">"</span><span id="wx10645" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx10649" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx10653" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w10659"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}length-units">f:length-units</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10669"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?length">length</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10683" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w10685"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}length-units" class="solar"><span class="function" start="1" pair-end="29" select="quick">f:length-units</span></a><span class="parenthesis">(</span><span class="variable" start="16" select="quick">$length</span><span class="op" start="23">,</span><span class="whitespace" start="24"> </span><span class="op">'</span><span class="literal" start="25">px</span><span class="op">'</span><span class="parenthesis" start="29">)</span><span class="z">"</span><span id="wx10701" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx10705" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10707"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}length-units">f:length-units</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10717"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?length">length</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10731" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w10733"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?default.units">default.units</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10747" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w10749"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?units">units</span><span class="z">"</span><span class="z">
                              </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="54" select="quick">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-matches" class="solar"><span class="function" start="5" pair-end="53" select="quick">matches</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-normalize-space" class="solar"><span class="function" start="13" pair-end="36" select="quick">normalize-space</span></a><span class="parenthesis">(</span><span class="variable" start="29" select="quick">$length</span><span class="parenthesis" start="36">)</span><span class="op" start="37">,</span><span class="whitespace" start="38"> </span><span class="op">'</span><span class="literal" start="39">^[0-9\.]+.*?</span><span class="op">'</span><span class="parenthesis" start="53">)</span><span class="parenthesis" start="54">)</span><span class="whitespace" start="55">
                                              </span><span class="op" start="80">then</span><span class="whitespace" start="84"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-replace" class="solar"><span class="function" start="85" pair-end="140" select="quick">replace</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-normalize-space" class="solar"><span class="function" start="93" pair-end="116" select="quick">normalize-space</span></a><span class="parenthesis">(</span><span class="variable" start="109" select="quick">$length</span><span class="parenthesis" start="116">)</span><span class="op" start="117">,</span><span class="op">'</span><span class="literal" start="118">^[0-9\.]+(.*?)$</span><span class="op">'</span><span class="op" start="135">,</span><span class="op">'</span><span class="literal" start="136">$1</span><span class="op">'</span><span class="parenthesis" start="140">)</span><span class="whitespace" start="141">
                                              </span><span class="op" start="166">else</span><span class="whitespace" start="170"> </span><span class="op">'</span><span class="literal" start="171"></span><span class="op">'</span><span class="z">"</span><span id="wx10802" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w10804"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w10808"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w10824"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$default.units</span><span class="z">"</span><span id="wx10832" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx10836" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w10838"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w10842"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="z">"</span><span id="wx10850" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx10854" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx10858" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx10862" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w10868"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}length-spec">f:length-spec</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10878"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?length">length</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10892" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w10894"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}length-spec" class="solar"><span class="function" start="1" pair-end="28" select="quick">f:length-spec</span></a><span class="parenthesis">(</span><span class="variable" start="15" select="quick">$length</span><span class="op" start="22">,</span><span class="whitespace" start="23"> </span><span class="op">'</span><span class="literal" start="24">px</span><span class="op">'</span><span class="parenthesis" start="28">)</span><span class="z">"</span><span id="wx10910" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx10914" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w10916"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}length-spec">f:length-spec</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w10926"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?length">length</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10940" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w10942"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?default.units">default.units</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx10956" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w10958"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?magnitude">magnitude</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}length-magnitude" class="solar"><span class="function" start="1" pair-end="27" select="quick">f:length-magnitude</span></a><span class="parenthesis">(</span><span class="variable" start="20" select="quick">$length</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx10975" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w10977"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?units">units</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}length-units" class="solar"><span class="function" start="1" pair-end="23" select="quick">f:length-units</span></a><span class="parenthesis">(</span><span class="variable" start="16" select="quick">$length</span><span class="parenthesis" start="23">)</span><span class="z">"</span><span id="wx10994" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w10996"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="z">"</span><span id="wx11004" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w11006"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w11010"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="op" start="7">=</span><span class="op">'</span><span class="literal" start="8">cm</span><span class="op">'</span><span class="whitespace" start="12">
                                    </span><span class="op" start="33">or</span><span class="whitespace" start="35"> </span><span class="variable" start="36" select="quick">$units</span><span class="op" start="42">=</span><span class="op">'</span><span class="literal" start="43">mm</span><span class="op">'</span><span class="whitespace" start="47">
                                    </span><span class="op" start="68">or</span><span class="whitespace" start="70"> </span><span class="variable" start="71" select="quick">$units</span><span class="op" start="77">=</span><span class="op">'</span><span class="literal" start="78">in</span><span class="op">'</span><span class="whitespace" start="82">
                                    </span><span class="op" start="103">or</span><span class="whitespace" start="105"> </span><span class="variable" start="106" select="quick">$units</span><span class="op" start="112">=</span><span class="op">'</span><span class="literal" start="113">pt</span><span class="op">'</span><span class="whitespace" start="117">
                                    </span><span class="op" start="138">or</span><span class="whitespace" start="140"> </span><span class="variable" start="141" select="quick">$units</span><span class="op" start="147">=</span><span class="op">'</span><span class="literal" start="148">pc</span><span class="op">'</span><span class="whitespace" start="152">
                                    </span><span class="op" start="173">or</span><span class="whitespace" start="175"> </span><span class="variable" start="176" select="quick">$units</span><span class="op" start="182">=</span><span class="op">'</span><span class="literal" start="183">px</span><span class="op">'</span><span class="whitespace" start="187">
                                    </span><span class="op" start="208">or</span><span class="whitespace" start="210"> </span><span class="variable" start="211" select="quick">$units</span><span class="op" start="217">=</span><span class="op">'</span><span class="literal" start="218">em</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11072"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="z">"</span><span id="wx11080" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11084" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11086"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11102"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$default.units</span><span class="z">"</span><span id="wx11110" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11114" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11116"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11120"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w11124"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Unrecognized unit of measure: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx11130" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w11132"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="z">"</span><span id="wx11140" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w11142"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">; using </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx11148" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w11150"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$default.units</span><span class="z">"</span><span id="wx11158" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx11162" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w11164"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$default.units</span><span class="z">"</span><span id="wx11172" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx11176" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx11180" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx11184" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w11190"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}length-in-points">f:length-in-points</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:decimal</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w11206"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?length">length</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx11220" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w11222"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}length-in-points" class="solar"><span class="function" start="1" pair-end="31" select="quick">f:length-in-points</span></a><span class="parenthesis">(</span><span class="variable" start="20" select="quick">$length</span><span class="op" start="27">,</span><span class="whitespace" start="28"> </span><span class="numeric" start="29">10</span><span class="parenthesis" start="31">)</span><span class="z">"</span><span id="wx11236" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx11240" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w11242"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}length-in-points">f:length-in-points</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:decimal</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w11258"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?length">length</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx11272" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w11274"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?em.size">em.size</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:decimal</span><span class="z">"</span><span id="wx11288" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w11290"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?magnitude">magnitude</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}length-magnitude" class="solar"><span class="function" start="1" pair-end="27" select="quick">f:length-magnitude</span></a><span class="parenthesis">(</span><span class="variable" start="20" select="quick">$length</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx11307" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w11309"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?units">units</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}length-units" class="solar"><span class="function" start="1" pair-end="23" select="quick">f:length-units</span></a><span class="parenthesis">(</span><span class="variable" start="16" select="quick">$length</span><span class="parenthesis" start="23">)</span><span class="z">"</span><span id="wx11326" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w11328"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w11332"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">pt</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11348"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="z">"</span><span id="wx11356" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11360" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11362"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">cm</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11378"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="whitespace" start="11"> </span><span class="op" start="12">div</span><span class="whitespace" start="15"> </span><span class="numeric" start="16">2.54</span><span class="whitespace" start="20"> </span><span class="op" start="21">*</span><span class="whitespace" start="22"> </span><span class="numeric" start="23">72.0</span><span class="z">"</span><span id="wx11394" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11398" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11400"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">mm</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11416"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="whitespace" start="11"> </span><span class="op" start="12">div</span><span class="whitespace" start="15"> </span><span class="numeric" start="16">25.4</span><span class="whitespace" start="20"> </span><span class="op" start="21">*</span><span class="whitespace" start="22"> </span><span class="numeric" start="23">72.0</span><span class="z">"</span><span id="wx11432" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11436" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11438"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">in</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11454"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="whitespace" start="11"> </span><span class="op" start="12">*</span><span class="whitespace" start="13"> </span><span class="numeric" start="14">72.0</span><span class="z">"</span><span id="wx11466" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11470" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11472"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">pc</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11488"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="whitespace" start="11"> </span><span class="op" start="12">*</span><span class="whitespace" start="13"> </span><span class="numeric" start="14">12.0</span><span class="z">"</span><span id="wx11500" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11504" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11506"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">px</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11522"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="whitespace" start="11"> </span><span class="op" start="12">div</span><span class="whitespace" start="15"> </span><a href="xslt/base/html/param.xsl.html#v?pixels.per.inch" class="solar"><span class="variable" start="16" select="quick">$pixels.per.inch</span></a><span class="whitespace" start="32"> </span><span class="op" start="33">*</span><span class="whitespace" start="34"> </span><span class="numeric" start="35">72.0</span><span class="z">"</span><span id="wx11538" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11542" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11544"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="whitespace" start="7"> </span><span class="op" start="8">=</span><span class="whitespace" start="9"> </span><span class="op">'</span><span class="literal" start="10">em</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11560"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="whitespace" start="11"> </span><span class="op" start="12">*</span><span class="whitespace" start="13"> </span><span class="variable" start="14" select="quick">$em.size</span><span class="z">"</span><span id="wx11572" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11576" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11578"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11582"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w11586"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Unrecognized unit of measure: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx11592" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w11594"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$units</span><span class="z">"</span><span id="wx11602" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w11604"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">; using pt.</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx11610" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx11614" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w11616"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$magnitude</span><span class="z">"</span><span id="wx11624" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx11628" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx11632" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx11636" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w11642"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}first-in-context">f:first-in-context</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w11658"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx11672" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w11674"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx11688" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w11690"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pnode">pnode</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">preceding::</span><span class="qname" start="18" select="quick">*</span><span class="filter" start="19" pair-end="49" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="20" pair-end="31" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="context" start="30">.</span><span class="parenthesis" start="31">)</span><span class="op" start="32">=</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="33" pair-end="48" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="variable" start="43" select="quick">$node</span><span class="parenthesis" start="48">)</span><span class="filter" start="49">]</span><span class="filter" start="50" pair-end="52" select="quick">[</span><span class="numeric" start="51">1</span><span class="filter" start="52">]</span><span class="z">"</span><span id="wx11721" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w11723"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="11" select="quick">(</span><span class="variable" start="5" select="quick">$pnode</span><span class="parenthesis" start="11">)</span><span class="whitespace" start="12">
                      </span><span class="qname" start="13" select="quick">	</span><span class="qname" start="14" select="quick">	</span><span class="qname" start="15" select="quick">	</span><span class="op" start="16">then</span><span class="whitespace" start="20"> </span><span class="parenthesis" start="21" pair-end="46" select="quick">(</span><span class="variable" start="22" select="quick">$pnode</span><span class="whitespace" start="28"> </span><span class="qname" start="29" select="quick">&amp;</span><span class="op" start="30">lt</span><span class="qname" start="32" select="quick">;</span><span class="qname" start="33" select="quick">&amp;</span><span class="op" start="34">lt</span><span class="qname" start="36" select="quick">;</span><span class="whitespace" start="37"> </span><span class="variable" start="38" select="quick">$context</span><span class="parenthesis" start="46">)</span><span class="whitespace" start="47"> </span><span class="op" start="48">or</span><span class="whitespace" start="50"> </span><span class="parenthesis" start="51" pair-end="70" select="quick">(</span><span class="variable" start="52" select="quick">$pnode</span><span class="whitespace" start="58"> </span><span class="op" start="59">eq</span><span class="whitespace" start="61"> </span><span class="variable" start="62" select="quick">$context</span><span class="parenthesis" start="70">)</span><span class="whitespace" start="71">
                      </span><span class="qname" start="72" select="quick">	</span><span class="qname" start="73" select="quick">	</span><span class="qname" start="74" select="quick">	</span><span class="op" start="75">else</span><span class="whitespace" start="79"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="80" pair-end="85" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="85">)</span><span class="z">"</span><span id="wx11772" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx11776" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w11782"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}resolve-barename-xpointer">f:resolve-barename-xpointer</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()?</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w11798"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx11812" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w11814"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?href">href</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx11828" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w11830"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w11834"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-starts-with" class="solar"><span class="function" start="1" pair-end="22" select="quick">starts-with</span></a><span class="parenthesis">(</span><span class="variable" start="13" select="quick">$href</span><span class="op" start="18">,</span><span class="op">'</span><span class="literal" start="19">#</span><span class="op">'</span><span class="parenthesis" start="22">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11851"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="7" pair-end="42" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="11">id</span><span class="op">'</span><span class="op" start="15">,</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="16" pair-end="41" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="32" select="quick">$href</span><span class="op" start="37">,</span><span class="op">'</span><span class="literal" start="38">#</span><span class="op">'</span><span class="parenthesis" start="41">)</span><span class="parenthesis" start="42">)</span><span class="z">"</span><span id="wx11875" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11879" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11881"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="1" pair-end="19" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$href</span><span class="op" start="15">,</span><span class="op">'</span><span class="literal" start="16">#</span><span class="op">'</span><span class="parenthesis" start="19">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11898"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?uri">uri</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="1" pair-end="27" select="quick">substring-before</span></a><span class="parenthesis">(</span><span class="variable" start="18" select="quick">$href</span><span class="op" start="23">,</span><span class="op">'</span><span class="literal" start="24">#</span><span class="op">'</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx11919" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w11921"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?id">id</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="1" pair-end="26" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$href</span><span class="op" start="22">,</span><span class="op">'</span><span class="literal" start="23">#</span><span class="op">'</span><span class="parenthesis" start="26">)</span><span class="z">"</span><span id="wx11942" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w11944"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?doc">doc</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="21" select="quick">document</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$uri</span><span class="op" start="14">,</span><span class="whitespace" start="15"> </span><span class="variable" start="16" select="quick">$node</span><span class="parenthesis" start="21">)</span><span class="z">"</span><span id="wx11964" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w11966"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$doc</span><span class="step" start="5">/</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="6" pair-end="18" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="10">id</span><span class="op">'</span><span class="op" start="14">,</span><span class="variable" start="15" select="quick">$id</span><span class="parenthesis" start="18">)</span><span class="z">"</span><span id="wx11983" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx11987" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w11989"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w11993"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?doc">doc</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="22" select="quick">document</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$href</span><span class="op" start="15">,</span><span class="whitespace" start="16"> </span><span class="variable" start="17" select="quick">$node</span><span class="parenthesis" start="22">)</span><span class="z">"</span><span id="wx12013" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w12015"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$doc</span><span class="step" start="5">/</span><span class="qname" start="6" select="quick">*</span><span class="filter" start="7" pair-end="9" select="quick">[</span><span class="numeric" start="8">1</span><span class="filter" start="9">]</span><span class="z">"</span><span id="wx12028" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx12032" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx12036" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx12040" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w12046"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}fake-eval-avt">f:fake-eval-avt</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w12062"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?value">value</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx12076" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w12078"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w12082"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="1" pair-end="20" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$value</span><span class="op" start="16">,</span><span class="op">'</span><span class="literal" start="17">{</span><span class="op">'</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w12099"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pre">pre</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="1" pair-end="28" select="quick">substring-before</span></a><span class="parenthesis">(</span><span class="variable" start="18" select="quick">$value</span><span class="op" start="24">,</span><span class="op">'</span><span class="literal" start="25">{</span><span class="op">'</span><span class="parenthesis" start="28">)</span><span class="z">"</span><span id="wx12120" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w12122"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?var">var</span><span class="z">"</span><span class="z">
              		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="1" pair-end="49" select="quick">substring-after</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="17" pair-end="44" select="quick">substring-before</span></a><span class="parenthesis">(</span><span class="variable" start="34" select="quick">$value</span><span class="op" start="40">,</span><span class="op">'</span><span class="literal" start="41">}</span><span class="op">'</span><span class="parenthesis" start="44">)</span><span class="op" start="45">,</span><span class="op">'</span><span class="literal" start="46">{</span><span class="op">'</span><span class="parenthesis" start="49">)</span><span class="z">"</span><span id="wx12150" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w12152"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?rest">rest</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="1" pair-end="27" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$value</span><span class="op" start="23">,</span><span class="op">'</span><span class="literal" start="24">}</span><span class="op">'</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx12173" class="sc">/&gt;</span></span><span class="txt">

      </span><span class="ww" id="w12175"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?exp">exp</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w12185"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w12189"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$var</span><span class="whitespace" start="5"> </span><span class="op" start="6">=</span><span class="whitespace" start="7"> </span><span class="op">'</span><span class="literal" start="8">$title.font.family</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w12205"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?title.font.family" class="solar"><span class="variable" start="1" select="quick">$title.font.family</span></a><span class="z">"</span><span id="wx12213" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx12217" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w12219"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$var</span><span class="whitespace" start="5"> </span><span class="op" start="6">=</span><span class="whitespace" start="7"> </span><span class="op">'</span><span class="literal" start="8">$body.font.family</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w12235"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?body.font.family" class="solar"><span class="variable" start="1" select="quick">$body.font.family</span></a><span class="z">"</span><span id="wx12243" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx12247" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w12249"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$var</span><span class="whitespace" start="5"> </span><span class="op" start="6">=</span><span class="whitespace" start="7"> </span><span class="op">'</span><span class="literal" start="8">$body.fontset</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w12265"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/html.xsl.html#v?body.fontset" class="solar"><span class="variable" start="1" select="quick">$body.fontset</span></a><span class="z">"</span><span id="wx12273" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx12277" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w12279"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w12283"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	      </span><span class="ww" id="w12287"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Unrecognized value in f:fake-eval-avt(): </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx12293" class="ec">&gt;</span></span><span class="txt">
	      </span><span class="ww" id="w12295"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$var</span><span class="z">"</span><span id="wx12303" class="sc">/&gt;</span></span><span class="txt">
	    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx12307" class="ec">&gt;</span></span><span class="txt">
	    </span><span class="ww" id="w12309"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1"></span><span class="op">'</span><span class="z">"</span><span id="wx12319" class="sc">/&gt;</span></span><span class="txt">
	  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx12323" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx12327" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx12331" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w12333"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="40" select="quick">concat</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$pre</span><span class="op" start="12">,</span><span class="variable" start="13" select="quick">$exp</span><span class="op" start="17">,</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}fake-eval-avt" class="solar"><span class="function" start="18" pair-end="39" select="quick">f:fake-eval-avt</span></a><span class="parenthesis">(</span><span class="variable" start="34" select="quick">$rest</span><span class="parenthesis" start="39">)</span><span class="parenthesis" start="40">)</span><span class="z">"</span><span id="wx12351" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx12355" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w12357"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w12361"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$value</span><span class="z">"</span><span id="wx12369" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx12373" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx12377" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx12381" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w12383"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}lineNumbering">f:lineNumbering</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w12393"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx12407" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w12409"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?name">name</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx12423" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w12425"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pis">pis</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">processing-instruction()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w12441"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w12445"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/docbook.xsl.html#v?stylesheet.result.type" class="solar"><span class="variable" start="1" select="quick">$stylesheet.result.type</span></a><span class="whitespace" start="24"> </span><span class="op" start="25">=</span><span class="whitespace" start="26"> </span><span class="op">'</span><span class="literal" start="27">fo</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w12461"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="step" start="9">/</span><span class="node" start="10" pair-end="39" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="33">dbfo</span><span class="op">'</span><span class="parenthesis" start="39">)</span><span class="z">"</span><span id="wx12476" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx12480" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w12482"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w12486"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$context</span><span class="step" start="9">/</span><span class="node" start="10" pair-end="41" select="quick">processing-instruction</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="33">dbhtml</span><span class="op">'</span><span class="parenthesis" start="41">)</span><span class="z">"</span><span id="wx12501" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx12505" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx12509" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx12513" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w12515"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?params">params</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}find-toc-params" class="solar"><span class="function" start="1" pair-end="43" select="quick">f:find-toc-params</span></a><span class="parenthesis">(</span><span class="variable" start="19" select="quick">$context</span><span class="op" start="27">,</span><span class="whitespace" start="28"> </span><a href="xslt/base/html/param.xsl.html#v?linenumbering" class="solar"><span class="variable" start="29" select="quick">$linenumbering</span></a><span class="parenthesis" start="43">)</span><span class="z">"</span><span id="wx12535" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> everyNth is a special case... </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w12541"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w12545"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$name</span><span class="whitespace" start="6"> </span><span class="op" start="7">=</span><span class="whitespace" start="8"> </span><span class="op">'</span><span class="literal" start="9">everyNth</span><span class="op">'</span><span class="whitespace" start="19">
                                    </span><span class="op" start="40">and</span><span class="whitespace" start="43"> </span><span class="variable" start="44" select="quick">$context</span><span class="step" start="52">/</span><span class="axis" start="53">@</span><span class="qname" start="54" select="quick">linenumbering</span><span class="whitespace" start="67"> </span><span class="op" start="68">=</span><span class="whitespace" start="69"> </span><span class="op">'</span><span class="literal" start="70">unnumbered</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w12574"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">0</span><span class="z">"</span><span id="wx12582" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx12586" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w12588"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w12592"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?cfgval">cfgval</span><span class="z">"</span><span class="z">
                                  </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="38" select="quick">(</span><span class="variable" start="5" select="quick">$params</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">*</span><span class="filter" start="15" pair-end="37" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="16" pair-end="28" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="27">.</span><span class="parenthesis" start="28">)</span><span class="whitespace" start="29"> </span><span class="op" start="30">=</span><span class="whitespace" start="31"> </span><span class="variable" start="32" select="quick">$name</span><span class="filter" start="37">]</span><span class="parenthesis" start="38">)</span><span class="whitespace" start="39">
                                                  </span><span class="op" start="68">then</span><span class="whitespace" start="72"> </span><span class="variable" start="73" select="quick">$params</span><span class="step" start="80">/</span><span class="axis" start="81">@</span><span class="qname" start="82" select="quick">*</span><span class="filter" start="83" pair-end="105" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="84" pair-end="96" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="95">.</span><span class="parenthesis" start="96">)</span><span class="whitespace" start="97"> </span><span class="op" start="98">=</span><span class="whitespace" start="99"> </span><span class="variable" start="100" select="quick">$name</span><span class="filter" start="105">]</span><span class="whitespace" start="106">
                                                  </span><span class="op" start="135">else</span><span class="whitespace" start="139"> </span><span class="op">'</span><span class="literal" start="140"></span><span class="op">'</span><span class="z">"</span><span id="wx12646" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w12648"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pival">pival</span><span class="z">"</span><span class="z">
                                  </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pi" class="solar"><span class="function" start="1" pair-end="43" select="quick">f:pi</span></a><span class="parenthesis">(</span><span class="variable" start="6" select="quick">$pis</span><span class="op" start="10">,</span><span class="whitespace" start="11"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="12" pair-end="42" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="19">linenumbering.</span><span class="op">'</span><span class="op" start="35">,</span><span class="whitespace" start="36"> </span><span class="variable" start="37" select="quick">$name</span><span class="parenthesis" start="42">)</span><span class="parenthesis" start="43">)</span><span class="z">"</span><span class="z">
                                  </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string?</span><span class="z">"</span><span id="wx12682" class="sc">/&gt;</span></span><span class="txt">

      </span><span class="z">&lt;!--</span><span class="cm"> FIXME: why doesn't f:pi return a proper empty sequence!?
      &lt;xsl:message&gt;
        &lt;xsl:text&gt;pi? &lt;/xsl:text&gt;
        &lt;xsl:value-of select="empty($pival)"/&gt;
        &lt;xsl:text&gt;:&lt;/xsl:text&gt;
        &lt;xsl:value-of select="count($pival)"/&gt;
        &lt;xsl:text&gt;:&lt;/xsl:text&gt;
        &lt;xsl:value-of select="not($pival)"/&gt;
        &lt;xsl:text&gt;:&lt;/xsl:text&gt;
        &lt;xsl:value-of select="$pival = ''"/&gt;
        &lt;xsl:text&gt;:&lt;/xsl:text&gt;
        &lt;xsl:value-of select="empty(f:pi($pis, $name))"/&gt;
      &lt;/xsl:message&gt;
      </span><span class="z">--&gt;</span><span class="txt">

      </span><span class="ww" id="w12688"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w12692"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="type" start="1">empty</span><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$pival</span><span class="parenthesis" start="13">)</span><span class="whitespace" start="14"> </span><span class="op" start="15">or</span><span class="whitespace" start="17"> </span><span class="variable" start="18" select="quick">$pival</span><span class="whitespace" start="24"> </span><span class="op" start="25">=</span><span class="whitespace" start="26"> </span><span class="op">'</span><span class="literal" start="27"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="z">&lt;!--</span><span class="cm">
          &lt;xsl:message&gt;
            &lt;xsl:value-of select="$name"/&gt;
            &lt;xsl:text&gt;=&lt;/xsl:text&gt;
            &lt;xsl:value-of select="$cfgval"/&gt;
            &lt;xsl:text&gt; (cfg)&lt;/xsl:text&gt;
          &lt;/xsl:message&gt;
          </span><span class="z">--&gt;</span><span class="txt">
          </span><span class="ww" id="w12719"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$cfgval</span><span class="z">"</span><span id="wx12727" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx12731" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w12733"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="z">&lt;!--</span><span class="cm">
          &lt;xsl:message&gt;
            &lt;xsl:value-of select="$name"/&gt;
            &lt;xsl:text&gt;=&lt;/xsl:text&gt;
            &lt;xsl:value-of select="$pival"/&gt;
            &lt;xsl:text&gt; (pi)&lt;/xsl:text&gt;
          &lt;/xsl:message&gt;
          </span><span class="z">--&gt;</span><span class="txt">
          </span><span class="ww" id="w12741"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pival</span><span class="z">"</span><span id="wx12749" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx12753" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx12757" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx12761" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx12765" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx12769" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ================================================================== </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w12775"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:title</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w12791"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the title element of the specified node</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx12797" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w12799"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w12803"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This function returns the </span><span class="ww" id="w12807"><span class="es">&lt;</span><span class="en">emphasis</span><span class="scx">&gt;</span><span class="txt">string value</span><span class="ez">&lt;/</span><span class="cl">emphasis</span><span id="wx12813" class="ec">&gt;</span></span><span class="txt"> of the
</span><span class="ww" id="w12815"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">title</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx12821" class="ec">&gt;</span></span><span class="txt"> (or the element
that serves as the title) of the specified node. If the node does
not have a title, it returns “???”.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx12825" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx12829" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w12831"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w12835"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w12839"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w12843"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx12849" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w12851"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w12855"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node for which the title will be extracted.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx12861" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx12865" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx12869" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx12873" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx12877" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w12879"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w12883"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The string value of the title of the specified node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx12889" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx12893" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w12895"><span class="es">&lt;</span><span class="en">u:unittests</span><span class="z"> </span><span class="atn">function</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w12905"><span class="es">&lt;</span><span class="en">u:test</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w12909"><span class="es">&lt;</span><span class="en">u:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">mydoc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w12919"><span class="es">&lt;</span><span class="en">db:book</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w12923"><span class="es">&lt;</span><span class="en">db:title</span><span class="scx">&gt;</span><span class="txt">Some Title</span><span class="ez">&lt;/</span><span class="cl">db:title</span><span id="wx12929" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ww" id="w12931"><span class="es">&lt;</span><span class="en">db:chapter</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w12935"><span class="es">&lt;</span><span class="en">db:title</span><span class="scx">&gt;</span><span class="txt">Some Chapter Title</span><span class="ez">&lt;/</span><span class="cl">db:title</span><span id="wx12941" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w12943"><span class="es">&lt;</span><span class="en">db:para</span><span class="scx">&gt;</span><span class="txt">My para.</span><span class="ez">&lt;/</span><span class="cl">db:para</span><span id="wx12949" class="ec">&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="cl">db:chapter</span><span id="wx12953" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">db:book</span><span id="wx12957" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">u:variable</span><span id="wx12961" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w12963"><span class="es">&lt;</span><span class="en">u:param</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="av">$mydoc/db:book</span><span class="z">"</span><span id="wx12971" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w12973"><span class="es">&lt;</span><span class="en">u:result</span><span class="scx">&gt;</span><span class="txt">'Some Title'</span><span class="ez">&lt;/</span><span class="cl">u:result</span><span id="wx12979" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">u:test</span><span id="wx12983" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">u:unittests</span><span id="wx12987" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx12991" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w12993"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}title">f:title</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w13009"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()</span><span class="z">"</span><span id="wx13023" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w13025"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w13035"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span id="wx13049" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx13053" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w13055"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w13059"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="1" pair-end="14" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$title</span><span class="parenthesis" start="14">)</span><span class="whitespace" start="15"> </span><span class="op" start="16">=</span><span class="whitespace" start="17"> </span><span class="op">'</span><span class="literal" start="18"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13078"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">???</span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx13084" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w13086"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?verbosity" class="solar"><span class="variable" start="1" select="quick">$verbosity</span></a><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">gt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w13102"><span class="es">&lt;</span><span class="enxsl">xsl:message</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w13106"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt">Warning: no title for root element: </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx13112" class="ec">&gt;</span></span><span class="txt">
	  </span><span class="ww" id="w13114"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="1" pair-end="17" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="12" select="quick">$node</span><span class="parenthesis" start="17">)</span><span class="z">"</span><span id="wx13125" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:message</span><span id="wx13129" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx13133" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13137" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13139"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13143"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx13151" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx13155" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx13159" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx13163" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w13169"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:biblioentry-label</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w13185"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the label for a bibliography entry</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx13191" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w13193"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w13197"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template formats the label for a bibliography entry
(</span><span class="ww" id="w13201"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">biblioentry</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx13207" class="ec">&gt;</span></span><span class="txt"> or </span><span class="ww" id="w13209"><span class="es">&lt;</span><span class="en">tag</span><span class="scx">&gt;</span><span class="txt">bibliomixed</span><span class="ez">&lt;/</span><span class="cl">tag</span><span id="wx13215" class="ec">&gt;</span></span><span class="txt">).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx13219" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx13223" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w13225"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w13229"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w13233"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w13237"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">node</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx13243" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w13245"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w13249"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The node containing the bibliography entry, defaults to the current
context node.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx13255" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx13259" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx13263" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx13267" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx13271" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w13273"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w13277"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The bibliography entry label.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx13283" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx13287" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx13291" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w13293"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}biblioentry-label">f:biblioentry-label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w13303"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span id="wx13311" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w13313"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w13317"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?bibliography.numbered" class="solar"><span class="variable" start="1" select="quick">$bibliography.numbered</span></a><span class="whitespace" start="23"> </span><span class="op" start="24">!=</span><span class="whitespace" start="26"> </span><span class="numeric" start="27">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13331"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:biblioentry-label-count</span><span class="z">"</span><span id="wx13345" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13349" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13351"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-node-name" class="solar"><span class="function" start="1" pair-end="28" select="quick">node-name</span></a><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$node</span><span class="step" start="16">/</span><span class="axis" start="17">child::</span><span class="qname" start="24" select="quick">*</span><span class="filter" start="25" pair-end="27" select="quick">[</span><span class="numeric" start="26">1</span><span class="filter" start="27">]</span><span class="parenthesis" start="28">)</span><span class="whitespace" start="29"> </span><span class="op" start="30">=</span><span class="whitespace" start="31"> </span><span class="function" start="32" pair-end="52" select="quick">xs:QName</span><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="41">db:abbrev</span><span class="op">'</span><span class="parenthesis" start="52">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13379"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="qname" start="7" select="quick">db:abbrev</span><span class="filter" start="16" pair-end="18" select="quick">[</span><span class="numeric" start="17">1</span><span class="filter" start="18">]</span><span class="z">"</span><span id="wx13392" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13396" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13398"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">xreflabel</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13411"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">xreflabel</span><span class="z">"</span><span id="wx13422" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13426" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13428"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="step" start="6">/</span><span class="axis" start="7">@</span><span class="qname" start="8" select="quick">id</span><span class="whitespace" start="10"> </span><span class="op" start="11">or</span><span class="whitespace" start="13"> </span><span class="variable" start="14" select="quick">$node</span><span class="step" start="19">/</span><span class="axis" start="20">@</span><span class="qname" start="21" select="quick">xml:id</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13448"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="25" select="quick">(</span><span class="variable" start="2" select="quick">$node</span><span class="step" start="7">/</span><span class="axis" start="8">@</span><span class="qname" start="9" select="quick">id</span><span class="op" start="11">|</span><span class="variable" start="12" select="quick">$node</span><span class="step" start="17">/</span><span class="axis" start="18">@</span><span class="qname" start="19" select="quick">xml:id</span><span class="parenthesis" start="25">)</span><span class="filter" start="26" pair-end="28" select="quick">[</span><span class="numeric" start="27">1</span><span class="filter" start="28">]</span><span class="z">"</span><span id="wx13469" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13473" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13475"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt"></span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt"></span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx13485" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx13489" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx13493" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w13495"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:biblioentry-label-count</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w13511"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w13515"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:bibliolist</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13526"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:bibliolist</span><span class="z">"</span><span class="z"> </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:biblioentry|db:bibliomixed</span><span class="z">"</span><span class="z">
            		  </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx13552" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13556" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13558"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13562"><span class="es">&lt;</span><span class="enxsl">xsl:number</span><span class="z"> </span><span class="atn">from</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:bibliography</span><span class="z">"</span><span class="z"> </span><span class="atn">count</span><span class="atneq">=</span><span class="z">"</span><span class="av">db:biblioentry|db:bibliomixed</span><span class="z">"</span><span class="z">
            		  </span><span class="atn">level</span><span class="atneq">=</span><span class="z">"</span><span class="av">any</span><span class="z">"</span><span class="z"> </span><span class="atn">format</span><span class="atneq">=</span><span class="z">"</span><span class="av">1</span><span class="z">"</span><span id="wx13588" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx13592" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx13596" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx13600" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w13606"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}pi-attribute">f:pi-attribute</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w13622"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pis">pis</span><span class="z">"</span><span id="wx13630" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w13632"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attribute">attribute</span><span class="z">"</span><span id="wx13640" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w13642"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pi-attribute" class="solar"><span class="function" start="1" pair-end="33" select="quick">f:pi-attribute</span></a><span class="parenthesis">(</span><span class="variable" start="16" select="quick">$pis</span><span class="op" start="20">,</span><span class="variable" start="21" select="quick">$attribute</span><span class="op" start="31">,</span><span class="numeric" start="32">1</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span id="wx13657" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx13661" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w13663"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}pi-attribute">f:pi-attribute</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w13679"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pis">pis</span><span class="z">"</span><span id="wx13687" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w13689"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?attribute">attribute</span><span class="z">"</span><span id="wx13697" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w13699"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?count">count</span><span class="z">"</span><span id="wx13707" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w13709"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w13713"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="type" start="1">empty</span><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$pis</span><span class="parenthesis" start="11">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="z">&lt;!--</span><span class="cm"> no pis </span><span class="z">--&gt;</span><span class="txt">
      </span><span class="ww" id="w13730"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1"></span><span class="op">'</span><span class="z">"</span><span id="wx13740" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13744" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13746"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$count</span><span class="whitespace" start="7"> </span><span class="qname" start="8" select="quick">&amp;</span><span class="op" start="9">gt</span><span class="qname" start="11" select="quick">;</span><span class="whitespace" start="12"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="13" pair-end="23" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="19" select="quick">$pis</span><span class="parenthesis" start="23">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="z">&lt;!--</span><span class="cm"> not found </span><span class="z">--&gt;</span><span class="txt">
      </span><span class="ww" id="w13769"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1"></span><span class="op">'</span><span class="z">"</span><span id="wx13779" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13783" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w13785"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w13789"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pi">pi</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w13799"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$pis</span><span class="filter" start="5" pair-end="12" select="quick">[</span><span class="variable" start="6" select="quick">$count</span><span class="filter" start="12">]</span><span class="z">"</span><span id="wx13810" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx13814" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w13816"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?pivalue">pivalue</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w13826"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="1" pair-end="33" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="8"> </span><span class="op">'</span><span class="op" start="11">,</span><span class="whitespace" start="12"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-normalize-space" class="solar"><span class="function" start="13" pair-end="32" select="quick">normalize-space</span></a><span class="parenthesis">(</span><span class="variable" start="29" select="quick">$pi</span><span class="parenthesis" start="32">)</span><span class="parenthesis" start="33">)</span><span class="z">"</span><span id="wx13845" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx13849" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w13851"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w13855"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-contains" class="solar"><span class="function" start="1" pair-end="47" select="quick">contains</span></a><span class="parenthesis">(</span><span class="variable" start="10" select="quick">$pivalue</span><span class="op" start="18">,</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="19" pair-end="46" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="26"> </span><span class="op">'</span><span class="op" start="29">,</span><span class="whitespace" start="30"> </span><span class="variable" start="31" select="quick">$attribute</span><span class="op" start="41">,</span><span class="whitespace" start="42"> </span><span class="op">'</span><span class="literal" start="43">=</span><span class="op">'</span><span class="parenthesis" start="46">)</span><span class="parenthesis" start="47">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w13883"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?rest">rest</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="1" pair-end="53" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$pivalue</span><span class="op" start="25">,</span><a href="http://www.w3.org/TR/xpath-functions/#func-concat" class="solar"><span class="function" start="26" pair-end="52" select="quick">concat</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="33"> </span><span class="op">'</span><span class="op" start="36">,</span><span class="whitespace" start="37"> </span><span class="variable" start="38" select="quick">$attribute</span><span class="op" start="48">,</span><span class="op">'</span><span class="literal" start="49">=</span><span class="op">'</span><span class="parenthesis" start="52">)</span><span class="parenthesis" start="53">)</span><span class="z">"</span><span id="wx13914" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w13916"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?quote">quote</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="1" pair-end="20" select="quick">substring</span></a><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$rest</span><span class="op" start="16">,</span><span class="numeric" start="17">1</span><span class="op" start="18">,</span><span class="numeric" start="19">1</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span id="wx13937" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w13939"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="1" pair-end="43" select="quick">substring-before</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="18" pair-end="35" select="quick">substring</span></a><span class="parenthesis">(</span><span class="variable" start="28" select="quick">$rest</span><span class="op" start="33">,</span><span class="numeric" start="34">2</span><span class="parenthesis" start="35">)</span><span class="op" start="36">,</span><span class="variable" start="37" select="quick">$quote</span><span class="parenthesis" start="43">)</span><span class="z">"</span><span id="wx13957" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx13961" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w13963"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w13967"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pi-attribute" class="solar"><span class="function" start="1" pair-end="42" select="quick">f:pi-attribute</span></a><span class="parenthesis">(</span><span class="variable" start="16" select="quick">$pis</span><span class="op" start="20">,</span><span class="variable" start="21" select="quick">$attribute</span><span class="op" start="31">,</span><span class="variable" start="32" select="quick">$count</span><span class="whitespace" start="38"> </span><span class="op" start="39">+</span><span class="whitespace" start="40"> </span><span class="numeric" start="41">1</span><span class="parenthesis" start="42">)</span><span class="z">"</span><span id="wx13986" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx13990" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx13994" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx13998" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx14002" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx14006" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w14012"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:xpointer-idref</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14028"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Returns the ID portion of an XPointer</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx14034" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14036"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14040"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w14044"><span class="es">&lt;</span><span class="en">function</span><span class="z"> </span><span class="atn">role</span><span class="atneq">=</span><span class="z">"</span><span class="av">template</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">xpointer-idref</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx14056" class="ec">&gt;</span></span><span class="txt"> template
returns the
ID portion of an XPointer which is a pointer to an ID within the current
document, or the empty string if it is not.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx14060" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14062"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">In other words, </span><span class="ww" id="w14066"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">xpointer-idref</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx14072" class="ec">&gt;</span></span><span class="txt"> returns
</span><span class="ww" id="w14074"><span class="es">&lt;</span><span class="en">quote</span><span class="scx">&gt;</span><span class="txt">foo</span><span class="ez">&lt;/</span><span class="cl">quote</span><span id="wx14080" class="ec">&gt;</span></span><span class="txt"> when passed either </span><span class="ww" id="w14082"><span class="es">&lt;</span><span class="en">literal</span><span class="scx">&gt;</span><span class="txt">#foo</span><span class="ez">&lt;/</span><span class="cl">literal</span><span id="wx14088" class="ec">&gt;</span></span><span class="txt">
or </span><span class="ww" id="w14090"><span class="es">&lt;</span><span class="en">literal</span><span class="scx">&gt;</span><span class="txt">#xpointer(id('foo'))</span><span class="ez">&lt;/</span><span class="cl">literal</span><span id="wx14096" class="ec">&gt;</span></span><span class="txt">, otherwise it returns
the empty string.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx14100" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx14104" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14106"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14110"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14114"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w14118"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">xpointer</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx14124" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w14126"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14130"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The string containing the XPointer.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx14136" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx14140" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx14144" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx14148" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx14152" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14154"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14158"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The ID portion of the XPointer or an empty string.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx14164" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx14168" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx14172" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14174"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}xpointer-idref">f:xpointer-idref</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w14184"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?xpointer">xpointer</span><span class="z">"</span><span id="wx14192" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w14194"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w14198"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-starts-with" class="solar"><span class="function" start="1" pair-end="39" select="quick">starts-with</span></a><span class="parenthesis">(</span><span class="variable" start="13" select="quick">$xpointer</span><span class="op" start="22">,</span><span class="whitespace" start="23"> </span><span class="op">'</span><span class="literal" start="24">#xpointer(id(</span><span class="op">'</span><span class="parenthesis" start="39">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w14216"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?rest">rest</span><span class="z">"</span><span class="z">
              		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="1" pair-end="43" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$xpointer</span><span class="op" start="26">,</span><span class="whitespace" start="27"> </span><span class="op">'</span><span class="literal" start="28">#xpointer(id(</span><span class="op">'</span><span class="parenthesis" start="43">)</span><span class="z">"</span><span id="wx14238" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w14240"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?quote">quote</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="1" pair-end="22" select="quick">substring</span></a><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$rest</span><span class="op" start="16">,</span><span class="whitespace" start="17"> </span><span class="numeric" start="18">1</span><span class="op" start="19">,</span><span class="whitespace" start="20"> </span><span class="numeric" start="21">1</span><span class="parenthesis" start="22">)</span><span class="z">"</span><span id="wx14263" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w14265"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-before" class="solar"><span class="function" start="1" pair-end="60" select="quick">substring-before</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="18" pair-end="51" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="34" select="quick">$xpointer</span><span class="op" start="43">,</span><span class="whitespace" start="44"> </span><span class="variable" start="45" select="quick">$quote</span><span class="parenthesis" start="51">)</span><span class="op" start="52">,</span><span class="whitespace" start="53"> </span><span class="variable" start="54" select="quick">$quote</span><span class="parenthesis" start="60">)</span><span class="z">"</span><span id="wx14285" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx14289" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w14291"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-starts-with" class="solar"><span class="function" start="1" pair-end="27" select="quick">starts-with</span></a><span class="parenthesis">(</span><span class="variable" start="13" select="quick">$xpointer</span><span class="op" start="22">,</span><span class="whitespace" start="23"> </span><span class="op">'</span><span class="literal" start="24">#</span><span class="op">'</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w14309"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="1" pair-end="31" select="quick">substring-after</span></a><span class="parenthesis">(</span><span class="variable" start="17" select="quick">$xpointer</span><span class="op" start="26">,</span><span class="whitespace" start="27"> </span><span class="op">'</span><span class="literal" start="28">#</span><span class="op">'</span><span class="parenthesis" start="31">)</span><span class="z">"</span><span id="wx14325" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx14329" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w14331"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="z">&lt;!--</span><span class="cm"> otherwise it's a pointer to some other document </span><span class="z">--&gt;</span><span class="txt">
      </span><span class="ww" id="w14339"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1"></span><span class="op">'</span><span class="z">"</span><span id="wx14349" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx14353" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx14357" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx14361" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w14367"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}findid">f:findid</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w14383"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?id">id</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:string</span><span class="z">"</span><span id="wx14397" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w14399"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?context">context</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()</span><span class="z">"</span><span id="wx14413" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w14415"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="1" pair-end="30" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="5">id</span><span class="op">'</span><span class="op" start="9">,</span><span class="whitespace" start="10"> </span><span class="variable" start="11" select="quick">$id</span><span class="op" start="14">,</span><span class="whitespace" start="15"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-root" class="solar"><span class="function" start="16" pair-end="29" select="quick">root</span></a><span class="parenthesis">(</span><span class="variable" start="21" select="quick">$context</span><span class="parenthesis" start="29">)</span><span class="parenthesis" start="30">)</span><span class="z">"</span><span id="wx14437" class="sc">/&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx14441" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w14447"><span class="es">&lt;</span><span class="en">doc:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">f:verbatim-trim-blank-lines</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14463"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Return true if blank lines should be trimmed off the end of the verbatim element</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx14469" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14471"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14475"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The </span><span class="ww" id="w14479"><span class="es">&lt;</span><span class="en">function</span><span class="scx">&gt;</span><span class="txt">verbatim-trim-blank-lines</span><span class="ez">&lt;/</span><span class="cl">function</span><span id="wx14485" class="ec">&gt;</span></span><span class="txt"> tests to see if trailing blank
lines should be removed from the specified verbatim environment.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx14489" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx14493" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14495"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14499"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14503"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w14507"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">verbatim</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx14513" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w14515"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14519"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The verbatim environment.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx14525" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx14529" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx14533" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx14537" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx14541" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14543"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w14547"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">True if they should, false otherwise</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx14553" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx14557" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:function</span><span id="wx14561" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w14563"><span class="es">&lt;</span><span class="enxsl">xsl:function</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="fname" id="f?{http://docbook.org/xslt/ns/extension}verbatim-trim-blank-lines">f:verbatim-trim-blank-lines</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w14579"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?verbatim">verbatim</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span id="wx14593" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w14595"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?trim">trim</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}pi" class="solar"><span class="function" start="1" pair-end="58" select="quick">f:pi</span></a><span class="parenthesis">(</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}in-scope-pis" class="solar"><span class="function" start="6" pair-end="40" select="quick">f:in-scope-pis</span></a><span class="parenthesis">(</span><span class="variable" start="21" select="quick">$verbatim</span><span class="op" start="30">,</span><span class="whitespace" start="31"> </span><span class="op">'</span><span class="literal" start="32">dbhtml</span><span class="op">'</span><span class="parenthesis" start="40">)</span><span class="op" start="41">,</span><span class="whitespace" start="42"> </span><span class="op">'</span><span class="literal" start="43">trim-verbatim</span><span class="op">'</span><span class="parenthesis" start="58">)</span><span class="z">"</span><span id="wx14625" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w14627"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w14631"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="type" start="1">empty</span><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$trim</span><span class="parenthesis" start="12">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w14644"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="1" pair-end="34" select="quick">string</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?verbatim.trim.blank.lines" class="solar"><span class="variable" start="8" select="quick">$verbatim.trim.blank.lines</span></a><span class="parenthesis" start="34">)</span><span class="whitespace" start="35"> </span><span class="op" start="36">!=</span><span class="whitespace" start="38"> </span><span class="op">'</span><span class="literal" start="39">0</span><span class="op">'</span><span class="z">"</span><span id="wx14661" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx14665" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w14667"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w14671"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-string" class="solar"><span class="function" start="1" pair-end="21" select="quick">string</span></a><span class="parenthesis">(</span><span class="variable" start="8" select="quick">$trim</span><span class="filter" start="13" pair-end="20" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-last" class="solar"><span class="function" start="14" pair-end="19" select="quick">last</span></a><span class="parenthesis">(</span><span class="parenthesis" start="19">)</span><span class="filter" start="20">]</span><span class="parenthesis" start="21">)</span><span class="whitespace" start="22"> </span><span class="op" start="23">!=</span><span class="whitespace" start="25"> </span><span class="op">'</span><span class="literal" start="26">0</span><span class="op">'</span><span class="z">"</span><span id="wx14693" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx14697" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx14701" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:function</span><span id="wx14705" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx14709" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
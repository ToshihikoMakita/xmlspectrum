<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>autotoc.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                		</span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:fn</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:h</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:mp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode/private</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:t</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:tp</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template/private</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                		</span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fn h m mp t tp xs</span><span class="z">"</span><span class="z">
                                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ********************************************************************
     $Id: autotoc.xsl 8562 2009-12-17 23:10:25Z nwalsh $
     ********************************************************************

     This file is part of the XSL DocBook Stylesheet distribution.
     See ../README or http://nwalsh.com/docbook/xsl/ for copyright
     and other information.

     ******************************************************************** </span><span class="z">--&gt;</span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w101"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w117"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for processing ToC and LoTs</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx123" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w125"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w129"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to process Tables of Contents and Lists of Titles.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx135" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx139" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx143" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w145"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.listitem.type">toc.listitem.type</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w155"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w159"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?toc.list.type" class="solar"><span class="variable" start="1" select="quick">$toc.list.type</span></a><span class="whitespace" start="15"> </span><span class="op" start="16">=</span><span class="whitespace" start="17"> </span><span class="op">'</span><span class="literal" start="18">dl</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">dt</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx177" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w179"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">li</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx185" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx189" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx193" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> this is just hack because dl and ul aren't completely isomorphic </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ww" id="w199"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.dd.type">toc.dd.type</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w209"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w213"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?toc.list.type" class="solar"><span class="variable" start="1" select="quick">$toc.list.type</span></a><span class="whitespace" start="15"> </span><span class="op" start="16">=</span><span class="whitespace" start="17"> </span><span class="op">'</span><span class="literal" start="18">dl</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">dd</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx231" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w233"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt"></span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx239" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx243" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx247" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w253"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">tp:make-toc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w269"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make a ToC</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx275" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w277"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w281"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template formats a Table of Contents.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx287" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx291" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w293"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w297"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w301"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w305"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc-context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx311" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w313"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w317"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The context node of the ToC.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx323" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx327" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx331" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w333"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w337"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc-context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx343" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w345"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w349"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The context node of the ToC.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx355" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx359" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx363" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx367" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx371" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w373"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w377"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx383" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx387" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx391" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w393"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template/private}make-toc">tp:make-toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w403"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx417" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w419"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.title">toc.title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx435" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w437"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?nodes">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx452" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w454"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.title">toc.title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w464"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w474"><span class="es">&lt;</span><span class="en">p</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w478"><span class="es">&lt;</span><span class="en">b</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w482"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w492"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">TableofContents</span><span class="ez">&lt;/</span><span class="clxsl">xsl:with-param</span><span id="wx504" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx508" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">b</span><span id="wx512" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">p</span><span id="wx516" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx520" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx524" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w526"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w530"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?manual.toc" class="solar"><span class="variable" start="1" select="quick">$manual.toc</span></a><span class="whitespace" start="12"> </span><span class="op" start="13">!=</span><span class="whitespace" start="15"> </span><span class="op">'</span><span class="literal" start="16"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w546"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?id">id</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/functions.xsl.html#f?{http://docbook.org/xslt/ns/extension}node-id" class="solar"><span class="function" start="1" pair-end="12" select="quick">f:node-id</span></a><span class="parenthesis">(</span><span class="context" start="11">.</span><span class="parenthesis" start="12">)</span><span class="z">"</span><span id="wx563" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w565"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc">toc</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-document" class="solar"><span class="function" start="1" pair-end="24" select="quick">document</span></a><span class="parenthesis">(</span><a href="xslt/base/html/param.xsl.html#v?manual.toc" class="solar"><span class="variable" start="10" select="quick">$manual.toc</span></a><span class="op" start="21">,</span><span class="whitespace" start="22"> </span><span class="context" start="23">.</span><span class="parenthesis" start="24">)</span><span class="z">"</span><span id="wx585" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w587"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?tocentry">tocentry</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc</span><span class="step" start="5">//</span><span class="qname" start="7" select="quick">db:tocentry</span><span class="filter" start="18" pair-end="31" select="quick">[</span><span class="axis" start="19">@</span><span class="qname" start="20" select="quick">linkend</span><span class="op" start="27">=</span><span class="variable" start="28" select="quick">$id</span><span class="filter" start="31">]</span><span class="z">"</span><span id="wx609" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w611"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tocentry</span><span class="whitespace" start="10"> </span><span class="op" start="11">and</span><span class="whitespace" start="14"> </span><span class="variable" start="15" select="quick">$tocentry</span><span class="step" start="24">/</span><span class="qname" start="25" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w627"><span class="es">&lt;</span><span class="en">div</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w637"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.title</span><span class="z">"</span><span id="wx645" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w647"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?toc.list.type" class="solar"><span class="variable" start="1" select="quick">$toc.list.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w659"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">class</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">toc</span><span class="op">'</span><span class="z">"</span><span id="wx675" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ww" id="w677"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template}manual-toc" class="solar"><span class="tcall">t:manual-toc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w687"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">tocentry</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tocentry</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">*</span><span class="filter" start="12" pair-end="14" select="quick">[</span><span class="numeric" start="13">1</span><span class="filter" start="14">]</span><span class="z">"</span><span id="wx706" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx710" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx714" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">div</span><span id="wx718" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx722" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx726" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w728"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w732"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$nodes</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w742"><span class="es">&lt;</span><span class="en">div</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w752"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.title</span><span class="z">"</span><span id="wx760" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ww" id="w762"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?toc.list.type" class="solar"><span class="variable" start="1" select="quick">$toc.list.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	    </span><span class="ww" id="w774"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">class</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">toc</span><span class="op">'</span><span class="z">"</span><span id="wx790" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ww" id="w792"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w808"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx822" class="sc">/&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx826" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx830" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">div</span><span id="wx834" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx838" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx842" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx846" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx850" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w856"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:make-lots</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w872"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make LoTs</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx878" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w880"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w884"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template formats Lists of Titles.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx890" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx894" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w896"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w900"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w904"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w908"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc.params</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx914" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w916"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w920"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The ToC controlling parameters.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx926" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx930" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx934" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w936"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w940"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx946" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w948"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w952"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The result tree that contains the generated Table of Contents.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx958" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx962" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx966" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx970" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx974" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w976"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w980"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC and LoTs.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx986" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx990" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx994" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w996"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}make-lots">t:make-lots</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1006"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.params">toc.params</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()?</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx1027" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w1029"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc">toc</span><span class="z">"</span><span id="wx1037" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1039"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.params</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">toc</span><span class="whitespace" start="17"> </span><span class="op" start="18">!=</span><span class="whitespace" start="20"> </span><span class="numeric" start="21">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1056"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc</span><span class="z">"</span><span id="wx1064" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1068" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1070"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.params</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">figure</span><span class="whitespace" start="20"> </span><span class="op" start="21">!=</span><span class="whitespace" start="23"> </span><span class="numeric" start="24">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1087"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}list-of-titles" class="solar"><span class="tcall">tp:list-of-titles</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1097"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">titles</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">figure</span><span class="op">'</span><span class="z">"</span><span id="wx1113" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1115"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:figure</span><span class="z">"</span><span id="wx1131" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1135" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1139" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1141"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.params</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">table</span><span class="whitespace" start="19"> </span><span class="op" start="20">!=</span><span class="whitespace" start="22"> </span><span class="numeric" start="23">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1158"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}list-of-titles" class="solar"><span class="tcall">tp:list-of-titles</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1168"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">titles</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">table</span><span class="op">'</span><span class="z">"</span><span id="wx1184" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1186"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:table</span><span class="z">"</span><span id="wx1202" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1206" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1210" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1212"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.params</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">example</span><span class="whitespace" start="21"> </span><span class="op" start="22">!=</span><span class="whitespace" start="24"> </span><span class="numeric" start="25">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1229"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}list-of-titles" class="solar"><span class="tcall">tp:list-of-titles</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1239"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">titles</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">example</span><span class="op">'</span><span class="z">"</span><span id="wx1255" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1257"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:example</span><span class="z">"</span><span id="wx1273" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1277" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1281" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1283"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.params</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">equation</span><span class="whitespace" start="22"> </span><span class="op" start="23">!=</span><span class="whitespace" start="25"> </span><span class="numeric" start="26">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1300"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}list-of-titles" class="solar"><span class="tcall">tp:list-of-titles</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1310"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">titles</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">equation</span><span class="op">'</span><span class="z">"</span><span id="wx1326" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1328"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:equation</span><span class="filter" start="15" pair-end="24" select="quick">[</span><span class="qname" start="16" select="quick">db:title</span><span class="filter" start="24">]</span><span class="z">"</span><span id="wx1347" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1351" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1355" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1357"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.params</span><span class="step" start="12">/</span><span class="axis" start="13">@</span><span class="qname" start="14" select="quick">procedure</span><span class="whitespace" start="23"> </span><span class="op" start="24">!=</span><span class="whitespace" start="26"> </span><span class="numeric" start="27">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1374"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}list-of-titles" class="solar"><span class="tcall">tp:list-of-titles</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1384"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">titles</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">procedure</span><span class="op">'</span><span class="z">"</span><span id="wx1400" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1402"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:procedure</span><span class="filter" start="16" pair-end="25" select="quick">[</span><span class="qname" start="17" select="quick">db:title</span><span class="filter" start="25">]</span><span class="z">"</span><span id="wx1421" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1425" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx1429" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1433" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1439"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:division-toc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1455"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make ToC/LoTs for a division</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx1461" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1463"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1467"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template formats the Table of Contents and
Lists of Titles for a
division (book, part, etc.).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1473" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx1477" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1479"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1483"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1487"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w1491"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc-context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx1497" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w1499"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1503"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The division context.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1509" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx1513" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx1517" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx1521" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx1525" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1527"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1531"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC and LoTs for the element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1537" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx1541" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx1545" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1547"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}division-toc">t:division-toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1557"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1571" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1573"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}make-toc" class="solar"><span class="tcall">tp:make-toc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1583"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx1597" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1599"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z">
                		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:part</span><span class="op" start="8">|</span><span class="qname" start="9" select="quick">db:reference</span><span class="whitespace" start="21">
                        </span><span class="qname" start="22" select="quick">	</span><span class="qname" start="23" select="quick">	</span><span class="qname" start="24" select="quick">	</span><span class="whitespace" start="25">    </span><span class="op" start="29">|</span><span class="qname" start="30" select="quick">db:preface</span><span class="op" start="40">|</span><span class="qname" start="41" select="quick">db:chapter</span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:appendix</span><span class="whitespace" start="63">
                        </span><span class="qname" start="64" select="quick">	</span><span class="qname" start="65" select="quick">	</span><span class="qname" start="66" select="quick">	</span><span class="whitespace" start="67">    </span><span class="op" start="71">|</span><span class="qname" start="72" select="quick">db:article</span><span class="whitespace" start="82">
                        </span><span class="qname" start="83" select="quick">	</span><span class="qname" start="84" select="quick">	</span><span class="qname" start="85" select="quick">	</span><span class="whitespace" start="86">    </span><span class="op" start="90">|</span><span class="qname" start="91" select="quick">db:bibliography</span><span class="op" start="106">|</span><span class="qname" start="107" select="quick">db:glossary</span><span class="op" start="118">|</span><span class="qname" start="119" select="quick">db:index</span><span class="whitespace" start="127">
                        </span><span class="qname" start="128" select="quick">	</span><span class="qname" start="129" select="quick">	</span><span class="qname" start="130" select="quick">	</span><span class="whitespace" start="131">    </span><span class="op" start="135">|</span><span class="qname" start="136" select="quick">db:refentry</span><span class="whitespace" start="147">
                        </span><span class="qname" start="148" select="quick">	</span><span class="qname" start="149" select="quick">	</span><span class="qname" start="150" select="quick">	</span><span class="whitespace" start="151">    </span><span class="op" start="155">|</span><span class="qname" start="156" select="quick">db:bridgehead</span><span class="filter" start="169" pair-end="193" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="170" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="188"> </span><span class="op" start="189">!=</span><span class="whitespace" start="191"> </span><span class="numeric" start="192">0</span><span class="filter" start="193">]</span><span class="z">"</span><span id="wx1665" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1669" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1673" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1679"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:component-toc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1695"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make ToC/LoTs for a component</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx1701" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1703"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1707"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template formats the Table of Contents and
Lists of Titles for a
component (chapter, article, etc.).</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1713" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx1717" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1719"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1723"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1727"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w1731"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc-context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx1737" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w1739"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1743"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The component context.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1749" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx1753" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx1757" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx1761" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx1765" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1767"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1771"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC and LoTs for the element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx1777" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx1781" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx1785" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1787"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}component-toc">t:component-toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1797"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx1811" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w1813"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.title">toc.title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx1829" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1831"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}make-toc" class="solar"><span class="tcall">tp:make-toc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1841"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx1855" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1857"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc.title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.title</span><span class="z">"</span><span id="wx1871" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1873"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z">
                		    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:sect1</span><span class="op" start="20">|</span><span class="qname" start="21" select="quick">db:refentry</span><span class="whitespace" start="32">
                        </span><span class="qname" start="33" select="quick">	</span><span class="qname" start="34" select="quick">	</span><span class="qname" start="35" select="quick">	</span><span class="whitespace" start="36">    </span><span class="op" start="40">|</span><span class="qname" start="41" select="quick">db:article</span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:bibliography</span><span class="op" start="67">|</span><span class="qname" start="68" select="quick">db:glossary</span><span class="whitespace" start="79">
                        </span><span class="qname" start="80" select="quick">	</span><span class="qname" start="81" select="quick">	</span><span class="qname" start="82" select="quick">	</span><span class="whitespace" start="83">    </span><span class="op" start="87">|</span><span class="qname" start="88" select="quick">db:appendix</span><span class="op" start="99">|</span><span class="qname" start="100" select="quick">db:index</span><span class="whitespace" start="108">
                        </span><span class="qname" start="109" select="quick">	</span><span class="qname" start="110" select="quick">	</span><span class="qname" start="111" select="quick">	</span><span class="whitespace" start="112">    </span><span class="op" start="116">|</span><span class="qname" start="117" select="quick">db:bridgehead</span><span class="filter" start="130" pair-end="195" select="quick">[</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="131" pair-end="144" select="quick">not</span></a><span class="parenthesis">(</span><span class="axis" start="135">@</span><span class="qname" start="136" select="quick">renderas</span><span class="parenthesis" start="144">)</span><span class="whitespace" start="145">
                        </span><span class="qname" start="146" select="quick">	</span><span class="qname" start="147" select="quick">	</span><span class="qname" start="148" select="quick">	</span><span class="whitespace" start="149">                   </span><span class="op" start="168">and</span><span class="whitespace" start="171"> </span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="172" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="190"> </span><span class="op" start="191">!=</span><span class="whitespace" start="193"> </span><span class="numeric" start="194">0</span><span class="filter" start="195">]</span><span class="whitespace" start="196">
                        </span><span class="qname" start="197" select="quick">	</span><span class="qname" start="198" select="quick">	</span><span class="qname" start="199" select="quick">	</span><span class="whitespace" start="200">    </span><span class="op" start="204">|</span><span class="context" start="205">.</span><span class="step" start="206">//</span><span class="qname" start="208" select="quick">db:bridgehead</span><span class="filter" start="221" pair-end="292" select="quick">[</span><span class="axis" start="222">@</span><span class="qname" start="223" select="quick">renderas</span><span class="op" start="231">=</span><span class="op">'</span><span class="literal" start="232">sect1</span><span class="op">'</span><span class="whitespace" start="239">
                        </span><span class="qname" start="240" select="quick">	</span><span class="qname" start="241" select="quick">	</span><span class="qname" start="242" select="quick">	</span><span class="whitespace" start="243">                      </span><span class="op" start="265">and</span><span class="whitespace" start="268"> </span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="269" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="287"> </span><span class="op" start="288">!=</span><span class="whitespace" start="290"> </span><span class="numeric" start="291">0</span><span class="filter" start="292">]</span><span class="z">"</span><span id="wx1966" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx1970" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1974" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w1980"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:component-toc-separator</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w1996"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make a separator for component ToCs</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2002" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2004"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2008"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template outputs a separator after component ToC.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2014" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2018" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2020"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2024"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted separator.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2030" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2034" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2038" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2040"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}component-toc-separator">t:component-toc-separator</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> Customize to output something between
       component.toc and first output </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2056" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2062"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:section-toc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2078"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make ToC/LoTs for a section</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2084" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2086"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2090"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template formats the Table of Contents and
Lists of Titles for a
section.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2096" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2100" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2102"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2106"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2110"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2114"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc-context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2120" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2122"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2126"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The component context.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2132" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2136" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2140" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2144" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2148" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2150"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2154"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC and LoTs for the element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2160" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2164" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2168" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2170"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}section-toc">t:section-toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2180"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx2194" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2196"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.title">toc.title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2212" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2214"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}make-toc" class="solar"><span class="tcall">tp:make-toc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2224"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx2238" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2240"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc.title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.title</span><span class="z">"</span><span id="wx2254" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w2256"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z">
                                    </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="whitespace" start="11">
                        </span><span class="qname" start="12" select="quick">	</span><span class="qname" start="13" select="quick">	</span><span class="qname" start="14" select="quick">	</span><span class="whitespace" start="15">    </span><span class="op" start="19">|</span><span class="qname" start="20" select="quick">db:sect1</span><span class="op" start="28">|</span><span class="qname" start="29" select="quick">db:sect2</span><span class="op" start="37">|</span><span class="qname" start="38" select="quick">db:sect3</span><span class="op" start="46">|</span><span class="qname" start="47" select="quick">db:sect4</span><span class="op" start="55">|</span><span class="qname" start="56" select="quick">db:sect5</span><span class="whitespace" start="64">
                        </span><span class="qname" start="65" select="quick">	</span><span class="qname" start="66" select="quick">	</span><span class="qname" start="67" select="quick">	</span><span class="whitespace" start="68">    </span><span class="op" start="72">|</span><span class="qname" start="73" select="quick">db:refentry</span><span class="whitespace" start="84">
                        </span><span class="qname" start="85" select="quick">	</span><span class="qname" start="86" select="quick">	</span><span class="qname" start="87" select="quick">	</span><span class="whitespace" start="88">    </span><span class="op" start="92">|</span><span class="qname" start="93" select="quick">db:bridgehead</span><span class="filter" start="106" pair-end="130" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="107" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="125"> </span><span class="op" start="126">!=</span><span class="whitespace" start="128"> </span><span class="numeric" start="129">0</span><span class="filter" start="130">]</span><span class="z">"</span><span id="wx2306" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2310" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2314" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2320"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:section-toc-separator</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2336"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make a separator for section ToCs</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2342" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2344"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2348"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template outputs a separator after section ToC.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2354" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2358" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2360"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2364"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted separator.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2370" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2374" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2378" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2380"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}section-toc-separator">t:section-toc-separator</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> Customize to output something between
       section.toc and first output </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2396" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2402"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:qanda-toc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2418"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make ToC/LoTs for a QAndASet</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2424" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2426"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2430"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template formats the Table of Contents and
Lists of Titles for a qandaset.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2436" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2440" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2442"><span class="es">&lt;</span><span class="en">refparameter</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2446"><span class="es">&lt;</span><span class="en">variablelist</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2450"><span class="es">&lt;</span><span class="en">varlistentry</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w2454"><span class="es">&lt;</span><span class="en">term</span><span class="scx">&gt;</span><span class="txt">toc-context</span><span class="ez">&lt;/</span><span class="cl">term</span><span id="wx2460" class="ec">&gt;</span></span><span class="txt">
</span><span class="ww" id="w2462"><span class="es">&lt;</span><span class="en">listitem</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2466"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The component context.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2472" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">listitem</span><span id="wx2476" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">varlistentry</span><span id="wx2480" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">variablelist</span><span id="wx2484" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refparameter</span><span id="wx2488" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2490"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2494"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC and LoTs for the element.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2500" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2504" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2508" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2510"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}qanda-toc">t:qanda-toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2520"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx2534" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2536"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc.title">toc.title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2552" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2554"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="18" select="quick">count</span></a><span class="parenthesis">(</span><span class="qname" start="7" select="quick">db:qandadiv</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="qname" start="20" select="quick">&amp;</span><span class="op" start="21">gt</span><span class="qname" start="23" select="quick">;</span><span class="whitespace" start="24"> </span><span class="numeric" start="25">1</span><span class="whitespace" start="26"> </span><span class="op" start="27">or</span><span class="whitespace" start="29"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="30" pair-end="49" select="quick">count</span></a><span class="parenthesis">(</span><span class="qname" start="36" select="quick">db:qandaentry</span><span class="parenthesis" start="49">)</span><span class="whitespace" start="50"> </span><span class="qname" start="51" select="quick">&amp;</span><span class="op" start="52">gt</span><span class="qname" start="54" select="quick">;</span><span class="whitespace" start="55"> </span><span class="numeric" start="56">1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2586"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}make-toc" class="solar"><span class="tcall">tp:make-toc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2596"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx2610" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2612"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc.title</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc.title</span><span class="z">"</span><span id="wx2626" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2628"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z">
                                      </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandadiv</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:qandaentry</span><span class="z">"</span><span id="wx2644" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx2648" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2652" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2656" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2662"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:qanda-toc-separator</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2678"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make a separator for qandaset ToCs</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2684" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2686"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2690"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This template outputs a separator after qandaset ToC.
</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2696" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2700" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2702"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2706"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted separator.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2712" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2716" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2720" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2722"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}qanda-toc-separator">t:qanda-toc-separator</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> Customize to output something between
       component.toc and first output </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2738" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2744"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">tp:subtoc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2760"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make subordinate ToC parts</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx2766" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2768"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2772"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This is an internal-only template.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2778" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx2782" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2784"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w2788"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted subordinate ToC.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx2794" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx2798" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx2802" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2804"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template/private}subtoc">tp:subtoc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2814"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx2828" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2830"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?nodes">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="parenthesis" start="1" pair-end="2" select="quick">(</span><span class="parenthesis" start="2">)</span><span class="z">"</span><span id="wx2845" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2847"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?subtoc">subtoc</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">element()</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2863"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?toc.list.type" class="solar"><span class="variable" start="1" select="quick">$toc.list.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2875"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">class</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">toc</span><span class="op">'</span><span class="z">"</span><span id="wx2891" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2893"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$nodes</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2909"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx2923" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2927" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2931" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2935" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2937"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:integer</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2953"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2957"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:section</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w2968"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:section</span><span class="parenthesis" start="27">)</span><span class="whitespace" start="28"> </span><span class="op" start="29">+</span><span class="whitespace" start="30"> </span><span class="numeric" start="31">1</span><span class="z">"</span><span id="wx2984" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx2988" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w2990"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:sect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3003" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3005"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:sect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3018" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3020"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:sect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3033" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3035"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:sect4</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3048" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3050"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:sect5</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">5</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3063" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3065"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:refsect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3078" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3080"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:refsect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3093" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3095"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:refsect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3108" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3110"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">self::</span><span class="qname" start="7" select="quick">db:simplesect</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="z">&lt;!--</span><span class="cm"> sigh... </span><span class="z">--&gt;</span><span class="txt">
	</span><span class="ww" id="w3125"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w3129"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:section</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w3140"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:section</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx3152" class="sc">/&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3156" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3158"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:sect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3171" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3173"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:sect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3186" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3188"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:sect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3201" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3203"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:sect4</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">5</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3216" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3218"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:sect5</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">6</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3231" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3233"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:refsect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3246" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3248"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:refsect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3261" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3263"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">db:refsect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3276" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ww" id="w3278"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3284" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3288" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3292" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3294"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">0</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3300" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3304" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3308" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3310"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth.from.context">depth.from.context</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="18" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">*</span><span class="parenthesis" start="18">)</span><span class="op" start="19">-</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="20" pair-end="50" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="26" select="quick">$toc-context</span><span class="step" start="38">/</span><span class="axis" start="39">ancestor::</span><span class="qname" start="49" select="quick">*</span><span class="parenthesis" start="50">)</span><span class="z">"</span><span id="wx3336" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3338"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?subtoc.list">subtoc.list</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3348"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3352"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.dd.type" class="solar"><span class="variable" start="1" select="quick">$toc.dd.type</span></a><span class="whitespace" start="13"> </span><span class="op" start="14">=</span><span class="whitespace" start="15"> </span><span class="op">'</span><span class="literal" start="16"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3368"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$subtoc</span><span class="z">"</span><span id="wx3376" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3380" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3382"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3386"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.dd.type" class="solar"><span class="variable" start="1" select="quick">$toc.dd.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	  </span><span class="ww" id="w3398"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$subtoc</span><span class="z">"</span><span id="wx3406" class="sc">/&gt;</span></span><span class="txt">
	</span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx3410" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3414" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3418" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3422" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3424"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?show.subtoc">show.subtoc</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:boolean</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="16" select="quick">count</span></a><span class="parenthesis">(</span><span class="variable" start="7" select="quick">$subtoc</span><span class="step" start="14">/</span><span class="qname" start="15" select="quick">*</span><span class="parenthesis" start="16">)</span><span class="whitespace" start="17"> </span><span class="qname" start="18" select="quick">&amp;</span><span class="op" start="19">gt</span><span class="qname" start="21" select="quick">;</span><span class="whitespace" start="22"> </span><span class="numeric" start="23">0</span><span class="whitespace" start="24">
                      </span><span class="qname" start="25" select="quick">	</span><span class="qname" start="26" select="quick">	</span><span class="qname" start="27" select="quick">	</span><span class="op" start="28">and</span><span class="whitespace" start="31"> </span><a href="xslt/base/html/param.xsl.html#v?toc.section.depth" class="solar"><span class="variable" start="32" select="quick">$toc.section.depth</span></a><span class="whitespace" start="50"> </span><span class="op" start="51">&gt;</span><span class="whitespace" start="52"> </span><span class="variable" start="53" select="quick">$depth</span><span class="whitespace" start="59"> </span><span class="op" start="60">and</span><span class="whitespace" start="63"> </span><a href="http://www.w3.org/TR/xpath-functions/#func-exists" class="solar"><span class="function" start="64" pair-end="77" select="quick">exists</span></a><span class="parenthesis">(</span><span class="variable" start="71" select="quick">$nodes</span><span class="parenthesis" start="77">)</span><span class="whitespace" start="78">
                      </span><span class="qname" start="79" select="quick">	</span><span class="qname" start="80" select="quick">	</span><span class="qname" start="81" select="quick">	</span><span class="op" start="82">and</span><span class="whitespace" start="85"> </span><a href="xslt/base/html/param.xsl.html#v?toc.max.depth" class="solar"><span class="variable" start="86" select="quick">$toc.max.depth</span></a><span class="whitespace" start="100"> </span><span class="op" start="101">&gt;</span><span class="whitespace" start="102"> </span><span class="variable" start="103" select="quick">$depth.from.context</span><span class="z">"</span><span id="wx3484" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3486"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.listitem.type" class="solar"><span class="variable" start="1" select="quick">$toc.listitem.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3498"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}toc-line" class="solar"><span class="tcall">tp:toc-line</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3508"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx3522" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx3526" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3528"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.listitem.type" class="solar"><span class="variable" start="1" select="quick">$toc.listitem.type</span></a><span class="whitespace" start="19"> </span><span class="op" start="20">=</span><span class="whitespace" start="21"> </span><span class="op">'</span><span class="literal" start="22">li</span><span class="op">'</span><span class="whitespace" start="26"> </span><span class="op" start="27">and</span><span class="whitespace" start="30"> </span><span class="variable" start="31" select="quick">$show.subtoc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3548"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$subtoc.list</span><span class="z">"</span><span id="wx3556" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3560" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx3564" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3566"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.listitem.type" class="solar"><span class="variable" start="1" select="quick">$toc.listitem.type</span></a><span class="whitespace" start="19"> </span><span class="op" start="20">!=</span><span class="whitespace" start="22"> </span><span class="op">'</span><span class="literal" start="23">li</span><span class="op">'</span><span class="whitespace" start="27"> </span><span class="op" start="28">and</span><span class="whitespace" start="31"> </span><span class="variable" start="32" select="quick">$show.subtoc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3586"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$subtoc.list</span><span class="z">"</span><span id="wx3594" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3598" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3602" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w3608"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">tp:toc-line</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3624"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Make a line of the ToC</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx3630" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3632"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3636"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This is an internal-only template.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3642" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx3646" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3648"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w3652"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC line.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx3658" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx3662" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx3666" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3668"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template/private}toc-line">tp:toc-line</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3678"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx3692" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3694"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">1</span><span class="z">"</span><span id="wx3708" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w3710"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth.from.context">depth.from.context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="numeric" start="1">8</span><span class="z">"</span><span id="wx3724" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3726"><span class="es">&lt;</span><span class="en">span</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3730"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/html.xsl.html#t?class" class="solar"><span class="tcall">class</span></a><span class="z">"</span><span id="wx3738" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3740"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="11" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="context" start="10">.</span><span class="parenthesis" start="11">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3757"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w3767"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx3781" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3785" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3787"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span id="wx3795" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w3797"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w3813"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?autotoc.label.separator" class="solar"><span class="variable" start="1" select="quick">$autotoc.label.separator</span></a><span class="z">"</span><span id="wx3821" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3825" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w3827"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:titleabbrev-content</span><span class="z">"</span><span id="wx3841" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx3845" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx3849" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3853" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3855"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:book</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3871"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx3885" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3887"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3897"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx3911" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w3913"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:part</span><span class="op" start="8">|</span><span class="qname" start="9" select="quick">db:reference</span><span class="whitespace" start="21">
                                                                              </span><span class="op" start="63">|</span><span class="qname" start="64" select="quick">db:preface</span><span class="op" start="74">|</span><span class="qname" start="75" select="quick">db:chapter</span><span class="op" start="85">|</span><span class="qname" start="86" select="quick">db:appendix</span><span class="whitespace" start="97">
                                                                              </span><span class="op" start="139">|</span><span class="qname" start="140" select="quick">db:article</span><span class="whitespace" start="150">
                                                                              </span><span class="op" start="192">|</span><span class="qname" start="193" select="quick">db:bibliography</span><span class="op" start="208">|</span><span class="qname" start="209" select="quick">db:glossary</span><span class="op" start="220">|</span><span class="qname" start="221" select="quick">db:index</span><span class="whitespace" start="229">
                                                                              </span><span class="op" start="271">|</span><span class="qname" start="272" select="quick">db:refentry</span><span class="whitespace" start="283">
                                                                              </span><span class="op" start="325">|</span><span class="qname" start="326" select="quick">db:bridgehead</span><span class="filter" start="339" pair-end="363" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="340" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="358"> </span><span class="op" start="359">!=</span><span class="whitespace" start="361"> </span><span class="numeric" start="362">0</span><span class="filter" start="363">]</span><span class="z">"</span><span id="wx3959" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx3963" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3967" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3969"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:setindex</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3985"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx3999" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> If the setindex tag is not empty, it should be it in the TOC </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w4005"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="whitespace" start="2"> </span><span class="qname" start="3" select="quick">or</span><span class="whitespace" start="5"> </span><a href="xslt/base/html/param.xsl.html#v?generate.index" class="solar"><span class="variable" start="6" select="quick">$generate.index</span></a><span class="whitespace" start="21"> </span><span class="op" start="22">!=</span><span class="whitespace" start="24"> </span><span class="numeric" start="25">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4023"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4033"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4047" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4051" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4055" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4059" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4061"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:part</span><span class="op" start="8">|</span><span class="qname" start="9" select="quick">db:reference</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4079"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4093" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4095"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4105"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4119" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4121"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:appendix</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:chapter</span><span class="op" start="23">|</span><span class="qname" start="24" select="quick">db:article</span><span class="whitespace" start="34">
                                                                              </span><span class="op" start="76">|</span><span class="qname" start="77" select="quick">db:index</span><span class="op" start="85">|</span><span class="qname" start="86" select="quick">db:glossary</span><span class="op" start="97">|</span><span class="qname" start="98" select="quick">db:bibliography</span><span class="whitespace" start="113">
                                                                              </span><span class="op" start="155">|</span><span class="qname" start="156" select="quick">db:preface</span><span class="op" start="166">|</span><span class="qname" start="167" select="quick">db:reference</span><span class="op" start="179">|</span><span class="qname" start="180" select="quick">db:refentry</span><span class="whitespace" start="191">
                                                                              </span><span class="op" start="233">|</span><span class="qname" start="234" select="quick">db:bridgehead</span><span class="filter" start="247" pair-end="271" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="248" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="266"> </span><span class="op" start="267">!=</span><span class="whitespace" start="269"> </span><span class="numeric" start="270">0</span><span class="filter" start="271">]</span><span class="z">"</span><span id="wx4163" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4167" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4171" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4173"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:preface</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:chapter</span><span class="op" start="22">|</span><span class="qname" start="23" select="quick">db:appendix</span><span class="op" start="34">|</span><span class="qname" start="35" select="quick">db:article</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4195"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4209" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4211"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4221"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4235" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4237"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="op" start="11">|</span><span class="qname" start="12" select="quick">db:sect1</span><span class="op" start="20">|</span><span class="qname" start="21" select="quick">db:simplesect</span><span class="op" start="34">|</span><span class="qname" start="35" select="quick">db:refentry</span><span class="whitespace" start="46">
                                                                              </span><span class="op" start="88">|</span><span class="qname" start="89" select="quick">db:glossary</span><span class="op" start="100">|</span><span class="qname" start="101" select="quick">db:bibliography</span><span class="op" start="116">|</span><span class="qname" start="117" select="quick">db:index</span><span class="whitespace" start="125">
                                                                              </span><span class="op" start="167">|</span><span class="qname" start="168" select="quick">db:bridgehead</span><span class="filter" start="181" pair-end="205" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="182" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="200"> </span><span class="op" start="201">!=</span><span class="whitespace" start="203"> </span><span class="numeric" start="204">0</span><span class="filter" start="205">]</span><span class="z">"</span><span id="wx4274" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4278" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4282" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4284"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect1</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4300"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4314" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w4316"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4326"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4340" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4342"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect2</span><span class="whitespace" start="9">
                                                                              </span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:bridgehead</span><span class="filter" start="65" pair-end="89" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="66" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="84"> </span><span class="op" start="85">!=</span><span class="whitespace" start="87"> </span><span class="numeric" start="88">0</span><span class="filter" start="89">]</span><span class="z">"</span><span id="wx4366" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4370" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4374" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4376"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect2</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4392"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4406" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4408"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4418"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4432" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4434"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect3</span><span class="whitespace" start="9">
                                                                              </span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:bridgehead</span><span class="filter" start="65" pair-end="89" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="66" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="84"> </span><span class="op" start="85">!=</span><span class="whitespace" start="87"> </span><span class="numeric" start="88">0</span><span class="filter" start="89">]</span><span class="z">"</span><span id="wx4458" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4462" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4466" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4468"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect3</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4484"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4498" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4500"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4510"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4524" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4526"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect4</span><span class="whitespace" start="9">
                                                                              </span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:bridgehead</span><span class="filter" start="65" pair-end="89" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="66" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="84"> </span><span class="op" start="85">!=</span><span class="whitespace" start="87"> </span><span class="numeric" start="88">0</span><span class="filter" start="89">]</span><span class="z">"</span><span id="wx4550" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4554" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4558" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4560"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect4</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4576"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4590" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4592"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4602"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4616" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4618"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect5</span><span class="whitespace" start="9">
                                                                              </span><span class="op" start="51">|</span><span class="qname" start="52" select="quick">db:bridgehead</span><span class="filter" start="65" pair-end="89" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="66" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="84"> </span><span class="op" start="85">!=</span><span class="whitespace" start="87"> </span><span class="numeric" start="88">0</span><span class="filter" start="89">]</span><span class="z">"</span><span id="wx4642" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4646" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4650" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4652"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect5</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4668"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4682" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4684"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4694"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4708" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4712" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4716" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4718"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4734"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4748" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4750"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4760"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4774" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w4776"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="whitespace" start="11">
                                                                              </span><span class="op" start="53">|</span><span class="qname" start="54" select="quick">db:bridgehead</span><span class="filter" start="67" pair-end="91" select="quick">[</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="68" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="86"> </span><span class="op" start="87">!=</span><span class="whitespace" start="89"> </span><span class="numeric" start="90">0</span><span class="filter" start="91">]</span><span class="z">"</span><span id="wx4800" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4804" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4808" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4810"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bridgehead</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4826"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4840" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4842"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?bridgehead.in.toc" class="solar"><span class="variable" start="1" select="quick">$bridgehead.in.toc</span></a><span class="whitespace" start="19"> </span><span class="op" start="20">!=</span><span class="whitespace" start="22"> </span><span class="numeric" start="23">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4856"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w4866"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4880" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4884" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx4888" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4892" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4894"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliography</span><span class="op" start="16">|</span><span class="qname" start="17" select="quick">db:glossary</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4912"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4926" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w4928"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w4938"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx4952" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx4956" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx4960" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w4962"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:index</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w4978"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx4992" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> If the index tag is not empty, it should be it in the TOC </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w4998"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">*</span><span class="whitespace" start="2"> </span><span class="qname" start="3" select="quick">or</span><span class="whitespace" start="5"> </span><a href="xslt/base/html/param.xsl.html#v?generate.index" class="solar"><span class="variable" start="6" select="quick">$generate.index</span></a><span class="whitespace" start="21"> </span><span class="op" start="22">!=</span><span class="whitespace" start="24"> </span><span class="numeric" start="25">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5016"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5026"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx5040" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx5044" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx5048" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5052" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5054"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5070"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx5084" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5086"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?refmeta">refmeta</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:refmeta</span><span class="z">"</span><span id="wx5102" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5104"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?refentrytitle">refentrytitle</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$refmeta</span><span class="step" start="9">//</span><span class="qname" start="11" select="quick">db:refentrytitle</span><span class="z">"</span><span id="wx5120" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5122"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?refnamediv">refnamediv</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:refnamediv</span><span class="z">"</span><span id="wx5138" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5140"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?refname">refname</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$refnamediv</span><span class="step" start="12">//</span><span class="qname" start="14" select="quick">db:refname</span><span class="z">"</span><span id="wx5156" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5158"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?title">title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5168"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5172"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$refentrytitle</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5182"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$refentrytitle</span><span class="filter" start="15" pair-end="17" select="quick">[</span><span class="numeric" start="16">1</span><span class="filter" start="17">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:titleabbrev-content</span><span class="z">"</span><span id="wx5199" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5203" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5205"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$refname</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5215"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$refname</span><span class="filter" start="9" pair-end="11" select="quick">[</span><span class="numeric" start="10">1</span><span class="filter" start="11">]</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:titleabbrev-content</span><span class="z">"</span><span id="wx5232" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx5236" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5238"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt"></span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx5244" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx5248" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx5252" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5254"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.listitem.type" class="solar"><span class="variable" start="1" select="quick">$toc.listitem.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5266"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">'</span><span class="av">refentrytitle</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5276"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="11" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="context" start="10">.</span><span class="parenthesis" start="11">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5293"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$title</span><span class="z">"</span><span id="wx5301" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx5305" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx5309" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5311"><span class="es">&lt;</span><span class="en">span</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">'</span><span class="av">refpurpose</span><span class="z">'</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5321"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?annotate.toc" class="solar"><span class="variable" start="1" select="quick">$annotate.toc</span></a><span class="whitespace" start="14"> </span><span class="op" start="15">!=</span><span class="whitespace" start="17"> </span><span class="numeric" start="18">0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5335"><span class="es">&lt;</span><span class="enxsl">xsl:text</span><span class="scx">&gt;</span><span class="txt"> - </span><span class="ez">&lt;/</span><span class="clxsl">xsl:text</span><span id="wx5341" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w5343"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refnamediv</span><span class="step" start="14">/</span><span class="qname" start="15" select="quick">db:refpurpose</span><span class="z">"</span><span id="wx5353" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx5357" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">span</span><span id="wx5361" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx5365" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5369" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5371"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandadiv</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:qandaentry</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5389"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx5403" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5405"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template/private}subtoc" class="solar"><span class="tcall">tp:subtoc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5415"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx5429" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w5431"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandadiv</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:qandaentry</span><span class="z">"</span><span id="wx5447" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx5451" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5455" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5457"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:title</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5473"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx5487" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w5489"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="12" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="context" start="10">..</span><span class="parenthesis" start="12">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5506"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span id="wx5508" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx5512" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5516" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w5522"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">t:manual-toc</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5538"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Handle manual ToCs (toc elements)</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx5544" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5546"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5550"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">Processes manual ToCs.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5556" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx5560" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5562"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5566"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted ToC.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5572" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx5576" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx5580" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5582"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template}manual-toc">t:manual-toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w5592"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx5606" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w5608"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?tocentry">tocentry</span><span class="z">"</span><span id="wx5616" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="z">&lt;!--</span><span class="cm"> be careful, we don't want to change the current document to the other tree! </span><span class="z">--&gt;</span><span class="txt">

  </span><span class="ww" id="w5622"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tocentry</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w5632"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?node">node</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-key" class="solar"><span class="function" start="1" pair-end="29" select="quick">key</span></a><span class="parenthesis">(</span><span class="op">'</span><span class="literal" start="5">id</span><span class="op">'</span><span class="op" start="9">,</span><span class="whitespace" start="10"> </span><span class="variable" start="11" select="quick">$tocentry</span><span class="step" start="20">/</span><span class="axis" start="21">@</span><span class="qname" start="22" select="quick">linkend</span><span class="parenthesis" start="29">)</span><span class="z">"</span><span id="wx5657" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w5659"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.listitem.type" class="solar"><span class="variable" start="1" select="quick">$toc.listitem.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5671"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5681"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx5695" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx5699" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5701"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span id="wx5709" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5711"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5727"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?autotoc.label.separator" class="solar"><span class="variable" start="1" select="quick">$autotoc.label.separator</span></a><span class="z">"</span><span id="wx5735" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx5739" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w5741"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="15" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="variable" start="10" select="quick">$node</span><span class="parenthesis" start="15">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5758"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$node</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:titleabbrev-content</span><span class="z">"</span><span id="wx5772" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx5776" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx5780" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w5782"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tocentry</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5794"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?toc.list.type" class="solar"><span class="variable" start="1" select="quick">$toc.list.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w5806"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">class</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">toc</span><span class="op">'</span><span class="z">"</span><span id="wx5822" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w5824"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template}manual-toc" class="solar"><span class="tcall">t:manual-toc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w5834"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">tocentry</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tocentry</span><span class="step" start="10">/</span><span class="qname" start="11" select="quick">*</span><span class="filter" start="12" pair-end="14" select="quick">[</span><span class="numeric" start="13">1</span><span class="filter" start="14">]</span><span class="z">"</span><span id="wx5853" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx5857" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx5861" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx5865" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w5867"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tocentry</span><span class="step" start="10">/</span><span class="axis" start="11">following-sibling::</span><span class="qname" start="30" select="quick">*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w5880"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/autotoc.xsl.html#t?{http://docbook.org/xslt/ns/template}manual-toc" class="solar"><span class="tcall">t:manual-toc</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w5890"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">tocentry</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$tocentry</span><span class="step" start="10">/</span><span class="axis" start="11">following-sibling::</span><span class="qname" start="30" select="quick">*</span><span class="filter" start="31" pair-end="33" select="quick">[</span><span class="numeric" start="32">1</span><span class="filter" start="33">]</span><span class="z">"</span><span id="wx5910" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx5914" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx5918" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx5922" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx5926" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w5932"><span class="es">&lt;</span><span class="en">doc:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">tp:list-of-titles</span><span class="z">"</span><span class="z"> </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5948"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Handles the headers for a List of Titles</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx5954" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5956"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5960"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This is an internal-only template.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5966" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx5970" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5972"><span class="es">&lt;</span><span class="en">refreturn</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w5976"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">The formatted LoT.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx5982" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refreturn</span><span id="wx5986" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:template</span><span id="wx5990" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w5992"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="tname" id="t?{http://docbook.org/xslt/ns/template/private}list-of-titles">tp:list-of-titles</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6002"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx6016" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6018"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?titles">titles</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">table</span><span class="op">'</span><span class="z">"</span><span id="wx6034" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ww" id="w6036"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?nodes">nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="step" start="2">//</span><span class="qname" start="4" select="quick">db:table</span><span class="z">"</span><span id="wx6052" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6054"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$nodes</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6064"><span class="es">&lt;</span><span class="en">div</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">list-of-</span><span class="op">{</span><span class="variable" start="1" select="quick">$titles</span><span class="op">}</span><span class="av">s</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6078"><span class="es">&lt;</span><span class="en">p</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w6082"><span class="es">&lt;</span><span class="en">b</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w6086"><span class="es">&lt;</span><span class="enxsl">xsl:call-template</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/common/l10n.xsl.html#t?gentext" class="solar"><span class="tcall">gentext</span></a><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
            </span><span class="ww" id="w6096"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">key</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
              </span><span class="ww" id="w6106"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
                </span><span class="ww" id="w6110"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$titles</span><span class="op" start="8">=</span><span class="op">'</span><span class="literal" start="9">table</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">ListofTables</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6126" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ww" id="w6128"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$titles</span><span class="op" start="8">=</span><span class="op">'</span><span class="literal" start="9">figure</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">ListofFigures</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6144" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ww" id="w6146"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$titles</span><span class="op" start="8">=</span><span class="op">'</span><span class="literal" start="9">equation</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">ListofEquations</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6162" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ww" id="w6164"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$titles</span><span class="op" start="8">=</span><span class="op">'</span><span class="literal" start="9">example</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">ListofExamples</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6180" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ww" id="w6182"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$titles</span><span class="op" start="8">=</span><span class="op">'</span><span class="literal" start="9">procedure</span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">ListofProcedures</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx6198" class="ec">&gt;</span></span><span class="txt">
                </span><span class="ww" id="w6200"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">ListofUnknown</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx6206" class="ec">&gt;</span></span><span class="txt">
              </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx6210" class="ec">&gt;</span></span><span class="txt">
            </span><span class="ez">&lt;/</span><span class="clxsl">xsl:with-param</span><span id="wx6214" class="ec">&gt;</span></span><span class="txt">
          </span><span class="ez">&lt;/</span><span class="clxsl">xsl:call-template</span><span id="wx6218" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="cl">b</span><span id="wx6222" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">p</span><span id="wx6226" class="ec">&gt;</span></span><span class="txt">

      </span><span class="ww" id="w6228"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/param.xsl.html#v?toc.list.type" class="solar"><span class="variable" start="1" select="quick">$toc.list.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
	</span><span class="ww" id="w6240"><span class="es">&lt;</span><span class="enxsl">xsl:attribute</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">class</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="op">'</span><span class="literal" start="1">toc</span><span class="op">'</span><span class="z">"</span><span id="wx6256" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ww" id="w6258"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$nodes</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w6274"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$toc-context</span><span class="z">"</span><span id="wx6288" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx6292" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx6296" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">div</span><span id="wx6300" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx6304" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6308" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w6310"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:figure</span><span class="op" start="10">|</span><span class="qname" start="11" select="quick">db:table</span><span class="op" start="19">|</span><span class="qname" start="20" select="quick">db:example</span><span class="op" start="30">|</span><span class="qname" start="31" select="quick">db:equation</span><span class="op" start="42">|</span><span class="qname" start="43" select="quick">db:procedure</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">mp:toc</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w6334"><span class="es">&lt;</span><span class="enxsl">xsl:param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?toc-context">toc-context</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span id="wx6348" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w6350"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/autotoc.xsl.html#v?toc.listitem.type" class="solar"><span class="variable" start="1" select="quick">$toc.listitem.type</span></a><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w6362"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?label">label</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6372"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:label-content</span><span class="z">"</span><span id="wx6386" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx6390" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6392"><span class="es">&lt;</span><span class="enxsl">xsl:copy-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="z">"</span><span id="wx6400" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6402"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$label</span><span class="whitespace" start="7"> </span><span class="op" start="8">!=</span><span class="whitespace" start="10"> </span><span class="op">'</span><span class="literal" start="11"></span><span class="op">'</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6418"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="xslt/base/html/param.xsl.html#v?autotoc.label.separator" class="solar"><span class="variable" start="1" select="quick">$autotoc.label.separator</span></a><span class="z">"</span><span id="wx6426" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx6430" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w6432"><span class="es">&lt;</span><span class="en">a</span><span class="z"> </span><span class="atn">href</span><span class="atneq">=</span><span class="z">"</span><span class="op">{</span><a href="xslt/base/html/html.xsl.html#f?{http://docbook.org/xslt/ns/extension}href" class="solar"><span class="function" start="1" pair-end="11" select="quick">f:href</span></a><span class="parenthesis">(</span><span class="step" start="8">/</span><span class="op" start="9">,</span><span class="context" start="10">.</span><span class="parenthesis" start="11">)</span><span class="op">}</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w6449"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:titleabbrev-content</span><span class="z">"</span><span id="wx6463" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">a</span><span id="wx6467" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx6471" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx6475" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx6479" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>
<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>title-markup.xsl</title><link rel="stylesheet" type="text/css" href="../../../theme.css"></head><body><div><p class="spectrum"><span class="z">&lt;?</span><span class="pi">xml version="1.0" encoding="utf-8"</span><span class="z">?&gt;</span><span class="txt">
</span><span class="ww" id="w5"><span class="es">&lt;</span><span class="enxsl">xsl:stylesheet</span><span class="z"> </span><span class="atn">xmlns:xsl</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/XSL/Transform</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:db</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:doc</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://nwalsh.com/xsl/documentation/1.0</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:f</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/extension</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:fn</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2005/xpath-functions</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:h</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:m</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/mode</span><span class="z">"</span><span class="z">
                		</span><span class="atn">xmlns:t</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/xslt/ns/template</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns:xs</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/2001/XMLSchema</span><span class="z">"</span><span class="z">
                                </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="z">
                		</span><span class="atn">exclude-result-prefixes</span><span class="atneq">=</span><span class="z">"</span><span class="av">db doc f fn h m t xs</span><span class="z">"</span><span class="z">
                                </span><span class="atn">version</span><span class="atneq">=</span><span class="z">"</span><span class="av">2.0</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

</span><span class="ww" id="w81"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:info</span><span class="op" start="8">|</span><span class="qname" start="9" select="quick">db:title</span><span class="op" start="17">|</span><span class="qname" start="18" select="quick">db:subtitle</span><span class="op" start="29">|</span><span class="qname" start="30" select="quick">db:titleabbrev</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> nop </span><span class="z">--&gt;</span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx103" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w109"><span class="es">&lt;</span><span class="en">doc:mode</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="z">
          	  </span><span class="atn">xmlns</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://docbook.org/ns/docbook</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w125"><span class="es">&lt;</span><span class="en">refpurpose</span><span class="scx">&gt;</span><span class="txt">Mode for formatting title and titleabbrev elements</span><span class="ez">&lt;/</span><span class="cl">refpurpose</span><span id="wx131" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w133"><span class="es">&lt;</span><span class="en">refdescription</span><span class="scx">&gt;</span><span class="txt">
</span><span class="ww" id="w137"><span class="es">&lt;</span><span class="en">para</span><span class="scx">&gt;</span><span class="txt">This mode is used to format title and titleabbrev elements on the title page.
Any element processed in this mode should generate markup appropriate
for the title page.</span><span class="ez">&lt;/</span><span class="cl">para</span><span id="wx143" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">refdescription</span><span id="wx147" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="cl">doc:mode</span><span id="wx151" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w153"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:set</span><span class="op" start="7">|</span><span class="qname" start="8" select="quick">db:book</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:part</span><span class="op" start="23">|</span><span class="qname" start="24" select="quick">db:reference</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:setindex</span><span class="z">"</span><span class="z">
                            </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w177"><span class="es">&lt;</span><span class="en">h1</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w181"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w197"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx213" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx217" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h1</span><span id="wx221" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx225" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w227"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:partintro</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w243"><span class="es">&lt;</span><span class="en">h2</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w247"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w263"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx279" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx283" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h2</span><span id="wx287" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx291" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w293"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:dedication</span><span class="op" start="14">|</span><span class="qname" start="15" select="quick">db:preface</span><span class="op" start="25">|</span><span class="qname" start="26" select="quick">db:chapter</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:appendix</span><span class="whitespace" start="48">
                     </span><span class="qname" start="49" select="quick">	</span><span class="qname" start="50" select="quick">	</span><span class="whitespace" start="51">     </span><span class="op" start="56">|</span><span class="qname" start="57" select="quick">db:colophon</span><span class="op" start="68">|</span><span class="qname" start="69" select="quick">db:article</span><span class="op" start="79">|</span><span class="qname" start="80" select="quick">db:glossary</span><span class="op" start="91">|</span><span class="qname" start="92" select="quick">db:index</span><span class="whitespace" start="100">
                                          </span><span class="op" start="122">|</span><span class="qname" start="123" select="quick">db:bibliography</span><span class="z">"</span><span class="z">
                            </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w330"><span class="es">&lt;</span><span class="en">h2</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w334"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w350"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx366" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx370" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h2</span><span id="wx374" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx378" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w380"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliodiv</span><span class="op" start="13">|</span><span class="qname" start="14" select="quick">db:glossdiv</span><span class="op" start="25">|</span><span class="qname" start="26" select="quick">db:indexdiv</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w400"><span class="es">&lt;</span><span class="en">h3</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w404"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w420"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx436" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx440" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h3</span><span id="wx444" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx448" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w450"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:qandaset</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w466"><span class="es">&lt;</span><span class="en">h2</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w470"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w486"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx502" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx506" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h2</span><span id="wx510" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx514" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w516"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliolist</span><span class="op" start="14">|</span><span class="qname" start="15" select="quick">db:glosslist</span><span class="op" start="27">|</span><span class="qname" start="28" select="quick">db:qandadiv</span><span class="op" start="39">|</span><span class="qname" start="40" select="quick">db:task</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w538"><span class="es">&lt;</span><span class="en">h3</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w542"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w558"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx574" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx578" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h3</span><span id="wx582" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx586" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w588"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:tasksummary</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:taskprerequisites</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:taskrelated</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w608"><span class="es">&lt;</span><span class="en">h4</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w612"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w628"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx644" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx648" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h4</span><span id="wx652" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx656" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w658"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:procedure</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w674"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w690"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w706"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx722" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx726" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx730" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w732"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w736"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:task</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w747"><span class="es">&lt;</span><span class="en">h4</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w751"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx759" class="sc">/&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">h4</span><span id="wx763" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx767" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w769"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w773"><span class="es">&lt;</span><span class="en">h3</span><span class="scx">&gt;</span><span class="txt"></span><span class="ww" id="w777"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx785" class="sc">/&gt;</span></span><span class="txt"></span><span class="ez">&lt;/</span><span class="cl">h3</span><span id="wx789" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx793" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx797" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx801" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w803"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:step</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w819"><span class="es">&lt;</span><span class="en">h4</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w823"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w839"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx855" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx859" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h4</span><span id="wx863" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx867" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w869"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:tip</span><span class="op" start="7">|</span><span class="qname" start="8" select="quick">db:note</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:important</span><span class="op" start="28">|</span><span class="qname" start="29" select="quick">db:warning</span><span class="op" start="39">|</span><span class="qname" start="40" select="quick">db:caution</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w893"><span class="es">&lt;</span><span class="en">h3</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w897"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w913"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx929" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx933" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">h3</span><span id="wx937" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx941" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w943"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sidebar</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="z">&lt;!--</span><span class="cm"> Oooh, this seems like a bit of a hack! </span><span class="z">--&gt;</span><span class="txt">
  </span><span class="ww" id="w963"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?parent">parent</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w979"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">parent::</span><span class="qname" start="9" select="quick">*</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span id="wx994" class="sc">/&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx998" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1000"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1016"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1032"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx1048" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1052" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1056" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1058"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1062"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-matches" class="solar"><span class="function" start="1" pair-end="45" select="quick">matches</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="9" pair-end="30" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="20" select="quick">$parent</span><span class="filter" start="27" pair-end="29" select="quick">[</span><span class="numeric" start="28">1</span><span class="filter" start="29">]</span><span class="parenthesis" start="30">)</span><span class="op" start="31">,</span><span class="whitespace" start="32"> </span><span class="op">'</span><span class="literal" start="33">^h[12345]$</span><span class="op">'</span><span class="parenthesis" start="45">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1086"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?plevel">plevel</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="49" select="quick">xs:integer</span><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring" class="solar"><span class="function" start="12" pair-end="48" select="quick">substring</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="22" pair-end="43" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="variable" start="33" select="quick">$parent</span><span class="filter" start="40" pair-end="42" select="quick">[</span><span class="numeric" start="41">1</span><span class="filter" start="42">]</span><span class="parenthesis" start="43">)</span><span class="op" start="44">,</span><span class="numeric" start="45">2</span><span class="op" start="46">,</span><span class="numeric" start="47">1</span><span class="parenthesis" start="48">)</span><span class="parenthesis" start="49">)</span><span class="z">"</span><span id="wx1116" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1118"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?level">level</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$plevel</span><span class="whitespace" start="8"> </span><span class="op" start="9">+</span><span class="whitespace" start="10"> </span><span class="numeric" start="11">1</span><span class="z">"</span><span id="wx1136" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1138"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$level</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1157"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx1165" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx1169" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1173" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ww" id="w1175"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1179"><span class="es">&lt;</span><span class="en">div</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1189"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx1197" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="cl">div</span><span id="wx1201" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1205" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1209" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1213" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1215"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:annotation</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1231"><span class="es">&lt;</span><span class="en">div</span><span class="z"> </span><span class="atn">class</span><span class="atneq">=</span><span class="z">"</span><span class="av">title</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1241"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1257"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx1273" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1277" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="cl">div</span><span id="wx1281" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1285" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1287"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1303"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:section</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx1321" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1323"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">4</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">3</span><span class="z">"</span><span id="wx1355" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1357"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">3</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1378"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1394"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx1410" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1414" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx1418" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1422" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1424"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect1</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:sect2</span><span class="op" start="18">|</span><span class="qname" start="19" select="quick">db:sect3</span><span class="op" start="27">|</span><span class="qname" start="28" select="quick">db:sect4</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:sect5</span><span class="op" start="45">|</span><span class="qname" start="46" select="quick">db:sect6</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

  </span><span class="ww" id="w1450"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="50" select="quick">xs:decimal</span><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="12" pair-end="49" select="quick">substring-after</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="28" pair-end="40" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="39">.</span><span class="parenthesis" start="40">)</span><span class="op" start="41">,</span><span class="whitespace" start="42"> </span><span class="op">'</span><span class="literal" start="43">sect</span><span class="op">'</span><span class="parenthesis" start="49">)</span><span class="parenthesis" start="50">)</span><span class="whitespace" start="51"> </span><span class="op" start="52">-</span><span class="whitespace" start="53"> </span><span class="numeric" start="54">1</span><span class="z">"</span><span id="wx1482" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1484"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">5</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">4</span><span class="z">"</span><span id="wx1516" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1518"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">2</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1539"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1555"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx1571" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1575" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx1579" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1583" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1585"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:simplesect</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1601"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:decimal</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1617"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1621"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect5</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">5</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1634" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1636"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect4</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1649" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1651"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1664" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1666"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1679" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1681"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1694" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1696"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:section</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w1707"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:section</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx1719" class="sc">/&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx1723" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ww" id="w1725"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">6</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx1731" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx1735" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx1739" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1741"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">5</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">4</span><span class="z">"</span><span id="wx1773" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1775"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">2</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1796"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1812"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx1828" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1832" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx1836" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1840" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1842"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refsection</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w1858"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="30" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:refsection</span><span class="parenthesis" start="30">)</span><span class="z">"</span><span id="wx1876" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1878"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">4</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">3</span><span class="z">"</span><span id="wx1910" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w1912"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">3</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w1933"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w1949"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx1965" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx1969" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx1973" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx1977" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w1979"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refsect1</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:refsect2</span><span class="op" start="24">|</span><span class="qname" start="25" select="quick">db:refsect3</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">

  </span><span class="ww" id="w1999"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="50" select="quick">xs:decimal</span><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="12" pair-end="49" select="quick">substring-after</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="28" pair-end="40" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="39">.</span><span class="parenthesis" start="40">)</span><span class="op" start="41">,</span><span class="whitespace" start="42"> </span><span class="op">'</span><span class="literal" start="43">sect</span><span class="op">'</span><span class="parenthesis" start="49">)</span><span class="parenthesis" start="50">)</span><span class="whitespace" start="51"> </span><span class="op" start="52">-</span><span class="whitespace" start="53"> </span><span class="numeric" start="54">1</span><span class="z">"</span><span id="wx2031" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2033"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
              		</span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">5</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">4</span><span class="z">"</span><span id="wx2065" class="sc">/&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2067"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">2</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2088"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:title-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2104"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2120" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2124" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2128" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2132" class="ec">&gt;</span></span><span class="txt">

</span><span class="z">&lt;!--</span><span class="cm"> ============================================================ </span><span class="z">--&gt;</span><span class="txt">

</span><span class="ww" id="w2138"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:set</span><span class="op" start="7">|</span><span class="qname" start="8" select="quick">db:book</span><span class="op" start="15">|</span><span class="qname" start="16" select="quick">db:part</span><span class="op" start="23">|</span><span class="qname" start="24" select="quick">db:reference</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:setindex</span><span class="z">"</span><span class="z">
                            </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2162"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2178"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2194"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2210" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2214" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2218" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2220"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2236"><span class="es">&lt;</span><span class="en">h2</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2240"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx2248" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">h2</span><span id="wx2252" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2256" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2260" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2262"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:dedication</span><span class="op" start="14">|</span><span class="qname" start="15" select="quick">db:preface</span><span class="op" start="25">|</span><span class="qname" start="26" select="quick">db:chapter</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:appendix</span><span class="whitespace" start="48">
                     </span><span class="qname" start="49" select="quick">	</span><span class="qname" start="50" select="quick">	</span><span class="whitespace" start="51">     </span><span class="op" start="56">|</span><span class="qname" start="57" select="quick">db:colophon</span><span class="op" start="68">|</span><span class="qname" start="69" select="quick">db:article</span><span class="op" start="79">|</span><span class="qname" start="80" select="quick">db:glossary</span><span class="op" start="91">|</span><span class="qname" start="92" select="quick">db:index</span><span class="whitespace" start="100">
                                          </span><span class="op" start="122">|</span><span class="qname" start="123" select="quick">db:bibliography</span><span class="z">"</span><span class="z">
                            </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2299"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2315"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2331"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2347" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2351" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2355" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2357"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2373"><span class="es">&lt;</span><span class="en">h3</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2377"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx2385" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">h3</span><span id="wx2389" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2393" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2397" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2399"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:bibliodiv</span><span class="op" start="13">|</span><span class="qname" start="14" select="quick">db:glossdiv</span><span class="op" start="25">|</span><span class="qname" start="26" select="quick">db:indexdiv</span><span class="z">"</span><span class="z">
                            </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2419"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2435"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2451"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2467" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2471" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2475" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ww" id="w2477"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2493"><span class="es">&lt;</span><span class="en">h4</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2497"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx2505" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="cl">h4</span><span id="wx2509" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2513" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2517" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2519"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:section</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2535"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2551"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2567"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2583" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2587" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2591" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2593"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2609"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:section</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx2627" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w2629"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">3</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">2</span><span class="z">"</span><span id="wx2661" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w2663"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">4</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2684"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx2692" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2696" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2700" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2704" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2706"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:sect1</span><span class="op" start="9">|</span><span class="qname" start="10" select="quick">db:sect2</span><span class="op" start="18">|</span><span class="qname" start="19" select="quick">db:sect3</span><span class="op" start="27">|</span><span class="qname" start="28" select="quick">db:sect4</span><span class="op" start="36">|</span><span class="qname" start="37" select="quick">db:sect5</span><span class="op" start="45">|</span><span class="qname" start="46" select="quick">db:sect6</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2732"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2748"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2764"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2780" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2784" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2788" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2790"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2806"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="50" select="quick">xs:decimal</span><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="12" pair-end="49" select="quick">substring-after</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="28" pair-end="40" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="39">.</span><span class="parenthesis" start="40">)</span><span class="op" start="41">,</span><span class="whitespace" start="42"> </span><span class="op">'</span><span class="literal" start="43">sect</span><span class="op">'</span><span class="parenthesis" start="49">)</span><span class="parenthesis" start="50">)</span><span class="whitespace" start="51"> </span><span class="op" start="52">-</span><span class="whitespace" start="53"> </span><span class="numeric" start="54">1</span><span class="z">"</span><span id="wx2838" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w2840"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">4</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">3</span><span class="z">"</span><span id="wx2872" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w2874"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">2</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2895"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx2903" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx2907" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx2911" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx2915" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w2917"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:simplesect</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w2933"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w2949"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w2965"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx2981" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx2985" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx2989" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w2991"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3007"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">xs:decimal</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3023"><span class="es">&lt;</span><span class="enxsl">xsl:choose</span><span class="scx">&gt;</span><span class="txt">
        </span><span class="ww" id="w3027"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect5</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">5</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3040" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3042"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect4</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">4</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3055" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3057"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect3</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">3</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3070" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3072"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect2</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">2</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3085" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3087"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:sect1</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">1</span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3100" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3102"><span class="es">&lt;</span><span class="enxsl">xsl:when</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><span class="axis" start="1">ancestor::</span><span class="qname" start="11" select="quick">db:section</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
          </span><span class="ww" id="w3113"><span class="es">&lt;</span><span class="enxsl">xsl:value-of</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="27" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:section</span><span class="parenthesis" start="27">)</span><span class="z">"</span><span id="wx3125" class="sc">/&gt;</span></span><span class="txt">
        </span><span class="ez">&lt;/</span><span class="clxsl">xsl:when</span><span id="wx3129" class="ec">&gt;</span></span><span class="txt">
        </span><span class="ww" id="w3131"><span class="es">&lt;</span><span class="enxsl">xsl:otherwise</span><span class="scx">&gt;</span><span class="txt">6</span><span class="ez">&lt;/</span><span class="clxsl">xsl:otherwise</span><span id="wx3137" class="ec">&gt;</span></span><span class="txt">
      </span><span class="ez">&lt;/</span><span class="clxsl">xsl:choose</span><span id="wx3141" class="ec">&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3145" class="ec">&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3147"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">4</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">3</span><span class="z">"</span><span id="wx3179" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3181"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">3</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3202"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx3210" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx3214" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3218" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3222" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3224"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refsection</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3240"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3256"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3272"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx3288" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx3292" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3296" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3298"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3314"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-count" class="solar"><span class="function" start="1" pair-end="30" select="quick">count</span></a><span class="parenthesis">(</span><span class="axis" start="7">ancestor::</span><span class="qname" start="17" select="quick">db:refsection</span><span class="parenthesis" start="30">)</span><span class="z">"</span><span id="wx3332" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3334"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">4</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">3</span><span class="z">"</span><span id="wx3366" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3368"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">3</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3389"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx3397" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx3401" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3405" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3409" class="ec">&gt;</span></span><span class="txt">

</span><span class="ww" id="w3411"><span class="es">&lt;</span><span class="enxsl">xsl:template</span><span class="z"> </span><span class="atn">match</span><span class="atneq">=</span><span class="z">"</span><span class="qname" start="1" select="quick">db:refsect1</span><span class="op" start="12">|</span><span class="qname" start="13" select="quick">db:refsect2</span><span class="op" start="24">|</span><span class="qname" start="25" select="quick">db:refsect3</span><span class="z">"</span><span class="z">
              	      </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-markup</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
  </span><span class="ww" id="w3431"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?content">content</span><span class="z">"</span><span class="z"> </span><span class="atn">as</span><span class="atneq">=</span><span class="z">"</span><span class="av">node()*</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3447"><span class="es">&lt;</span><span class="enxsl">xsl:apply-templates</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="context" start="1">.</span><span class="z">"</span><span class="z"> </span><span class="atn">mode</span><span class="atneq">=</span><span class="z">"</span><span class="av">m:subtitle-content</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3463"><span class="es">&lt;</span><span class="enxsl">xsl:with-param</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">allow-anchors</span><span class="z">"</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-true" class="solar"><span class="function" start="1" pair-end="6" select="quick">true</span></a><span class="parenthesis">(</span><span class="parenthesis" start="6">)</span><span class="z">"</span><span id="wx3479" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:apply-templates</span><span id="wx3483" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:variable</span><span id="wx3487" class="ec">&gt;</span></span><span class="txt">

  </span><span class="ww" id="w3489"><span class="es">&lt;</span><span class="enxsl">xsl:if</span><span class="z"> </span><span class="atn">test</span><span class="atneq">=</span><span class="z">"</span><a href="http://www.w3.org/TR/xpath-functions/#func-not" class="solar"><span class="function" start="1" pair-end="20" select="quick">not</span></a><span class="parenthesis">(</span><span class="type" start="5">empty</span><span class="parenthesis">(</span><span class="variable" start="11" select="quick">$content</span><span class="parenthesis" start="19">)</span><span class="parenthesis" start="20">)</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
    </span><span class="ww" id="w3505"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?depth">depth</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="function" start="1" pair-end="50" select="quick">xs:decimal</span><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-substring-after" class="solar"><span class="function" start="12" pair-end="49" select="quick">substring-after</span></a><span class="parenthesis">(</span><a href="http://www.w3.org/TR/xpath-functions/#func-local-name" class="solar"><span class="function" start="28" pair-end="40" select="quick">local-name</span></a><span class="parenthesis">(</span><span class="context" start="39">.</span><span class="parenthesis" start="40">)</span><span class="op" start="41">,</span><span class="whitespace" start="42"> </span><span class="op">'</span><span class="literal" start="43">sect</span><span class="op">'</span><span class="parenthesis" start="49">)</span><span class="parenthesis" start="50">)</span><span class="whitespace" start="51"> </span><span class="op" start="52">-</span><span class="whitespace" start="53"> </span><span class="numeric" start="54">1</span><span class="z">"</span><span id="wx3537" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3539"><span class="es">&lt;</span><span class="enxsl">xsl:variable</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="vname" id="v?hlevel">hlevel</span><span class="z">"</span><span class="z">
                                </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="if" start="1">if</span><span class="whitespace" start="3"> </span><span class="parenthesis" start="4" pair-end="18" select="quick">(</span><span class="variable" start="5" select="quick">$depth</span><span class="whitespace" start="11"> </span><span class="qname" start="12" select="quick">&amp;</span><span class="op" start="13">lt</span><span class="qname" start="15" select="quick">;</span><span class="whitespace" start="16"> </span><span class="numeric" start="17">4</span><span class="parenthesis" start="18">)</span><span class="whitespace" start="19"> </span><span class="op" start="20">then</span><span class="whitespace" start="24"> </span><span class="variable" start="25" select="quick">$depth</span><span class="whitespace" start="31"> </span><span class="op" start="32">else</span><span class="whitespace" start="36"> </span><span class="numeric" start="37">3</span><span class="z">"</span><span id="wx3571" class="sc">/&gt;</span></span><span class="txt">

    </span><span class="ww" id="w3573"><span class="es">&lt;</span><span class="enxsl">xsl:element</span><span class="z"> </span><span class="atn">name</span><span class="atneq">=</span><span class="z">"</span><span class="av">h</span><span class="op">{</span><span class="variable" start="1" select="quick">$hlevel</span><span class="op" start="8">+</span><span class="numeric" start="9">3</span><span class="op">}</span><span class="z">"</span><span class="z"> </span><span class="atn">namespace</span><span class="atneq">=</span><span class="z">"</span><span class="av">http://www.w3.org/1999/xhtml</span><span class="z">"</span><span class="scx">&gt;</span><span class="txt">
      </span><span class="ww" id="w3594"><span class="es">&lt;</span><span class="enxsl">xsl:sequence</span><span class="z"> </span><span class="atn">select</span><span class="atneq">=</span><span class="z">"</span><span class="variable" start="1" select="quick">$content</span><span class="z">"</span><span id="wx3602" class="sc">/&gt;</span></span><span class="txt">
    </span><span class="ez">&lt;/</span><span class="clxsl">xsl:element</span><span id="wx3606" class="ec">&gt;</span></span><span class="txt">
  </span><span class="ez">&lt;/</span><span class="clxsl">xsl:if</span><span id="wx3610" class="ec">&gt;</span></span><span class="txt">
</span><span class="ez">&lt;/</span><span class="clxsl">xsl:template</span><span id="wx3614" class="ec">&gt;</span></span><span class="txt">

</span><span class="ez">&lt;/</span><span class="clxsl">xsl:stylesheet</span><span id="wx3618" class="ec">&gt;</span></span><span class="txt">
</span></p></div></body></html>